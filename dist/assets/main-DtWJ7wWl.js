var Br=Object.defineProperty;var Ur=(Te,Ce,ke)=>Ce in Te?Br(Te,Ce,{enumerable:!0,configurable:!0,writable:!0,value:ke}):Te[Ce]=ke;var be=(Te,Ce,ke)=>(Ur(Te,typeof Ce!="symbol"?Ce+"":Ce,ke),ke),Ri=(Te,Ce,ke)=>{if(!Ce.has(Te))throw TypeError("Cannot "+ke)};var t=(Te,Ce,ke)=>(Ri(Te,Ce,"read from private field"),ke?ke.call(Te):Ce.get(Te)),m=(Te,Ce,ke)=>{if(Ce.has(Te))throw TypeError("Cannot add the same private member more than once");Ce instanceof WeakSet?Ce.add(Te):Ce.set(Te,ke)},O=(Te,Ce,ke,ms)=>(Ri(Te,Ce,"write to private field"),ms?ms.call(Te,ke):Ce.set(Te,ke),ke);var Qe=(Te,Ce,ke,ms)=>({set _(Si){O(Te,Ce,Si,ke)},get _(){return t(Te,Ce,ms)}}),M=(Te,Ce,ke)=>(Ri(Te,Ce,"access private method"),ke);(async()=>{(function(){const Ot=document.createElement("link").relList;if(Ot&&Ot.supports&&Ot.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))at(h);new MutationObserver(h=>{for(const st of h)if(st.type==="childList")for(const A of st.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&at(A)}).observe(document,{childList:!0,subtree:!0});function kt(h){const st={};return h.integrity&&(st.integrity=h.integrity),h.referrerPolicy&&(st.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?st.credentials="include":h.crossOrigin==="anonymous"?st.credentials="omit":st.credentials="same-origin",st}function at(h){if(h.ep)return;h.ep=!0;const st=kt(h);fetch(h.href,st)}})(),document.querySelectorAll(".password__toggler").forEach(Ot=>Ot.addEventListener("click",Ce));function Ce(){const Ot=document.querySelector(this.dataset.target);Ot.type=Ot.type==="password"?"text":"password"}const ke=document.querySelectorAll('button[data-role="modal-open"]'),ms=document.querySelectorAll('button[data-role="modal-close"]'),Si=document.querySelectorAll(".modal"),Sr=document.querySelectorAll(".modal__dialog");ke.forEach(Ot=>Ot.addEventListener("click",Cr)),ms.forEach(Ot=>Ot.addEventListener("click",Sn)),Si.forEach(Ot=>Ot.addEventListener("click",Sn)),Sr.forEach(Ot=>Ot.addEventListener("click",Tr));function Cr(){document.querySelector(this.dataset.target).classList.add("modal__show")}function Sn(){document.querySelector(this.dataset.dismiss).classList.remove("modal__show")}function Tr(Ot){Ot.stopPropagation()}const Rr="modulepreload",kr=function(Ot){return"/"+Ot},Cn={},ts=function(Ot,kt,at){let h=Promise.resolve();if(kt&&kt.length>0){const st=document.getElementsByTagName("link"),A=document.querySelector("meta[property=csp-nonce]"),U=(A==null?void 0:A.nonce)||(A==null?void 0:A.getAttribute("nonce"));h=Promise.all(kt.map(gt=>{if(gt=kr(gt),gt in Cn)return;Cn[gt]=!0;const it=gt.endsWith(".css"),H=it?'[rel="stylesheet"]':"";if(at)for(let z=st.length-1;z>=0;z--){const G=st[z];if(G.href===gt&&(!it||G.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${gt}"]${H}`))return;const w=document.createElement("link");if(w.rel=it?"stylesheet":Rr,it||(w.as="script",w.crossOrigin=""),w.href=gt,U&&w.setAttribute("nonce",U),document.head.appendChild(w),it)return new Promise((z,G)=>{w.addEventListener("load",z),w.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${gt}`)))})}))}return h.then(()=>Ot()).catch(st=>{const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=st,window.dispatchEvent(A),!A.defaultPrevented)throw st})};var Mr={640:(Ot,kt,at)=>{var ie,jt,fs,pe,Mn,ne,Pn,X,s,i,f,k,b,v,d,c,a,o,x,l,u,E,j,_,N,Ln,J,hi,lt,ki,g,Mi,$,ht,ut,bt,Et,Dt,Bt,Pi,Ht,Kt,R,nt,Dn,vt,Li;at.d(kt,{AnnotationLayer:()=>le,FreeTextAnnotationElement:()=>_t,InkAnnotationElement:()=>Jt,StampAnnotationElement:()=>re});var h=at(266),st=at(473),A=at(780);function U(Ct){return Math.floor(Math.max(0,Math.min(1,Ct))*255).toString(16).padStart(2,"0")}function gt(Ct){return Math.max(0,Math.min(255,255*Ct))}class it{static CMYK_G([p,e,r,S]){return["G",1-Math.min(1,.3*p+.59*r+.11*e+S)]}static G_CMYK([p]){return["CMYK",0,0,0,1-p]}static G_RGB([p]){return["RGB",p,p,p]}static G_rgb([p]){return p=gt(p),[p,p,p]}static G_HTML([p]){const e=U(p);return`#${e}${e}${e}`}static RGB_G([p,e,r]){return["G",.3*p+.59*e+.11*r]}static RGB_rgb(p){return p.map(gt)}static RGB_HTML(p){return`#${p.map(U).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([p,e,r,S]){return["RGB",1-Math.min(1,p+S),1-Math.min(1,r+S),1-Math.min(1,e+S)]}static CMYK_rgb([p,e,r,S]){return[gt(1-Math.min(1,p+S)),gt(1-Math.min(1,r+S)),gt(1-Math.min(1,e+S))]}static CMYK_HTML(p){const e=this.CMYK_RGB(p).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([p,e,r]){const S=1-p,F=1-e,tt=1-r,rt=Math.min(S,F,tt);return["CMYK",S,F,tt,rt]}}var H=at(160);const w=1e3,z=9,G=new WeakSet;function D(Ct){return{width:Ct[2]-Ct[0],height:Ct[3]-Ct[1]}}class ot{static create(p){switch(p.data.annotationType){case h.AnnotationType.LINK:return new q(p);case h.AnnotationType.TEXT:return new B(p);case h.AnnotationType.WIDGET:switch(p.data.fieldType){case"Tx":return new V(p);case"Btn":return p.data.radioButton?new C(p):p.data.checkBox?new Q(p):new Y(p);case"Ch":return new ft(p);case"Sig":return new P(p)}return new W(p);case h.AnnotationType.POPUP:return new xt(p);case h.AnnotationType.FREETEXT:return new _t(p);case h.AnnotationType.LINE:return new Lt(p);case h.AnnotationType.SQUARE:return new Gt(p);case h.AnnotationType.CIRCLE:return new Nt(p);case h.AnnotationType.POLYLINE:return new Vt(p);case h.AnnotationType.CARET:return new ve(p);case h.AnnotationType.INK:return new Jt(p);case h.AnnotationType.POLYGON:return new Xt(p);case h.AnnotationType.HIGHLIGHT:return new fe(p);case h.AnnotationType.UNDERLINE:return new oe(p);case h.AnnotationType.SQUIGGLY:return new te(p);case h.AnnotationType.STRIKEOUT:return new Yt(p);case h.AnnotationType.STAMP:return new re(p);case h.AnnotationType.FILEATTACHMENT:return new Wt(p);default:return new T(p)}}}const he=class he{constructor(p,{isRenderable:e=!1,ignoreBorder:r=!1,createQuadrilaterals:S=!1}={}){m(this,ie,!1);this.isRenderable=e,this.data=p.data,this.layer=p.layer,this.linkService=p.linkService,this.downloadManager=p.downloadManager,this.imageResourcesPath=p.imageResourcesPath,this.renderForms=p.renderForms,this.svgFactory=p.svgFactory,this.annotationStorage=p.annotationStorage,this.enableScripting=p.enableScripting,this.hasJSActions=p.hasJSActions,this._fieldObjects=p.fieldObjects,this.parent=p.parent,e&&(this.container=this._createContainer(r)),S&&this._createQuadrilaterals()}static _hasPopupData({titleObj:p,contentsObj:e,richText:r}){return!!(p!=null&&p.str||e!=null&&e.str||r!=null&&r.str)}get hasPopupData(){return he._hasPopupData(this.data)}_createContainer(p){const{data:e,parent:{page:r,viewport:S}}=this,F=document.createElement("section");F.setAttribute("data-annotation-id",e.id),this instanceof W||(F.tabIndex=w),F.style.zIndex=this.parent.zIndex++,this.data.popupRef&&F.setAttribute("aria-haspopup","dialog"),e.noRotate&&F.classList.add("norotate");const{pageWidth:tt,pageHeight:rt,pageX:yt,pageY:Tt}=S.rawDims;if(!e.rect||this instanceof xt){const{rotation:Qt}=e;return!e.hasOwnCanvas&&Qt!==0&&this.setRotation(Qt,F),F}const{width:St,height:zt}=D(e.rect),It=h.Util.normalizeRect([e.rect[0],r.view[3]-e.rect[1]+r.view[1],e.rect[2],r.view[3]-e.rect[3]+r.view[1]]);if(!p&&e.borderStyle.width>0){F.style.borderWidth=`${e.borderStyle.width}px`;const Qt=e.borderStyle.horizontalCornerRadius,qt=e.borderStyle.verticalCornerRadius;if(Qt>0||qt>0){const ce=`calc(${Qt}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;F.style.borderRadius=ce}else if(this instanceof C){const ce=`calc(${St}px * var(--scale-factor)) / calc(${zt}px * var(--scale-factor))`;F.style.borderRadius=ce}switch(e.borderStyle.style){case h.AnnotationBorderStyleType.SOLID:F.style.borderStyle="solid";break;case h.AnnotationBorderStyleType.DASHED:F.style.borderStyle="dashed";break;case h.AnnotationBorderStyleType.BEVELED:(0,h.warn)("Unimplemented border style: beveled");break;case h.AnnotationBorderStyleType.INSET:(0,h.warn)("Unimplemented border style: inset");break;case h.AnnotationBorderStyleType.UNDERLINE:F.style.borderBottomStyle="solid";break}const ae=e.borderColor||null;ae?(O(this,ie,!0),F.style.borderColor=h.Util.makeHexColor(ae[0]|0,ae[1]|0,ae[2]|0)):F.style.borderWidth=0}F.style.left=`${100*(It[0]-yt)/tt}%`,F.style.top=`${100*(It[1]-Tt)/rt}%`;const{rotation:Mt}=e;return e.hasOwnCanvas||Mt===0?(F.style.width=`${100*St/tt}%`,F.style.height=`${100*zt/rt}%`):this.setRotation(Mt,F),F}setRotation(p,e=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:S}=this.parent.viewport.rawDims,{width:F,height:tt}=D(this.data.rect);let rt,yt;p%180===0?(rt=100*F/r,yt=100*tt/S):(rt=100*tt/r,yt=100*F/S),e.style.width=`${rt}%`,e.style.height=`${yt}%`,e.setAttribute("data-main-rotation",(360-p)%360)}get _commonActions(){const p=(e,r,S)=>{const F=S.detail[e],tt=F[0],rt=F.slice(1);S.target.style[r]=it[`${tt}_HTML`](rt),this.annotationStorage.setValue(this.data.id,{[r]:it[`${tt}_rgb`](rt)})};return(0,h.shadow)(this,"_commonActions",{display:e=>{const{display:r}=e.detail,S=r%2===1;this.container.style.visibility=S?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:S,noPrint:r===1||r===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:r}=e.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{p("bgColor","backgroundColor",e)},fillColor:e=>{p("fillColor","backgroundColor",e)},fgColor:e=>{p("fgColor","color",e)},textColor:e=>{p("textColor","color",e)},borderColor:e=>{p("borderColor","borderColor",e)},strokeColor:e=>{p("strokeColor","borderColor",e)},rotation:e=>{const r=e.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(p,e){var S;const r=this._commonActions;for(const F of Object.keys(e.detail))(S=p[F]||r[F])==null||S(e)}_setDefaultPropertiesFromJS(p){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const r=this._commonActions;for(const[S,F]of Object.entries(e)){const tt=r[S];if(tt){const rt={detail:{[S]:F},target:p};tt(rt),delete e[S]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:p}=this.data;if(!p)return;const[e,r,S,F]=this.data.rect;if(p.length===1){const[,{x:qt,y:ae},{x:ce,y:we}]=p[0];if(S===qt&&F===ae&&e===ce&&r===we)return}const{style:tt}=this.container;let rt;if(t(this,ie)){const{borderColor:qt,borderWidth:ae}=tt;tt.borderWidth=0,rt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${qt}" stroke-width="${ae}">`],this.container.classList.add("hasBorder")}const yt=S-e,Tt=F-r,{svgFactory:St}=this,zt=St.createElement("svg");zt.classList.add("quadrilateralsContainer"),zt.setAttribute("width",0),zt.setAttribute("height",0);const It=St.createElement("defs");zt.append(It);const Mt=St.createElement("clipPath"),Qt=`clippath_${this.data.id}`;Mt.setAttribute("id",Qt),Mt.setAttribute("clipPathUnits","objectBoundingBox"),It.append(Mt);for(const[,{x:qt,y:ae},{x:ce,y:we}]of p){const Se=St.createElement("rect"),Be=(ce-e)/yt,Me=(F-ae)/Tt,Pe=(qt-ce)/yt,Fe=(ae-we)/Tt;Se.setAttribute("x",Be),Se.setAttribute("y",Me),Se.setAttribute("width",Pe),Se.setAttribute("height",Fe),Mt.append(Se),rt==null||rt.push(`<rect vector-effect="non-scaling-stroke" x="${Be}" y="${Me}" width="${Pe}" height="${Fe}"/>`)}t(this,ie)&&(rt.push("</g></svg>')"),tt.backgroundImage=rt.join("")),this.container.append(zt),this.container.style.clipPath=`url(#${Qt})`}_createPopup(){const{container:p,data:e}=this;p.setAttribute("aria-haspopup","dialog");const r=new xt({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(r.render())}render(){(0,h.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(p,e=null){const r=[];if(this._fieldObjects){const S=this._fieldObjects[p];if(S)for(const{page:F,id:tt,exportValues:rt}of S){if(F===-1||tt===e)continue;const yt=typeof rt=="string"?rt:null,Tt=document.querySelector(`[data-element-id="${tt}"]`);if(Tt&&!G.has(Tt)){(0,h.warn)(`_getElementsByName - element not allowed: ${tt}`);continue}r.push({id:tt,exportValue:yt,domElement:Tt})}return r}for(const S of document.getElementsByName(p)){const{exportValue:F}=S,tt=S.getAttribute("data-element-id");tt!==e&&G.has(S)&&r.push({id:tt,exportValue:F,domElement:S})}return r}show(){var p;this.container&&(this.container.hidden=!1),(p=this.popup)==null||p.maybeShow()}hide(){var p;this.container&&(this.container.hidden=!0),(p=this.popup)==null||p.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const p=this.getElementsToTriggerPopup();if(Array.isArray(p))for(const e of p)e.classList.add("highlightArea");else p.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:p,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:p,editId:e})})}};ie=new WeakMap;let T=he;class q extends T{constructor(e,r=null){super(e,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});m(this,jt);m(this,pe);m(this,ne);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:r}=this,S=document.createElement("a");S.setAttribute("data-element-id",e.id);let F=!1;return e.url?(r.addLinkAttributes(S,e.url,e.newWindow),F=!0):e.action?(this._bindNamedAction(S,e.action),F=!0):e.attachment?(M(this,pe,Mn).call(this,S,e.attachment,e.attachmentDest),F=!0):e.setOCGState?(M(this,ne,Pn).call(this,S,e.setOCGState),F=!0):e.dest?(this._bindLink(S,e.dest),F=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(S,e),F=!0),e.resetForm?(this._bindResetFormAction(S,e.resetForm),F=!0):this.isTooltipOnly&&!F&&(this._bindLink(S,""),F=!0)),this.container.classList.add("linkAnnotation"),F&&this.container.append(S),this.container}_bindLink(e,r){e.href=this.linkService.getDestinationHash(r),e.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&M(this,jt,fs).call(this)}_bindNamedAction(e,r){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(r),!1),M(this,jt,fs).call(this)}_bindJSAction(e,r){e.href=this.linkService.getAnchorUrl("");const S=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const F of Object.keys(r.actions)){const tt=S.get(F);tt&&(e[tt]=()=>{var rt;return(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:F}}),!1})}e.onclick||(e.onclick=()=>!1),M(this,jt,fs).call(this)}_bindResetFormAction(e,r){const S=e.onclick;if(S||(e.href=this.linkService.getAnchorUrl("")),M(this,jt,fs).call(this),!this._fieldObjects){(0,h.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),S||(e.onclick=()=>!1);return}e.onclick=()=>{var zt;S==null||S();const{fields:F,refs:tt,include:rt}=r,yt=[];if(F.length!==0||tt.length!==0){const It=new Set(tt);for(const Mt of F){const Qt=this._fieldObjects[Mt]||[];for(const{id:qt}of Qt)It.add(qt)}for(const Mt of Object.values(this._fieldObjects))for(const Qt of Mt)It.has(Qt.id)===rt&&yt.push(Qt)}else for(const It of Object.values(this._fieldObjects))yt.push(...It);const Tt=this.annotationStorage,St=[];for(const It of yt){const{id:Mt}=It;switch(St.push(Mt),It.type){case"text":{const qt=It.defaultValue||"";Tt.setValue(Mt,{value:qt});break}case"checkbox":case"radiobutton":{const qt=It.defaultValue===It.exportValues;Tt.setValue(Mt,{value:qt});break}case"combobox":case"listbox":{const qt=It.defaultValue||"";Tt.setValue(Mt,{value:qt});break}default:continue}const Qt=document.querySelector(`[data-element-id="${Mt}"]`);if(Qt){if(!G.has(Qt)){(0,h.warn)(`_bindResetFormAction - element not allowed: ${Mt}`);continue}}else continue;Qt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((zt=this.linkService.eventBus)==null||zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:St,name:"ResetForm"}})),!1}}}jt=new WeakSet,fs=function(){this.container.setAttribute("data-internal-link","")},pe=new WeakSet,Mn=function(e,r,S=null){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var F;return(F=this.downloadManager)==null||F.openOrDownloadData(r.content,r.filename,S),!1},M(this,jt,fs).call(this)},ne=new WeakSet,Pn=function(e,r){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(r),!1),M(this,jt,fs).call(this)};class B extends T{constructor(p){super(p,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const p=document.createElement("img");return p.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",p.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),p.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(p),this.container}}class W extends T{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(p){var e;this.data.hasOwnCanvas&&(((e=p.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(p.previousSibling.hidden=!0),p.hidden=!1)}_getKeyModifier(p){return h.FeatureTest.platform.isMac?p.metaKey:p.ctrlKey}_setEventListener(p,e,r,S,F){r.includes("mouse")?p.addEventListener(r,tt=>{var rt;(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:S,value:F(tt),shift:tt.shiftKey,modifier:this._getKeyModifier(tt)}})}):p.addEventListener(r,tt=>{var rt;if(r==="blur"){if(!e.focused||!tt.relatedTarget)return;e.focused=!1}else if(r==="focus"){if(e.focused)return;e.focused=!0}F&&((rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:S,value:F(tt)}}))})}_setEventListeners(p,e,r,S){var F,tt,rt;for(const[yt,Tt]of r)(Tt==="Action"||(F=this.data.actions)!=null&&F[Tt])&&((Tt==="Focus"||Tt==="Blur")&&(e||(e={focused:!1})),this._setEventListener(p,e,yt,Tt,S),Tt==="Focus"&&!((tt=this.data.actions)!=null&&tt.Blur)?this._setEventListener(p,e,"blur","Blur",null):Tt==="Blur"&&!((rt=this.data.actions)!=null&&rt.Focus)&&this._setEventListener(p,e,"focus","Focus",null))}_setBackgroundColor(p){const e=this.data.backgroundColor||null;p.style.backgroundColor=e===null?"transparent":h.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(p){const e=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,S=this.data.defaultAppearanceData.fontSize||z,F=p.style;let tt;const rt=2,yt=Tt=>Math.round(10*Tt)/10;if(this.data.multiLine){const Tt=Math.abs(this.data.rect[3]-this.data.rect[1]-rt),St=Math.round(Tt/(h.LINE_FACTOR*S))||1,zt=Tt/St;tt=Math.min(S,yt(zt/h.LINE_FACTOR))}else{const Tt=Math.abs(this.data.rect[3]-this.data.rect[1]-rt);tt=Math.min(S,yt(Tt/h.LINE_FACTOR))}F.fontSize=`calc(${tt}px * var(--scale-factor))`,F.color=h.Util.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(F.textAlign=e[this.data.textAlignment])}_setRequired(p,e){e?p.setAttribute("required",!0):p.removeAttribute("required"),p.setAttribute("aria-required",e)}}class V extends W{constructor(p){const e=p.renderForms||p.data.hasOwnCanvas||!p.data.hasAppearance&&!!p.data.fieldValue;super(p,{isRenderable:e})}setPropertyOnSiblings(p,e,r,S){const F=this.annotationStorage;for(const tt of this._getElementsByName(p.name,p.id))tt.domElement&&(tt.domElement[e]=r),F.setValue(tt.id,{[S]:r})}render(){var S,F;const p=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const tt=p.getValue(e,{value:this.data.fieldValue});let rt=tt.value||"";const yt=p.getValue(e,{charLimit:this.data.maxLen}).charLimit;yt&&rt.length>yt&&(rt=rt.slice(0,yt));let Tt=tt.formattedValue||((S=this.data.textContent)==null?void 0:S.join(`
`))||null;Tt&&this.data.comb&&(Tt=Tt.replaceAll(/\s+/g,""));const St={userValue:rt,formattedValue:Tt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=Tt??rt,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",Tt??rt),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),G.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=w,this._setRequired(r,this.data.required),yt&&(r.maxLength=yt),r.addEventListener("input",It=>{p.setValue(e,{value:It.target.value}),this.setPropertyOnSiblings(r,"value",It.target.value,"value"),St.formattedValue=null}),r.addEventListener("resetform",It=>{const Mt=this.data.defaultFieldValue??"";r.value=St.userValue=Mt,St.formattedValue=null});let zt=It=>{const{formattedValue:Mt}=St;Mt!=null&&(It.target.value=Mt),It.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",Mt=>{var qt;if(St.focused)return;const{target:Qt}=Mt;St.userValue&&(Qt.value=St.userValue),St.lastCommittedValue=Qt.value,St.commitKey=1,(qt=this.data.actions)!=null&&qt.Focus||(St.focused=!0)}),r.addEventListener("updatefromsandbox",Mt=>{this.showElementAndHideCanvas(Mt.target);const Qt={value(qt){St.userValue=qt.detail.value??"",p.setValue(e,{value:St.userValue.toString()}),qt.target.value=St.userValue},formattedValue(qt){const{formattedValue:ae}=qt.detail;St.formattedValue=ae,ae!=null&&qt.target!==document.activeElement&&(qt.target.value=ae),p.setValue(e,{formattedValue:ae})},selRange(qt){qt.target.setSelectionRange(...qt.detail.selRange)},charLimit:qt=>{var Se;const{charLimit:ae}=qt.detail,{target:ce}=qt;if(ae===0){ce.removeAttribute("maxLength");return}ce.setAttribute("maxLength",ae);let we=St.userValue;!we||we.length<=ae||(we=we.slice(0,ae),ce.value=St.userValue=we,p.setValue(e,{value:we}),(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:we,willCommit:!0,commitKey:1,selStart:ce.selectionStart,selEnd:ce.selectionEnd}}))}};this._dispatchEventFromSandbox(Qt,Mt)}),r.addEventListener("keydown",Mt=>{var ae;St.commitKey=1;let Qt=-1;if(Mt.key==="Escape"?Qt=0:Mt.key==="Enter"&&!this.data.multiLine?Qt=2:Mt.key==="Tab"&&(St.commitKey=3),Qt===-1)return;const{value:qt}=Mt.target;St.lastCommittedValue!==qt&&(St.lastCommittedValue=qt,St.userValue=qt,(ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:qt,willCommit:!0,commitKey:Qt,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}}))});const It=zt;zt=null,r.addEventListener("blur",Mt=>{var qt,ae;if(!St.focused||!Mt.relatedTarget)return;(qt=this.data.actions)!=null&&qt.Blur||(St.focused=!1);const{value:Qt}=Mt.target;St.userValue=Qt,St.lastCommittedValue!==Qt&&((ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Qt,willCommit:!0,commitKey:St.commitKey,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}})),It(Mt)}),(F=this.data.actions)!=null&&F.Keystroke&&r.addEventListener("beforeinput",Mt=>{var Me;St.lastCommittedValue=null;const{data:Qt,target:qt}=Mt,{value:ae,selectionStart:ce,selectionEnd:we}=qt;let Se=ce,Be=we;switch(Mt.inputType){case"deleteWordBackward":{const Pe=ae.substring(0,ce).match(/\w*[^\w]*$/);Pe&&(Se-=Pe[0].length);break}case"deleteWordForward":{const Pe=ae.substring(ce).match(/^[^\w]*\w*/);Pe&&(Be+=Pe[0].length);break}case"deleteContentBackward":ce===we&&(Se-=1);break;case"deleteContentForward":ce===we&&(Be+=1);break}Mt.preventDefault(),(Me=this.linkService.eventBus)==null||Me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:ae,change:Qt||"",willCommit:!1,selStart:Se,selEnd:Be}})}),this._setEventListeners(r,St,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.value)}if(zt&&r.addEventListener("blur",zt),this.data.comb){const It=(this.data.rect[2]-this.data.rect[0])/yt;r.classList.add("comb"),r.style.letterSpacing=`calc(${It}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class P extends W{constructor(p){super(p,{isRenderable:!!p.data.hasOwnCanvas})}}class Q extends W{constructor(p){super(p,{isRenderable:p.renderForms})}render(){const p=this.annotationStorage,e=this.data,r=e.id;let S=p.getValue(r,{value:e.exportValue===e.fieldValue}).value;typeof S=="string"&&(S=S!=="Off",p.setValue(r,{value:S})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const F=document.createElement("input");return G.add(F),F.setAttribute("data-element-id",r),F.disabled=e.readOnly,this._setRequired(F,this.data.required),F.type="checkbox",F.name=e.fieldName,S&&F.setAttribute("checked",!0),F.setAttribute("exportValue",e.exportValue),F.tabIndex=w,F.addEventListener("change",tt=>{const{name:rt,checked:yt}=tt.target;for(const Tt of this._getElementsByName(rt,r)){const St=yt&&Tt.exportValue===e.exportValue;Tt.domElement&&(Tt.domElement.checked=St),p.setValue(Tt.id,{value:St})}p.setValue(r,{value:yt})}),F.addEventListener("resetform",tt=>{const rt=e.defaultFieldValue||"Off";tt.target.checked=rt===e.exportValue}),this.enableScripting&&this.hasJSActions&&(F.addEventListener("updatefromsandbox",tt=>{const rt={value(yt){yt.target.checked=yt.detail.value!=="Off",p.setValue(r,{value:yt.target.checked})}};this._dispatchEventFromSandbox(rt,tt)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],tt=>tt.target.checked)),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class C extends W{constructor(p){super(p,{isRenderable:p.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const p=this.annotationStorage,e=this.data,r=e.id;let S=p.getValue(r,{value:e.fieldValue===e.buttonValue}).value;if(typeof S=="string"&&(S=S!==e.buttonValue,p.setValue(r,{value:S})),S)for(const tt of this._getElementsByName(e.fieldName,r))p.setValue(tt.id,{value:!1});const F=document.createElement("input");if(G.add(F),F.setAttribute("data-element-id",r),F.disabled=e.readOnly,this._setRequired(F,this.data.required),F.type="radio",F.name=e.fieldName,S&&F.setAttribute("checked",!0),F.tabIndex=w,F.addEventListener("change",tt=>{const{name:rt,checked:yt}=tt.target;for(const Tt of this._getElementsByName(rt,r))p.setValue(Tt.id,{value:!1});p.setValue(r,{value:yt})}),F.addEventListener("resetform",tt=>{const rt=e.defaultFieldValue;tt.target.checked=rt!=null&&rt===e.buttonValue}),this.enableScripting&&this.hasJSActions){const tt=e.buttonValue;F.addEventListener("updatefromsandbox",rt=>{const yt={value:Tt=>{const St=tt===Tt.detail.value;for(const zt of this._getElementsByName(Tt.target.name)){const It=St&&zt.id===r;zt.domElement&&(zt.domElement.checked=It),p.setValue(zt.id,{value:It})}}};this._dispatchEventFromSandbox(yt,rt)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],rt=>rt.target.checked)}return this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class Y extends q{constructor(p){super(p,{ignoreBorder:p.data.hasAppearance})}render(){const p=super.render();p.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(p.title=this.data.alternativeText);const e=p.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),p}}class ft extends W{constructor(p){super(p,{isRenderable:p.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const p=this.annotationStorage,e=this.data.id,r=p.getValue(e,{value:this.data.fieldValue}),S=document.createElement("select");G.add(S),S.setAttribute("data-element-id",e),S.disabled=this.data.readOnly,this._setRequired(S,this.data.required),S.name=this.data.fieldName,S.tabIndex=w;let F=this.data.combo&&this.data.options.length>0;this.data.combo||(S.size=this.data.options.length,this.data.multiSelect&&(S.multiple=!0)),S.addEventListener("resetform",St=>{const zt=this.data.defaultFieldValue;for(const It of S.options)It.selected=It.value===zt});for(const St of this.data.options){const zt=document.createElement("option");zt.textContent=St.displayValue,zt.value=St.exportValue,r.value.includes(St.exportValue)&&(zt.setAttribute("selected",!0),F=!1),S.append(zt)}let tt=null;if(F){const St=document.createElement("option");St.value=" ",St.setAttribute("hidden",!0),St.setAttribute("selected",!0),S.prepend(St),tt=()=>{St.remove(),S.removeEventListener("input",tt),tt=null},S.addEventListener("input",tt)}const rt=St=>{const zt=St?"value":"textContent",{options:It,multiple:Mt}=S;return Mt?Array.prototype.filter.call(It,Qt=>Qt.selected).map(Qt=>Qt[zt]):It.selectedIndex===-1?null:It[It.selectedIndex][zt]};let yt=rt(!1);const Tt=St=>{const zt=St.target.options;return Array.prototype.map.call(zt,It=>({displayValue:It.textContent,exportValue:It.value}))};return this.enableScripting&&this.hasJSActions?(S.addEventListener("updatefromsandbox",St=>{const zt={value(It){tt==null||tt();const Mt=It.detail.value,Qt=new Set(Array.isArray(Mt)?Mt:[Mt]);for(const qt of S.options)qt.selected=Qt.has(qt.value);p.setValue(e,{value:rt(!0)}),yt=rt(!1)},multipleSelection(It){S.multiple=!0},remove(It){const Mt=S.options,Qt=It.detail.remove;Mt[Qt].selected=!1,S.remove(Qt),Mt.length>0&&Array.prototype.findIndex.call(Mt,qt=>qt.selected)===-1&&(Mt[0].selected=!0),p.setValue(e,{value:rt(!0),items:Tt(It)}),yt=rt(!1)},clear(It){for(;S.length!==0;)S.remove(0);p.setValue(e,{value:null,items:[]}),yt=rt(!1)},insert(It){const{index:Mt,displayValue:Qt,exportValue:qt}=It.detail.insert,ae=S.children[Mt],ce=document.createElement("option");ce.textContent=Qt,ce.value=qt,ae?ae.before(ce):S.append(ce),p.setValue(e,{value:rt(!0),items:Tt(It)}),yt=rt(!1)},items(It){const{items:Mt}=It.detail;for(;S.length!==0;)S.remove(0);for(const Qt of Mt){const{displayValue:qt,exportValue:ae}=Qt,ce=document.createElement("option");ce.textContent=qt,ce.value=ae,S.append(ce)}S.options.length>0&&(S.options[0].selected=!0),p.setValue(e,{value:rt(!0),items:Tt(It)}),yt=rt(!1)},indices(It){const Mt=new Set(It.detail.indices);for(const Qt of It.target.options)Qt.selected=Mt.has(Qt.index);p.setValue(e,{value:rt(!0)}),yt=rt(!1)},editable(It){It.target.disabled=!It.detail.editable}};this._dispatchEventFromSandbox(zt,St)}),S.addEventListener("input",St=>{var It;const zt=rt(!0);p.setValue(e,{value:zt}),St.preventDefault(),(It=this.linkService.eventBus)==null||It.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:yt,changeEx:zt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(S,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],St=>St.target.value)):S.addEventListener("input",function(St){p.setValue(e,{value:rt(!0)})}),this.data.combo&&this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}class xt extends T{constructor(p){const{data:e,elements:r}=p;super(p,{isRenderable:T._hasPopupData(e)}),this.elements=r}render(){this.container.classList.add("popupAnnotation");const p=new dt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const r of this.elements)r.popup=p,e.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(r=>`${h.AnnotationPrefix}${r}`).join(",")),this.container}}class dt{constructor({container:p,color:e,elements:r,titleObj:S,modificationDate:F,contentsObj:tt,richText:rt,parent:yt,rect:Tt,parentRect:St,open:zt}){m(this,N);m(this,J);m(this,lt);m(this,g);m(this,X,M(this,N,Ln).bind(this));m(this,s,M(this,g,Mi).bind(this));m(this,i,M(this,lt,ki).bind(this));m(this,f,M(this,J,hi).bind(this));m(this,k,null);m(this,b,null);m(this,v,null);m(this,d,null);m(this,c,null);m(this,a,null);m(this,o,null);m(this,x,!1);m(this,l,null);m(this,u,null);m(this,E,null);m(this,j,null);m(this,_,!1);var It;O(this,b,p),O(this,j,S),O(this,v,tt),O(this,E,rt),O(this,a,yt),O(this,k,e),O(this,u,Tt),O(this,o,St),O(this,c,r),O(this,d,st.PDFDateString.toDateObject(F)),this.trigger=r.flatMap(Mt=>Mt.getElementsToTriggerPopup());for(const Mt of this.trigger)Mt.addEventListener("click",t(this,f)),Mt.addEventListener("mouseenter",t(this,i)),Mt.addEventListener("mouseleave",t(this,s)),Mt.classList.add("popupTriggerArea");for(const Mt of r)(It=Mt.container)==null||It.addEventListener("keydown",t(this,X));t(this,b).hidden=!0,zt&&M(this,J,hi).call(this)}render(){if(t(this,l))return;const{page:{view:p},viewport:{rawDims:{pageWidth:e,pageHeight:r,pageX:S,pageY:F}}}=t(this,a),tt=O(this,l,document.createElement("div"));if(tt.className="popup",t(this,k)){const we=tt.style.outlineColor=h.Util.makeHexColor(...t(this,k));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?tt.style.backgroundColor=`color-mix(in srgb, ${we} 30%, white)`:tt.style.backgroundColor=h.Util.makeHexColor(...t(this,k).map(Se=>Math.floor(.7*(255-Se)+Se)))}const rt=document.createElement("span");rt.className="header";const yt=document.createElement("h1");if(rt.append(yt),{dir:yt.dir,str:yt.textContent}=t(this,j),tt.append(rt),t(this,d)){const we=document.createElement("span");we.classList.add("popupDate"),we.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),we.setAttribute("data-l10n-args",JSON.stringify({date:t(this,d).toLocaleDateString(),time:t(this,d).toLocaleTimeString()})),rt.append(we)}const Tt=t(this,v),St=t(this,E);if(St!=null&&St.str&&(!(Tt!=null&&Tt.str)||Tt.str===St.str))H.XfaLayer.render({xfaHtml:St.html,intent:"richText",div:tt}),tt.lastChild.classList.add("richText","popupContent");else{const we=this._formatContents(Tt);tt.append(we)}let zt=!!t(this,o),It=zt?t(this,o):t(this,u);for(const we of t(this,c))if(!It||h.Util.intersect(we.data.rect,It)!==null){It=we.data.rect,zt=!0;break}const Mt=h.Util.normalizeRect([It[0],p[3]-It[1]+p[1],It[2],p[3]-It[3]+p[1]]),Qt=zt?It[2]-It[0]+5:0,qt=Mt[0]+Qt,ae=Mt[1],{style:ce}=t(this,b);ce.left=`${100*(qt-S)/e}%`,ce.top=`${100*(ae-F)/r}%`,t(this,b).append(tt)}_formatContents({str:p,dir:e}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=e;const S=p.split(/(?:\r\n?|\n)/);for(let F=0,tt=S.length;F<tt;++F){const rt=S[F];r.append(document.createTextNode(rt)),F<tt-1&&r.append(document.createElement("br"))}return r}forceHide(){O(this,_,this.isVisible),t(this,_)&&(t(this,b).hidden=!0)}maybeShow(){t(this,_)&&(O(this,_,!1),t(this,b).hidden=!1)}get isVisible(){return t(this,b).hidden===!1}}X=new WeakMap,s=new WeakMap,i=new WeakMap,f=new WeakMap,k=new WeakMap,b=new WeakMap,v=new WeakMap,d=new WeakMap,c=new WeakMap,a=new WeakMap,o=new WeakMap,x=new WeakMap,l=new WeakMap,u=new WeakMap,E=new WeakMap,j=new WeakMap,_=new WeakMap,N=new WeakSet,Ln=function(p){p.altKey||p.shiftKey||p.ctrlKey||p.metaKey||(p.key==="Enter"||p.key==="Escape"&&t(this,x))&&M(this,J,hi).call(this)},J=new WeakSet,hi=function(){O(this,x,!t(this,x)),t(this,x)?(M(this,lt,ki).call(this),t(this,b).addEventListener("click",t(this,f)),t(this,b).addEventListener("keydown",t(this,X))):(M(this,g,Mi).call(this),t(this,b).removeEventListener("click",t(this,f)),t(this,b).removeEventListener("keydown",t(this,X)))},lt=new WeakSet,ki=function(){t(this,l)||this.render(),this.isVisible?t(this,x)&&t(this,b).classList.add("focused"):(t(this,b).hidden=!1,t(this,b).style.zIndex=parseInt(t(this,b).style.zIndex)+1e3)},g=new WeakSet,Mi=function(){t(this,b).classList.remove("focused"),!(t(this,x)||!this.isVisible)&&(t(this,b).hidden=!0,t(this,b).style.zIndex=parseInt(t(this,b).style.zIndex)-1e3)};class _t extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0}),this.textContent=p.data.textContent,this.textPosition=p.data.textPosition,this.annotationEditorType=h.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const p=document.createElement("div");p.classList.add("annotationTextContent"),p.setAttribute("role","comment");for(const e of this.textContent){const r=document.createElement("span");r.textContent=e,p.append(r)}this.container.append(p)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Lt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,$,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:r,height:S}=D(e.rect),F=this.svgFactory.create(r,S,!0),tt=O(this,$,this.svgFactory.createElement("svg:line"));return tt.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),tt.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),tt.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),tt.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),tt.setAttribute("stroke-width",e.borderStyle.width||1),tt.setAttribute("stroke","transparent"),tt.setAttribute("fill","transparent"),F.append(tt),this.container.append(F),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,$)}addHighlightArea(){this.container.classList.add("highlightArea")}}$=new WeakMap;class Gt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,ht,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:r,height:S}=D(e.rect),F=this.svgFactory.create(r,S,!0),tt=e.borderStyle.width,rt=O(this,ht,this.svgFactory.createElement("svg:rect"));return rt.setAttribute("x",tt/2),rt.setAttribute("y",tt/2),rt.setAttribute("width",r-tt),rt.setAttribute("height",S-tt),rt.setAttribute("stroke-width",tt||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),F.append(rt),this.container.append(F),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ht)}addHighlightArea(){this.container.classList.add("highlightArea")}}ht=new WeakMap;class Nt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,ut,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:r,height:S}=D(e.rect),F=this.svgFactory.create(r,S,!0),tt=e.borderStyle.width,rt=O(this,ut,this.svgFactory.createElement("svg:ellipse"));return rt.setAttribute("cx",r/2),rt.setAttribute("cy",S/2),rt.setAttribute("rx",r/2-tt/2),rt.setAttribute("ry",S/2-tt/2),rt.setAttribute("stroke-width",tt||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),F.append(rt),this.container.append(F),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ut)}addHighlightArea(){this.container.classList.add("highlightArea")}}ut=new WeakMap;class Vt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,bt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:r,height:S}=D(e.rect),F=this.svgFactory.create(r,S,!0);let tt=[];for(const yt of e.vertices){const Tt=yt.x-e.rect[0],St=e.rect[3]-yt.y;tt.push(Tt+","+St)}tt=tt.join(" ");const rt=O(this,bt,this.svgFactory.createElement(this.svgElementName));return rt.setAttribute("points",tt),rt.setAttribute("stroke-width",e.borderStyle.width||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),F.append(rt),this.container.append(F),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,bt)}addHighlightArea(){this.container.classList.add("highlightArea")}}bt=new WeakMap;class Xt extends Vt{constructor(p){super(p),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ve extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Jt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,Et,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=h.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:r,height:S}=D(e.rect),F=this.svgFactory.create(r,S,!0);for(const tt of e.inkLists){let rt=[];for(const Tt of tt){const St=Tt.x-e.rect[0],zt=e.rect[3]-Tt.y;rt.push(`${St},${zt}`)}rt=rt.join(" ");const yt=this.svgFactory.createElement(this.svgElementName);t(this,Et).push(yt),yt.setAttribute("points",rt),yt.setAttribute("stroke-width",e.borderStyle.width||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),F.append(yt)}return this.container.append(F),this.container}getElementsToTriggerPopup(){return t(this,Et)}addHighlightArea(){this.container.classList.add("highlightArea")}}Et=new WeakMap;class fe extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class oe extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class te extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Yt extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class re extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Wt extends T{constructor(e){var F;super(e,{isRenderable:!0});m(this,Bt);m(this,Dt,null);const{filename:r,content:S}=this.data.file;this.filename=(0,st.getFilenameFromUrl)(r,!0),this.content=S,(F=this.linkService.eventBus)==null||F.dispatch("fileattachmentannotation",{source:this,filename:r,content:S})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:r}=this;let S;r.hasAppearance||r.fillAlpha===0?S=document.createElement("div"):(S=document.createElement("img"),S.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(S.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),S.addEventListener("dblclick",M(this,Bt,Pi).bind(this)),O(this,Dt,S);const{isMac:F}=h.FeatureTest.platform;return e.addEventListener("keydown",tt=>{tt.key==="Enter"&&(F?tt.metaKey:tt.ctrlKey)&&M(this,Bt,Pi).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():S.classList.add("popupTriggerArea"),e.append(S),e}getElementsToTriggerPopup(){return t(this,Dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dt=new WeakMap,Bt=new WeakSet,Pi=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};class le{constructor({div:p,accessibilityManager:e,annotationCanvasMap:r,page:S,viewport:F}){m(this,nt);m(this,vt);m(this,Ht,null);m(this,Kt,null);m(this,R,new Map);this.div=p,O(this,Ht,e),O(this,Kt,r),this.page=S,this.viewport=F,this.zIndex=0}async render(p){const{annotations:e}=p,r=this.div;(0,st.setLayerDimensions)(r,this.viewport);const S=new Map,F={data:null,layer:r,linkService:p.linkService,downloadManager:p.downloadManager,imageResourcesPath:p.imageResourcesPath||"",renderForms:p.renderForms!==!1,svgFactory:new st.DOMSVGFactory,annotationStorage:p.annotationStorage||new A.AnnotationStorage,enableScripting:p.enableScripting===!0,hasJSActions:p.hasJSActions,fieldObjects:p.fieldObjects,parent:this,elements:null};for(const tt of e){if(tt.noHTML)continue;const rt=tt.annotationType===h.AnnotationType.POPUP;if(rt){const St=S.get(tt.id);if(!St)continue;F.elements=St}else{const{width:St,height:zt}=D(tt.rect);if(St<=0||zt<=0)continue}F.data=tt;const yt=ot.create(F);if(!yt.isRenderable)continue;if(!rt&&tt.popupRef){const St=S.get(tt.popupRef);St?St.push(yt):S.set(tt.popupRef,[yt])}yt.annotationEditorType>0&&t(this,R).set(yt.data.id,yt);const Tt=yt.render();tt.hidden&&(Tt.style.visibility="hidden"),M(this,nt,Dn).call(this,Tt,tt.id)}M(this,vt,Li).call(this)}update({viewport:p}){const e=this.div;this.viewport=p,(0,st.setLayerDimensions)(e,{rotation:p.rotation}),M(this,vt,Li).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(t(this,R).values())}getEditableAnnotation(p){return t(this,R).get(p)}}Ht=new WeakMap,Kt=new WeakMap,R=new WeakMap,nt=new WeakSet,Dn=function(p,e){var S;const r=p.firstChild||p;r.id=`${h.AnnotationPrefix}${e}`,this.div.append(p),(S=t(this,Ht))==null||S.moveElementInDOM(this.div,p,r,!1)},vt=new WeakSet,Li=function(){if(!t(this,Kt))return;const p=this.div;for(const[e,r]of t(this,Kt)){const S=p.querySelector(`[data-annotation-id="${e}"]`);if(!S)continue;const{firstChild:F}=S;F?F.nodeName==="CANVAS"?F.replaceWith(r):F.before(r):S.append(r)}t(this,Kt).clear()}},780:(Ot,kt,at)=>{var H,w,z,In,D;at.d(kt,{AnnotationStorage:()=>gt,PrintAnnotationStorage:()=>it,SerializableEmpty:()=>U});var h=at(266),st=at(115),A=at(825);const U=Object.freeze({map:null,hash:"",transfer:void 0});class gt{constructor(){m(this,z);m(this,H,!1);m(this,w,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(T,q){const B=t(this,w).get(T);return B===void 0?q:Object.assign(q,B)}getRawValue(T){return t(this,w).get(T)}remove(T){if(t(this,w).delete(T),t(this,w).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const q of t(this,w).values())if(q instanceof st.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(T,q){const B=t(this,w).get(T);let W=!1;if(B!==void 0)for(const[V,P]of Object.entries(q))B[V]!==P&&(W=!0,B[V]=P);else W=!0,t(this,w).set(T,q);W&&M(this,z,In).call(this),q instanceof st.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(q.constructor._type)}has(T){return t(this,w).has(T)}getAll(){return t(this,w).size>0?(0,h.objectFromMap)(t(this,w)):null}setAll(T){for(const[q,B]of Object.entries(T))this.setValue(q,B)}get size(){return t(this,w).size}resetModified(){t(this,H)&&(O(this,H,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new it(this)}get serializable(){if(t(this,w).size===0)return U;const T=new Map,q=new A.MurmurHash3_64,B=[],W=Object.create(null);let V=!1;for(const[P,Q]of t(this,w)){const C=Q instanceof st.AnnotationEditor?Q.serialize(!1,W):Q;C&&(T.set(P,C),q.update(`${P}:${JSON.stringify(C)}`),V||(V=!!C.bitmap))}if(V)for(const P of T.values())P.bitmap&&B.push(P.bitmap);return T.size>0?{map:T,hash:q.hexdigest(),transfer:B}:U}}H=new WeakMap,w=new WeakMap,z=new WeakSet,In=function(){t(this,H)||(O(this,H,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class it extends gt{constructor(q){super();m(this,D,void 0);const{map:B,hash:W,transfer:V}=q.serializable,P=structuredClone(B,V?{transfer:V}:null);O(this,D,{map:P,hash:W,transfer:V})}get print(){(0,h.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,D)}}D=new WeakMap},406:(Ot,kt,at)=>{at.a(Ot,async(h,st)=>{var Q,C,Y,ft,xs,dt,li,Lt,Gt,Nt,Vt,Xt,ci,Jt,fe,oe,te,Yt,di,Wt,le,Di,he,jt;try{let me=function(I){if(typeof I=="string"||I instanceof URL?I={url:I}:(0,A.isArrayBuffer)(I)&&(I={data:I}),typeof I!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!I.url&&!I.data&&!I.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const g=new v,{docId:L}=g,$=I.url?pe(I.url):null,ht=I.data?Zt(I.data):null,ut=I.httpHeaders||null,bt=I.withCredentials===!0,Et=I.password??null,Dt=I.range instanceof d?I.range:null,Bt=Number.isInteger(I.rangeChunkSize)&&I.rangeChunkSize>0?I.rangeChunkSize:ne;let ee=I.worker instanceof l?I.worker:null;const Ht=I.verbosity,Kt=typeof I.docBaseUrl=="string"&&!(0,gt.isDataScheme)(I.docBaseUrl)?I.docBaseUrl:null,R=typeof I.cMapUrl=="string"?I.cMapUrl:null,nt=I.cMapPacked!==!1,At=I.CMapReaderFactory||i,vt=typeof I.standardFontDataUrl=="string"?I.standardFontDataUrl:null,Pt=I.StandardFontDataFactory||k,Ct=I.stopAtErrors!==!0,p=Number.isInteger(I.maxImageSize)&&I.maxImageSize>-1?I.maxImageSize:-1,e=I.isEvalSupported!==!1,r=typeof I.isOffscreenCanvasSupported=="boolean"?I.isOffscreenCanvasSupported:!A.isNodeJS,S=Number.isInteger(I.canvasMaxAreaInBytes)?I.canvasMaxAreaInBytes:-1,F=typeof I.disableFontFace=="boolean"?I.disableFontFace:A.isNodeJS,tt=I.fontExtraProperties===!0,rt=I.enableXfa===!0,yt=I.ownerDocument||globalThis.document,Tt=I.disableRange===!0,St=I.disableStream===!0,zt=I.disableAutoFetch===!0,It=I.pdfBug===!0,Mt=Dt?Dt.length:I.length??NaN,Qt=typeof I.useSystemFonts=="boolean"?I.useSystemFonts:!A.isNodeJS&&!F,qt=typeof I.useWorkerFetch=="boolean"?I.useWorkerFetch:At===gt.DOMCMapReaderFactory&&Pt===gt.DOMStandardFontDataFactory&&R&&vt&&(0,gt.isValidFetchUrl)(R,document.baseURI)&&(0,gt.isValidFetchUrl)(vt,document.baseURI),ae=I.canvasFactory||new s({ownerDocument:yt}),ce=I.filterFactory||new f({docId:L,ownerDocument:yt}),we=null;(0,A.setVerbosityLevel)(Ht);const Se={canvasFactory:ae,filterFactory:ce};if(qt||(Se.cMapReaderFactory=new At({baseUrl:R,isCompressed:nt}),Se.standardFontDataFactory=new Pt({baseUrl:vt})),!ee){const Pe={verbosity:Ht,port:z.GlobalWorkerOptions.workerPort};ee=Pe.port?l.fromPort(Pe):new l(Pe),g._worker=ee}const Be={docId:L,apiVersion:"4.0.379",data:ht,password:Et,disableAutoFetch:zt,rangeChunkSize:Bt,length:Mt,docBaseUrl:Kt,enableXfa:rt,evaluatorOptions:{maxImageSize:p,disableFontFace:F,ignoreErrors:Ct,isEvalSupported:e,isOffscreenCanvasSupported:r,canvasMaxAreaInBytes:S,fontExtraProperties:tt,useSystemFonts:Qt,cMapUrl:qt?R:null,standardFontDataUrl:qt?vt:null}},Me={ignoreErrors:Ct,isEvalSupported:e,disableFontFace:F,fontExtraProperties:tt,enableXfa:rt,ownerDocument:yt,disableAutoFetch:zt,pdfBug:It,styleElement:we};return ee.promise.then(function(){if(g.destroyed)throw new Error("Loading aborted");const Pe=b(ee,Be),Fe=new Promise(function(hs){let Oe;Dt?Oe=new T.PDFDataTransportStream({length:Mt,initialData:Dt.initialData,progressiveDone:Dt.progressiveDone,contentDispositionFilename:Dt.contentDispositionFilename,disableRange:Tt,disableStream:St},Dt):ht||(Oe=(Ge=>A.isNodeJS?new W.PDFNodeStream(Ge):(0,gt.isValidFetchUrl)(Ge.url)?new q.PDFFetchStream(Ge):new B.PDFNetworkStream(Ge))({url:$,length:Mt,httpHeaders:ut,withCredentials:bt,rangeChunkSize:Bt,disableRange:Tt,disableStream:St})),hs(Oe)});return Promise.all([Pe,Fe]).then(function([hs,Oe]){if(g.destroyed)throw new Error("Loading aborted");const Ge=new G.MessageHandler(L,hs,ee.port),ue=new u(Ge,g,Oe,Me,Se);g._transport=ue,Ge.send("Ready",null)})}).catch(g._capability.reject),g},pe=function(I){if(I instanceof URL)return I.href;try{return new URL(I,window.location).href}catch{if(A.isNodeJS&&typeof I=="string")return I}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},Zt=function(I){if(A.isNodeJS&&typeof Buffer<"u"&&I instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(I instanceof Uint8Array&&I.byteLength===I.buffer.byteLength)return I;if(typeof I=="string")return(0,A.stringToBytes)(I);if(typeof I=="object"&&!isNaN(I==null?void 0:I.length)||(0,A.isArrayBuffer)(I))return new Uint8Array(I);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};at.d(kt,{PDFDataRangeTransport:()=>d,PDFWorker:()=>l,build:()=>Z,getDocument:()=>me,version:()=>N});var A=at(266),U=at(780),gt=at(473),it=at(742),H=at(738),w=at(250),z=at(368),G=at(694),D=at(472),ot=at(890),T=at(92),q=at(171),B=at(474),W=at(498),V=at(521),P=h([H,W]);[H,W]=P.then?(await P)():P;const ne=65536,ye=100,X=5e3,s=A.isNodeJS?H.NodeCanvasFactory:gt.DOMCanvasFactory,i=A.isNodeJS?H.NodeCMapReaderFactory:gt.DOMCMapReaderFactory,f=A.isNodeJS?H.NodeFilterFactory:gt.DOMFilterFactory,k=A.isNodeJS?H.NodeStandardFontDataFactory:gt.DOMStandardFontDataFactory;async function b(I,g){if(I.destroyed)throw new Error("Worker was destroyed");const L=await I.messageHandler.sendWithPromise("GetDocRequest",g,g.data?[g.data.buffer]:null);if(I.destroyed)throw new Error("Worker was destroyed");return L}const J=class J{constructor(){this._capability=new A.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Qe(J,Q)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var g,L,$;this.destroyed=!0;try{(g=this._worker)!=null&&g.port&&(this._worker._pendingDestroy=!0),await((L=this._transport)==null?void 0:L.destroy())}catch(ht){throw($=this._worker)!=null&&$.port&&delete this._worker._pendingDestroy,ht}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Q=new WeakMap,m(J,Q,0);let v=J;class d{constructor(g,L,$=!1,ht=null){this.length=g,this.initialData=L,this.progressiveDone=$,this.contentDispositionFilename=ht,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new A.PromiseCapability}addRangeListener(g){this._rangeListeners.push(g)}addProgressListener(g){this._progressListeners.push(g)}addProgressiveReadListener(g){this._progressiveReadListeners.push(g)}addProgressiveDoneListener(g){this._progressiveDoneListeners.push(g)}onDataRange(g,L){for(const $ of this._rangeListeners)$(g,L)}onDataProgress(g,L){this._readyCapability.promise.then(()=>{for(const $ of this._progressListeners)$(g,L)})}onDataProgressiveRead(g){this._readyCapability.promise.then(()=>{for(const L of this._progressiveReadListeners)L(g)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const g of this._progressiveDoneListeners)g()})}transportReady(){this._readyCapability.resolve()}requestDataRange(g,L){(0,A.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class c{constructor(g,L){this._pdfInfo=g,this._transport=L}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(g){return this._transport.getPage(g)}getPageIndex(g){return this._transport.getPageIndex(g)}getDestinations(){return this._transport.getDestinations()}getDestination(g){return this._transport.getDestination(g)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(g=!1){return this._transport.startCleanup(g||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class a{constructor(g,L,$,ht=!1){m(this,ft);m(this,dt);m(this,C,null);m(this,Y,!1);this._pageIndex=g,this._pageInfo=L,this._transport=$,this._stats=ht?new gt.StatTimer:null,this._pdfBug=ht,this.commonObjs=$.commonObjs,this.objs=new E,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:g,rotation:L=this.rotate,offsetX:$=0,offsetY:ht=0,dontFlip:ut=!1}={}){return new gt.PageViewport({viewBox:this.view,scale:g,rotation:L,offsetX:$,offsetY:ht,dontFlip:ut})}getAnnotations({intent:g="display"}={}){const L=this._transport.getRenderingIntent(g);return this._transport.getAnnotations(this._pageIndex,L.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var g;return((g=this._transport._htmlForXfa)==null?void 0:g.children[this._pageIndex])||null}render({canvasContext:g,viewport:L,intent:$="display",annotationMode:ht=A.AnnotationMode.ENABLE,transform:ut=null,background:bt=null,optionalContentConfigPromise:Et=null,annotationCanvasMap:Dt=null,pageColors:Bt=null,printAnnotationStorage:ee=null}){var Pt,Ct;(Pt=this._stats)==null||Pt.time("Overall");const Ht=this._transport.getRenderingIntent($,ht,ee);O(this,Y,!1),M(this,dt,li).call(this),Et||(Et=this._transport.getOptionalContentConfig());let Kt=this._intentStates.get(Ht.cacheKey);Kt||(Kt=Object.create(null),this._intentStates.set(Ht.cacheKey,Kt)),Kt.streamReaderCancelTimeout&&(clearTimeout(Kt.streamReaderCancelTimeout),Kt.streamReaderCancelTimeout=null);const R=!!(Ht.renderingIntent&A.RenderingIntentFlag.PRINT);Kt.displayReadyCapability||(Kt.displayReadyCapability=new A.PromiseCapability,Kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ct=this._stats)==null||Ct.time("Page Request"),this._pumpOperatorList(Ht));const nt=p=>{var e,r;Kt.renderTasks.delete(At),(this._maybeCleanupAfterRender||R)&&O(this,Y,!0),M(this,ft,xs).call(this,!R),p?(At.capability.reject(p),this._abortOperatorList({intentState:Kt,reason:p instanceof Error?p:new Error(p)})):At.capability.resolve(),(e=this._stats)==null||e.timeEnd("Rendering"),(r=this._stats)==null||r.timeEnd("Overall")},At=new _({callback:nt,params:{canvasContext:g,viewport:L,transform:ut,background:bt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Dt,operatorList:Kt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:Bt});(Kt.renderTasks||(Kt.renderTasks=new Set)).add(At);const vt=At.task;return Promise.all([Kt.displayReadyCapability.promise,Et]).then(([p,e])=>{var r;if(this.destroyed){nt();return}(r=this._stats)==null||r.time("Rendering"),At.initializeGraphics({transparency:p,optionalContentConfig:e}),At.operatorListChanged()}).catch(nt),vt}getOperatorList({intent:g="display",annotationMode:L=A.AnnotationMode.ENABLE,printAnnotationStorage:$=null}={}){var Dt;function ht(){bt.operatorList.lastChunk&&(bt.opListReadCapability.resolve(bt.operatorList),bt.renderTasks.delete(Et))}const ut=this._transport.getRenderingIntent(g,L,$,!0);let bt=this._intentStates.get(ut.cacheKey);bt||(bt=Object.create(null),this._intentStates.set(ut.cacheKey,bt));let Et;return bt.opListReadCapability||(Et=Object.create(null),Et.operatorListChanged=ht,bt.opListReadCapability=new A.PromiseCapability,(bt.renderTasks||(bt.renderTasks=new Set)).add(Et),bt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Dt=this._stats)==null||Dt.time("Page Request"),this._pumpOperatorList(ut)),bt.opListReadCapability.promise}streamTextContent({includeMarkedContent:g=!1,disableNormalization:L=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:g===!0,disableNormalization:L===!0},{highWaterMark:100,size($){return $.items.length}})}getTextContent(g={}){if(this._transport._htmlForXfa)return this.getXfa().then($=>V.XfaText.textContent($));const L=this.streamTextContent(g);return new Promise(function($,ht){function ut(){bt.read().then(function({value:Dt,done:Bt}){if(Bt){$(Et);return}Object.assign(Et.styles,Dt.styles),Et.items.push(...Dt.items),ut()},ht)}const bt=L.getReader(),Et={items:[],styles:Object.create(null)};ut()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const g=[];for(const L of this._intentStates.values())if(this._abortOperatorList({intentState:L,reason:new Error("Page was destroyed."),force:!0}),!L.opListReadCapability)for(const $ of L.renderTasks)g.push($.completed),$.cancel();return this.objs.clear(),O(this,Y,!1),M(this,dt,li).call(this),Promise.all(g)}cleanup(g=!1){O(this,Y,!0);const L=M(this,ft,xs).call(this,!1);return g&&L&&this._stats&&(this._stats=new gt.StatTimer),L}_startRenderPage(g,L){var ht,ut;const $=this._intentStates.get(L);$&&((ht=this._stats)==null||ht.timeEnd("Page Request"),(ut=$.displayReadyCapability)==null||ut.resolve(g))}_renderPageChunk(g,L){for(let $=0,ht=g.length;$<ht;$++)L.operatorList.fnArray.push(g.fnArray[$]),L.operatorList.argsArray.push(g.argsArray[$]);L.operatorList.lastChunk=g.lastChunk,L.operatorList.separateAnnots=g.separateAnnots;for(const $ of L.renderTasks)$.operatorListChanged();g.lastChunk&&M(this,ft,xs).call(this,!0)}_pumpOperatorList({renderingIntent:g,cacheKey:L,annotationStorageSerializable:$}){const{map:ht,transfer:ut}=$,bt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:g,cacheKey:L,annotationStorage:ht},ut).getReader(),Et=this._intentStates.get(L);Et.streamReader=bt;const Dt=()=>{bt.read().then(({value:Bt,done:ee})=>{if(ee){Et.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Bt,Et),Dt())},Bt=>{if(Et.streamReader=null,!this._transport.destroyed){if(Et.operatorList){Et.operatorList.lastChunk=!0;for(const ee of Et.renderTasks)ee.operatorListChanged();M(this,ft,xs).call(this,!0)}if(Et.displayReadyCapability)Et.displayReadyCapability.reject(Bt);else if(Et.opListReadCapability)Et.opListReadCapability.reject(Bt);else throw Bt}})};Dt()}_abortOperatorList({intentState:g,reason:L,force:$=!1}){if(g.streamReader){if(g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null),!$){if(g.renderTasks.size>0)return;if(L instanceof gt.RenderingCancelledException){let ht=ye;L.extraDelay>0&&L.extraDelay<1e3&&(ht+=L.extraDelay),g.streamReaderCancelTimeout=setTimeout(()=>{g.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:g,reason:L,force:!0})},ht);return}}if(g.streamReader.cancel(new A.AbortException(L.message)).catch(()=>{}),g.streamReader=null,!this._transport.destroyed){for(const[ht,ut]of this._intentStates)if(ut===g){this._intentStates.delete(ht);break}this.cleanup()}}}get stats(){return this._stats}}C=new WeakMap,Y=new WeakMap,ft=new WeakSet,xs=function(g=!1){if(M(this,dt,li).call(this),!t(this,Y)||this.destroyed)return!1;if(g)return O(this,C,setTimeout(()=>{O(this,C,null),M(this,ft,xs).call(this,!1)},X)),!1;for(const{renderTasks:L,operatorList:$}of this._intentStates.values())if(L.size>0||!$.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),O(this,Y,!1),!0},dt=new WeakSet,li=function(){t(this,C)&&(clearTimeout(t(this,C)),O(this,C,null))};class o{constructor(){m(this,Lt,new Set);m(this,Gt,Promise.resolve())}postMessage(g,L){const $={data:structuredClone(g,L?{transfer:L}:null)};t(this,Gt).then(()=>{for(const ht of t(this,Lt))ht.call(this,$)})}addEventListener(g,L){t(this,Lt).add(L)}removeEventListener(g,L){t(this,Lt).delete(L)}terminate(){t(this,Lt).clear()}}Lt=new WeakMap,Gt=new WeakMap;const x={isWorkerDisabled:!1,fakeWorkerId:0};A.isNodeJS&&(x.isWorkerDisabled=!0,(Nt=z.GlobalWorkerOptions).workerSrc||(Nt.workerSrc="./pdf.worker.mjs")),x.isSameOrigin=function(I,g){let L;try{if(L=new URL(I),!L.origin||L.origin==="null")return!1}catch{return!1}const $=new URL(g,L);return L.origin===$.origin},x.createCDNWrapper=function(I){const g=`await import("${I}");`;return URL.createObjectURL(new Blob([g],{type:"text/javascript"}))};const K=class K{constructor({name:g=null,port:L=null,verbosity:$=(0,A.getVerbosityLevel)()}={}){var ht;if(this.name=g,this.destroyed=!1,this.verbosity=$,this._readyCapability=new A.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,L){if((ht=t(K,Vt))!=null&&ht.has(L))throw new Error("Cannot use more than one PDFWorker per port.");(t(K,Vt)||O(K,Vt,new WeakMap)).set(L,this),this._initializeFromPort(L);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(g){this._port=g,this._messageHandler=new G.MessageHandler("main","worker",g),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!x.isWorkerDisabled&&!t(K,Xt,ci)){let{workerSrc:g}=K;try{x.isSameOrigin(window.location.href,g)||(g=x.createCDNWrapper(new URL(g,window.location).href));const L=new Worker(g,{type:"module"}),$=new G.MessageHandler("main","worker",L),ht=()=>{L.removeEventListener("error",ut),$.destroy(),L.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ut=()=>{this._webWorker||ht()};L.addEventListener("error",ut),$.on("test",Et=>{if(L.removeEventListener("error",ut),this.destroyed){ht();return}Et?(this._messageHandler=$,this._port=L,this._webWorker=L,this._readyCapability.resolve(),$.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),$.destroy(),L.terminate())}),$.on("ready",Et=>{if(L.removeEventListener("error",ut),this.destroyed){ht();return}try{bt()}catch{this._setupFakeWorker()}});const bt=()=>{const Et=new Uint8Array;$.send("test",Et,[Et.buffer])};bt();return}catch{(0,A.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){x.isWorkerDisabled||((0,A.warn)("Setting up fake worker."),x.isWorkerDisabled=!0),K._setupFakeWorkerGlobal.then(g=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const L=new o;this._port=L;const $=`fake${x.fakeWorkerId++}`,ht=new G.MessageHandler($+"_worker",$,L);g.setup(ht,L);const ut=new G.MessageHandler($,$+"_worker",L);this._messageHandler=ut,this._readyCapability.resolve(),ut.send("configure",{verbosity:this.verbosity})}).catch(g=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${g.message}".`))})}destroy(){var g;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(g=t(K,Vt))==null||g.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(g){var $;if(!(g!=null&&g.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const L=($=t(this,Vt))==null?void 0:$.get(g.port);if(L){if(L._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return L}return new K(g)}static get workerSrc(){if(z.GlobalWorkerOptions.workerSrc)return z.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){const g=async()=>t(this,Xt,ci)?t(this,Xt,ci):(await ts(()=>import(this.workerSrc).then(async L=>(await L.__tla,L)),[])).WorkerMessageHandler;return(0,A.shadow)(this,"_setupFakeWorkerGlobal",g())}};Vt=new WeakMap,Xt=new WeakSet,ci=function(){var g;try{return((g=globalThis.pdfjsWorker)==null?void 0:g.WorkerMessageHandler)||null}catch{return null}},m(K,Xt),m(K,Vt,void 0);let l=K;class u{constructor(g,L,$,ht,ut){m(this,Yt);m(this,Jt,new Map);m(this,fe,new Map);m(this,oe,new Map);m(this,te,null);this.messageHandler=g,this.loadingTask=L,this.commonObjs=new E,this.fontLoader=new it.FontLoader({ownerDocument:ht.ownerDocument,styleElement:ht.styleElement}),this._params=ht,this.canvasFactory=ut.canvasFactory,this.filterFactory=ut.filterFactory,this.cMapReaderFactory=ut.cMapReaderFactory,this.standardFontDataFactory=ut.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=$,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new A.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,A.shadow)(this,"annotationStorage",new U.AnnotationStorage)}getRenderingIntent(g,L=A.AnnotationMode.ENABLE,$=null,ht=!1){let ut=A.RenderingIntentFlag.DISPLAY,bt=U.SerializableEmpty;switch(g){case"any":ut=A.RenderingIntentFlag.ANY;break;case"display":break;case"print":ut=A.RenderingIntentFlag.PRINT;break;default:(0,A.warn)(`getRenderingIntent - invalid intent: ${g}`)}switch(L){case A.AnnotationMode.DISABLE:ut+=A.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case A.AnnotationMode.ENABLE:break;case A.AnnotationMode.ENABLE_FORMS:ut+=A.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case A.AnnotationMode.ENABLE_STORAGE:ut+=A.RenderingIntentFlag.ANNOTATIONS_STORAGE,bt=(ut&A.RenderingIntentFlag.PRINT&&$ instanceof U.PrintAnnotationStorage?$:this.annotationStorage).serializable;break;default:(0,A.warn)(`getRenderingIntent - invalid annotationMode: ${L}`)}return ht&&(ut+=A.RenderingIntentFlag.OPLIST),{renderingIntent:ut,cacheKey:`${ut}_${bt.hash}`,annotationStorageSerializable:bt}}destroy(){var $;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new A.PromiseCapability,($=t(this,te))==null||$.reject(new Error("Worker was destroyed during onPassword callback"));const g=[];for(const ht of t(this,fe).values())g.push(ht._destroy());t(this,fe).clear(),t(this,oe).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const L=this.messageHandler.sendWithPromise("Terminate",null);return g.push(L),Promise.all(g).then(()=>{var ht;this.commonObjs.clear(),this.fontLoader.clear(),t(this,Jt).clear(),this.filterFactory.destroy(),(ht=this._networkStream)==null||ht.cancelAllRequests(new A.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:g,loadingTask:L}=this;g.on("GetReader",($,ht)=>{(0,A.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ut=>{this._lastProgress={loaded:ut.loaded,total:ut.total}},ht.onPull=()=>{this._fullReader.read().then(function({value:ut,done:bt}){if(bt){ht.close();return}(0,A.assert)(ut instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(ut),1,[ut])}).catch(ut=>{ht.error(ut)})},ht.onCancel=ut=>{this._fullReader.cancel(ut),ht.ready.catch(bt=>{if(!this.destroyed)throw bt})}}),g.on("ReaderHeadersReady",$=>{const ht=new A.PromiseCapability,ut=this._fullReader;return ut.headersReady.then(()=>{var bt;(!ut.isStreamingSupported||!ut.isRangeSupported)&&(this._lastProgress&&((bt=L.onProgress)==null||bt.call(L,this._lastProgress)),ut.onProgress=Et=>{var Dt;(Dt=L.onProgress)==null||Dt.call(L,{loaded:Et.loaded,total:Et.total})}),ht.resolve({isStreamingSupported:ut.isStreamingSupported,isRangeSupported:ut.isRangeSupported,contentLength:ut.contentLength})},ht.reject),ht.promise}),g.on("GetRangeReader",($,ht)=>{(0,A.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ut=this._networkStream.getRangeReader($.begin,$.end);if(!ut){ht.close();return}ht.onPull=()=>{ut.read().then(function({value:bt,done:Et}){if(Et){ht.close();return}(0,A.assert)(bt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(bt),1,[bt])}).catch(bt=>{ht.error(bt)})},ht.onCancel=bt=>{ut.cancel(bt),ht.ready.catch(Et=>{if(!this.destroyed)throw Et})}}),g.on("GetDoc",({pdfInfo:$})=>{this._numPages=$.numPages,this._htmlForXfa=$.htmlForXfa,delete $.htmlForXfa,L._capability.resolve(new c($,this))}),g.on("DocException",function($){let ht;switch($.name){case"PasswordException":ht=new A.PasswordException($.message,$.code);break;case"InvalidPDFException":ht=new A.InvalidPDFException($.message);break;case"MissingPDFException":ht=new A.MissingPDFException($.message);break;case"UnexpectedResponseException":ht=new A.UnexpectedResponseException($.message,$.status);break;case"UnknownErrorException":ht=new A.UnknownErrorException($.message,$.details);break;default:(0,A.unreachable)("DocException - expected a valid Error.")}L._capability.reject(ht)}),g.on("PasswordRequest",$=>{if(O(this,te,new A.PromiseCapability),L.onPassword){const ht=ut=>{ut instanceof Error?t(this,te).reject(ut):t(this,te).resolve({password:ut})};try{L.onPassword(ht,$.code)}catch(ut){t(this,te).reject(ut)}}else t(this,te).reject(new A.PasswordException($.message,$.code));return t(this,te).promise}),g.on("DataLoaded",$=>{var ht;(ht=L.onProgress)==null||ht.call(L,{loaded:$.length,total:$.length}),this.downloadInfoCapability.resolve($)}),g.on("StartRenderPage",$=>{this.destroyed||t(this,fe).get($.pageIndex)._startRenderPage($.transparency,$.cacheKey)}),g.on("commonobj",([$,ht,ut])=>{var bt;if(this.destroyed||this.commonObjs.has($))return null;switch(ht){case"Font":const Et=this._params;if("error"in ut){const Ht=ut.error;(0,A.warn)(`Error during font loading: ${Ht}`),this.commonObjs.resolve($,Ht);break}const Dt=Et.pdfBug&&((bt=globalThis.FontInspector)!=null&&bt.enabled)?(Ht,Kt)=>globalThis.FontInspector.fontAdded(Ht,Kt):null,Bt=new it.FontFaceObject(ut,{isEvalSupported:Et.isEvalSupported,disableFontFace:Et.disableFontFace,ignoreErrors:Et.ignoreErrors,inspectFont:Dt});this.fontLoader.bind(Bt).catch(Ht=>g.sendWithPromise("FontFallback",{id:$})).finally(()=>{!Et.fontExtraProperties&&Bt.data&&(Bt.data=null),this.commonObjs.resolve($,Bt)});break;case"CopyLocalImage":const{imageRef:ee}=ut;(0,A.assert)(ee,"The imageRef must be defined.");for(const Ht of t(this,fe).values())for(const[,Kt]of Ht.objs)if(Kt.ref===ee)return Kt.dataLen?(this.commonObjs.resolve($,structuredClone(Kt)),Kt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve($,ut);break;default:throw new Error(`Got unknown common object type ${ht}`)}return null}),g.on("obj",([$,ht,ut,bt])=>{var Dt;if(this.destroyed)return;const Et=t(this,fe).get(ht);if(!Et.objs.has($)){if(Et._intentStates.size===0){(Dt=bt==null?void 0:bt.bitmap)==null||Dt.close();return}switch(ut){case"Image":Et.objs.resolve($,bt),(bt==null?void 0:bt.dataLen)>A.MAX_IMAGE_SIZE_TO_CACHE&&(Et._maybeCleanupAfterRender=!0);break;case"Pattern":Et.objs.resolve($,bt);break;default:throw new Error(`Got unknown object type ${ut}`)}}}),g.on("DocProgress",$=>{var ht;this.destroyed||((ht=L.onProgress)==null||ht.call(L,{loaded:$.loaded,total:$.total}))}),g.on("FetchBuiltInCMap",$=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch($):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),g.on("FetchStandardFontData",$=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch($):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var $;this.annotationStorage.size<=0&&(0,A.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:g,transfer:L}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:g,filename:(($=this._fullReader)==null?void 0:$.filename)??null},L).finally(()=>{this.annotationStorage.resetModified()})}getPage(g){if(!Number.isInteger(g)||g<=0||g>this._numPages)return Promise.reject(new Error("Invalid page request."));const L=g-1,$=t(this,oe).get(L);if($)return $;const ht=this.messageHandler.sendWithPromise("GetPage",{pageIndex:L}).then(ut=>{if(this.destroyed)throw new Error("Transport destroyed");const bt=new a(L,ut,this,this._params.pdfBug);return t(this,fe).set(L,bt),bt});return t(this,oe).set(L,ht),ht}getPageIndex(g){return typeof g!="object"||g===null||!Number.isInteger(g.num)||g.num<0||!Number.isInteger(g.gen)||g.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:g.num,gen:g.gen})}getAnnotations(g,L){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:g,intent:L})}getFieldObjects(){return M(this,Yt,di).call(this,"GetFieldObjects")}hasJSActions(){return M(this,Yt,di).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(g){return typeof g!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:g})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return M(this,Yt,di).call(this,"GetDocJSActions")}getPageJSActions(g){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:g})}getStructTree(g){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:g})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(g=>new ot.OptionalContentConfig(g))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const g="GetMetadata",L=t(this,Jt).get(g);if(L)return L;const $=this.messageHandler.sendWithPromise(g,null).then(ht=>{var ut,bt;return{info:ht[0],metadata:ht[1]?new D.Metadata(ht[1]):null,contentDispositionFilename:((ut=this._fullReader)==null?void 0:ut.filename)??null,contentLength:((bt=this._fullReader)==null?void 0:bt.contentLength)??null}});return t(this,Jt).set(g,$),$}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(g=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const L of t(this,fe).values())if(!L.cleanup())throw new Error(`startCleanup: Page ${L.pageNumber} is currently rendering.`);this.commonObjs.clear(),g||this.fontLoader.clear(),t(this,Jt).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:g,enableXfa:L}=this._params;return(0,A.shadow)(this,"loadingParams",{disableAutoFetch:g,enableXfa:L})}}Jt=new WeakMap,fe=new WeakMap,oe=new WeakMap,te=new WeakMap,Yt=new WeakSet,di=function(g,L=null){const $=t(this,Jt).get(g);if($)return $;const ht=this.messageHandler.sendWithPromise(g,L);return t(this,Jt).set(g,ht),ht};class E{constructor(){m(this,le);m(this,Wt,Object.create(null))}get(g,L=null){if(L){const ht=M(this,le,Di).call(this,g);return ht.capability.promise.then(()=>L(ht.data)),null}const $=t(this,Wt)[g];if(!($!=null&&$.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${g}.`);return $.data}has(g){var L;return((L=t(this,Wt)[g])==null?void 0:L.capability.settled)??!1}resolve(g,L=null){const $=M(this,le,Di).call(this,g);$.data=L,$.capability.resolve()}clear(){var g;for(const L in t(this,Wt)){const{data:$}=t(this,Wt)[L];(g=$==null?void 0:$.bitmap)==null||g.close()}O(this,Wt,Object.create(null))}*[Symbol.iterator](){for(const g in t(this,Wt)){const{capability:L,data:$}=t(this,Wt)[g];L.settled&&(yield[g,$])}}}Wt=new WeakMap,le=new WeakSet,Di=function(g){var L;return(L=t(this,Wt))[g]||(L[g]={capability:new A.PromiseCapability,data:null})};class j{constructor(g){m(this,he,null);O(this,he,g),this.onContinue=null}get promise(){return t(this,he).capability.promise}cancel(g=0){t(this,he).cancel(null,g)}get separateAnnots(){const{separateAnnots:g}=t(this,he).operatorList;if(!g)return!1;const{annotationCanvasMap:L}=t(this,he);return g.form||g.canvas&&(L==null?void 0:L.size)>0}}he=new WeakMap;const lt=class lt{constructor({callback:g,params:L,objs:$,commonObjs:ht,annotationCanvasMap:ut,operatorList:bt,pageIndex:Et,canvasFactory:Dt,filterFactory:Bt,useRequestAnimationFrame:ee=!1,pdfBug:Ht=!1,pageColors:Kt=null}){this.callback=g,this.params=L,this.objs=$,this.commonObjs=ht,this.annotationCanvasMap=ut,this.operatorListIdx=null,this.operatorList=bt,this._pageIndex=Et,this.canvasFactory=Dt,this.filterFactory=Bt,this._pdfBug=Ht,this.pageColors=Kt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ee===!0&&typeof window<"u",this.cancelled=!1,this.capability=new A.PromiseCapability,this.task=new j(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=L.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:g=!1,optionalContentConfig:L}){var Et,Dt;if(this.cancelled)return;if(this._canvas){if(t(lt,jt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(lt,jt).add(this._canvas)}this._pdfBug&&((Et=globalThis.StepperManager)!=null&&Et.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:$,viewport:ht,transform:ut,background:bt}=this.params;this.gfx=new w.CanvasGraphics($,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:L},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:ut,viewport:ht,transparency:g,background:bt}),this.operatorListIdx=0,this.graphicsReady=!0,(Dt=this.graphicsReadyCallback)==null||Dt.call(this)}cancel(g=null,L=0){var $;this.running=!1,this.cancelled=!0,($=this.gfx)==null||$.endDrawing(),t(lt,jt).delete(this._canvas),this.callback(g||new gt.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,L))}operatorListChanged(){var g;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(g=this.stepper)==null||g.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(lt,jt).delete(this._canvas),this.callback())))}};jt=new WeakMap,m(lt,jt,new WeakSet);let _=lt;const N="4.0.379",Z="9e14d04fd";st()}catch(me){st(me)}})},822:(Ot,kt,at)=>{at.d(kt,{BaseCMapReaderFactory:()=>U,BaseCanvasFactory:()=>A,BaseFilterFactory:()=>st,BaseSVGFactory:()=>it,BaseStandardFontDataFactory:()=>gt});var h=at(266);class st{constructor(){this.constructor===st&&(0,h.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(w){return"none"}addHCMFilter(w,z){return"none"}addHighlightHCMFilter(w,z,G,D){return"none"}destroy(w=!1){}}class A{constructor(){this.constructor===A&&(0,h.unreachable)("Cannot initialize BaseCanvasFactory.")}create(w,z){if(w<=0||z<=0)throw new Error("Invalid canvas size");const G=this._createCanvas(w,z);return{canvas:G,context:G.getContext("2d")}}reset(w,z,G){if(!w.canvas)throw new Error("Canvas is not specified");if(z<=0||G<=0)throw new Error("Invalid canvas size");w.canvas.width=z,w.canvas.height=G}destroy(w){if(!w.canvas)throw new Error("Canvas is not specified");w.canvas.width=0,w.canvas.height=0,w.canvas=null,w.context=null}_createCanvas(w,z){(0,h.unreachable)("Abstract method `_createCanvas` called.")}}class U{constructor({baseUrl:w=null,isCompressed:z=!0}){this.constructor===U&&(0,h.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=w,this.isCompressed=z}async fetch({name:w}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!w)throw new Error("CMap name must be specified.");const z=this.baseUrl+w+(this.isCompressed?".bcmap":""),G=this.isCompressed?h.CMapCompressionType.BINARY:h.CMapCompressionType.NONE;return this._fetchData(z,G).catch(D=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${z}`)})}_fetchData(w,z){(0,h.unreachable)("Abstract method `_fetchData` called.")}}class gt{constructor({baseUrl:w=null}){this.constructor===gt&&(0,h.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=w}async fetch({filename:w}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!w)throw new Error("Font filename must be specified.");const z=`${this.baseUrl}${w}`;return this._fetchData(z).catch(G=>{throw new Error(`Unable to load font data at: ${z}`)})}_fetchData(w){(0,h.unreachable)("Abstract method `_fetchData` called.")}}class it{constructor(){this.constructor===it&&(0,h.unreachable)("Cannot initialize BaseSVGFactory.")}create(w,z,G=!1){if(w<=0||z<=0)throw new Error("Invalid SVG dimensions");const D=this._createSVG("svg:svg");return D.setAttribute("version","1.1"),G||(D.setAttribute("width",`${w}px`),D.setAttribute("height",`${z}px`)),D.setAttribute("preserveAspectRatio","none"),D.setAttribute("viewBox",`0 0 ${w} ${z}`),D}createElement(w){if(typeof w!="string")throw new Error("Invalid SVG element type");return this._createSVG(w)}_createSVG(w){(0,h.unreachable)("Abstract method `_createSVG` called.")}}},250:(Ot,kt,at)=>{var me,Ii,Zt,Fi;at.d(kt,{CanvasGraphics:()=>he});var h=at(266),st=at(473);const A={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function U(X,s){if(!s)return;const i=s[2]-s[0],f=s[3]-s[1],k=new Path2D;k.rect(s[0],s[1],i,f),X.clip(k)}class gt{constructor(){this.constructor===gt&&(0,h.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,h.unreachable)("Abstract method `getPattern` called.")}}class it extends gt{constructor(s){super(),this._type=s[1],this._bbox=s[2],this._colorStops=s[3],this._p0=s[4],this._p1=s[5],this._r0=s[6],this._r1=s[7],this.matrix=null}_createGradient(s){let i;this._type==="axial"?i=s.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=s.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const f of this._colorStops)i.addColorStop(f[0],f[1]);return i}getPattern(s,i,f,k){let b;if(k===A.STROKE||k===A.FILL){const v=i.current.getClippedPathBoundingBox(k,(0,st.getCurrentTransform)(s))||[0,0,0,0],d=Math.ceil(v[2]-v[0])||1,c=Math.ceil(v[3]-v[1])||1,a=i.cachedCanvases.getCanvas("pattern",d,c,!0),o=a.context;o.clearRect(0,0,o.canvas.width,o.canvas.height),o.beginPath(),o.rect(0,0,o.canvas.width,o.canvas.height),o.translate(-v[0],-v[1]),f=h.Util.transform(f,[1,0,0,1,v[0],v[1]]),o.transform(...i.baseTransform),this.matrix&&o.transform(...this.matrix),U(o,this._bbox),o.fillStyle=this._createGradient(o),o.fill(),b=s.createPattern(a.canvas,"no-repeat");const x=new DOMMatrix(f);b.setTransform(x)}else U(s,this._bbox),b=this._createGradient(s);return b}}function H(X,s,i,f,k,b,v,d){const c=s.coords,a=s.colors,o=X.data,x=X.width*4;let l;c[i+1]>c[f+1]&&(l=i,i=f,f=l,l=b,b=v,v=l),c[f+1]>c[k+1]&&(l=f,f=k,k=l,l=v,v=d,d=l),c[i+1]>c[f+1]&&(l=i,i=f,f=l,l=b,b=v,v=l);const u=(c[i]+s.offsetX)*s.scaleX,E=(c[i+1]+s.offsetY)*s.scaleY,j=(c[f]+s.offsetX)*s.scaleX,_=(c[f+1]+s.offsetY)*s.scaleY,N=(c[k]+s.offsetX)*s.scaleX,Z=(c[k+1]+s.offsetY)*s.scaleY;if(E>=Z)return;const J=a[b],K=a[b+1],lt=a[b+2],I=a[v],g=a[v+1],L=a[v+2],$=a[d],ht=a[d+1],ut=a[d+2],bt=Math.round(E),Et=Math.round(Z);let Dt,Bt,ee,Ht,Kt,R,nt,At;for(let vt=bt;vt<=Et;vt++){if(vt<_){const r=vt<E?0:(E-vt)/(E-_);Dt=u-(u-j)*r,Bt=J-(J-I)*r,ee=K-(K-g)*r,Ht=lt-(lt-L)*r}else{let r;vt>Z?r=1:_===Z?r=0:r=(_-vt)/(_-Z),Dt=j-(j-N)*r,Bt=I-(I-$)*r,ee=g-(g-ht)*r,Ht=L-(L-ut)*r}let Pt;vt<E?Pt=0:vt>Z?Pt=1:Pt=(E-vt)/(E-Z),Kt=u-(u-N)*Pt,R=J-(J-$)*Pt,nt=K-(K-ht)*Pt,At=lt-(lt-ut)*Pt;const Ct=Math.round(Math.min(Dt,Kt)),p=Math.round(Math.max(Dt,Kt));let e=x*vt+Ct*4;for(let r=Ct;r<=p;r++)Pt=(Dt-r)/(Dt-Kt),Pt<0?Pt=0:Pt>1&&(Pt=1),o[e++]=Bt-(Bt-R)*Pt|0,o[e++]=ee-(ee-nt)*Pt|0,o[e++]=Ht-(Ht-At)*Pt|0,o[e++]=255}}function w(X,s,i){const f=s.coords,k=s.colors;let b,v;switch(s.type){case"lattice":const d=s.verticesPerRow,c=Math.floor(f.length/d)-1,a=d-1;for(b=0;b<c;b++){let o=b*d;for(let x=0;x<a;x++,o++)H(X,i,f[o],f[o+1],f[o+d],k[o],k[o+1],k[o+d]),H(X,i,f[o+d+1],f[o+1],f[o+d],k[o+d+1],k[o+1],k[o+d])}break;case"triangles":for(b=0,v=f.length;b<v;b+=3)H(X,i,f[b],f[b+1],f[b+2],k[b],k[b+1],k[b+2]);break;default:throw new Error("illegal figure")}}class z extends gt{constructor(s){super(),this._coords=s[2],this._colors=s[3],this._figures=s[4],this._bounds=s[5],this._bbox=s[7],this._background=s[8],this.matrix=null}_createMeshCanvas(s,i,f){const k=Math.floor(this._bounds[0]),b=Math.floor(this._bounds[1]),v=Math.ceil(this._bounds[2])-k,d=Math.ceil(this._bounds[3])-b,c=Math.min(Math.ceil(Math.abs(v*s[0]*1.1)),3e3),a=Math.min(Math.ceil(Math.abs(d*s[1]*1.1)),3e3),o=v/c,x=d/a,l={coords:this._coords,colors:this._colors,offsetX:-k,offsetY:-b,scaleX:1/o,scaleY:1/x},u=c+2*2,E=a+2*2,j=f.getCanvas("mesh",u,E,!1),_=j.context,N=_.createImageData(c,a);if(i){const Z=N.data;for(let J=0,K=Z.length;J<K;J+=4)Z[J]=i[0],Z[J+1]=i[1],Z[J+2]=i[2],Z[J+3]=255}for(const Z of this._figures)w(N,Z,l);return _.putImageData(N,2,2),{canvas:j.canvas,offsetX:k-2*o,offsetY:b-2*x,scaleX:o,scaleY:x}}getPattern(s,i,f,k){U(s,this._bbox);let b;if(k===A.SHADING)b=h.Util.singularValueDecompose2dScale((0,st.getCurrentTransform)(s));else if(b=h.Util.singularValueDecompose2dScale(i.baseTransform),this.matrix){const d=h.Util.singularValueDecompose2dScale(this.matrix);b=[b[0]*d[0],b[1]*d[1]]}const v=this._createMeshCanvas(b,k===A.SHADING?null:this._background,i.cachedCanvases);return k!==A.SHADING&&(s.setTransform(...i.baseTransform),this.matrix&&s.transform(...this.matrix)),s.translate(v.offsetX,v.offsetY),s.scale(v.scaleX,v.scaleY),s.createPattern(v.canvas,"no-repeat")}}class G extends gt{getPattern(){return"hotpink"}}function D(X){switch(X[0]){case"RadialAxial":return new it(X);case"Mesh":return new z(X);case"Dummy":return new G}throw new Error(`Unknown IR type: ${X[0]}`)}const ot={COLORED:1,UNCOLORED:2},jt=class jt{constructor(s,i,f,k,b){this.operatorList=s[2],this.matrix=s[3]||[1,0,0,1,0,0],this.bbox=s[4],this.xstep=s[5],this.ystep=s[6],this.paintType=s[7],this.tilingType=s[8],this.color=i,this.ctx=f,this.canvasGraphicsFactory=k,this.baseTransform=b}createPatternCanvas(s){const i=this.operatorList,f=this.bbox,k=this.xstep,b=this.ystep,v=this.paintType,d=this.tilingType,c=this.color,a=this.canvasGraphicsFactory;(0,h.info)("TilingType: "+d);const o=f[0],x=f[1],l=f[2],u=f[3],E=h.Util.singularValueDecompose2dScale(this.matrix),j=h.Util.singularValueDecompose2dScale(this.baseTransform),_=[E[0]*j[0],E[1]*j[1]],N=this.getSizeAndScale(k,this.ctx.canvas.width,_[0]),Z=this.getSizeAndScale(b,this.ctx.canvas.height,_[1]),J=s.cachedCanvases.getCanvas("pattern",N.size,Z.size,!0),K=J.context,lt=a.createCanvasGraphics(K);lt.groupLevel=s.groupLevel,this.setFillAndStrokeStyleToContext(lt,v,c);let I=o,g=x,L=l,$=u;return o<0&&(I=0,L+=Math.abs(o)),x<0&&(g=0,$+=Math.abs(x)),K.translate(-(N.scale*I),-(Z.scale*g)),lt.transform(N.scale,0,0,Z.scale,0,0),K.save(),this.clipBbox(lt,I,g,L,$),lt.baseTransform=(0,st.getCurrentTransform)(lt.ctx),lt.executeOperatorList(i),lt.endDrawing(),{canvas:J.canvas,scaleX:N.scale,scaleY:Z.scale,offsetX:I,offsetY:g}}getSizeAndScale(s,i,f){s=Math.abs(s);const k=Math.max(jt.MAX_PATTERN_SIZE,i);let b=Math.ceil(s*f);return b>=k?b=k:f=b/s,{scale:f,size:b}}clipBbox(s,i,f,k,b){const v=k-i,d=b-f;s.ctx.rect(i,f,v,d),s.current.updateRectMinMax((0,st.getCurrentTransform)(s.ctx),[i,f,k,b]),s.clip(),s.endPath()}setFillAndStrokeStyleToContext(s,i,f){const k=s.ctx,b=s.current;switch(i){case ot.COLORED:const v=this.ctx;k.fillStyle=v.fillStyle,k.strokeStyle=v.strokeStyle,b.fillColor=v.fillStyle,b.strokeColor=v.strokeStyle;break;case ot.UNCOLORED:const d=h.Util.makeHexColor(f[0],f[1],f[2]);k.fillStyle=d,k.strokeStyle=d,b.fillColor=d,b.strokeColor=d;break;default:throw new h.FormatError(`Unsupported paint type: ${i}`)}}getPattern(s,i,f,k){let b=f;k!==A.SHADING&&(b=h.Util.transform(b,i.baseTransform),this.matrix&&(b=h.Util.transform(b,this.matrix)));const v=this.createPatternCanvas(i);let d=new DOMMatrix(b);d=d.translate(v.offsetX,v.offsetY),d=d.scale(1/v.scaleX,1/v.scaleY);const c=s.createPattern(v.canvas,"repeat");return c.setTransform(d),c}};be(jt,"MAX_PATTERN_SIZE",3e3);let T=jt;function q({src:X,srcPos:s=0,dest:i,width:f,height:k,nonBlackColor:b=4294967295,inverseDecode:v=!1}){const d=h.FeatureTest.isLittleEndian?4278190080:255,[c,a]=v?[b,d]:[d,b],o=f>>3,x=f&7,l=X.length;i=new Uint32Array(i.buffer);let u=0;for(let E=0;E<k;E++){for(const _=s+o;s<_;s++){const N=s<l?X[s]:255;i[u++]=N&128?a:c,i[u++]=N&64?a:c,i[u++]=N&32?a:c,i[u++]=N&16?a:c,i[u++]=N&8?a:c,i[u++]=N&4?a:c,i[u++]=N&2?a:c,i[u++]=N&1?a:c}if(x===0)continue;const j=s<l?X[s++]:255;for(let _=0;_<x;_++)i[u++]=j&1<<7-_?a:c}return{srcPos:s,destPos:u}}const B=16,W=100,V=4096,P=15,Q=10,C=1e3,Y=16;function ft(X,s){if(X._removeMirroring)throw new Error("Context is already forwarding operations.");X.__originalSave=X.save,X.__originalRestore=X.restore,X.__originalRotate=X.rotate,X.__originalScale=X.scale,X.__originalTranslate=X.translate,X.__originalTransform=X.transform,X.__originalSetTransform=X.setTransform,X.__originalResetTransform=X.resetTransform,X.__originalClip=X.clip,X.__originalMoveTo=X.moveTo,X.__originalLineTo=X.lineTo,X.__originalBezierCurveTo=X.bezierCurveTo,X.__originalRect=X.rect,X.__originalClosePath=X.closePath,X.__originalBeginPath=X.beginPath,X._removeMirroring=()=>{X.save=X.__originalSave,X.restore=X.__originalRestore,X.rotate=X.__originalRotate,X.scale=X.__originalScale,X.translate=X.__originalTranslate,X.transform=X.__originalTransform,X.setTransform=X.__originalSetTransform,X.resetTransform=X.__originalResetTransform,X.clip=X.__originalClip,X.moveTo=X.__originalMoveTo,X.lineTo=X.__originalLineTo,X.bezierCurveTo=X.__originalBezierCurveTo,X.rect=X.__originalRect,X.closePath=X.__originalClosePath,X.beginPath=X.__originalBeginPath,delete X._removeMirroring},X.save=function(){s.save(),this.__originalSave()},X.restore=function(){s.restore(),this.__originalRestore()},X.translate=function(i,f){s.translate(i,f),this.__originalTranslate(i,f)},X.scale=function(i,f){s.scale(i,f),this.__originalScale(i,f)},X.transform=function(i,f,k,b,v,d){s.transform(i,f,k,b,v,d),this.__originalTransform(i,f,k,b,v,d)},X.setTransform=function(i,f,k,b,v,d){s.setTransform(i,f,k,b,v,d),this.__originalSetTransform(i,f,k,b,v,d)},X.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},X.rotate=function(i){s.rotate(i),this.__originalRotate(i)},X.clip=function(i){s.clip(i),this.__originalClip(i)},X.moveTo=function(i,f){s.moveTo(i,f),this.__originalMoveTo(i,f)},X.lineTo=function(i,f){s.lineTo(i,f),this.__originalLineTo(i,f)},X.bezierCurveTo=function(i,f,k,b,v,d){s.bezierCurveTo(i,f,k,b,v,d),this.__originalBezierCurveTo(i,f,k,b,v,d)},X.rect=function(i,f,k,b){s.rect(i,f,k,b),this.__originalRect(i,f,k,b)},X.closePath=function(){s.closePath(),this.__originalClosePath()},X.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class xt{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,i,f){let k;return this.cache[s]!==void 0?(k=this.cache[s],this.canvasFactory.reset(k,i,f)):(k=this.canvasFactory.create(i,f),this.cache[s]=k),k}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const i=this.cache[s];this.canvasFactory.destroy(i),delete this.cache[s]}}}function dt(X,s,i,f,k,b,v,d,c,a){const[o,x,l,u,E,j]=(0,st.getCurrentTransform)(X);if(x===0&&l===0){const Z=v*o+E,J=Math.round(Z),K=d*u+j,lt=Math.round(K),I=(v+c)*o+E,g=Math.abs(Math.round(I)-J)||1,L=(d+a)*u+j,$=Math.abs(Math.round(L)-lt)||1;return X.setTransform(Math.sign(o),0,0,Math.sign(u),J,lt),X.drawImage(s,i,f,k,b,0,0,g,$),X.setTransform(o,x,l,u,E,j),[g,$]}if(o===0&&u===0){const Z=d*l+E,J=Math.round(Z),K=v*x+j,lt=Math.round(K),I=(d+a)*l+E,g=Math.abs(Math.round(I)-J)||1,L=(v+c)*x+j,$=Math.abs(Math.round(L)-lt)||1;return X.setTransform(0,Math.sign(x),Math.sign(l),0,J,lt),X.drawImage(s,i,f,k,b,0,0,$,g),X.setTransform(o,x,l,u,E,j),[$,g]}X.drawImage(s,i,f,k,b,v,d,c,a);const _=Math.hypot(o,x),N=Math.hypot(l,u);return[_*c,N*a]}function _t(X){const{width:s,height:i}=X;if(s>C||i>C)return null;const f=1e3,k=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),b=s+1;let v=new Uint8Array(b*(i+1)),d,c,a;const o=s+7&-8;let x=new Uint8Array(o*i),l=0;for(const _ of X.data){let N=128;for(;N>0;)x[l++]=_&N?0:255,N>>=1}let u=0;for(l=0,x[l]!==0&&(v[0]=1,++u),c=1;c<s;c++)x[l]!==x[l+1]&&(v[c]=x[l]?2:1,++u),l++;for(x[l]!==0&&(v[c]=2,++u),d=1;d<i;d++){l=d*o,a=d*b,x[l-o]!==x[l]&&(v[a]=x[l]?1:8,++u);let _=(x[l]?4:0)+(x[l-o]?8:0);for(c=1;c<s;c++)_=(_>>2)+(x[l+1]?4:0)+(x[l-o+1]?8:0),k[_]&&(v[a+c]=k[_],++u),l++;if(x[l-o]!==x[l]&&(v[a+c]=x[l]?2:4,++u),u>f)return null}for(l=o*(i-1),a=d*b,x[l]!==0&&(v[a]=8,++u),c=1;c<s;c++)x[l]!==x[l+1]&&(v[a+c]=x[l]?4:8,++u),l++;if(x[l]!==0&&(v[a+c]=4,++u),u>f)return null;const E=new Int32Array([0,b,-1,0,-b,0,0,0,1]),j=new Path2D;for(d=0;u&&d<=i;d++){let _=d*b;const N=_+s;for(;_<N&&!v[_];)_++;if(_===N)continue;j.moveTo(_%b,d);const Z=_;let J=v[_];do{const K=E[J];do _+=K;while(!v[_]);const lt=v[_];lt!==5&&lt!==10?(J=lt,v[_]=0):(J=lt&51*J>>4,v[_]&=J>>2|J<<2),j.lineTo(_%b,_/b|0),v[_]||--u}while(Z!==_);--d}return x=null,v=null,function(_){_.save(),_.scale(1/s,-1/i),_.translate(0,-i),_.fill(j),_.beginPath(),_.restore()}}class Lt{constructor(s,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=h.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=h.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,i])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,i){this.x=s,this.y=i}updatePathMinMax(s,i,f){[i,f]=h.Util.applyTransform([i,f],s),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,f),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,f)}updateRectMinMax(s,i){const f=h.Util.applyTransform(i,s),k=h.Util.applyTransform(i.slice(2),s),b=h.Util.applyTransform([i[0],i[3]],s),v=h.Util.applyTransform([i[2],i[1]],s);this.minX=Math.min(this.minX,f[0],k[0],b[0],v[0]),this.minY=Math.min(this.minY,f[1],k[1],b[1],v[1]),this.maxX=Math.max(this.maxX,f[0],k[0],b[0],v[0]),this.maxY=Math.max(this.maxY,f[1],k[1],b[1],v[1])}updateScalingPathMinMax(s,i){h.Util.scaleMinMax(s,i),this.minX=Math.min(this.minX,i[0]),this.maxX=Math.max(this.maxX,i[1]),this.minY=Math.min(this.minY,i[2]),this.maxY=Math.max(this.maxY,i[3])}updateCurvePathMinMax(s,i,f,k,b,v,d,c,a,o){const x=h.Util.bezierBoundingBox(i,f,k,b,v,d,c,a);if(o){o[0]=Math.min(o[0],x[0],x[2]),o[1]=Math.max(o[1],x[0],x[2]),o[2]=Math.min(o[2],x[1],x[3]),o[3]=Math.max(o[3],x[1],x[3]);return}this.updateRectMinMax(s,x)}getPathBoundingBox(s=A.FILL,i=null){const f=[this.minX,this.minY,this.maxX,this.maxY];if(s===A.STROKE){i||(0,h.unreachable)("Stroke bounding box must include transform.");const k=h.Util.singularValueDecompose2dScale(i),b=k[0]*this.lineWidth/2,v=k[1]*this.lineWidth/2;f[0]-=b,f[1]-=v,f[2]+=b,f[3]+=v}return f}updateClipFromPath(){const s=h.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=A.FILL,i=null){return h.Util.intersect(this.clipBox,this.getPathBoundingBox(s,i))}}function Gt(X,s){if(typeof ImageData<"u"&&s instanceof ImageData){X.putImageData(s,0,0);return}const i=s.height,f=s.width,k=i%Y,b=(i-k)/Y,v=k===0?b:b+1,d=X.createImageData(f,Y);let c=0,a;const o=s.data,x=d.data;let l,u,E,j;if(s.kind===h.ImageKind.GRAYSCALE_1BPP){const _=o.byteLength,N=new Uint32Array(x.buffer,0,x.byteLength>>2),Z=N.length,J=f+7>>3,K=4294967295,lt=h.FeatureTest.isLittleEndian?4278190080:255;for(l=0;l<v;l++){for(E=l<b?Y:k,a=0,u=0;u<E;u++){const I=_-c;let g=0;const L=I>J?f:I*8-7,$=L&-8;let ht=0,ut=0;for(;g<$;g+=8)ut=o[c++],N[a++]=ut&128?K:lt,N[a++]=ut&64?K:lt,N[a++]=ut&32?K:lt,N[a++]=ut&16?K:lt,N[a++]=ut&8?K:lt,N[a++]=ut&4?K:lt,N[a++]=ut&2?K:lt,N[a++]=ut&1?K:lt;for(;g<L;g++)ht===0&&(ut=o[c++],ht=128),N[a++]=ut&ht?K:lt,ht>>=1}for(;a<Z;)N[a++]=0;X.putImageData(d,0,l*Y)}}else if(s.kind===h.ImageKind.RGBA_32BPP){for(u=0,j=f*Y*4,l=0;l<b;l++)x.set(o.subarray(c,c+j)),c+=j,X.putImageData(d,0,u),u+=Y;l<v&&(j=f*k*4,x.set(o.subarray(c,c+j)),X.putImageData(d,0,u))}else if(s.kind===h.ImageKind.RGB_24BPP)for(E=Y,j=f*E,l=0;l<v;l++){for(l>=b&&(E=k,j=f*E),a=0,u=j;u--;)x[a++]=o[c++],x[a++]=o[c++],x[a++]=o[c++],x[a++]=255;X.putImageData(d,0,l*Y)}else throw new Error(`bad image kind: ${s.kind}`)}function Nt(X,s){if(s.bitmap){X.drawImage(s.bitmap,0,0);return}const i=s.height,f=s.width,k=i%Y,b=(i-k)/Y,v=k===0?b:b+1,d=X.createImageData(f,Y);let c=0;const a=s.data,o=d.data;for(let x=0;x<v;x++){const l=x<b?Y:k;({srcPos:c}=q({src:a,srcPos:c,dest:o,width:f,height:l,nonBlackColor:0})),X.putImageData(d,0,x*Y)}}function Vt(X,s){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const f of i)X[f]!==void 0&&(s[f]=X[f]);X.setLineDash!==void 0&&(s.setLineDash(X.getLineDash()),s.lineDashOffset=X.lineDashOffset)}function Xt(X){if(X.strokeStyle=X.fillStyle="#000000",X.fillRule="nonzero",X.globalAlpha=1,X.lineWidth=1,X.lineCap="butt",X.lineJoin="miter",X.miterLimit=10,X.globalCompositeOperation="source-over",X.font="10px sans-serif",X.setLineDash!==void 0&&(X.setLineDash([]),X.lineDashOffset=0),!h.isNodeJS){const{filter:s}=X;s!=="none"&&s!==""&&(X.filter="none")}}function ve(X,s,i,f){const k=X.length;for(let b=3;b<k;b+=4){const v=X[b];if(v===0)X[b-3]=s,X[b-2]=i,X[b-1]=f;else if(v<255){const d=255-v;X[b-3]=X[b-3]*v+s*d>>8,X[b-2]=X[b-2]*v+i*d>>8,X[b-1]=X[b-1]*v+f*d>>8}}}function Jt(X,s,i){const f=X.length,k=1/255;for(let b=3;b<f;b+=4){const v=i?i[X[b]]:X[b];s[b]=s[b]*v*k|0}}function fe(X,s,i){const f=X.length;for(let k=3;k<f;k+=4){const b=X[k-3]*77+X[k-2]*152+X[k-1]*28;s[k]=i?s[k]*i[b>>8]>>8:s[k]*b>>16}}function oe(X,s,i,f,k,b,v,d,c,a,o){const x=!!b,l=x?b[0]:0,u=x?b[1]:0,E=x?b[2]:0,j=k==="Luminosity"?fe:Jt,_=Math.min(f,Math.ceil(1048576/i));for(let N=0;N<f;N+=_){const Z=Math.min(_,f-N),J=X.getImageData(d-a,N+(c-o),i,Z),K=s.getImageData(d,N+c,i,Z);x&&ve(J.data,l,u,E),j(J.data,K.data,v),s.putImageData(K,d,N+c)}}function te(X,s,i,f){const k=f[0],b=f[1],v=f[2]-k,d=f[3]-b;v===0||d===0||(oe(s.context,i,v,d,s.subtype,s.backdrop,s.transferMap,k,b,s.offsetX,s.offsetY),X.save(),X.globalAlpha=1,X.globalCompositeOperation="source-over",X.setTransform(1,0,0,1,0,0),X.drawImage(i.canvas,0,0),X.restore())}function Yt(X,s){const i=h.Util.singularValueDecompose2dScale(X);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const f=Math.fround((globalThis.devicePixelRatio||1)*st.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:i[0]<=f||i[1]<=f}const re=["butt","round","square"],Wt=["miter","round","bevel"],le={},ie={},ye=class ye{constructor(s,i,f,k,b,{optionalContentConfig:v,markedContentStack:d=null},c,a){m(this,me);m(this,Zt);this.ctx=s,this.current=new Lt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=f,this.canvasFactory=k,this.filterFactory=b,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=v,this.cachedCanvases=new xt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=a,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,i=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):i}beginDrawing({transform:s,viewport:i,transparency:f=!1,background:k=null}){const b=this.ctx.canvas.width,v=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=k||"#ffffff",this.ctx.fillRect(0,0,b,v),this.ctx.fillStyle=d,f){const c=this.cachedCanvases.getCanvas("transparent",b,v);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...(0,st.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Xt(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=(0,st.getCurrentTransform)(this.ctx)}executeOperatorList(s,i,f,k){const b=s.argsArray,v=s.fnArray;let d=i||0;const c=b.length;if(c===d)return d;const a=c-d>Q&&typeof f=="function",o=a?Date.now()+P:0;let x=0;const l=this.commonObjs,u=this.objs;let E;for(;;){if(k!==void 0&&d===k.nextBreakPoint)return k.breakIt(d,f),d;if(E=v[d],E!==h.OPS.dependency)this[E].apply(this,b[d]);else for(const j of b[d]){const _=j.startsWith("g_")?l:u;if(!_.has(j))return _.get(j,f),d}if(d++,d===c)return d;if(a&&++x>Q){if(Date.now()>o)return f(),d;x=0}}}endDrawing(){M(this,me,Ii).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const i of s.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);s.clear()}this._cachedBitmapsMap.clear(),M(this,Zt,Fi).call(this)}_scaleImage(s,i){const f=s.width,k=s.height;let b=Math.max(Math.hypot(i[0],i[1]),1),v=Math.max(Math.hypot(i[2],i[3]),1),d=f,c=k,a="prescale1",o,x;for(;b>2&&d>1||v>2&&c>1;){let l=d,u=c;b>2&&d>1&&(l=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),b/=d/l),v>2&&c>1&&(u=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,v/=c/u),o=this.cachedCanvases.getCanvas(a,l,u),x=o.context,x.clearRect(0,0,l,u),x.drawImage(s,0,0,d,c,0,0,l,u),s=o.canvas,d=l,c=u,a=a==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:d,paintHeight:c}}_createMaskCanvas(s){const i=this.ctx,{width:f,height:k}=s,b=this.current.fillColor,v=this.current.patternFill,d=(0,st.getCurrentTransform)(i);let c,a,o,x;if((s.bitmap||s.data)&&s.count>1){const L=s.bitmap||s.data.buffer;a=JSON.stringify(v?d:[d.slice(0,4),b]),c=this._cachedBitmapsMap.get(L),c||(c=new Map,this._cachedBitmapsMap.set(L,c));const $=c.get(a);if($&&!v){const ht=Math.round(Math.min(d[0],d[2])+d[4]),ut=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:$,offsetX:ht,offsetY:ut}}o=$}o||(x=this.cachedCanvases.getCanvas("maskCanvas",f,k),Nt(x.context,s));let l=h.Util.transform(d,[1/f,0,0,-1/k,0,0]);l=h.Util.transform(l,[1,0,0,1,0,-k]);const[u,E,j,_]=h.Util.getAxialAlignedBoundingBox([0,0,f,k],l),N=Math.round(j-u)||1,Z=Math.round(_-E)||1,J=this.cachedCanvases.getCanvas("fillCanvas",N,Z),K=J.context,lt=u,I=E;K.translate(-lt,-I),K.transform(...l),o||(o=this._scaleImage(x.canvas,(0,st.getCurrentTransformInverse)(K)),o=o.img,c&&v&&c.set(a,o)),K.imageSmoothingEnabled=Yt((0,st.getCurrentTransform)(K),s.interpolate),dt(K,o,0,0,o.width,o.height,0,0,f,k),K.globalCompositeOperation="source-in";const g=h.Util.transform((0,st.getCurrentTransformInverse)(K),[1,0,0,1,-lt,-I]);return K.fillStyle=v?b.getPattern(i,this,g,A.FILL):b,K.fillRect(0,0,f,k),c&&!v&&(this.cachedCanvases.delete("fillCanvas"),c.set(a,J.canvas)),{canvas:J.canvas,offsetX:Math.round(lt),offsetY:Math.round(I)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=re[s]}setLineJoin(s){this.ctx.lineJoin=Wt[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,i){const f=this.ctx;f.setLineDash!==void 0&&(f.setLineDash(s),f.lineDashOffset=i)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[i,f]of s)switch(i){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f[0],f[1]);break;case"CA":this.current.strokeAlpha=f;break;case"ca":this.current.fillAlpha=f,this.ctx.globalAlpha=f;break;case"BM":this.ctx.globalCompositeOperation=f;break;case"SMask":this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,i=this.ctx.canvas.height,f="smaskGroupAt"+this.groupLevel,k=this.cachedCanvases.getCanvas(f,s,i);this.suspendedCtx=this.ctx,this.ctx=k.context;const b=this.ctx;b.setTransform(...(0,st.getCurrentTransform)(this.suspendedCtx)),Vt(this.suspendedCtx,b),ft(b,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Vt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,f=this.suspendedCtx;te(f,i,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Vt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Vt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,i,f,k,b,v){this.ctx.transform(s,i,f,k,b,v),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,i,f){const k=this.ctx,b=this.current;let v=b.x,d=b.y,c,a;const o=(0,st.getCurrentTransform)(k),x=o[0]===0&&o[3]===0||o[1]===0&&o[2]===0,l=x?f.slice(0):null;for(let u=0,E=0,j=s.length;u<j;u++)switch(s[u]|0){case h.OPS.rectangle:v=i[E++],d=i[E++];const _=i[E++],N=i[E++],Z=v+_,J=d+N;k.moveTo(v,d),_===0||N===0?k.lineTo(Z,J):(k.lineTo(Z,d),k.lineTo(Z,J),k.lineTo(v,J)),x||b.updateRectMinMax(o,[v,d,Z,J]),k.closePath();break;case h.OPS.moveTo:v=i[E++],d=i[E++],k.moveTo(v,d),x||b.updatePathMinMax(o,v,d);break;case h.OPS.lineTo:v=i[E++],d=i[E++],k.lineTo(v,d),x||b.updatePathMinMax(o,v,d);break;case h.OPS.curveTo:c=v,a=d,v=i[E+4],d=i[E+5],k.bezierCurveTo(i[E],i[E+1],i[E+2],i[E+3],v,d),b.updateCurvePathMinMax(o,c,a,i[E],i[E+1],i[E+2],i[E+3],v,d,l),E+=6;break;case h.OPS.curveTo2:c=v,a=d,k.bezierCurveTo(v,d,i[E],i[E+1],i[E+2],i[E+3]),b.updateCurvePathMinMax(o,c,a,v,d,i[E],i[E+1],i[E+2],i[E+3],l),v=i[E+2],d=i[E+3],E+=4;break;case h.OPS.curveTo3:c=v,a=d,v=i[E+2],d=i[E+3],k.bezierCurveTo(i[E],i[E+1],v,d,v,d),b.updateCurvePathMinMax(o,c,a,i[E],i[E+1],v,d,v,d,l),E+=4;break;case h.OPS.closePath:k.closePath();break}x&&b.updateScalingPathMinMax(o,l),b.setCurrentPoint(v,d)}closePath(){this.ctx.closePath()}stroke(s=!0){const i=this.ctx,f=this.current.strokeColor;i.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof f=="object"&&(f!=null&&f.getPattern)?(i.save(),i.strokeStyle=f.getPattern(i,this,(0,st.getCurrentTransformInverse)(i),A.STROKE),this.rescaleAndStroke(!1),i.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const i=this.ctx,f=this.current.fillColor,k=this.current.patternFill;let b=!1;k&&(i.save(),i.fillStyle=f.getPattern(i,this,(0,st.getCurrentTransformInverse)(i),A.FILL),b=!0);const v=this.current.getClippedPathBoundingBox();this.contentVisible&&v!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),b&&i.restore(),s&&this.consumePath(v)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=le}eoClip(){this.pendingClip=ie}beginText(){this.current.textMatrix=h.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,i=this.ctx;if(s===void 0){i.beginPath();return}i.save(),i.beginPath();for(const f of s)i.setTransform(...f.transform),i.translate(f.x,f.y),f.addToPath(i,f.fontSize);i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,i){var o;const f=this.commonObjs.get(s),k=this.current;if(!f)throw new Error(`Can't find font for ${s}`);if(k.fontMatrix=f.fontMatrix||h.FONT_IDENTITY_MATRIX,(k.fontMatrix[0]===0||k.fontMatrix[3]===0)&&(0,h.warn)("Invalid font matrix for font "+s),i<0?(i=-i,k.fontDirection=-1):k.fontDirection=1,this.current.font=f,this.current.fontSize=i,f.isType3Font)return;const b=f.loadedName||"sans-serif",v=((o=f.systemFontInfo)==null?void 0:o.css)||`"${b}", ${f.fallbackName}`;let d="normal";f.black?d="900":f.bold&&(d="bold");const c=f.italic?"italic":"normal";let a=i;i<B?a=B:i>W&&(a=W),this.current.fontSizeScale=i/a,this.ctx.font=`${c} ${d} ${a}px ${v}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,i){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=i}setLeadingMoveText(s,i){this.setLeading(-i),this.moveText(s,i)}setTextMatrix(s,i,f,k,b,v){this.current.textMatrix=[s,i,f,k,b,v],this.current.textMatrixScale=Math.hypot(s,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,i,f,k){const b=this.ctx,v=this.current,d=v.font,c=v.textRenderingMode,a=v.fontSize/v.fontSizeScale,o=c&h.TextRenderingMode.FILL_STROKE_MASK,x=!!(c&h.TextRenderingMode.ADD_TO_PATH_FLAG),l=v.patternFill&&!d.missingFile;let u;(d.disableFontFace||x||l)&&(u=d.getPathGenerator(this.commonObjs,s)),d.disableFontFace||l?(b.save(),b.translate(i,f),b.beginPath(),u(b,a),k&&b.setTransform(...k),(o===h.TextRenderingMode.FILL||o===h.TextRenderingMode.FILL_STROKE)&&b.fill(),(o===h.TextRenderingMode.STROKE||o===h.TextRenderingMode.FILL_STROKE)&&b.stroke(),b.restore()):((o===h.TextRenderingMode.FILL||o===h.TextRenderingMode.FILL_STROKE)&&b.fillText(s,i,f),(o===h.TextRenderingMode.STROKE||o===h.TextRenderingMode.FILL_STROKE)&&b.strokeText(s,i,f)),x&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,st.getCurrentTransform)(b),x:i,y:f,fontSize:a,addToPath:u})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const i=s.getImageData(0,0,10,10).data;let f=!1;for(let k=3;k<i.length;k+=4)if(i[k]>0&&i[k]<255){f=!0;break}return(0,h.shadow)(this,"isFontSubpixelAAEnabled",f)}showText(s){const i=this.current,f=i.font;if(f.isType3Font)return this.showType3Text(s);const k=i.fontSize;if(k===0)return;const b=this.ctx,v=i.fontSizeScale,d=i.charSpacing,c=i.wordSpacing,a=i.fontDirection,o=i.textHScale*a,x=s.length,l=f.vertical,u=l?1:-1,E=f.defaultVMetrics,j=k*i.fontMatrix[0],_=i.textRenderingMode===h.TextRenderingMode.FILL&&!f.disableFontFace&&!i.patternFill;b.save(),b.transform(...i.textMatrix),b.translate(i.x,i.y+i.textRise),a>0?b.scale(o,-1):b.scale(o,1);let N;if(i.patternFill){b.save();const I=i.fillColor.getPattern(b,this,(0,st.getCurrentTransformInverse)(b),A.FILL);N=(0,st.getCurrentTransform)(b),b.restore(),b.fillStyle=I}let Z=i.lineWidth;const J=i.textMatrixScale;if(J===0||Z===0){const I=i.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;(I===h.TextRenderingMode.STROKE||I===h.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=J;if(v!==1&&(b.scale(v,v),Z/=v),b.lineWidth=Z,f.isInvalidPDFjsFont){const I=[];let g=0;for(const L of s)I.push(L.unicode),g+=L.width;b.fillText(I.join(""),0,0),i.x+=g*j*o,b.restore(),this.compose();return}let K=0,lt;for(lt=0;lt<x;++lt){const I=s[lt];if(typeof I=="number"){K+=u*I*k/1e3;continue}let g=!1;const L=(I.isSpace?c:0)+d,$=I.fontChar,ht=I.accent;let ut,bt,Et=I.width;if(l){const Bt=I.vmetric||E,ee=-(I.vmetric?Bt[1]:Et*.5)*j,Ht=Bt[2]*j;Et=Bt?-Bt[0]:Et,ut=ee/v,bt=(K+Ht)/v}else ut=K/v,bt=0;if(f.remeasure&&Et>0){const Bt=b.measureText($).width*1e3/k*v;if(Et<Bt&&this.isFontSubpixelAAEnabled){const ee=Et/Bt;g=!0,b.save(),b.scale(ee,1),ut/=ee}else Et!==Bt&&(ut+=(Et-Bt)/2e3*k/v)}if(this.contentVisible&&(I.isInFont||f.missingFile)){if(_&&!ht)b.fillText($,ut,bt);else if(this.paintChar($,ut,bt,N),ht){const Bt=ut+k*ht.offset.x/v,ee=bt-k*ht.offset.y/v;this.paintChar(ht.fontChar,Bt,ee,N)}}const Dt=l?Et*j-L*a:Et*j+L*a;K+=Dt,g&&b.restore()}l?i.y-=K:i.x+=K*o,b.restore(),this.compose()}showType3Text(s){const i=this.ctx,f=this.current,k=f.font,b=f.fontSize,v=f.fontDirection,d=k.vertical?1:-1,c=f.charSpacing,a=f.wordSpacing,o=f.textHScale*v,x=f.fontMatrix||h.FONT_IDENTITY_MATRIX,l=s.length,u=f.textRenderingMode===h.TextRenderingMode.INVISIBLE;let E,j,_,N;if(!(u||b===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...f.textMatrix),i.translate(f.x,f.y),i.scale(o,v),E=0;E<l;++E){if(j=s[E],typeof j=="number"){N=d*j*b/1e3,this.ctx.translate(N,0),f.x+=N*o;continue}const Z=(j.isSpace?a:0)+c,J=k.charProcOperatorList[j.operatorListId];if(!J){(0,h.warn)(`Type3 character "${j.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=j,this.save(),i.scale(b,b),i.transform(...x),this.executeOperatorList(J),this.restore()),_=h.Util.applyTransform([j.width,0],x)[0]*b+Z,i.translate(_,0),f.x+=_*o}i.restore(),this.processingType3=null}}setCharWidth(s,i){}setCharWidthAndBounds(s,i,f,k,b,v){this.ctx.rect(f,k,b-f,v-k),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let i;if(s[0]==="TilingPattern"){const f=s[1],k=this.baseTransform||(0,st.getCurrentTransform)(this.ctx),b={createCanvasGraphics:v=>new ye(v,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new T(s,f,this.ctx,b,k)}else i=this._getPattern(s[1],s[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,i,f){const k=h.Util.makeHexColor(s,i,f);this.ctx.strokeStyle=k,this.current.strokeColor=k}setFillRGBColor(s,i,f){const k=h.Util.makeHexColor(s,i,f);this.ctx.fillStyle=k,this.current.fillColor=k,this.current.patternFill=!1}_getPattern(s,i=null){let f;return this.cachedPatterns.has(s)?f=this.cachedPatterns.get(s):(f=D(this.getObject(s)),this.cachedPatterns.set(s,f)),i&&(f.matrix=i),f}shadingFill(s){if(!this.contentVisible)return;const i=this.ctx;this.save();const f=this._getPattern(s);i.fillStyle=f.getPattern(i,this,(0,st.getCurrentTransformInverse)(i),A.SHADING);const k=(0,st.getCurrentTransformInverse)(i);if(k){const{width:b,height:v}=i.canvas,[d,c,a,o]=h.Util.getAxialAlignedBoundingBox([0,0,b,v],k);this.ctx.fillRect(d,c,a-d,o-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,h.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,h.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,st.getCurrentTransform)(this.ctx),i)){const f=i[2]-i[0],k=i[3]-i[1];this.ctx.rect(i[0],i[1],f,k),this.current.updateRectMinMax((0,st.getCurrentTransform)(this.ctx),i),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;s.isolated||(0,h.info)("TODO: Support non-isolated groups."),s.knockout&&(0,h.warn)("Knockout groups not supported.");const f=(0,st.getCurrentTransform)(i);if(s.matrix&&i.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let k=h.Util.getAxialAlignedBoundingBox(s.bbox,(0,st.getCurrentTransform)(i));const b=[0,0,i.canvas.width,i.canvas.height];k=h.Util.intersect(k,b)||[0,0,0,0];const v=Math.floor(k[0]),d=Math.floor(k[1]);let c=Math.max(Math.ceil(k[2])-v,1),a=Math.max(Math.ceil(k[3])-d,1),o=1,x=1;c>V&&(o=c/V,c=V),a>V&&(x=a/V,a=V),this.current.startNewPathAndClipBox([0,0,c,a]);let l="groupAt"+this.groupLevel;s.smask&&(l+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(l,c,a),E=u.context;E.scale(1/o,1/x),E.translate(-v,-d),E.transform(...f),s.smask?this.smaskStack.push({canvas:u.canvas,context:E,offsetX:v,offsetY:d,scaleX:o,scaleY:x,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(v,d),i.scale(o,x),i.save()),Vt(i,E),this.ctx=E,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,f=this.groupStack.pop();if(this.ctx=f,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const k=(0,st.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...k);const b=h.Util.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],k);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(b)}}beginAnnotation(s,i,f,k,b){if(M(this,me,Ii).call(this),Xt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(i)&&i.length===4){const v=i[2]-i[0],d=i[3]-i[1];if(b&&this.annotationCanvasMap){f=f.slice(),f[4]-=i[0],f[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=v,i[3]=d;const[c,a]=h.Util.singularValueDecompose2dScale((0,st.getCurrentTransform)(this.ctx)),{viewportScale:o}=this,x=Math.ceil(v*this.outputScaleX*o),l=Math.ceil(d*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(x,l);const{canvas:u,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(s,u),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(c,0,0,-a,0,d*a),Xt(this.ctx)}else Xt(this.ctx),this.ctx.rect(i[0],i[1],v,d),this.ctx.clip(),this.endPath()}this.current=new Lt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...f),this.transform(...k)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),M(this,Zt,Fi).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const i=s.count;s=this.getObject(s.data,s),s.count=i;const f=this.ctx,k=this.processingType3;if(k&&(k.compiled===void 0&&(k.compiled=_t(s)),k.compiled)){k.compiled(f);return}const b=this._createMaskCanvas(s),v=b.canvas;f.save(),f.setTransform(1,0,0,1,0,0),f.drawImage(v,b.offsetX,b.offsetY),f.restore(),this.compose()}paintImageMaskXObjectRepeat(s,i,f=0,k=0,b,v){if(!this.contentVisible)return;s=this.getObject(s.data,s);const d=this.ctx;d.save();const c=(0,st.getCurrentTransform)(d);d.transform(i,f,k,b,0,0);const a=this._createMaskCanvas(s);d.setTransform(1,0,0,1,a.offsetX-c[4],a.offsetY-c[5]);for(let o=0,x=v.length;o<x;o+=2){const l=h.Util.transform(c,[i,f,k,b,v[o],v[o+1]]),[u,E]=h.Util.applyTransform([0,0],l);d.drawImage(a.canvas,u,E)}d.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const i=this.ctx,f=this.current.fillColor,k=this.current.patternFill;for(const b of s){const{data:v,width:d,height:c,transform:a}=b,o=this.cachedCanvases.getCanvas("maskCanvas",d,c),x=o.context;x.save();const l=this.getObject(v,b);Nt(x,l),x.globalCompositeOperation="source-in",x.fillStyle=k?f.getPattern(x,this,(0,st.getCurrentTransformInverse)(i),A.FILL):f,x.fillRect(0,0,d,c),x.restore(),i.save(),i.transform(...a),i.scale(1,-1),dt(i,o.canvas,0,0,d,c,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const i=this.getObject(s);if(!i){(0,h.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(s,i,f,k){if(!this.contentVisible)return;const b=this.getObject(s);if(!b){(0,h.warn)("Dependent image isn't ready yet");return}const v=b.width,d=b.height,c=[];for(let a=0,o=k.length;a<o;a+=2)c.push({transform:[i,0,0,f,k[a],k[a+1]],x:0,y:0,w:v,h:d});this.paintInlineImageXObjectGroup(b,c)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:i,width:f,height:k}=s,b=this.cachedCanvases.getCanvas("inlineImage",f,k),v=b.context;return v.filter=this.current.transferMaps,v.drawImage(i,0,0),v.filter="none",b.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const i=s.width,f=s.height,k=this.ctx;if(this.save(),!h.isNodeJS){const{filter:d}=k;d!=="none"&&d!==""&&(k.filter="none")}k.scale(1/i,-1/f);let b;if(s.bitmap)b=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)b=s;else{const d=this.cachedCanvases.getCanvas("inlineImage",i,f).context;Gt(d,s),b=this.applyTransferMapsToCanvas(d)}const v=this._scaleImage(b,(0,st.getCurrentTransformInverse)(k));k.imageSmoothingEnabled=Yt((0,st.getCurrentTransform)(k),s.interpolate),dt(k,v.img,0,0,v.paintWidth,v.paintHeight,0,-f,i,f),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,i){if(!this.contentVisible)return;const f=this.ctx;let k;if(s.bitmap)k=s.bitmap;else{const b=s.width,v=s.height,d=this.cachedCanvases.getCanvas("inlineImage",b,v).context;Gt(d,s),k=this.applyTransferMapsToCanvas(d)}for(const b of i)f.save(),f.transform(...b.transform),f.scale(1,-1),dt(f,k,b.x,b.y,b.w,b.h,0,-1,1,1),f.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,i){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,i){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const f=this.ctx;this.pendingClip&&(i||(this.pendingClip===ie?f.clip("evenodd"):f.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),f.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,st.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const i=Math.abs(s[0]*s[3]-s[2]*s[1]),f=Math.hypot(s[0],s[2]),k=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(f,k)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a:i,b:f,c:k,d:b}=this.ctx.getTransform();let v,d;if(f===0&&k===0){const c=Math.abs(i),a=Math.abs(b);if(c===a)if(s===0)v=d=1/c;else{const o=c*s;v=d=o<1?1/o:1}else if(s===0)v=1/c,d=1/a;else{const o=c*s,x=a*s;v=o<1?1/o:1,d=x<1?1/x:1}}else{const c=Math.abs(i*b-f*k),a=Math.hypot(i,f),o=Math.hypot(k,b);if(s===0)v=o/c,d=a/c;else{const x=s*c;v=o>x?o/x:1,d=a>x?a/x:1}}this._cachedScaleForStroking[0]=v,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:i}=this,{lineWidth:f}=this.current,[k,b]=this.getScaleForStroking();if(i.lineWidth=f||1,k===1&&b===1){i.stroke();return}const v=i.getLineDash();if(s&&i.save(),i.scale(k,b),v.length>0){const d=Math.max(k,b);i.setLineDash(v.map(c=>c/d)),i.lineDashOffset/=d}i.stroke(),s&&i.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};me=new WeakSet,Ii=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Zt=new WeakSet,Fi=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const i=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}};let he=ye;for(const X in h.OPS)he.prototype[X]!==void 0&&(he.prototype[h.OPS[X]]=he.prototype[X])},473:(Ot,kt,at)=>{var Vt,Xt,ve,Jt,fe,oe,te,Yt,re,Wt,le,ie,Ss,jt,Cs,pe,Oi,ne,ui,X,pi,i,Ws,k,$s;at.d(kt,{DOMCMapReaderFactory:()=>w,DOMCanvasFactory:()=>it,DOMFilterFactory:()=>gt,DOMSVGFactory:()=>G,DOMStandardFontDataFactory:()=>z,PDFDateString:()=>Y,PageViewport:()=>D,PixelsPerInch:()=>U,RenderingCancelledException:()=>ot,StatTimer:()=>V,fetchData:()=>H,getColorValues:()=>dt,getCurrentTransform:()=>_t,getCurrentTransformInverse:()=>Lt,getFilenameFromUrl:()=>B,getPdfFilenameFromUrl:()=>W,getRGB:()=>xt,getXfaPageViewport:()=>ft,isDataScheme:()=>T,isPdfFile:()=>q,isValidFetchUrl:()=>P,noContextMenu:()=>Q,setLayerDimensions:()=>Gt});var h=at(822),st=at(266);const A="http://www.w3.org/2000/svg",Nt=class Nt{};be(Nt,"CSS",96),be(Nt,"PDF",72),be(Nt,"PDF_TO_CSS_UNITS",Nt.CSS/Nt.PDF);let U=Nt;class gt extends h.BaseFilterFactory{constructor({docId:c,ownerDocument:a=globalThis.document}={}){super();m(this,ie);m(this,jt);m(this,pe);m(this,ne);m(this,X);m(this,i);m(this,k);m(this,Vt,void 0);m(this,Xt,void 0);m(this,ve,void 0);m(this,Jt,void 0);m(this,fe,void 0);m(this,oe,void 0);m(this,te,void 0);m(this,Yt,void 0);m(this,re,void 0);m(this,Wt,void 0);m(this,le,0);O(this,ve,c),O(this,Jt,a)}addFilter(c){if(!c)return"none";let a=t(this,ie,Ss).get(c);if(a)return a;let o,x,l,u;if(c.length===1){const N=c[0],Z=new Array(256);for(let J=0;J<256;J++)Z[J]=N[J]/255;u=o=x=l=Z.join(",")}else{const[N,Z,J]=c,K=new Array(256),lt=new Array(256),I=new Array(256);for(let g=0;g<256;g++)K[g]=N[g]/255,lt[g]=Z[g]/255,I[g]=J[g]/255;o=K.join(","),x=lt.join(","),l=I.join(","),u=`${o}${x}${l}`}if(a=t(this,ie,Ss).get(u),a)return t(this,ie,Ss).set(c,a),a;const E=`g_${t(this,ve)}_transfer_map_${Qe(this,le)._++}`,j=`url(#${E})`;t(this,ie,Ss).set(c,j),t(this,ie,Ss).set(u,j);const _=M(this,ne,ui).call(this,E);return M(this,i,Ws).call(this,o,x,l,_),j}addHCMFilter(c,a){var Z;const o=`${c}-${a}`;if(t(this,oe)===o)return t(this,te);if(O(this,oe,o),O(this,te,"none"),(Z=t(this,fe))==null||Z.remove(),!c||!a)return t(this,te);const x=M(this,k,$s).call(this,c);c=st.Util.makeHexColor(...x);const l=M(this,k,$s).call(this,a);if(a=st.Util.makeHexColor(...l),t(this,jt,Cs).style.color="",c==="#000000"&&a==="#ffffff"||c===a)return t(this,te);const u=new Array(256);for(let J=0;J<=255;J++){const K=J/255;u[J]=K<=.03928?K/12.92:((K+.055)/1.055)**2.4}const E=u.join(","),j=`g_${t(this,ve)}_hcm_filter`,_=O(this,Yt,M(this,ne,ui).call(this,j));M(this,i,Ws).call(this,E,E,E,_),M(this,pe,Oi).call(this,_);const N=(J,K)=>{const lt=x[J]/255,I=l[J]/255,g=new Array(K+1);for(let L=0;L<=K;L++)g[L]=lt+L/K*(I-lt);return g.join(",")};return M(this,i,Ws).call(this,N(0,5),N(1,5),N(2,5),_),O(this,te,`url(#${j})`),t(this,te)}addHighlightHCMFilter(c,a,o,x){var I;const l=`${c}-${a}-${o}-${x}`;if(t(this,re)===l)return t(this,Wt);if(O(this,re,l),O(this,Wt,"none"),(I=t(this,Yt))==null||I.remove(),!c||!a)return t(this,Wt);const[u,E]=[c,a].map(M(this,k,$s).bind(this));let j=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),_=Math.round(.2126*E[0]+.7152*E[1]+.0722*E[2]),[N,Z]=[o,x].map(M(this,k,$s).bind(this));_<j&&([j,_,N,Z]=[_,j,Z,N]),t(this,jt,Cs).style.color="";const J=(g,L,$)=>{const ht=new Array(256),ut=(_-j)/$,bt=g/255,Et=(L-g)/(255*$);let Dt=0;for(let Bt=0;Bt<=$;Bt++){const ee=Math.round(j+Bt*ut),Ht=bt+Bt*Et;for(let Kt=Dt;Kt<=ee;Kt++)ht[Kt]=Ht;Dt=ee+1}for(let Bt=Dt;Bt<256;Bt++)ht[Bt]=ht[Dt-1];return ht.join(",")},K=`g_${t(this,ve)}_hcm_highlight_filter`,lt=O(this,Yt,M(this,ne,ui).call(this,K));return M(this,pe,Oi).call(this,lt),M(this,i,Ws).call(this,J(N[0],Z[0],5),J(N[1],Z[1],5),J(N[2],Z[2],5),lt),O(this,Wt,`url(#${K})`),t(this,Wt)}destroy(c=!1){c&&(t(this,te)||t(this,Wt))||(t(this,Xt)&&(t(this,Xt).parentNode.parentNode.remove(),O(this,Xt,null)),t(this,Vt)&&(t(this,Vt).clear(),O(this,Vt,null)),O(this,le,0))}}Vt=new WeakMap,Xt=new WeakMap,ve=new WeakMap,Jt=new WeakMap,fe=new WeakMap,oe=new WeakMap,te=new WeakMap,Yt=new WeakMap,re=new WeakMap,Wt=new WeakMap,le=new WeakMap,ie=new WeakSet,Ss=function(){return t(this,Vt)||O(this,Vt,new Map)},jt=new WeakSet,Cs=function(){if(!t(this,Xt)){const c=t(this,Jt).createElement("div"),{style:a}=c;a.visibility="hidden",a.contain="strict",a.width=a.height=0,a.position="absolute",a.top=a.left=0,a.zIndex=-1;const o=t(this,Jt).createElementNS(A,"svg");o.setAttribute("width",0),o.setAttribute("height",0),O(this,Xt,t(this,Jt).createElementNS(A,"defs")),c.append(o),o.append(t(this,Xt)),t(this,Jt).body.append(c)}return t(this,Xt)},pe=new WeakSet,Oi=function(c){const a=t(this,Jt).createElementNS(A,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),c.append(a)},ne=new WeakSet,ui=function(c){const a=t(this,Jt).createElementNS(A,"filter");return a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("id",c),t(this,jt,Cs).append(a),a},X=new WeakSet,pi=function(c,a,o){const x=t(this,Jt).createElementNS(A,a);x.setAttribute("type","discrete"),x.setAttribute("tableValues",o),c.append(x)},i=new WeakSet,Ws=function(c,a,o,x){const l=t(this,Jt).createElementNS(A,"feComponentTransfer");x.append(l),M(this,X,pi).call(this,l,"feFuncR",c),M(this,X,pi).call(this,l,"feFuncG",a),M(this,X,pi).call(this,l,"feFuncB",o)},k=new WeakSet,$s=function(c){return t(this,jt,Cs).style.color=c,xt(getComputedStyle(t(this,jt,Cs)).getPropertyValue("color"))};class it extends h.BaseCanvasFactory{constructor({ownerDocument:d=globalThis.document}={}){super(),this._document=d}_createCanvas(d,c){const a=this._document.createElement("canvas");return a.width=d,a.height=c,a}}async function H(v,d="text"){if(P(v,document.baseURI)){const c=await fetch(v);if(!c.ok)throw new Error(c.statusText);switch(d){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"json":return c.json()}return c.text()}return new Promise((c,a)=>{const o=new XMLHttpRequest;o.open("GET",v,!0),o.responseType=d,o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(o.status===200||o.status===0){let x;switch(d){case"arraybuffer":case"blob":case"json":x=o.response;break;default:x=o.responseText;break}if(x){c(x);return}}a(new Error(o.statusText))}},o.send(null)})}class w extends h.BaseCMapReaderFactory{_fetchData(d,c){return H(d,this.isCompressed?"arraybuffer":"text").then(a=>({cMapData:a instanceof ArrayBuffer?new Uint8Array(a):(0,st.stringToBytes)(a),compressionType:c}))}}class z extends h.BaseStandardFontDataFactory{_fetchData(d){return H(d,"arraybuffer").then(c=>new Uint8Array(c))}}class G extends h.BaseSVGFactory{_createSVG(d){return document.createElementNS(A,d)}}class D{constructor({viewBox:d,scale:c,rotation:a,offsetX:o=0,offsetY:x=0,dontFlip:l=!1}){this.viewBox=d,this.scale=c,this.rotation=a,this.offsetX=o,this.offsetY=x;const u=(d[2]+d[0])/2,E=(d[3]+d[1])/2;let j,_,N,Z;switch(a%=360,a<0&&(a+=360),a){case 180:j=-1,_=0,N=0,Z=1;break;case 90:j=0,_=1,N=1,Z=0;break;case 270:j=0,_=-1,N=-1,Z=0;break;case 0:j=1,_=0,N=0,Z=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(N=-N,Z=-Z);let J,K,lt,I;j===0?(J=Math.abs(E-d[1])*c+o,K=Math.abs(u-d[0])*c+x,lt=(d[3]-d[1])*c,I=(d[2]-d[0])*c):(J=Math.abs(u-d[0])*c+o,K=Math.abs(E-d[1])*c+x,lt=(d[2]-d[0])*c,I=(d[3]-d[1])*c),this.transform=[j*c,_*c,N*c,Z*c,J-j*c*u-N*c*E,K-_*c*u-Z*c*E],this.width=lt,this.height=I}get rawDims(){const{viewBox:d}=this;return(0,st.shadow)(this,"rawDims",{pageWidth:d[2]-d[0],pageHeight:d[3]-d[1],pageX:d[0],pageY:d[1]})}clone({scale:d=this.scale,rotation:c=this.rotation,offsetX:a=this.offsetX,offsetY:o=this.offsetY,dontFlip:x=!1}={}){return new D({viewBox:this.viewBox.slice(),scale:d,rotation:c,offsetX:a,offsetY:o,dontFlip:x})}convertToViewportPoint(d,c){return st.Util.applyTransform([d,c],this.transform)}convertToViewportRectangle(d){const c=st.Util.applyTransform([d[0],d[1]],this.transform),a=st.Util.applyTransform([d[2],d[3]],this.transform);return[c[0],c[1],a[0],a[1]]}convertToPdfPoint(d,c){return st.Util.applyInverseTransform([d,c],this.transform)}}class ot extends st.BaseException{constructor(d,c=0){super(d,"RenderingCancelledException"),this.extraDelay=c}}function T(v){const d=v.length;let c=0;for(;c<d&&v[c].trim()==="";)c++;return v.substring(c,c+5).toLowerCase()==="data:"}function q(v){return typeof v=="string"&&/\.pdf$/i.test(v)}function B(v,d=!1){return d||([v]=v.split(/[#?]/,1)),v.substring(v.lastIndexOf("/")+1)}function W(v,d="document.pdf"){if(typeof v!="string")return d;if(T(v))return(0,st.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),d;const c=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,a=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=c.exec(v);let x=a.exec(o[1])||a.exec(o[2])||a.exec(o[3]);if(x&&(x=x[0],x.includes("%")))try{x=a.exec(decodeURIComponent(x))[0]}catch{}return x||d}class V{constructor(){be(this,"started",Object.create(null));be(this,"times",[])}time(d){d in this.started&&(0,st.warn)(`Timer is already running for ${d}`),this.started[d]=Date.now()}timeEnd(d){d in this.started||(0,st.warn)(`Timer has not been started for ${d}`),this.times.push({name:d,start:this.started[d],end:Date.now()}),delete this.started[d]}toString(){const d=[];let c=0;for(const{name:a}of this.times)c=Math.max(a.length,c);for(const{name:a,start:o,end:x}of this.times)d.push(`${a.padEnd(c)} ${x-o}ms
`);return d.join("")}}function P(v,d){try{const{protocol:c}=d?new URL(v,d):new URL(v);return c==="http:"||c==="https:"}catch{return!1}}function Q(v){v.preventDefault()}let C;class Y{static toDateObject(d){if(!d||typeof d!="string")return null;C||(C=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const c=C.exec(d);if(!c)return null;const a=parseInt(c[1],10);let o=parseInt(c[2],10);o=o>=1&&o<=12?o-1:0;let x=parseInt(c[3],10);x=x>=1&&x<=31?x:1;let l=parseInt(c[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(c[5],10);u=u>=0&&u<=59?u:0;let E=parseInt(c[6],10);E=E>=0&&E<=59?E:0;const j=c[7]||"Z";let _=parseInt(c[8],10);_=_>=0&&_<=23?_:0;let N=parseInt(c[9],10)||0;return N=N>=0&&N<=59?N:0,j==="-"?(l+=_,u+=N):j==="+"&&(l-=_,u-=N),new Date(Date.UTC(a,o,x,l,u,E))}}function ft(v,{scale:d=1,rotation:c=0}){const{width:a,height:o}=v.attributes.style,x=[0,0,parseInt(a),parseInt(o)];return new D({viewBox:x,scale:d,rotation:c})}function xt(v){if(v.startsWith("#")){const d=parseInt(v.slice(1),16);return[(d&16711680)>>16,(d&65280)>>8,d&255]}return v.startsWith("rgb(")?v.slice(4,-1).split(",").map(d=>parseInt(d)):v.startsWith("rgba(")?v.slice(5,-1).split(",").map(d=>parseInt(d)).slice(0,3):((0,st.warn)(`Not a valid color format: "${v}"`),[0,0,0])}function dt(v){const d=document.createElement("span");d.style.visibility="hidden",document.body.append(d);for(const c of v.keys()){d.style.color=c;const a=window.getComputedStyle(d).color;v.set(c,xt(a))}d.remove()}function _t(v){const{a:d,b:c,c:a,d:o,e:x,f:l}=v.getTransform();return[d,c,a,o,x,l]}function Lt(v){const{a:d,b:c,c:a,d:o,e:x,f:l}=v.getTransform().invertSelf();return[d,c,a,o,x,l]}function Gt(v,d,c=!1,a=!0){if(d instanceof D){const{pageWidth:o,pageHeight:x}=d.rawDims,{style:l}=v,u=st.FeatureTest.isCSSRoundSupported,E=`var(--scale-factor) * ${o}px`,j=`var(--scale-factor) * ${x}px`,_=u?`round(${E}, 1px)`:`calc(${E})`,N=u?`round(${j}, 1px)`:`calc(${j})`;!c||d.rotation%180===0?(l.width=_,l.height=N):(l.width=N,l.height=_)}a&&v.setAttribute("data-main-rotation",d.rotation)}},423:(Ot,kt,at)=>{var U,gt,it,H,Ni,z,Bi,D,Ui;at.d(kt,{DrawLayer:()=>A});var h=at(473),st=at(266);const T=class T{constructor({pageIndex:B}){m(this,z);m(this,U,null);m(this,gt,0);m(this,it,new Map);this.pageIndex=B}setParent(B){if(!t(this,U)){O(this,U,B);return}if(t(this,U)!==B){if(t(this,it).size>0)for(const W of t(this,it).values())W.remove(),B.append(W);O(this,U,B)}}static get _svgFactory(){return(0,st.shadow)(this,"_svgFactory",new h.DOMSVGFactory)}highlight({outlines:B,box:W},V,P){var Nt;const Q=Qe(this,gt)._++,C=M(this,z,Bi).call(this,W);C.classList.add("highlight");const Y=T._svgFactory.createElement("defs");C.append(Y);const ft=T._svgFactory.createElement("path");Y.append(ft);const xt=`path_p${this.pageIndex}_${Q}`;ft.setAttribute("id",xt),ft.setAttribute("d",M(Nt=T,D,Ui).call(Nt,B));const dt=T._svgFactory.createElement("clipPath");Y.append(dt);const _t=`clip_${xt}`;dt.setAttribute("id",_t),dt.setAttribute("clipPathUnits","objectBoundingBox");const Lt=T._svgFactory.createElement("use");dt.append(Lt),Lt.setAttribute("href",`#${xt}`),Lt.classList.add("clip");const Gt=T._svgFactory.createElement("use");return C.append(Gt),C.setAttribute("fill",V),C.setAttribute("fill-opacity",P),Gt.setAttribute("href",`#${xt}`),t(this,it).set(Q,C),{id:Q,clipPathId:`url(#${_t})`}}highlightOutline({outlines:B,box:W}){var dt;const V=Qe(this,gt)._++,P=M(this,z,Bi).call(this,W);P.classList.add("highlightOutline");const Q=T._svgFactory.createElement("defs");P.append(Q);const C=T._svgFactory.createElement("path");Q.append(C);const Y=`path_p${this.pageIndex}_${V}`;C.setAttribute("id",Y),C.setAttribute("d",M(dt=T,D,Ui).call(dt,B)),C.setAttribute("vector-effect","non-scaling-stroke");const ft=T._svgFactory.createElement("use");P.append(ft),ft.setAttribute("href",`#${Y}`);const xt=ft.cloneNode();return P.append(xt),ft.classList.add("mainOutline"),xt.classList.add("secondaryOutline"),t(this,it).set(V,P),V}updateBox(B,W){var V;M(V=T,H,Ni).call(V,t(this,it).get(B),W)}rotate(B,W){t(this,it).get(B).setAttribute("data-main-rotation",W)}changeColor(B,W){t(this,it).get(B).setAttribute("fill",W)}changeOpacity(B,W){t(this,it).get(B).setAttribute("fill-opacity",W)}addClass(B,W){t(this,it).get(B).classList.add(W)}removeClass(B,W){t(this,it).get(B).classList.remove(W)}remove(B){t(this,U)!==null&&(t(this,it).get(B).remove(),t(this,it).delete(B))}destroy(){O(this,U,null);for(const B of t(this,it).values())B.remove();t(this,it).clear()}};U=new WeakMap,gt=new WeakMap,it=new WeakMap,H=new WeakSet,Ni=function(B,{x:W,y:V,width:P,height:Q}){const{style:C}=B;C.top=`${100*V}%`,C.left=`${100*W}%`,C.width=`${100*P}%`,C.height=`${100*Q}%`},z=new WeakSet,Bi=function(B){var V;const W=T._svgFactory.create(1,1,!0);return t(this,U).append(W),M(V=T,H,Ni).call(V,W,B),W},D=new WeakSet,Ui=function(B){const W=[];for(const V of B){let[P,Q]=V;W.push(`M${P} ${Q}`);for(let C=2;C<V.length;C+=2){const Y=V[C],ft=V[C+1];Y===P?(W.push(`V${ft}`),Q=ft):ft===Q&&(W.push(`H${Y}`),P=Y)}W.push("Z")}return W.join(" ")},m(T,H),m(T,D);let A=T},629:(Ot,kt,at)=>{var T,q,B,W,V,P,Q,C,Y,ft,Fn,dt,On,Lt,Nn,Nt,Gs,Xt,Hi,Jt,Bn,oe,zi,re,Wt,le,ie,he,jt,me,pe,Zt,ne,ye,ji,s,Un,f,qi,b,gi,d,Wi,a,Hn,x,zn,E,j,_,N,Z,J,K,lt,I,g,L,$,ht,ut,bt,Et,jn,Bt,qn,Ht,Wn,R,$n,At,$i,Pt,Gn,p,Gi,r,Yn,F,Kn,rt,Vn,Tt,Xn,zt,Jn,Mt,Ze,qt,Yi,ce,fi,Se,mi,Me,Ts,Fe,Ki,Oe,bi,ue,Qn,ks,Vi,Zs,Zn,ti,tr,Ms,Xi,bs,vi,es,Rs,Le,De,ss,Ye,is,vs,Ke,ls,qe,He,Ps,cs,Ys,ds,Ks,As,Ai,Ls,Ji,ei,er,si,sr,Ds,Qi,ys,yi,ii,ir,us,ws,Ve,Fs,ni,Os,Xe,Ns,Ne,ns,_s,Es,Je,de,rs,Bs,Zi,Us,tn,ps,Vs,Hs,en,zs,sn;at.d(kt,{AnnotationEditorLayer:()=>ot});var h=at(266),st=at(115),A=at(812),U=at(640);const Yt=class Yt extends st.AnnotationEditor{constructor(n){super({...n,name:"freeTextEditor"});m(this,ft);m(this,dt);m(this,Lt);m(this,Nt);m(this,Xt);m(this,Jt);m(this,oe);m(this,T,this.editorDivBlur.bind(this));m(this,q,this.editorDivFocus.bind(this));m(this,B,this.editorDivInput.bind(this));m(this,W,this.editorDivKeydown.bind(this));m(this,V,void 0);m(this,P,"");m(this,Q,`${this.id}-editor`);m(this,C,void 0);m(this,Y,null);O(this,V,n.color||Yt._defaultColor||st.AnnotationEditor._defaultLineColor),O(this,C,n.fontSize||Yt._defaultFontSize)}static get _keyboardManager(){const n=Yt.prototype,y=mt=>mt.isEmpty(),et=A.AnnotationEditorUIManager.TRANSLATE_SMALL,ct=A.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new A.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-et,0],checker:y}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-ct,0],checker:y}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[et,0],checker:y}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[ct,0],checker:y}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-et],checker:y}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-ct],checker:y}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,et],checker:y}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,ct],checker:y}]]))}static initialize(n){st.AnnotationEditor.initialize(n,{strings:["pdfjs-free-text-default-content"]});const y=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(y.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,y){switch(n){case h.AnnotationEditorParamsType.FREETEXT_SIZE:Yt._defaultFontSize=y;break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:Yt._defaultColor=y;break}}updateParams(n,y){switch(n){case h.AnnotationEditorParamsType.FREETEXT_SIZE:M(this,ft,Fn).call(this,y);break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:M(this,dt,On).call(this,y);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,Yt._defaultFontSize],[h.AnnotationEditorParamsType.FREETEXT_COLOR,Yt._defaultColor||st.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,C)],[h.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,V)]]}_translateEmpty(n,y){this._uiManager.translateSelectedEditors(n,y,!0)}getInitialTranslation(){const n=this.parentScale;return[-Yt._internalPadding*n,-(Yt._internalPadding+t(this,C))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(h.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,W)),this.editorDiv.addEventListener("focus",t(this,q)),this.editorDiv.addEventListener("blur",t(this,T)),this.editorDiv.addEventListener("input",t(this,B)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,Q)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,W)),this.editorDiv.removeEventListener("focus",t(this,q)),this.editorDiv.removeEventListener("blur",t(this,T)),this.editorDiv.removeEventListener("input",t(this,B)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var n;if(this.width){M(this,oe,zi).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=t(this,P),y=O(this,P,M(this,Lt,Nn).call(this).trimEnd());if(n===y)return;const et=ct=>{if(O(this,P,ct),!ct){this.remove();return}M(this,Xt,Hi).call(this),this._uiManager.rebuild(this),M(this,Nt,Gs).call(this)};this.addCommands({cmd:()=>{et(y)},undo:()=>{et(n)},mustExec:!1}),M(this,Nt,Gs).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(n){this.enterInEditMode()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){Yt._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let n,y;this.width&&(n=this.x,y=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,Q)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),st.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(ct=>{var mt;return(mt=this.editorDiv)==null?void 0:mt.setAttribute("default-content",ct)}),this.editorDiv.contentEditable=!0;const{style:et}=this.editorDiv;if(et.fontSize=`calc(${t(this,C)}px * var(--scale-factor))`,et.color=t(this,V),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,A.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ct,mt]=this.parentDimensions;if(this.annotationElementId){const{position:Rt}=t(this,Y);let[Ft,wt]=this.getInitialTranslation();[Ft,wt]=this.pageTranslationToScreen(Ft,wt);const[Ut,$t]=this.pageDimensions,[ge,Ae]=this.pageTranslation;let Ee,xe;switch(this.rotation){case 0:Ee=n+(Rt[0]-ge)/Ut,xe=y+this.height-(Rt[1]-Ae)/$t;break;case 90:Ee=n+(Rt[0]-ge)/Ut,xe=y-(Rt[1]-Ae)/$t,[Ft,wt]=[wt,-Ft];break;case 180:Ee=n-this.width+(Rt[0]-ge)/Ut,xe=y-(Rt[1]-Ae)/$t,[Ft,wt]=[-Ft,-wt];break;case 270:Ee=n+(Rt[0]-ge-this.height*$t)/Ut,xe=y+(Rt[1]-Ae-this.width*Ut)/$t,[Ft,wt]=[-wt,Ft];break}this.setAt(Ee*ct,xe*mt,Ft,wt)}else this.setAt(n*ct,y*mt,this.width*ct,this.height*mt);M(this,Xt,Hi).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(n,y,et){let ct=null;if(n instanceof U.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Rt,fontColor:Ft},rect:wt,rotation:Ut,id:$t},textContent:ge,textPosition:Ae,parent:{page:{pageNumber:Ee}}}=n;if(!ge||ge.length===0)return null;ct=n={annotationType:h.AnnotationEditorType.FREETEXT,color:Array.from(Ft),fontSize:Rt,value:ge.join(`
`),position:Ae,pageIndex:Ee-1,rect:wt,rotation:Ut,id:$t,deleted:!1}}const mt=super.deserialize(n,y,et);return O(mt,C,n.fontSize),O(mt,V,h.Util.makeHexColor(...n.color)),O(mt,P,n.value),mt.annotationElementId=n.id||null,O(mt,Y,ct),mt}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const y=Yt._internalPadding*this.parentScale,et=this.getRect(y,y),ct=st.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,V)),mt={annotationType:h.AnnotationEditorType.FREETEXT,color:ct,fontSize:t(this,C),value:t(this,P),pageIndex:this.pageIndex,rect:et,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?mt:this.annotationElementId&&!M(this,Jt,Bn).call(this,mt)?null:(mt.id=this.annotationElementId,mt)}};T=new WeakMap,q=new WeakMap,B=new WeakMap,W=new WeakMap,V=new WeakMap,P=new WeakMap,Q=new WeakMap,C=new WeakMap,Y=new WeakMap,ft=new WeakSet,Fn=function(n){const y=ct=>{this.editorDiv.style.fontSize=`calc(${ct}px * var(--scale-factor))`,this.translate(0,-(ct-t(this,C))*this.parentScale),O(this,C,ct),M(this,Nt,Gs).call(this)},et=t(this,C);this.addCommands({cmd:()=>{y(n)},undo:()=>{y(et)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},dt=new WeakSet,On=function(n){const y=t(this,V);this.addCommands({cmd:()=>{O(this,V,this.editorDiv.style.color=n)},undo:()=>{O(this,V,this.editorDiv.style.color=y)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Lt=new WeakSet,Nn=function(){const n=this.editorDiv.getElementsByTagName("div");if(n.length===0)return this.editorDiv.innerText;const y=[];for(const et of n)y.push(et.innerText.replace(/\r\n?|\n/,""));return y.join(`
`)},Nt=new WeakSet,Gs=function(){const[n,y]=this.parentDimensions;let et;if(this.isAttachedToDOM)et=this.div.getBoundingClientRect();else{const{currentLayer:ct,div:mt}=this,Rt=mt.style.display;mt.style.display="hidden",ct.div.append(this.div),et=mt.getBoundingClientRect(),mt.remove(),mt.style.display=Rt}this.rotation%180===this.parentRotation%180?(this.width=et.width/n,this.height=et.height/y):(this.width=et.height/n,this.height=et.width/y),this.fixAndSetPosition()},Xt=new WeakSet,Hi=function(){if(this.editorDiv.replaceChildren(),!!t(this,P))for(const n of t(this,P).split(`
`)){const y=document.createElement("div");y.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(y)}},Jt=new WeakSet,Bn=function(n){const{value:y,fontSize:et,color:ct,rect:mt,pageIndex:Rt}=t(this,Y);return n.value!==y||n.fontSize!==et||n.rect.some((Ft,wt)=>Math.abs(Ft-mt[wt])>=1)||n.color.some((Ft,wt)=>Ft!==ct[wt])||n.pageIndex!==Rt},oe=new WeakSet,zi=function(n=!1){if(!this.annotationElementId)return;if(M(this,Nt,Gs).call(this),!n&&(this.width===0||this.height===0)){setTimeout(()=>M(this,oe,zi).call(this,!0),0);return}const y=Yt._internalPadding*this.parentScale;t(this,Y).rect=this.getRect(y,y)},be(Yt,"_freeTextDefaultContent",""),be(Yt,"_internalPadding",0),be(Yt,"_defaultColor",null),be(Yt,"_defaultFontSize",10),be(Yt,"_type","freetext"),be(Yt,"_editorType",h.AnnotationEditorType.FREETEXT);let gt=Yt;var it=at(97),H=at(405);const u=class u extends st.AnnotationEditor{constructor(n){var y;super({...n,name:"highlightEditor"});m(this,ye);m(this,s);m(this,f);m(this,b);m(this,a);m(this,x);m(this,re,void 0);m(this,Wt,null);m(this,le,null);m(this,ie,null);m(this,he,null);m(this,jt,null);m(this,me,null);m(this,pe,null);m(this,Zt,void 0);m(this,ne,null);u._defaultColor||(u._defaultColor=((y=this._uiManager.highlightColors)==null?void 0:y.values().next().value)||"#fff066"),this.color=n.color||u._defaultColor,O(this,Zt,n.opacity||u._defaultOpacity),O(this,re,n.boxes||null),this._isDraggable=!1,M(this,ye,ji).call(this),M(this,b,gi).call(this),this.rotate(this.rotation)}static initialize(n){st.AnnotationEditor.initialize(n)}static updateDefaultParams(n,y){switch(n){case h.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:u._defaultColor=y;break}}get toolbarPosition(){return t(this,pe)}updateParams(n,y){switch(n){case h.AnnotationEditorParamsType.HIGHLIGHT_COLOR:M(this,s,Un).call(this,y);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,u._defaultColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||u._defaultColor]]}async addEditToolbar(){const n=await super.addEditToolbar();return n?(this._uiManager.highlightColors&&(O(this,le,new it.ColorPicker({editor:this})),n.addColorPicker(t(this,le))),n):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(0)}getRect(n,y){return super.getRect(n,y,0)}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){super.remove(),M(this,f,qi).call(this)}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(M(this,b,gi).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var et;let y=!1;this.parent&&!n?M(this,f,qi).call(this):n&&(M(this,b,gi).call(this,n),y=!this.parent&&((et=this.div)==null?void 0:et.classList.contains("selectedEditor"))),super.setParent(n),y&&this.select()}rotate(n){var et,ct;const{drawLayer:y}=this.parent;y.rotate(t(this,me),n),y.rotate(t(this,ne),n),y.updateBox(t(this,me),M(et=u,d,Wi).call(et,this,n)),y.updateBox(t(this,ne),M(ct=u,d,Wi).call(ct,t(this,ie).box,n))}render(){if(this.div)return this.div;const n=super.render(),y=O(this,he,document.createElement("div"));n.append(y),y.className="internal",y.style.clipPath=t(this,Wt);const[et,ct]=this.parentDimensions;return this.setDims(this.width*et,this.height*ct),(0,A.bindEvents)(this,t(this,he),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){this.parent.drawLayer.addClass(t(this,ne),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(t(this,ne),"hovered")}select(){var n,y;super.select(),(n=this.parent)==null||n.drawLayer.removeClass(t(this,ne),"hovered"),(y=this.parent)==null||y.drawLayer.addClass(t(this,ne),"selected")}unselect(){var n;super.unselect(),(n=this.parent)==null||n.drawLayer.removeClass(t(this,ne),"selected")}static deserialize(n,y,et){var ge;const ct=super.deserialize(n,y,et),{rect:mt,color:Rt,quadPoints:Ft}=n;ct.color=h.Util.makeHexColor(...Rt),O(ct,Zt,n.opacity);const[wt,Ut]=ct.pageDimensions;ct.width=(mt[2]-mt[0])/wt,ct.height=(mt[3]-mt[1])/Ut;const $t=O(ct,re,[]);for(let Ae=0;Ae<Ft.length;Ae+=8)$t.push({x:Ft[4]/wt,y:1-Ft[Ae+5]/Ut,width:(Ft[Ae+2]-Ft[Ae])/wt,height:(Ft[Ae+5]-Ft[Ae+1])/Ut});return M(ge=ct,ye,ji).call(ge),ct}serialize(n=!1){if(this.isEmpty()||n)return null;const y=this.getRect(0,0),et=st.AnnotationEditor._colorManager.convert(this.color);return{annotationType:h.AnnotationEditorType.HIGHLIGHT,color:et,opacity:t(this,Zt),quadPoints:M(this,a,Hn).call(this),outlines:M(this,x,zn).call(this),pageIndex:this.pageIndex,rect:y,rotation:0,structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};re=new WeakMap,Wt=new WeakMap,le=new WeakMap,ie=new WeakMap,he=new WeakMap,jt=new WeakMap,me=new WeakMap,pe=new WeakMap,Zt=new WeakMap,ne=new WeakMap,ye=new WeakSet,ji=function(){const n=new H.Outliner(t(this,re),.001);O(this,jt,n.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=t(this,jt).box;const y=new H.Outliner(t(this,re),.0025,.001,this._uiManager.direction==="ltr");O(this,ie,y.getOutlines());const{lastPoint:et}=t(this,ie).box;O(this,pe,[(et[0]-this.x)/this.width,(et[1]-this.y)/this.height])},s=new WeakSet,Un=function(n){const y=this.color;this.addCommands({cmd:()=>{var et;this.color=n,this.parent.drawLayer.changeColor(t(this,me),n),(et=t(this,le))==null||et.updateColor(n)},undo:()=>{var et;this.color=y,this.parent.drawLayer.changeColor(t(this,me),y),(et=t(this,le))==null||et.updateColor(y)},mustExec:!0,type:h.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,qi=function(){t(this,me)===null||!this.parent||(this.parent.drawLayer.remove(t(this,me)),O(this,me,null),this.parent.drawLayer.remove(t(this,ne)),O(this,ne,null))},b=new WeakSet,gi=function(n=this.parent){t(this,me)===null&&({id:Qe(this,me)._,clipPathId:Qe(this,Wt)._}=n.drawLayer.highlight(t(this,jt),this.color,t(this,Zt)),t(this,he)&&(t(this,he).style.clipPath=t(this,Wt)),O(this,ne,n.drawLayer.highlightOutline(t(this,ie))))},d=new WeakSet,Wi=function({x:n,y,width:et,height:ct},mt){switch(mt){case 90:return{x:1-y-ct,y:n,width:ct,height:et};case 180:return{x:1-n-et,y:1-y-ct,width:et,height:ct};case 270:return{x:y,y:1-n-et,width:ct,height:et}}return{x:n,y,width:et,height:ct}},a=new WeakSet,Hn=function(){const[n,y]=this.pageDimensions,et=t(this,re),ct=new Array(et.length*8);let mt=0;for(const{x:Rt,y:Ft,width:wt,height:Ut}of et){const $t=Rt*n,ge=(1-Ft-Ut)*y;ct[mt]=ct[mt+4]=$t,ct[mt+1]=ct[mt+3]=ge,ct[mt+2]=ct[mt+6]=$t+wt*n,ct[mt+5]=ct[mt+7]=ge+Ut*y,mt+=8}return ct},x=new WeakSet,zn=function(){const[n,y]=this.pageDimensions,et=this.width*n,ct=this.height*y,mt=this.x*n,Rt=(1-this.y-this.height)*y,Ft=[];for(const wt of t(this,jt).outlines){const Ut=new Array(wt.length);for(let $t=0;$t<wt.length;$t+=2)Ut[$t]=mt+wt[$t]*et,Ut[$t+1]=Rt+(1-wt[$t+1])*ct;Ft.push(Ut)}return Ft},m(u,d),be(u,"_defaultColor",null),be(u,"_defaultOpacity",1),be(u,"_l10nPromise"),be(u,"_type","highlight"),be(u,"_editorType",h.AnnotationEditorType.HIGHLIGHT);let w=u;var z=at(473);const Re=class Re extends st.AnnotationEditor{constructor(n){super({...n,name:"inkEditor"});m(this,Et);m(this,Bt);m(this,Ht);m(this,R);m(this,At);m(this,Pt);m(this,p);m(this,r);m(this,F);m(this,rt);m(this,Tt);m(this,zt);m(this,Mt);m(this,qt);m(this,ce);m(this,Se);m(this,Me);m(this,Fe);m(this,Oe);m(this,ti);m(this,Ms);m(this,bs);m(this,es);m(this,E,0);m(this,j,0);m(this,_,this.canvasPointermove.bind(this));m(this,N,this.canvasPointerleave.bind(this));m(this,Z,this.canvasPointerup.bind(this));m(this,J,this.canvasPointerdown.bind(this));m(this,K,null);m(this,lt,new Path2D);m(this,I,!1);m(this,g,!1);m(this,L,!1);m(this,$,null);m(this,ht,0);m(this,ut,0);m(this,bt,null);this.color=n.color||null,this.thickness=n.thickness||null,this.opacity=n.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(n){st.AnnotationEditor.initialize(n)}static updateDefaultParams(n,y){switch(n){case h.AnnotationEditorParamsType.INK_THICKNESS:Re._defaultThickness=y;break;case h.AnnotationEditorParamsType.INK_COLOR:Re._defaultColor=y;break;case h.AnnotationEditorParamsType.INK_OPACITY:Re._defaultOpacity=y/100;break}}updateParams(n,y){switch(n){case h.AnnotationEditorParamsType.INK_THICKNESS:M(this,Et,jn).call(this,y);break;case h.AnnotationEditorParamsType.INK_COLOR:M(this,Bt,qn).call(this,y);break;case h.AnnotationEditorParamsType.INK_OPACITY:M(this,Ht,Wn).call(this,y);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,Re._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,Re._defaultColor||st.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(Re._defaultOpacity*100)]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Re._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,this.color||Re._defaultColor||st.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Re._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(M(this,ce,fi).call(this),M(this,Se,mi).call(this)),this.isAttachedToDOM||(this.parent.add(this),M(this,Me,Ts).call(this)),M(this,es,Rs).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,K)&&(clearTimeout(t(this,K)),O(this,K,null)),t(this,$).disconnect(),O(this,$,null),super.remove())}setParent(n){!this.parent&&n?this._uiManager.removeShouldRescale(this):this.parent&&n===null&&this._uiManager.addShouldRescale(this),super.setParent(n)}onScaleChanging(){const[n,y]=this.parentDimensions,et=this.width*n,ct=this.height*y;this.setDimensions(et,ct)}enableEditMode(){t(this,I)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,J)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,J)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,I)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),O(this,I,!0),this.div.classList.add("disabled"),M(this,es,Rs).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(n){this._focusEventsAllowed&&(super.focusin(n),this.enableEditMode())}canvasPointerdown(n){n.button!==0||!this.isInEditMode()||t(this,I)||(this.setInForeground(),n.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),M(this,Pt,Gn).call(this,n.offsetX,n.offsetY))}canvasPointermove(n){n.preventDefault(),M(this,p,Gi).call(this,n.offsetX,n.offsetY)}canvasPointerup(n){n.preventDefault(),M(this,qt,Yi).call(this,n)}canvasPointerleave(n){M(this,qt,Yi).call(this,n)}get isResizable(){return!this.isEmpty()&&t(this,I)}render(){if(this.div)return this.div;let n,y;this.width&&(n=this.x,y=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[et,ct,mt,Rt]=M(this,R,$n).call(this);if(this.setAt(et,ct,0,0),this.setDims(mt,Rt),M(this,ce,fi).call(this),this.width){const[Ft,wt]=this.parentDimensions;this.setAspectRatio(this.width*Ft,this.height*wt),this.setAt(n*Ft,y*wt,this.width*Ft,this.height*wt),O(this,L,!0),M(this,Me,Ts).call(this),this.setDims(this.width*Ft,this.height*wt),M(this,Mt,Ze).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return M(this,Se,mi).call(this),this.div}setDimensions(n,y){const et=Math.round(n),ct=Math.round(y);if(t(this,ht)===et&&t(this,ut)===ct)return;O(this,ht,et),O(this,ut,ct),this.canvas.style.visibility="hidden";const[mt,Rt]=this.parentDimensions;this.width=n/mt,this.height=y/Rt,this.fixAndSetPosition(),t(this,I)&&M(this,Fe,Ki).call(this,n,y),M(this,Me,Ts).call(this),M(this,Mt,Ze).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(n,y,et){var gs,We,$e;if(n instanceof U.InkAnnotationElement)return null;const ct=super.deserialize(n,y,et);ct.thickness=n.thickness,ct.color=h.Util.makeHexColor(...n.color),ct.opacity=n.opacity;const[mt,Rt]=ct.pageDimensions,Ft=ct.width*mt,wt=ct.height*Rt,Ut=ct.parentScale,$t=n.thickness/2;O(ct,I,!0),O(ct,ht,Math.round(Ft)),O(ct,ut,Math.round(wt));const{paths:ge,rect:Ae,rotation:Ee}=n;for(let{bezier:Ie}of ge){Ie=M(gs=Re,Zs,Zn).call(gs,Ie,Ae,Ee);const as=[];ct.paths.push(as);let js=Ut*(Ie[0]-$t),qs=Ut*(Ie[1]-$t);for(let je=2,Ci=Ie.length;je<Ci;je+=6){const Ti=Ut*(Ie[je]-$t),ai=Ut*(Ie[je+1]-$t),oi=Ut*(Ie[je+2]-$t),Nr=Ut*(Ie[je+3]-$t),Rn=Ut*(Ie[je+4]-$t),kn=Ut*(Ie[je+5]-$t);as.push([[js,qs],[Ti,ai],[oi,Nr],[Rn,kn]]),js=Rn,qs=kn}const ri=M(this,ue,Qn).call(this,as);ct.bezierPath2D.push(ri)}const xe=M(We=ct,Ms,Xi).call(We);return O(ct,j,Math.max(st.AnnotationEditor.MIN_SIZE,xe[2]-xe[0])),O(ct,E,Math.max(st.AnnotationEditor.MIN_SIZE,xe[3]-xe[1])),M($e=ct,Fe,Ki).call($e,Ft,wt),ct}serialize(){if(this.isEmpty())return null;const n=this.getRect(0,0),y=st.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:h.AnnotationEditorType.INK,color:y,thickness:this.thickness,opacity:this.opacity,paths:M(this,ti,tr).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,n),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};E=new WeakMap,j=new WeakMap,_=new WeakMap,N=new WeakMap,Z=new WeakMap,J=new WeakMap,K=new WeakMap,lt=new WeakMap,I=new WeakMap,g=new WeakMap,L=new WeakMap,$=new WeakMap,ht=new WeakMap,ut=new WeakMap,bt=new WeakMap,Et=new WeakSet,jn=function(n){const y=this.thickness;this.addCommands({cmd:()=>{this.thickness=n,M(this,es,Rs).call(this)},undo:()=>{this.thickness=y,M(this,es,Rs).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Bt=new WeakSet,qn=function(n){const y=this.color;this.addCommands({cmd:()=>{this.color=n,M(this,Mt,Ze).call(this)},undo:()=>{this.color=y,M(this,Mt,Ze).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ht=new WeakSet,Wn=function(n){n/=100;const y=this.opacity;this.addCommands({cmd:()=>{this.opacity=n,M(this,Mt,Ze).call(this)},undo:()=>{this.opacity=y,M(this,Mt,Ze).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},R=new WeakSet,$n=function(){const{parentRotation:n,parentDimensions:[y,et]}=this;switch(n){case 90:return[0,et,et,y];case 180:return[y,et,y,et];case 270:return[y,0,et,y];default:return[0,0,y,et]}},At=new WeakSet,$i=function(){const{ctx:n,color:y,opacity:et,thickness:ct,parentScale:mt,scaleFactor:Rt}=this;n.lineWidth=ct*mt/Rt,n.lineCap="round",n.lineJoin="round",n.miterLimit=10,n.strokeStyle=`${y}${(0,A.opacityToHex)(et)}`},Pt=new WeakSet,Gn=function(n,y){this.canvas.addEventListener("contextmenu",z.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,N)),this.canvas.addEventListener("pointermove",t(this,_)),this.canvas.addEventListener("pointerup",t(this,Z)),this.canvas.removeEventListener("pointerdown",t(this,J)),this.isEditing=!0,t(this,L)||(O(this,L,!0),M(this,Me,Ts).call(this),this.thickness||(this.thickness=Re._defaultThickness),this.color||(this.color=Re._defaultColor||st.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Re._defaultOpacity)),this.currentPath.push([n,y]),O(this,g,!1),M(this,At,$i).call(this),O(this,bt,()=>{M(this,rt,Vn).call(this),t(this,bt)&&window.requestAnimationFrame(t(this,bt))}),window.requestAnimationFrame(t(this,bt))},p=new WeakSet,Gi=function(n,y){const[et,ct]=this.currentPath.at(-1);if(this.currentPath.length>1&&n===et&&y===ct)return;const mt=this.currentPath;let Rt=t(this,lt);if(mt.push([n,y]),O(this,g,!0),mt.length<=2){Rt.moveTo(...mt[0]),Rt.lineTo(n,y);return}mt.length===3&&(O(this,lt,Rt=new Path2D),Rt.moveTo(...mt[0])),M(this,Tt,Xn).call(this,Rt,...mt.at(-3),...mt.at(-2),n,y)},r=new WeakSet,Yn=function(){if(this.currentPath.length===0)return;const n=this.currentPath.at(-1);t(this,lt).lineTo(...n)},F=new WeakSet,Kn=function(n,y){O(this,bt,null),n=Math.min(Math.max(n,0),this.canvas.width),y=Math.min(Math.max(y,0),this.canvas.height),M(this,p,Gi).call(this,n,y),M(this,r,Yn).call(this);let et;if(this.currentPath.length!==1)et=M(this,zt,Jn).call(this);else{const wt=[n,y];et=[[wt,wt.slice(),wt.slice(),wt]]}const ct=t(this,lt),mt=this.currentPath;this.currentPath=[],O(this,lt,new Path2D);const Rt=()=>{this.allRawPaths.push(mt),this.paths.push(et),this.bezierPath2D.push(ct),this.rebuild()},Ft=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(M(this,ce,fi).call(this),M(this,Se,mi).call(this)),M(this,es,Rs).call(this))};this.addCommands({cmd:Rt,undo:Ft,mustExec:!0})},rt=new WeakSet,Vn=function(){if(!t(this,g))return;O(this,g,!1);const n=Math.ceil(this.thickness*this.parentScale),y=this.currentPath.slice(-3),et=y.map(Rt=>Rt[0]),ct=y.map(Rt=>Rt[1]);Math.min(...et)-n,Math.max(...et)+n,Math.min(...ct)-n,Math.max(...ct)+n;const{ctx:mt}=this;mt.save(),mt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Rt of this.bezierPath2D)mt.stroke(Rt);mt.stroke(t(this,lt)),mt.restore()},Tt=new WeakSet,Xn=function(n,y,et,ct,mt,Rt,Ft){const wt=(y+ct)/2,Ut=(et+mt)/2,$t=(ct+Rt)/2,ge=(mt+Ft)/2;n.bezierCurveTo(wt+2*(ct-wt)/3,Ut+2*(mt-Ut)/3,$t+2*(ct-$t)/3,ge+2*(mt-ge)/3,$t,ge)},zt=new WeakSet,Jn=function(){const n=this.currentPath;if(n.length<=2)return[[n[0],n[0],n.at(-1),n.at(-1)]];const y=[];let et,[ct,mt]=n[0];for(et=1;et<n.length-2;et++){const[Ae,Ee]=n[et],[xe,gs]=n[et+1],We=(Ae+xe)/2,$e=(Ee+gs)/2,Ie=[ct+2*(Ae-ct)/3,mt+2*(Ee-mt)/3],as=[We+2*(Ae-We)/3,$e+2*(Ee-$e)/3];y.push([[ct,mt],Ie,as,[We,$e]]),[ct,mt]=[We,$e]}const[Rt,Ft]=n[et],[wt,Ut]=n[et+1],$t=[ct+2*(Rt-ct)/3,mt+2*(Ft-mt)/3],ge=[wt+2*(Rt-wt)/3,Ut+2*(Ft-Ut)/3];return y.push([[ct,mt],$t,ge,[wt,Ut]]),y},Mt=new WeakSet,Ze=function(){if(this.isEmpty()){M(this,Oe,bi).call(this);return}M(this,At,$i).call(this);const{canvas:n,ctx:y}=this;y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,n.width,n.height),M(this,Oe,bi).call(this);for(const et of this.bezierPath2D)y.stroke(et)},qt=new WeakSet,Yi=function(n){this.canvas.removeEventListener("pointerleave",t(this,N)),this.canvas.removeEventListener("pointermove",t(this,_)),this.canvas.removeEventListener("pointerup",t(this,Z)),this.canvas.addEventListener("pointerdown",t(this,J)),t(this,K)&&clearTimeout(t(this,K)),O(this,K,setTimeout(()=>{O(this,K,null),this.canvas.removeEventListener("contextmenu",z.noContextMenu)},10)),M(this,F,Kn).call(this,n.offsetX,n.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ce=new WeakSet,fi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Se=new WeakSet,mi=function(){O(this,$,new ResizeObserver(n=>{const y=n[0].contentRect;y.width&&y.height&&this.setDimensions(y.width,y.height)})),t(this,$).observe(this.div)},Me=new WeakSet,Ts=function(){if(!t(this,L))return;const[n,y]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*n),this.canvas.height=Math.ceil(this.height*y),M(this,Oe,bi).call(this)},Fe=new WeakSet,Ki=function(n,y){const et=M(this,bs,vi).call(this),ct=(n-et)/t(this,j),mt=(y-et)/t(this,E);this.scaleFactor=Math.min(ct,mt)},Oe=new WeakSet,bi=function(){const n=M(this,bs,vi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+n,this.translationY*this.scaleFactor+n)},ue=new WeakSet,Qn=function(n){const y=new Path2D;for(let et=0,ct=n.length;et<ct;et++){const[mt,Rt,Ft,wt]=n[et];et===0&&y.moveTo(...mt),y.bezierCurveTo(Rt[0],Rt[1],Ft[0],Ft[1],wt[0],wt[1])}return y},ks=new WeakSet,Vi=function(n,y,et){const[ct,mt,Rt,Ft]=y;switch(et){case 0:for(let wt=0,Ut=n.length;wt<Ut;wt+=2)n[wt]+=ct,n[wt+1]=Ft-n[wt+1];break;case 90:for(let wt=0,Ut=n.length;wt<Ut;wt+=2){const $t=n[wt];n[wt]=n[wt+1]+ct,n[wt+1]=$t+mt}break;case 180:for(let wt=0,Ut=n.length;wt<Ut;wt+=2)n[wt]=Rt-n[wt],n[wt+1]+=mt;break;case 270:for(let wt=0,Ut=n.length;wt<Ut;wt+=2){const $t=n[wt];n[wt]=Rt-n[wt+1],n[wt+1]=Ft-$t}break;default:throw new Error("Invalid rotation")}return n},Zs=new WeakSet,Zn=function(n,y,et){const[ct,mt,Rt,Ft]=y;switch(et){case 0:for(let wt=0,Ut=n.length;wt<Ut;wt+=2)n[wt]-=ct,n[wt+1]=Ft-n[wt+1];break;case 90:for(let wt=0,Ut=n.length;wt<Ut;wt+=2){const $t=n[wt];n[wt]=n[wt+1]-mt,n[wt+1]=$t-ct}break;case 180:for(let wt=0,Ut=n.length;wt<Ut;wt+=2)n[wt]=Rt-n[wt],n[wt+1]-=mt;break;case 270:for(let wt=0,Ut=n.length;wt<Ut;wt+=2){const $t=n[wt];n[wt]=Ft-n[wt+1],n[wt+1]=Rt-$t}break;default:throw new Error("Invalid rotation")}return n},ti=new WeakSet,tr=function(n,y,et,ct){var Ut,$t;const mt=[],Rt=this.thickness/2,Ft=n*y+Rt,wt=n*et+Rt;for(const ge of this.paths){const Ae=[],Ee=[];for(let xe=0,gs=ge.length;xe<gs;xe++){const[We,$e,Ie,as]=ge[xe],js=n*We[0]+Ft,qs=n*We[1]+wt,ri=n*$e[0]+Ft,je=n*$e[1]+wt,Ci=n*Ie[0]+Ft,Ti=n*Ie[1]+wt,ai=n*as[0]+Ft,oi=n*as[1]+wt;xe===0&&(Ae.push(js,qs),Ee.push(js,qs)),Ae.push(ri,je,Ci,Ti,ai,oi),Ee.push(ri,je),xe===gs-1&&Ee.push(ai,oi)}mt.push({bezier:M(Ut=Re,ks,Vi).call(Ut,Ae,ct,this.rotation),points:M($t=Re,ks,Vi).call($t,Ee,ct,this.rotation)})}return mt},Ms=new WeakSet,Xi=function(){let n=1/0,y=-1/0,et=1/0,ct=-1/0;for(const mt of this.paths)for(const[Rt,Ft,wt,Ut]of mt){const $t=h.Util.bezierBoundingBox(...Rt,...Ft,...wt,...Ut);n=Math.min(n,$t[0]),et=Math.min(et,$t[1]),y=Math.max(y,$t[2]),ct=Math.max(ct,$t[3])}return[n,et,y,ct]},bs=new WeakSet,vi=function(){return t(this,I)?Math.ceil(this.thickness*this.parentScale):0},es=new WeakSet,Rs=function(n=!1){if(this.isEmpty())return;if(!t(this,I)){M(this,Mt,Ze).call(this);return}const y=M(this,Ms,Xi).call(this),et=M(this,bs,vi).call(this);O(this,j,Math.max(st.AnnotationEditor.MIN_SIZE,y[2]-y[0])),O(this,E,Math.max(st.AnnotationEditor.MIN_SIZE,y[3]-y[1]));const ct=Math.ceil(et+t(this,j)*this.scaleFactor),mt=Math.ceil(et+t(this,E)*this.scaleFactor),[Rt,Ft]=this.parentDimensions;this.width=ct/Rt,this.height=mt/Ft,this.setAspectRatio(ct,mt);const wt=this.translationX,Ut=this.translationY;this.translationX=-y[0],this.translationY=-y[1],M(this,Me,Ts).call(this),M(this,Mt,Ze).call(this),O(this,ht,ct),O(this,ut,mt),this.setDims(ct,mt);const $t=n?et/this.scaleFactor/2:0;this.translate(wt-this.translationX-$t,Ut-this.translationY-$t)},m(Re,ue),m(Re,ks),m(Re,Zs),be(Re,"_defaultColor",null),be(Re,"_defaultOpacity",1),be(Re,"_defaultThickness",1),be(Re,"_type","ink"),be(Re,"_editorType",h.AnnotationEditorType.INK);let G=Re;const Is=class Is extends st.AnnotationEditor{constructor(n){super({...n,name:"stampEditor"});m(this,cs);m(this,ds);m(this,As);m(this,Ls);m(this,ei);m(this,si);m(this,Ds);m(this,ys);m(this,ii);m(this,Le,null);m(this,De,null);m(this,ss,null);m(this,Ye,null);m(this,is,null);m(this,vs,"");m(this,Ke,null);m(this,ls,null);m(this,qe,null);m(this,He,!1);m(this,Ps,!1);O(this,Ye,n.bitmapUrl),O(this,is,n.bitmapFile)}static initialize(n){st.AnnotationEditor.initialize(n)}static get supportedTypes(){const n=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,h.shadow)(this,"supportedTypes",n.map(y=>`image/${y}`))}static get supportedTypesStr(){return(0,h.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(n){return this.supportedTypes.includes(n)}static paste(n,y){y.pasteEditor(h.AnnotationEditorType.STAMP,{bitmapFile:n.getAsFile()})}remove(){var n,y;t(this,De)&&(O(this,Le,null),this._uiManager.imageManager.deleteId(t(this,De)),(n=t(this,Ke))==null||n.remove(),O(this,Ke,null),(y=t(this,ls))==null||y.disconnect(),O(this,ls,null),t(this,qe)&&(clearTimeout(t(this,qe)),O(this,qe,null))),super.remove()}rebuild(){if(!this.parent){t(this,De)&&M(this,As,Ai).call(this);return}super.rebuild(),this.div!==null&&(t(this,De)&&M(this,As,Ai).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,ss)||t(this,Le)||t(this,Ye)||t(this,is))}get isResizable(){return!0}render(){if(this.div)return this.div;let n,y;if(this.width&&(n=this.x,y=this.y),super.render(),this.div.hidden=!0,t(this,Le)?M(this,Ls,Ji).call(this):M(this,As,Ai).call(this),this.width){const[et,ct]=this.parentDimensions;this.setAt(n*et,y*ct,this.width*et,this.height*ct)}return this.div}getImageForAltText(){return t(this,Ke)}static deserialize(n,y,et){if(n instanceof U.StampAnnotationElement)return null;const ct=super.deserialize(n,y,et),{rect:mt,bitmapUrl:Rt,bitmapId:Ft,isSvg:wt,accessibilityData:Ut}=n;Ft&&et.imageManager.isValidId(Ft)?O(ct,De,Ft):O(ct,Ye,Rt),O(ct,He,wt);const[$t,ge]=ct.pageDimensions;return ct.width=(mt[2]-mt[0])/$t,ct.height=(mt[3]-mt[1])/ge,Ut&&(ct.altTextData=Ut),ct}serialize(n=!1,y=null){if(this.isEmpty())return null;const et={annotationType:h.AnnotationEditorType.STAMP,bitmapId:t(this,De),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,He),structTreeParentId:this._structTreeParentId};if(n)return et.bitmapUrl=M(this,ys,yi).call(this,!0),et.accessibilityData=this.altTextData,et;const{decorative:ct,altText:mt}=this.altTextData;if(!ct&&mt&&(et.accessibilityData={type:"Figure",alt:mt}),y===null)return et;y.stamps||(y.stamps=new Map);const Rt=t(this,He)?(et.rect[2]-et.rect[0])*(et.rect[3]-et.rect[1]):null;if(!y.stamps.has(t(this,De)))y.stamps.set(t(this,De),{area:Rt,serialized:et}),et.bitmap=M(this,ys,yi).call(this,!1);else if(t(this,He)){const Ft=y.stamps.get(t(this,De));Rt>Ft.area&&(Ft.area=Rt,Ft.serialized.bitmap.close(),Ft.serialized.bitmap=M(this,ys,yi).call(this,!1))}return et}};Le=new WeakMap,De=new WeakMap,ss=new WeakMap,Ye=new WeakMap,is=new WeakMap,vs=new WeakMap,Ke=new WeakMap,ls=new WeakMap,qe=new WeakMap,He=new WeakMap,Ps=new WeakMap,cs=new WeakSet,Ys=function(n,y=!1){if(!n){this.remove();return}O(this,Le,n.bitmap),y||(O(this,De,n.id),O(this,He,n.isSvg)),n.file&&O(this,vs,n.file.name),M(this,Ls,Ji).call(this)},ds=new WeakSet,Ks=function(){O(this,ss,null),this._uiManager.enableWaiting(!1),t(this,Ke)&&this.div.focus()},As=new WeakSet,Ai=function(){if(t(this,De)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,De)).then(y=>M(this,cs,Ys).call(this,y,!0)).finally(()=>M(this,ds,Ks).call(this));return}if(t(this,Ye)){const y=t(this,Ye);O(this,Ye,null),this._uiManager.enableWaiting(!0),O(this,ss,this._uiManager.imageManager.getFromUrl(y).then(et=>M(this,cs,Ys).call(this,et)).finally(()=>M(this,ds,Ks).call(this)));return}if(t(this,is)){const y=t(this,is);O(this,is,null),this._uiManager.enableWaiting(!0),O(this,ss,this._uiManager.imageManager.getFromFile(y).then(et=>M(this,cs,Ys).call(this,et)).finally(()=>M(this,ds,Ks).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=Is.supportedTypesStr,O(this,ss,new Promise(y=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const et=await this._uiManager.imageManager.getFromFile(n.files[0]);M(this,cs,Ys).call(this,et)}y()}),n.addEventListener("cancel",()=>{this.remove(),y()})}).finally(()=>M(this,ds,Ks).call(this))),n.click()},Ls=new WeakSet,Ji=function(){const{div:n}=this;let{width:y,height:et}=t(this,Le);const[ct,mt]=this.pageDimensions,Rt=.75;if(this.width)y=this.width*ct,et=this.height*mt;else if(y>Rt*ct||et>Rt*mt){const $t=Math.min(Rt*ct/y,Rt*mt/et);y*=$t,et*=$t}const[Ft,wt]=this.parentDimensions;this.setDims(y*Ft/ct,et*wt/mt),this._uiManager.enableWaiting(!1);const Ut=O(this,Ke,document.createElement("canvas"));n.append(Ut),n.hidden=!1,M(this,Ds,Qi).call(this,y,et),M(this,ii,ir).call(this),t(this,Ps)||(this.parent.addUndoableEditor(this),O(this,Ps,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton(),t(this,vs)&&Ut.setAttribute("aria-label",t(this,vs))},ei=new WeakSet,er=function(n,y){var Rt;const[et,ct]=this.parentDimensions;this.width=n/et,this.height=y/ct,this.setDims(n,y),(Rt=this._initialOptions)!=null&&Rt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,qe)!==null&&clearTimeout(t(this,qe)),O(this,qe,setTimeout(()=>{O(this,qe,null),M(this,Ds,Qi).call(this,n,y)},200))},si=new WeakSet,sr=function(n,y){const{width:et,height:ct}=t(this,Le);let mt=et,Rt=ct,Ft=t(this,Le);for(;mt>2*n||Rt>2*y;){const wt=mt,Ut=Rt;mt>2*n&&(mt=mt>=16384?Math.floor(mt/2)-1:Math.ceil(mt/2)),Rt>2*y&&(Rt=Rt>=16384?Math.floor(Rt/2)-1:Math.ceil(Rt/2));const $t=new OffscreenCanvas(mt,Rt);$t.getContext("2d").drawImage(Ft,0,0,wt,Ut,0,0,mt,Rt),Ft=$t.transferToImageBitmap()}return Ft},Ds=new WeakSet,Qi=function(n,y){n=Math.ceil(n),y=Math.ceil(y);const et=t(this,Ke);if(!et||et.width===n&&et.height===y)return;et.width=n,et.height=y;const ct=t(this,He)?t(this,Le):M(this,si,sr).call(this,n,y),mt=et.getContext("2d");mt.filter=this._uiManager.hcmFilter,mt.drawImage(ct,0,0,ct.width,ct.height,0,0,n,y)},ys=new WeakSet,yi=function(n){if(n){if(t(this,He)){const et=this._uiManager.imageManager.getSvgUrl(t(this,De));if(et)return et}const y=document.createElement("canvas");return{width:y.width,height:y.height}=t(this,Le),y.getContext("2d").drawImage(t(this,Le),0,0),y.toDataURL()}if(t(this,He)){const[y,et]=this.pageDimensions,ct=Math.round(this.width*y*z.PixelsPerInch.PDF_TO_CSS_UNITS),mt=Math.round(this.height*et*z.PixelsPerInch.PDF_TO_CSS_UNITS),Rt=new OffscreenCanvas(ct,mt);return Rt.getContext("2d").drawImage(t(this,Le),0,0,t(this,Le).width,t(this,Le).height,0,0,ct,mt),Rt.transferToImageBitmap()}return structuredClone(t(this,Le))},ii=new WeakSet,ir=function(){O(this,ls,new ResizeObserver(n=>{const y=n[0].contentRect;y.width&&y.height&&M(this,ei,er).call(this,y.width,y.height)})),t(this,ls).observe(this.div)},be(Is,"_type","stamp"),be(Is,"_editorType",h.AnnotationEditorType.STAMP);let D=Is;const ze=class ze{constructor({uiManager:pt,pageIndex:n,div:y,accessibilityManager:et,annotationLayer:ct,drawLayer:mt,textLayer:Rt,viewport:Ft,l10n:wt}){m(this,Bs);m(this,Us);m(this,ps);m(this,Hs);m(this,zs);m(this,us,void 0);m(this,ws,!1);m(this,Ve,null);m(this,Fs,this.pointerup.bind(this));m(this,ni,this.pointerUpAfterSelection.bind(this));m(this,Os,this.pointerdown.bind(this));m(this,Xe,null);m(this,Ns,this.selectionStart.bind(this));m(this,Ne,new Map);m(this,ns,!1);m(this,_s,!1);m(this,Es,!1);m(this,Je,null);m(this,de,void 0);const Ut=[...t(ze,rs).values()];if(!ze._initialized){ze._initialized=!0;for(const $t of Ut)$t.initialize(wt)}pt.registerEditorTypes(Ut),O(this,de,pt),this.pageIndex=n,this.div=y,O(this,us,et),O(this,Ve,ct),this.viewport=Ft,O(this,Je,Rt),this.drawLayer=mt,t(this,de).addLayer(this)}get isEmpty(){return t(this,Ne).size===0}updateToolbar(pt){t(this,de).updateToolbar(pt)}updateMode(pt=t(this,de).getMode()){switch(M(this,zs,sn).call(this),pt){case h.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;case h.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case h.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}if(pt!==h.AnnotationEditorType.NONE){const{classList:n}=this.div;for(const y of t(ze,rs).values())n.toggle(`${y._type}Editing`,pt===y._editorType);this.div.hidden=!1}}addInkEditorIfNeeded(pt){if(t(this,de).getMode()===h.AnnotationEditorType.INK){if(!pt){for(const n of t(this,Ne).values())if(n.isEmpty()){n.setInBackground();return}}M(this,ps,Vs).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(pt){t(this,de).setEditingState(pt)}addCommands(pt){t(this,de).addCommands(pt)}togglePointerEvents(pt=!1){this.div.classList.toggle("disabled",!pt)}enable(){this.togglePointerEvents(!0);const pt=new Set;for(const y of t(this,Ne).values())y.enableEditing(),y.annotationElementId&&pt.add(y.annotationElementId);if(!t(this,Ve))return;const n=t(this,Ve).getEditableAnnotations();for(const y of n){if(y.hide(),t(this,de).isDeletedAnnotationElement(y.data.id)||pt.has(y.data.id))continue;const et=this.deserialize(y);et&&(this.addOrRebuild(et),et.enableEditing())}}disable(){var y;O(this,Es,!0),this.togglePointerEvents(!1);const pt=new Set;for(const et of t(this,Ne).values()){if(et.disableEditing(),!et.annotationElementId||et.serialize()!==null){pt.add(et.annotationElementId);continue}(y=this.getEditableAnnotation(et.annotationElementId))==null||y.show(),et.remove()}if(t(this,Ve)){const et=t(this,Ve).getEditableAnnotations();for(const ct of et){const{id:mt}=ct.data;pt.has(mt)||t(this,de).isDeletedAnnotationElement(mt)||ct.show()}}M(this,zs,sn).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const et of t(ze,rs).values())n.remove(`${et._type}Editing`);this.disableTextSelection(),O(this,Es,!1)}getEditableAnnotation(pt){var n;return((n=t(this,Ve))==null?void 0:n.getEditableAnnotation(pt))||null}setActiveEditor(pt){t(this,de).getActive()!==pt&&t(this,de).setActiveEditor(pt)}enableTextSelection(){var pt;(pt=t(this,Je))!=null&&pt.div&&document.addEventListener("selectstart",t(this,Ns))}disableTextSelection(){var pt;(pt=t(this,Je))!=null&&pt.div&&document.removeEventListener("selectstart",t(this,Ns))}enableClick(){this.div.addEventListener("pointerdown",t(this,Os)),this.div.addEventListener("pointerup",t(this,Fs))}disableClick(){this.div.removeEventListener("pointerdown",t(this,Os)),this.div.removeEventListener("pointerup",t(this,Fs))}attach(pt){t(this,Ne).set(pt.id,pt);const{annotationElementId:n}=pt;n&&t(this,de).isDeletedAnnotationElement(n)&&t(this,de).removeDeletedAnnotationElement(pt)}detach(pt){var n;t(this,Ne).delete(pt.id),(n=t(this,us))==null||n.removePointerInTextLayer(pt.contentDiv),!t(this,Es)&&pt.annotationElementId&&t(this,de).addDeletedAnnotationElement(pt)}remove(pt){this.detach(pt),t(this,de).removeEditor(pt),pt.div.remove(),pt.isAttachedToDOM=!1,t(this,_s)||this.addInkEditorIfNeeded(!1)}changeParent(pt){var n;pt.parent!==this&&(pt.annotationElementId&&(t(this,de).addDeletedAnnotationElement(pt.annotationElementId),st.AnnotationEditor.deleteAnnotationElement(pt),pt.annotationElementId=null),this.attach(pt),(n=pt.parent)==null||n.detach(pt),pt.setParent(this),pt.div&&pt.isAttachedToDOM&&(pt.div.remove(),this.div.append(pt.div)))}add(pt){if(this.changeParent(pt),t(this,de).addEditor(pt),this.attach(pt),!pt.isAttachedToDOM){const n=pt.render();this.div.append(n),pt.isAttachedToDOM=!0}pt.fixAndSetPosition(),pt.onceAdded(),t(this,de).addToAnnotationStorage(pt)}moveEditorInDOM(pt){var y;if(!pt.isAttachedToDOM)return;const{activeElement:n}=document;pt.div.contains(n)&&!t(this,Xe)&&(pt._focusEventsAllowed=!1,O(this,Xe,setTimeout(()=>{O(this,Xe,null),pt.div.contains(document.activeElement)?pt._focusEventsAllowed=!0:(pt.div.addEventListener("focusin",()=>{pt._focusEventsAllowed=!0},{once:!0}),n.focus())},0))),pt._structTreeParentId=(y=t(this,us))==null?void 0:y.moveElementInDOM(this.div,pt.div,pt.contentDiv,!0)}addOrRebuild(pt){pt.needsToBeRebuilt()?(pt.parent||(pt.parent=this),pt.rebuild()):this.add(pt)}addUndoableEditor(pt){const n=()=>pt._uiManager.rebuild(pt),y=()=>{pt.remove()};this.addCommands({cmd:n,undo:y,mustExec:!1})}getNextId(){return t(this,de).getId()}canCreateNewEmptyEditor(){var pt;return(pt=t(this,Bs,Zi))==null?void 0:pt.canCreateNewEmptyEditor()}pasteEditor(pt,n){t(this,de).updateToolbar(pt),t(this,de).updateMode(pt);const{offsetX:y,offsetY:et}=M(this,Hs,en).call(this),ct=this.getNextId(),mt=M(this,Us,tn).call(this,{parent:this,id:ct,x:y,y:et,uiManager:t(this,de),isCentered:!0,...n});mt&&this.add(mt)}deserialize(pt){var n;return((n=t(ze,rs).get(pt.annotationType??pt.annotationEditorType))==null?void 0:n.deserialize(pt,this,t(this,de)))||null}addNewEditor(){M(this,ps,Vs).call(this,M(this,Hs,en).call(this),!0)}setSelected(pt){t(this,de).setSelected(pt)}toggleSelected(pt){t(this,de).toggleSelected(pt)}isSelected(pt){return t(this,de).isSelected(pt)}unselect(pt){t(this,de).unselect(pt)}selectionStart(pt){var n;(n=t(this,Je))==null||n.div.addEventListener("pointerup",t(this,ni),{once:!0})}pointerUpAfterSelection(pt){var $t;const n=document.getSelection();if(n.rangeCount===0)return;const y=n.getRangeAt(0);if(y.collapsed||!(($t=t(this,Je))!=null&&$t.div.contains(y.commonAncestorContainer)))return;const{x:et,y:ct,width:mt,height:Rt}=t(this,Je).div.getBoundingClientRect(),Ft=y.getClientRects();let wt;switch(this.viewport.rotation){case 90:wt=(ge,Ae,Ee,xe)=>({x:(Ae-ct)/Rt,y:1-(ge+Ee-et)/mt,width:xe/Rt,height:Ee/mt});break;case 180:wt=(ge,Ae,Ee,xe)=>({x:1-(ge+Ee-et)/mt,y:1-(Ae+xe-ct)/Rt,width:Ee/mt,height:xe/Rt});break;case 270:wt=(ge,Ae,Ee,xe)=>({x:1-(Ae+xe-ct)/Rt,y:(ge-et)/mt,width:xe/Rt,height:Ee/mt});break;default:wt=(ge,Ae,Ee,xe)=>({x:(ge-et)/mt,y:(Ae-ct)/Rt,width:Ee/mt,height:xe/Rt});break}const Ut=[];for(const{x:ge,y:Ae,width:Ee,height:xe}of Ft)Ee===0||xe===0||Ut.push(wt(ge,Ae,Ee,xe));Ut.length!==0&&M(this,ps,Vs).call(this,pt,!1,{boxes:Ut}),n.empty()}pointerup(pt){const{isMac:n}=h.FeatureTest.platform;if(!(pt.button!==0||pt.ctrlKey&&n)&&pt.target===this.div&&t(this,ns)){if(O(this,ns,!1),!t(this,ws)){O(this,ws,!0);return}if(t(this,de).getMode()===h.AnnotationEditorType.STAMP){t(this,de).unselectAll();return}M(this,ps,Vs).call(this,pt,!1)}}pointerdown(pt){if(t(this,de).getMode()===h.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),t(this,ns)){O(this,ns,!1);return}const{isMac:n}=h.FeatureTest.platform;if(pt.button!==0||pt.ctrlKey&&n||pt.target!==this.div)return;O(this,ns,!0);const y=t(this,de).getActive();O(this,ws,!y||y.isEmpty())}findNewParent(pt,n,y){const et=t(this,de).findParent(n,y);return et===null||et===this?!1:(et.changeParent(pt),!0)}destroy(){var pt,n;((pt=t(this,de).getActive())==null?void 0:pt.parent)===this&&(t(this,de).commitOrRemove(),t(this,de).setActiveEditor(null)),t(this,Xe)&&(clearTimeout(t(this,Xe)),O(this,Xe,null));for(const y of t(this,Ne).values())(n=t(this,us))==null||n.removePointerInTextLayer(y.contentDiv),y.setParent(null),y.isAttachedToDOM=!1,y.div.remove();this.div=null,t(this,Ne).clear(),t(this,de).removeLayer(this)}render({viewport:pt}){this.viewport=pt,(0,z.setLayerDimensions)(this.div,pt);for(const n of t(this,de).getEditors(this.pageIndex))this.add(n);this.updateMode()}update({viewport:pt}){t(this,de).commitOrRemove();const n=this.viewport.rotation,y=pt.rotation;if(this.viewport=pt,(0,z.setLayerDimensions)(this.div,{rotation:y}),n!==y)for(const et of t(this,Ne).values())et.rotate(y);this.updateMode()}get pageDimensions(){const{pageWidth:pt,pageHeight:n}=this.viewport.rawDims;return[pt,n]}};us=new WeakMap,ws=new WeakMap,Ve=new WeakMap,Fs=new WeakMap,ni=new WeakMap,Os=new WeakMap,Xe=new WeakMap,Ns=new WeakMap,Ne=new WeakMap,ns=new WeakMap,_s=new WeakMap,Es=new WeakMap,Je=new WeakMap,de=new WeakMap,rs=new WeakMap,Bs=new WeakSet,Zi=function(){return t(ze,rs).get(t(this,de).getMode())},Us=new WeakSet,tn=function(pt){const n=t(this,Bs,Zi);return n?new n.prototype.constructor(pt):null},ps=new WeakSet,Vs=function(pt,n,y={}){const et=this.getNextId(),ct=M(this,Us,tn).call(this,{parent:this,id:et,x:pt.offsetX,y:pt.offsetY,uiManager:t(this,de),isCentered:n,...y});return ct&&this.add(ct),ct},Hs=new WeakSet,en=function(){const{x:pt,y:n,width:y,height:et}=this.div.getBoundingClientRect(),ct=Math.max(0,pt),mt=Math.max(0,n),Rt=Math.min(window.innerWidth,pt+y),Ft=Math.min(window.innerHeight,n+et),wt=(ct+Rt)/2-pt,Ut=(mt+Ft)/2-n,[$t,ge]=this.viewport.rotation%180===0?[wt,Ut]:[Ut,wt];return{offsetX:$t,offsetY:ge}},zs=new WeakSet,sn=function(){O(this,_s,!0);for(const pt of t(this,Ne).values())pt.isEmpty()&&pt.remove();O(this,_s,!1)},be(ze,"_initialized",!1),m(ze,rs,new Map([gt,G,D,w].map(pt=>[pt._editorType,pt])));let ot=ze},97:(Ot,kt,at)=>{var gt,it,H,w,z,G,D,ot,T,q,nn,W,rn,P,nr,C,rr;at.d(kt,{ColorPicker:()=>U});var h=at(266),st=at(812),A=at(473);const ft=class ft{constructor({editor:dt=null,uiManager:_t=null}){m(this,q);m(this,W);m(this,P);m(this,C);m(this,gt,M(this,P,nr).bind(this));m(this,it,null);m(this,H,null);m(this,w,void 0);m(this,z,null);m(this,G,!1);m(this,D,!1);m(this,ot,void 0);m(this,T,null);var Lt;O(this,D,!dt),O(this,T,(dt==null?void 0:dt._uiManager)||_t),O(this,ot,t(this,T)._eventBus),O(this,w,(dt==null?void 0:dt.color)||((Lt=t(this,T))==null?void 0:Lt.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return(0,h.shadow)(this,"_keyboardManager",new st.KeyboardManager([[["Escape","mac+Escape"],ft.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ft.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ft.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ft.prototype._moveToPrevious],[["Home","mac+Home"],ft.prototype._moveToBeginning],[["End","mac+End"],ft.prototype._moveToEnd]]))}renderButton(){const dt=O(this,it,document.createElement("button"));dt.className="colorPicker",dt.tabIndex="0",dt.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),dt.setAttribute("aria-haspopup",!0),dt.addEventListener("click",M(this,C,rr).bind(this));const _t=O(this,H,document.createElement("span"));return _t.className="swatch",_t.style.backgroundColor=t(this,w),dt.append(_t),dt}renderMainDropdown(){const dt=O(this,z,M(this,q,nn).call(this,h.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR));return dt.setAttribute("aria-orientation","horizontal"),dt.setAttribute("aria-labelledby","highlightColorPickerLabel"),dt}_colorSelectFromKeyboard(dt){const _t=dt.target.getAttribute("data-color");_t&&M(this,W,rn).call(this,_t,dt)}_moveToNext(dt){var _t,Lt;if(dt.target===t(this,it)){(_t=t(this,z).firstChild)==null||_t.focus();return}(Lt=dt.target.nextSibling)==null||Lt.focus()}_moveToPrevious(dt){var _t;(_t=dt.target.previousSibling)==null||_t.focus()}_moveToBeginning(){var dt;(dt=t(this,z).firstChild)==null||dt.focus()}_moveToEnd(){var dt;(dt=t(this,z).lastChild)==null||dt.focus()}hideDropdown(){var dt;(dt=t(this,z))==null||dt.classList.add("hidden")}_hideDropdownFromKeyboard(){t(this,D)||!t(this,z)||t(this,z).classList.contains("hidden")||(this.hideDropdown(),t(this,it).removeEventListener("keydown",t(this,gt)),t(this,it).focus({preventScroll:!0,focusVisible:t(this,G)}))}updateColor(dt){if(t(this,H)&&(t(this,H).style.backgroundColor=dt),!t(this,z))return;const _t=t(this,T).highlightColors.values();for(const Lt of t(this,z).children)Lt.setAttribute("aria-selected",_t.next().value===dt)}destroy(){var dt,_t;(dt=t(this,it))==null||dt.remove(),O(this,it,null),O(this,H,null),(_t=t(this,z))==null||_t.remove(),O(this,z,null)}};gt=new WeakMap,it=new WeakMap,H=new WeakMap,w=new WeakMap,z=new WeakMap,G=new WeakMap,D=new WeakMap,ot=new WeakMap,T=new WeakMap,q=new WeakSet,nn=function(dt){const _t=document.createElement("div");_t.addEventListener("contextmenu",A.noContextMenu),_t.className="dropdown",_t.role="listbox",_t.setAttribute("aria-multiselectable",!1),_t.setAttribute("aria-orientation","vertical"),_t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[Lt,Gt]of t(this,T).highlightColors){const Nt=document.createElement("button");Nt.tabIndex="0",Nt.role="option",Nt.setAttribute("data-color",Gt),Nt.title=Lt,Nt.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${Lt}`);const Vt=document.createElement("span");Nt.append(Vt),Vt.className="swatch",Vt.style.backgroundColor=Gt,Nt.setAttribute("aria-selected",Gt===t(this,w)),Nt.addEventListener("click",M(this,W,rn).bind(this,dt,Gt)),_t.append(Nt)}return _t.addEventListener("keydown",t(this,gt)),_t},W=new WeakSet,rn=function(dt,_t,Lt){Lt.stopPropagation(),t(this,ot).dispatch("switchannotationeditorparams",{source:this,type:dt,value:_t})},P=new WeakSet,nr=function(dt){ft._keyboardManager.exec(this,dt)},C=new WeakSet,rr=function(dt){if(t(this,z)&&!t(this,z).classList.contains("hidden")){this.hideDropdown();return}if(t(this,it).addEventListener("keydown",t(this,gt)),O(this,G,dt.detail===0),t(this,z)){t(this,z).classList.remove("hidden");return}const _t=O(this,z,M(this,q,nn).call(this,h.AnnotationEditorParamsType.HIGHLIGHT_COLOR));t(this,it).append(_t)};let U=ft},115:(Ot,kt,at)=>{var w,z,G,D,ot,T,q,B,an,P,Q,C,Y,ft,ar,dt,or,Lt,hr,Nt,wi,Xt,lr,Jt,on,te,Yt,re,Wt,le,ie,he,jt,me,pe,Zt,ne,ye,X,s,i,f,hn,b,ln,d,cn,a,dn,x,cr,u,dr,j,un,N,pn,J,gn,lt,ur,g,pr,$,gr,ut,fr,Et,fn,Bt,Xs;at.d(kt,{AnnotationEditor:()=>it});var h=at(812),st=at(266),A=at(473);const V=class V{constructor(R){m(this,B);m(this,w,"");m(this,z,!1);m(this,G,null);m(this,D,null);m(this,ot,null);m(this,T,!1);m(this,q,null);O(this,q,R)}static initialize(R){V._l10nPromise||(V._l10nPromise=R)}async render(){const R=O(this,G,document.createElement("button"));R.className="altText";const nt=await V._l10nPromise.get("pdfjs-editor-alt-text-button-label");R.textContent=nt,R.setAttribute("aria-label",nt),R.tabIndex="0",R.addEventListener("contextmenu",A.noContextMenu),R.addEventListener("pointerdown",vt=>vt.stopPropagation());const At=vt=>{vt.preventDefault(),t(this,q)._uiManager.editAltText(t(this,q))};return R.addEventListener("click",At,{capture:!0}),R.addEventListener("keydown",vt=>{vt.target===R&&vt.key==="Enter"&&(O(this,T,!0),At(vt))}),await M(this,B,an).call(this),R}finish(){t(this,G)&&(t(this,G).focus({focusVisible:t(this,T)}),O(this,T,!1))}get data(){return{altText:t(this,w),decorative:t(this,z)}}set data({altText:R,decorative:nt}){t(this,w)===R&&t(this,z)===nt||(O(this,w,R),O(this,z,nt),M(this,B,an).call(this))}toggle(R=!1){t(this,G)&&(!R&&t(this,ot)&&(clearTimeout(t(this,ot)),O(this,ot,null)),t(this,G).disabled=!R)}destroy(){var R;(R=t(this,G))==null||R.remove(),O(this,G,null),O(this,D,null)}};w=new WeakMap,z=new WeakMap,G=new WeakMap,D=new WeakMap,ot=new WeakMap,T=new WeakMap,q=new WeakMap,B=new WeakSet,an=async function(){var At,vt;const R=t(this,G);if(!R)return;if(!t(this,w)&&!t(this,z)){R.classList.remove("done"),(At=t(this,D))==null||At.remove();return}R.classList.add("done"),V._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(Pt=>{R.setAttribute("aria-label",Pt)});let nt=t(this,D);if(!nt){O(this,D,nt=document.createElement("span")),nt.className="tooltip",nt.setAttribute("role","tooltip");const Pt=nt.id=`alt-text-tooltip-${t(this,q).id}`;R.setAttribute("aria-describedby",Pt);const Ct=100;R.addEventListener("mouseenter",()=>{O(this,ot,setTimeout(()=>{O(this,ot,null),t(this,D).classList.add("show"),t(this,q)._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:t(this,q).editorType,data:{action:"alt_text_tooltip"}}})},Ct))}),R.addEventListener("mouseleave",()=>{var p;t(this,ot)&&(clearTimeout(t(this,ot)),O(this,ot,null)),(p=t(this,D))==null||p.classList.remove("show")})}nt.innerText=t(this,z)?await V._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):t(this,w),nt.parentNode||R.append(nt),(vt=t(this,q).getImageForAltText())==null||vt.setAttribute("aria-describedby",nt.id)},be(V,"_l10nPromise",null);let U=V;const oe=class oe{constructor(R){m(this,dt);m(this,Lt);m(this,Nt);m(this,Xt);m(this,Jt);m(this,P,null);m(this,Q,null);m(this,C,void 0);m(this,Y,null);O(this,C,R)}render(){const R=O(this,P,document.createElement("div"));R.className="editToolbar",R.addEventListener("contextmenu",A.noContextMenu),R.addEventListener("pointerdown",M(oe,ft,ar));const nt=O(this,Y,document.createElement("div"));nt.className="buttons",R.append(nt);const At=t(this,C).toolbarPosition;if(At){const{style:vt}=R,Pt=t(this,C)._uiManager.direction==="ltr"?1-At[0]:At[0];vt.insetInlineEnd=`${100*Pt}%`,vt.top=`calc(${100*At[1]}% + var(--editor-toolbar-vert-offset))`}return M(this,Xt,lr).call(this),R}hide(){var R;t(this,P).classList.add("hidden"),(R=t(this,Q))==null||R.hideDropdown()}show(){t(this,P).classList.remove("hidden")}addAltTextButton(R){M(this,Nt,wi).call(this,R),t(this,Y).prepend(R,t(this,Jt,on))}addColorPicker(R){O(this,Q,R);const nt=R.renderButton();M(this,Nt,wi).call(this,nt),t(this,Y).prepend(nt,t(this,Jt,on))}remove(){var R;t(this,P).remove(),(R=t(this,Q))==null||R.destroy(),O(this,Q,null)}};P=new WeakMap,Q=new WeakMap,C=new WeakMap,Y=new WeakMap,ft=new WeakSet,ar=function(R){R.stopPropagation()},dt=new WeakSet,or=function(R){t(this,C)._focusEventsAllowed=!1,R.preventDefault(),R.stopPropagation()},Lt=new WeakSet,hr=function(R){t(this,C)._focusEventsAllowed=!0,R.preventDefault(),R.stopPropagation()},Nt=new WeakSet,wi=function(R){R.addEventListener("focusin",M(this,dt,or).bind(this),{capture:!0}),R.addEventListener("focusout",M(this,Lt,hr).bind(this),{capture:!0}),R.addEventListener("contextmenu",A.noContextMenu)},Xt=new WeakSet,lr=function(){const R=document.createElement("button");R.className="delete",R.tabIndex=0,R.setAttribute("data-l10n-id",`pdfjs-editor-remove-${t(this,C).editorType}-button`),M(this,Nt,wi).call(this,R),R.addEventListener("click",nt=>{t(this,C)._uiManager.delete()}),t(this,Y).append(R)},Jt=new WeakSet,on=function(){const R=document.createElement("div");return R.className="divider",R},m(oe,ft);let gt=oe;const Ht=class Ht{constructor(R){m(this,f);m(this,b);m(this,a);m(this,x);m(this,u);m(this,j);m(this,N);m(this,J);m(this,lt);m(this,g);m(this,$);m(this,ut);m(this,Et);m(this,Bt);m(this,te,null);m(this,Yt,null);m(this,re,!1);m(this,Wt,null);m(this,le,null);m(this,ie,this.focusin.bind(this));m(this,he,this.focusout.bind(this));m(this,jt,null);m(this,me,"");m(this,pe,!1);m(this,Zt,!1);m(this,ne,!1);m(this,ye,!1);m(this,X,null);be(this,"_initialOptions",Object.create(null));be(this,"_uiManager",null);be(this,"_focusEventsAllowed",!0);be(this,"_l10nPromise",null);m(this,s,!1);m(this,i,Ht._zIndex++);this.constructor===Ht&&(0,st.unreachable)("Cannot initialize AnnotationEditor."),this.parent=R.parent,this.id=R.id,this.width=this.height=null,this.pageIndex=R.parent.pageIndex,this.name=R.name,this.div=null,this._uiManager=R.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=R.isCentered,this._structTreeParentId=null;const{rotation:nt,rawDims:{pageWidth:At,pageHeight:vt,pageX:Pt,pageY:Ct}}=this.parent.viewport;this.rotation=nt,this.pageRotation=(360+nt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[At,vt],this.pageTranslation=[Pt,Ct];const[p,e]=this.parentDimensions;this.x=R.x/p,this.y=R.y/e,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const R=Ht.prototype._resizeWithKeyboard,nt=h.AnnotationEditorUIManager.TRANSLATE_SMALL,At=h.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,st.shadow)(this,"_resizerKeyboardManager",new h.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],R,{args:[-nt,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],R,{args:[-At,0]}],[["ArrowRight","mac+ArrowRight"],R,{args:[nt,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],R,{args:[At,0]}],[["ArrowUp","mac+ArrowUp"],R,{args:[0,-nt]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],R,{args:[0,-At]}],[["ArrowDown","mac+ArrowDown"],R,{args:[0,nt]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],R,{args:[0,At]}],[["Escape","mac+Escape"],Ht.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,st.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(R){const nt=new H({id:R.parent.getNextId(),parent:R.parent,uiManager:R._uiManager});nt.annotationElementId=R.annotationElementId,nt.deleted=!0,nt._uiManager.addToAnnotationStorage(nt)}static initialize(R,nt=null){if(Ht._l10nPromise||(Ht._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(vt=>[vt,R.get(vt.replaceAll(/([A-Z])/g,Pt=>`-${Pt.toLowerCase()}`))]))),nt==null?void 0:nt.strings)for(const vt of nt.strings)Ht._l10nPromise.set(vt,R.get(vt));if(Ht._borderLineWidth!==-1)return;const At=getComputedStyle(document.documentElement);Ht._borderLineWidth=parseFloat(At.getPropertyValue("--outline-width"))||0}static updateDefaultParams(R,nt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(R){return!1}static paste(R,nt){(0,st.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,s)}set _isDraggable(R){var nt;O(this,s,R),(nt=this.div)==null||nt.classList.toggle("draggable",R)}get isEnterHandled(){return!0}center(){const[R,nt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*nt/(R*2),this.y+=this.width*R/(nt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*nt/(R*2),this.y-=this.width*R/(nt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(R){this._uiManager.addCommands(R)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,i)}setParent(R){R!==null?(this.pageIndex=R.pageIndex,this.pageDimensions=R.pageDimensions):M(this,Bt,Xs).call(this),this.parent=R}focusin(R){this._focusEventsAllowed&&(t(this,pe)?O(this,pe,!1):this.parent.setSelected(this))}focusout(R){var nt,At;!this._focusEventsAllowed||!this.isAttachedToDOM||(nt=R.relatedTarget)!=null&&nt.closest(`#${this.id}`)||(R.preventDefault(),(At=this.parent)!=null&&At.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(R,nt,At,vt){const[Pt,Ct]=this.parentDimensions;[At,vt]=this.screenToPageTranslation(At,vt),this.x=(R+At)/Pt,this.y=(nt+vt)/Ct,this.fixAndSetPosition()}translate(R,nt){M(this,f,hn).call(this,this.parentDimensions,R,nt)}translateInPage(R,nt){M(this,f,hn).call(this,this.pageDimensions,R,nt),this.div.scrollIntoView({block:"nearest"})}drag(R,nt){const[At,vt]=this.parentDimensions;if(this.x+=R/At,this.y+=nt/vt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:r,y:S}=this.div.getBoundingClientRect();this.parent.findNewParent(this,r,S)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Pt,y:Ct}=this;const[p,e]=M(this,b,ln).call(this);Pt+=p,Ct+=e,this.div.style.left=`${(100*Pt).toFixed(2)}%`,this.div.style.top=`${(100*Ct).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(R=this.rotation){const[nt,At]=this.pageDimensions;let{x:vt,y:Pt,width:Ct,height:p}=this;switch(Ct*=nt,p*=At,vt*=nt,Pt*=At,R){case 0:vt=Math.max(0,Math.min(nt-Ct,vt)),Pt=Math.max(0,Math.min(At-p,Pt));break;case 90:vt=Math.max(0,Math.min(nt-p,vt)),Pt=Math.min(At,Math.max(Ct,Pt));break;case 180:vt=Math.min(nt,Math.max(Ct,vt)),Pt=Math.min(At,Math.max(p,Pt));break;case 270:vt=Math.min(nt,Math.max(p,vt)),Pt=Math.max(0,Math.min(At-Ct,Pt));break}this.x=vt/=nt,this.y=Pt/=At;const[e,r]=M(this,b,ln).call(this);vt+=e,Pt+=r;const{style:S}=this.div;S.left=`${(100*vt).toFixed(2)}%`,S.top=`${(100*Pt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(R,nt){var At;return M(At=Ht,d,cn).call(At,R,nt,this.parentRotation)}pageTranslationToScreen(R,nt){var At;return M(At=Ht,d,cn).call(At,R,nt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:R,pageDimensions:[nt,At]}=this,vt=nt*R,Pt=At*R;return st.FeatureTest.isCSSRoundSupported?[Math.round(vt),Math.round(Pt)]:[vt,Pt]}setDims(R,nt){const[At,vt]=this.parentDimensions;this.div.style.width=`${(100*R/At).toFixed(2)}%`,t(this,re)||(this.div.style.height=`${(100*nt/vt).toFixed(2)}%`)}fixDims(){const{style:R}=this.div,{height:nt,width:At}=R,vt=At.endsWith("%"),Pt=!t(this,re)&&nt.endsWith("%");if(vt&&Pt)return;const[Ct,p]=this.parentDimensions;vt||(R.width=`${(100*parseFloat(At)/Ct).toFixed(2)}%`),!t(this,re)&&!Pt&&(R.height=`${(100*parseFloat(nt)/p).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var R;(R=t(this,Yt))==null||R.finish()}async addEditToolbar(){return t(this,jt)||t(this,ne)?t(this,jt):(O(this,jt,new gt(this)),this.div.append(t(this,jt).render()),t(this,Yt)&&t(this,jt).addAltTextButton(await t(this,Yt).render()),t(this,jt))}removeEditToolbar(){var R;t(this,jt)&&(t(this,jt).remove(),O(this,jt,null),(R=t(this,Yt))==null||R.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){t(this,Yt)||(U.initialize(Ht._l10nPromise),O(this,Yt,new U(this)),await this.addEditToolbar())}get altTextData(){var R;return(R=t(this,Yt))==null?void 0:R.data}set altTextData(R){t(this,Yt)&&(t(this,Yt).data=R)}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,ie)),this.div.addEventListener("focusout",t(this,he));const[R,nt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*nt/R).toFixed(2)}%`,this.div.style.maxHeight=`${(100*R/nt).toFixed(2)}%`);const[At,vt]=this.getInitialTranslation();return this.translate(At,vt),(0,h.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(R){const{isMac:nt}=st.FeatureTest.platform;if(R.button!==0||R.ctrlKey&&nt){R.preventDefault();return}if(O(this,pe,!0),this._isDraggable){M(this,lt,ur).call(this,R);return}M(this,J,gn).call(this,R)}moveInDOM(){t(this,X)&&clearTimeout(t(this,X)),O(this,X,setTimeout(()=>{var R;O(this,X,null),(R=this.parent)==null||R.moveEditorInDOM(this)},0))}_setParentAndPosition(R,nt,At){R.changeParent(this),this.x=nt,this.y=At,this.fixAndSetPosition()}getRect(R,nt,At=this.rotation){const vt=this.parentScale,[Pt,Ct]=this.pageDimensions,[p,e]=this.pageTranslation,r=R/vt,S=nt/vt,F=this.x*Pt,tt=this.y*Ct,rt=this.width*Pt,yt=this.height*Ct;switch(At){case 0:return[F+r+p,Ct-tt-S-yt+e,F+r+rt+p,Ct-tt-S+e];case 90:return[F+S+p,Ct-tt+r+e,F+S+yt+p,Ct-tt+r+rt+e];case 180:return[F-r-rt+p,Ct-tt+S+e,F-r+p,Ct-tt+S+yt+e];case 270:return[F-S-yt+p,Ct-tt-r-rt+e,F-S+p,Ct-tt-r+e];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(R,nt){const[At,vt,Pt,Ct]=R,p=Pt-At,e=Ct-vt;switch(this.rotation){case 0:return[At,nt-Ct,p,e];case 90:return[At,nt-vt,e,p];case 180:return[Pt,nt-vt,p,e];case 270:return[Pt,nt-Ct,e,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){O(this,ne,!0)}disableEditMode(){O(this,ne,!1)}isInEditMode(){return t(this,ne)}shouldGetKeyboardEvents(){return t(this,ye)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var R,nt;(R=this.div)==null||R.addEventListener("focusin",t(this,ie)),(nt=this.div)==null||nt.addEventListener("focusout",t(this,he))}rotate(R){}serialize(R=!1,nt=null){(0,st.unreachable)("An editor must be serializable")}static deserialize(R,nt,At){const vt=new this.prototype.constructor({parent:nt,id:nt.getNextId(),uiManager:At});vt.rotation=R.rotation;const[Pt,Ct]=vt.pageDimensions,[p,e,r,S]=vt.getRectInCurrentCoords(R.rect,Ct);return vt.x=p/Pt,vt.y=e/Ct,vt.width=r/Pt,vt.height=S/Ct,vt}remove(){this.div.removeEventListener("focusin",t(this,ie)),this.div.removeEventListener("focusout",t(this,he)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),t(this,X)&&(clearTimeout(t(this,X)),O(this,X,null)),M(this,Bt,Xs).call(this),this.removeEditToolbar()}get isResizable(){return!1}makeResizable(){this.isResizable&&(M(this,x,cr).call(this),t(this,Wt).classList.remove("hidden"),(0,h.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(R){if(!this.isResizable||R.target!==this.div||R.key!=="Enter")return;this._uiManager.setSelected(this),O(this,le,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const nt=t(this,Wt).children;if(!t(this,te)){O(this,te,Array.from(nt));const Ct=M(this,g,pr).bind(this),p=M(this,$,gr).bind(this);for(const e of t(this,te)){const r=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",Ct),e.addEventListener("blur",p),e.addEventListener("focus",M(this,ut,fr).bind(this,r)),Ht._l10nPromise.get(`pdfjs-editor-resizer-label-${r}`).then(S=>e.setAttribute("aria-label",S))}}const At=t(this,te)[0];let vt=0;for(const Ct of nt){if(Ct===At)break;vt++}const Pt=(360-this.rotation+this.parentRotation)%360/90*(t(this,te).length/4);if(Pt!==vt){if(Pt<vt)for(let p=0;p<vt-Pt;p++)t(this,Wt).append(t(this,Wt).firstChild);else if(Pt>vt)for(let p=0;p<Pt-vt;p++)t(this,Wt).firstChild.before(t(this,Wt).lastChild);let Ct=0;for(const p of nt){const e=t(this,te)[Ct++].getAttribute("data-resizer-name");Ht._l10nPromise.get(`pdfjs-editor-resizer-label-${e}`).then(r=>p.setAttribute("aria-label",r))}}M(this,Et,fn).call(this,0),O(this,ye,!0),t(this,Wt).firstChild.focus({focusVisible:!0}),R.preventDefault(),R.stopImmediatePropagation()}_resizeWithKeyboard(R,nt){t(this,ye)&&M(this,N,pn).call(this,t(this,me),{movementX:R,movementY:nt})}_stopResizingWithKeyboard(){M(this,Bt,Xs).call(this),this.div.focus()}select(){var R,nt;if(this.makeResizable(),(R=this.div)==null||R.classList.add("selectedEditor"),!t(this,jt)){this.addEditToolbar().then(()=>{var At,vt;(At=this.div)!=null&&At.classList.contains("selectedEditor")&&((vt=t(this,jt))==null||vt.show())});return}(nt=t(this,jt))==null||nt.show()}unselect(){var R,nt,At,vt;(R=t(this,Wt))==null||R.classList.add("hidden"),(nt=this.div)==null||nt.classList.remove("selectedEditor"),(At=this.div)!=null&&At.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus(),(vt=t(this,jt))==null||vt.hide()}updateParams(R,nt){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return t(this,Zt)}set isEditing(R){O(this,Zt,R),this.parent&&(R?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(R,nt){O(this,re,!0);const At=R/nt,{style:vt}=this.div;vt.aspectRatio=At,vt.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}};te=new WeakMap,Yt=new WeakMap,re=new WeakMap,Wt=new WeakMap,le=new WeakMap,ie=new WeakMap,he=new WeakMap,jt=new WeakMap,me=new WeakMap,pe=new WeakMap,Zt=new WeakMap,ne=new WeakMap,ye=new WeakMap,X=new WeakMap,s=new WeakMap,i=new WeakMap,f=new WeakSet,hn=function([R,nt],At,vt){[At,vt]=this.screenToPageTranslation(At,vt),this.x+=At/R,this.y+=vt/nt,this.fixAndSetPosition()},b=new WeakSet,ln=function(){const[R,nt]=this.parentDimensions,{_borderLineWidth:At}=Ht,vt=At/R,Pt=At/nt;switch(this.rotation){case 90:return[-vt,Pt];case 180:return[vt,Pt];case 270:return[vt,-Pt];default:return[-vt,-Pt]}},d=new WeakSet,cn=function(R,nt,At){switch(At){case 90:return[nt,-R];case 180:return[-R,-nt];case 270:return[-nt,R];default:return[R,nt]}},a=new WeakSet,dn=function(R){switch(R){case 90:{const[nt,At]=this.pageDimensions;return[0,-nt/At,At/nt,0]}case 180:return[-1,0,0,-1];case 270:{const[nt,At]=this.pageDimensions;return[0,nt/At,-At/nt,0]}default:return[1,0,0,1]}},x=new WeakSet,cr=function(){if(t(this,Wt))return;O(this,Wt,document.createElement("div")),t(this,Wt).classList.add("resizers");const R=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const nt of R){const At=document.createElement("div");t(this,Wt).append(At),At.classList.add("resizer",nt),At.setAttribute("data-resizer-name",nt),At.addEventListener("pointerdown",M(this,u,dr).bind(this,nt)),At.addEventListener("contextmenu",A.noContextMenu),At.tabIndex=-1}this.div.prepend(t(this,Wt))},u=new WeakSet,dr=function(R,nt){var yt;nt.preventDefault();const{isMac:At}=st.FeatureTest.platform;if(nt.button!==0||nt.ctrlKey&&At)return;(yt=t(this,Yt))==null||yt.toggle(!1);const vt=M(this,N,pn).bind(this,R),Pt=this._isDraggable;this._isDraggable=!1;const Ct={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",vt,Ct);const p=this.x,e=this.y,r=this.width,S=this.height,F=this.parent.div.style.cursor,tt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(nt.target).cursor;const rt=()=>{var Tt;this.parent.togglePointerEvents(!0),(Tt=t(this,Yt))==null||Tt.toggle(!0),this._isDraggable=Pt,window.removeEventListener("pointerup",rt),window.removeEventListener("blur",rt),window.removeEventListener("pointermove",vt,Ct),this.parent.div.style.cursor=F,this.div.style.cursor=tt,M(this,j,un).call(this,p,e,r,S)};window.addEventListener("pointerup",rt),window.addEventListener("blur",rt)},j=new WeakSet,un=function(R,nt,At,vt){const Pt=this.x,Ct=this.y,p=this.width,e=this.height;Pt===R&&Ct===nt&&p===At&&e===vt||this.addCommands({cmd:()=>{this.width=p,this.height=e,this.x=Pt,this.y=Ct;const[r,S]=this.parentDimensions;this.setDims(r*p,S*e),this.fixAndSetPosition()},undo:()=>{this.width=At,this.height=vt,this.x=R,this.y=nt;const[r,S]=this.parentDimensions;this.setDims(r*At,S*vt),this.fixAndSetPosition()},mustExec:!0})},N=new WeakSet,pn=function(R,nt){const[At,vt]=this.parentDimensions,Pt=this.x,Ct=this.y,p=this.width,e=this.height,r=Ht.MIN_SIZE/At,S=Ht.MIN_SIZE/vt,F=ue=>Math.round(ue*1e4)/1e4,tt=M(this,a,dn).call(this,this.rotation),rt=(ue,_e)=>[tt[0]*ue+tt[2]*_e,tt[1]*ue+tt[3]*_e],yt=M(this,a,dn).call(this,360-this.rotation),Tt=(ue,_e)=>[yt[0]*ue+yt[2]*_e,yt[1]*ue+yt[3]*_e];let St,zt,It=!1,Mt=!1;switch(R){case"topLeft":It=!0,St=(ue,_e)=>[0,0],zt=(ue,_e)=>[ue,_e];break;case"topMiddle":St=(ue,_e)=>[ue/2,0],zt=(ue,_e)=>[ue/2,_e];break;case"topRight":It=!0,St=(ue,_e)=>[ue,0],zt=(ue,_e)=>[0,_e];break;case"middleRight":Mt=!0,St=(ue,_e)=>[ue,_e/2],zt=(ue,_e)=>[0,_e/2];break;case"bottomRight":It=!0,St=(ue,_e)=>[ue,_e],zt=(ue,_e)=>[0,0];break;case"bottomMiddle":St=(ue,_e)=>[ue/2,_e],zt=(ue,_e)=>[ue/2,0];break;case"bottomLeft":It=!0,St=(ue,_e)=>[0,_e],zt=(ue,_e)=>[ue,0];break;case"middleLeft":Mt=!0,St=(ue,_e)=>[0,_e/2],zt=(ue,_e)=>[ue,_e/2];break}const Qt=St(p,e),qt=zt(p,e);let ae=rt(...qt);const ce=F(Pt+ae[0]),we=F(Ct+ae[1]);let Se=1,Be=1,[Me,Pe]=this.screenToPageTranslation(nt.movementX,nt.movementY);if([Me,Pe]=Tt(Me/At,Pe/vt),It){const ue=Math.hypot(p,e);Se=Be=Math.max(Math.min(Math.hypot(qt[0]-Qt[0]-Me,qt[1]-Qt[1]-Pe)/ue,1/p,1/e),r/p,S/e)}else Mt?Se=Math.max(r,Math.min(1,Math.abs(qt[0]-Qt[0]-Me)))/p:Be=Math.max(S,Math.min(1,Math.abs(qt[1]-Qt[1]-Pe)))/e;const Fe=F(p*Se),hs=F(e*Be);ae=rt(...zt(Fe,hs));const Oe=ce-ae[0],Ge=we-ae[1];this.width=Fe,this.height=hs,this.x=Oe,this.y=Ge,this.setDims(At*Fe,vt*hs),this.fixAndSetPosition()},J=new WeakSet,gn=function(R){const{isMac:nt}=st.FeatureTest.platform;R.ctrlKey&&!nt||R.shiftKey||R.metaKey&&nt?this.parent.toggleSelected(this):this.parent.setSelected(this)},lt=new WeakSet,ur=function(R){const nt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let At,vt;nt&&(At={passive:!0,capture:!0},vt=Ct=>{const[p,e]=this.screenToPageTranslation(Ct.movementX,Ct.movementY);this._uiManager.dragSelectedEditors(p,e)},window.addEventListener("pointermove",vt,At));const Pt=()=>{window.removeEventListener("pointerup",Pt),window.removeEventListener("blur",Pt),nt&&window.removeEventListener("pointermove",vt,At),O(this,pe,!1),this._uiManager.endDragSession()||M(this,J,gn).call(this,R)};window.addEventListener("pointerup",Pt),window.addEventListener("blur",Pt)},g=new WeakSet,pr=function(R){Ht._resizerKeyboardManager.exec(this,R)},$=new WeakSet,gr=function(R){var nt;t(this,ye)&&((nt=R.relatedTarget)==null?void 0:nt.parentNode)!==t(this,Wt)&&M(this,Bt,Xs).call(this)},ut=new WeakSet,fr=function(R){O(this,me,t(this,ye)?R:"")},Et=new WeakSet,fn=function(R){if(t(this,te))for(const nt of t(this,te))nt.tabIndex=R},Bt=new WeakSet,Xs=function(){if(O(this,ye,!1),M(this,Et,fn).call(this,-1),t(this,le)){const{savedX:R,savedY:nt,savedWidth:At,savedHeight:vt}=t(this,le);M(this,j,un).call(this,R,nt,At,vt),O(this,le,null)}},m(Ht,d),be(Ht,"_borderLineWidth",-1),be(Ht,"_colorManager",new h.ColorManager),be(Ht,"_zIndex",1);let it=Ht;class H extends it{constructor(R){super(R),this.annotationElementId=R.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},405:(Ot,kt,at)=>{var st,A,U,gt,mr,H,_i,z,br,D,vr,T,mn;at.d(kt,{Outliner:()=>h});class h{constructor(W,V=0,P=0,Q=!0){m(this,gt);m(this,H);m(this,z);m(this,D);m(this,T);m(this,st,void 0);m(this,A,[]);m(this,U,[]);let C=1/0,Y=-1/0,ft=1/0,xt=-1/0;const dt=10**-4;for(const{x:ve,y:Jt,width:fe,height:oe}of W){const te=Math.floor((ve-V)/dt)*dt,Yt=Math.ceil((ve+fe+V)/dt)*dt,re=Math.floor((Jt-V)/dt)*dt,Wt=Math.ceil((Jt+oe+V)/dt)*dt,le=[te,re,Wt,!0],ie=[Yt,re,Wt,!1];t(this,A).push(le,ie),C=Math.min(C,te),Y=Math.max(Y,Yt),ft=Math.min(ft,re),xt=Math.max(xt,Wt)}const _t=Y-C+2*P,Lt=xt-ft+2*P,Gt=C-P,Nt=ft-P,Vt=t(this,A).at(Q?-1:-2),Xt=[Vt[0],Vt[2]];for(const ve of t(this,A)){const[Jt,fe,oe]=ve;ve[0]=(Jt-Gt)/_t,ve[1]=(fe-Nt)/Lt,ve[2]=(oe-Nt)/Lt}O(this,st,{x:Gt,y:Nt,width:_t,height:Lt,lastPoint:Xt})}getOutlines(){t(this,A).sort((V,P)=>V[0]-P[0]||V[1]-P[1]||V[2]-P[2]);const W=[];for(const V of t(this,A))V[3]?(W.push(...M(this,T,mn).call(this,V)),M(this,z,br).call(this,V)):(M(this,D,vr).call(this,V),W.push(...M(this,T,mn).call(this,V)));return M(this,gt,mr).call(this,W)}}st=new WeakMap,A=new WeakMap,U=new WeakMap,gt=new WeakSet,mr=function(W){const V=[],P=new Set;for(const Y of W){const[ft,xt,dt]=Y;V.push([ft,xt,Y],[ft,dt,Y])}V.sort((Y,ft)=>Y[1]-ft[1]||Y[0]-ft[0]);for(let Y=0,ft=V.length;Y<ft;Y+=2){const xt=V[Y][2],dt=V[Y+1][2];xt.push(dt),dt.push(xt),P.add(xt),P.add(dt)}const Q=[];let C;for(;P.size>0;){const Y=P.values().next().value;let[ft,xt,dt,_t,Lt]=Y;P.delete(Y);let Gt=ft,Nt=xt;for(C=[ft,dt],Q.push(C);;){let Vt;if(P.has(_t))Vt=_t;else if(P.has(Lt))Vt=Lt;else break;P.delete(Vt),[ft,xt,dt,_t,Lt]=Vt,Gt!==ft&&(C.push(Gt,Nt,ft,Nt===xt?xt:dt),Gt=ft),Nt=Nt===xt?dt:xt}C.push(Gt,Nt)}return{outlines:Q,box:t(this,st)}},H=new WeakSet,_i=function(W){const V=t(this,U);let P=0,Q=V.length-1;for(;P<=Q;){const C=P+Q>>1,Y=V[C][0];if(Y===W)return C;Y<W?P=C+1:Q=C-1}return Q+1},z=new WeakSet,br=function([,W,V]){const P=M(this,H,_i).call(this,W);t(this,U).splice(P,0,[W,V])},D=new WeakSet,vr=function([,W,V]){const P=M(this,H,_i).call(this,W);for(let Q=P;Q<t(this,U).length;Q++){const[C,Y]=t(this,U)[Q];if(C!==W)break;if(C===W&&Y===V){t(this,U).splice(Q,1);return}}for(let Q=P-1;Q>=0;Q--){const[C,Y]=t(this,U)[Q];if(C!==W)break;if(C===W&&Y===V){t(this,U).splice(Q,1);return}}},T=new WeakSet,mn=function(W){const[V,P,Q]=W,C=[[V,P,Q]],Y=M(this,H,_i).call(this,Q);for(let ft=0;ft<Y;ft++){const[xt,dt]=t(this,U)[ft];for(let _t=0,Lt=C.length;_t<Lt;_t++){const[,Gt,Nt]=C[_t];if(!(dt<=Gt||Nt<=xt)){if(Gt>=xt){if(Nt>dt)C[_t][1]=dt;else{if(Lt===1)return[];C.splice(_t,1),_t--,Lt--}continue}C[_t][2]=xt,Nt>dt&&C.push([V,dt,Nt])}}}return C}},812:(Ot,kt,at)=>{var D,ot,T,q,B,bn,P,Q,C,Y,ft,Ar,_t,Lt,Gt,Nt,Vt,Xt,ve,Jt,fe,oe,te,Yt,re,Wt,le,ie,he,jt,me,pe,Zt,ne,ye,X,s,i,f,k,b,v,d,c,a,o,x,l,u,E,yr,_,vn,Z,An,K,Ei,I,yn,L,wn,ht,Ue,bt,Js,Dt,wr,ee,_r,Kt,_n,nt,Qs,vt,En;at.d(kt,{AnnotationEditorUIManager:()=>G,ColorManager:()=>z,KeyboardManager:()=>w,bindEvents:()=>A,opacityToHex:()=>U});var h=at(266),st=at(473);function A(p,e,r){for(const S of r)e.addEventListener(S,p[S].bind(p))}function U(p){return Math.round(Math.min(255,Math.max(1,255*p))).toString(16).padStart(2,"0")}class gt{constructor(){m(this,D,0)}getId(){return`${h.AnnotationEditorPrefix}${Qe(this,D)._++}`}}D=new WeakMap;const V=class V{constructor(){m(this,B);m(this,ot,(0,h.getUuid)());m(this,T,0);m(this,q,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d"),S=new Image;S.src=e;const F=S.decode().then(()=>(r.drawImage(S,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,h.shadow)(this,"_isSVGFittingCanvas",F)}async getFromFile(e){const{lastModified:r,name:S,size:F,type:tt}=e;return M(this,B,bn).call(this,`${r}_${S}_${F}_${tt}`,e)}async getFromUrl(e){return M(this,B,bn).call(this,e,e)}async getFromId(e){t(this,q)||O(this,q,new Map);const r=t(this,q).get(e);return r?r.bitmap?(r.refCounter+=1,r):r.file?this.getFromFile(r.file):this.getFromUrl(r.url):null}getSvgUrl(e){const r=t(this,q).get(e);return r!=null&&r.isSvg?r.svgUrl:null}deleteId(e){t(this,q)||O(this,q,new Map);const r=t(this,q).get(e);r&&(r.refCounter-=1,r.refCounter===0&&(r.bitmap=null))}isValidId(e){return e.startsWith(`image_${t(this,ot)}_`)}};ot=new WeakMap,T=new WeakMap,q=new WeakMap,B=new WeakSet,bn=async function(e,r){t(this,q)||O(this,q,new Map);let S=t(this,q).get(e);if(S===null)return null;if(S!=null&&S.bitmap)return S.refCounter+=1,S;try{S||(S={bitmap:null,id:`image_${t(this,ot)}_${Qe(this,T)._++}`,refCounter:0,isSvg:!1});let F;if(typeof r=="string"?(S.url=r,F=await(0,st.fetchData)(r,"blob")):F=S.file=r,F.type==="image/svg+xml"){const tt=V._isSVGFittingCanvas,rt=new FileReader,yt=new Image,Tt=new Promise((St,zt)=>{yt.onload=()=>{S.bitmap=yt,S.isSvg=!0,St()},rt.onload=async()=>{const It=S.svgUrl=rt.result;yt.src=await tt?`${It}#svgView(preserveAspectRatio(none))`:It},yt.onerror=rt.onerror=zt});rt.readAsDataURL(F),await Tt}else S.bitmap=await createImageBitmap(F);S.refCounter=1}catch(F){console.error(F),S=null}return t(this,q).set(e,S),S&&t(this,q).set(S.id,S),S};let it=V;class H{constructor(e=128){m(this,P,[]);m(this,Q,!1);m(this,C,void 0);m(this,Y,-1);O(this,C,e)}add({cmd:e,undo:r,mustExec:S,type:F=NaN,overwriteIfSameType:tt=!1,keepUndo:rt=!1}){if(S&&e(),t(this,Q))return;const yt={cmd:e,undo:r,type:F};if(t(this,Y)===-1){t(this,P).length>0&&(t(this,P).length=0),O(this,Y,0),t(this,P).push(yt);return}if(tt&&t(this,P)[t(this,Y)].type===F){rt&&(yt.undo=t(this,P)[t(this,Y)].undo),t(this,P)[t(this,Y)]=yt;return}const Tt=t(this,Y)+1;Tt===t(this,C)?t(this,P).splice(0,1):(O(this,Y,Tt),Tt<t(this,P).length&&t(this,P).splice(Tt)),t(this,P).push(yt)}undo(){t(this,Y)!==-1&&(O(this,Q,!0),t(this,P)[t(this,Y)].undo(),O(this,Q,!1),O(this,Y,t(this,Y)-1))}redo(){t(this,Y)<t(this,P).length-1&&(O(this,Y,t(this,Y)+1),O(this,Q,!0),t(this,P)[t(this,Y)].cmd(),O(this,Q,!1))}hasSomethingToUndo(){return t(this,Y)!==-1}hasSomethingToRedo(){return t(this,Y)<t(this,P).length-1}destroy(){O(this,P,null)}}P=new WeakMap,Q=new WeakMap,C=new WeakMap,Y=new WeakMap;class w{constructor(e){m(this,ft);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:r}=h.FeatureTest.platform;for(const[S,F,tt={}]of e)for(const rt of S){const yt=rt.startsWith("mac+");r&&yt?(this.callbacks.set(rt.slice(4),{callback:F,options:tt}),this.allKeys.add(rt.split("+").at(-1))):!r&&!yt&&(this.callbacks.set(rt,{callback:F,options:tt}),this.allKeys.add(rt.split("+").at(-1)))}}exec(e,r){if(!this.allKeys.has(r.key))return;const S=this.callbacks.get(M(this,ft,Ar).call(this,r));if(!S)return;const{callback:F,options:{bubbles:tt=!1,args:rt=[],checker:yt=null}}=S;yt&&!yt(e,r)||(F.bind(e,...rt,r)(),tt||(r.stopPropagation(),r.preventDefault()))}}ft=new WeakSet,Ar=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const r=this.buffer.join("+");return this.buffer.length=0,r};const dt=class dt{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,st.getColorValues)(e),(0,h.shadow)(this,"_colors",e)}convert(e){const r=(0,st.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return r;for(const[S,F]of this._colors)if(F.every((tt,rt)=>tt===r[rt]))return dt._colorsMapping.get(S);return r}getHexCode(e){const r=this._colors.get(e);return r?h.Util.makeHexColor(...r):e}};be(dt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let z=dt;const Ct=class Ct{constructor(e,r,S,F,tt,rt,yt){m(this,E);m(this,_);m(this,Z);m(this,K);m(this,I);m(this,L);m(this,ht);m(this,bt);m(this,Dt);m(this,ee);m(this,Kt);m(this,nt);m(this,vt);m(this,_t,null);m(this,Lt,new Map);m(this,Gt,new Map);m(this,Nt,null);m(this,Vt,null);m(this,Xt,new H);m(this,ve,0);m(this,Jt,new Set);m(this,fe,null);m(this,oe,null);m(this,te,new Set);m(this,Yt,null);m(this,re,null);m(this,Wt,null);m(this,le,new gt);m(this,ie,!1);m(this,he,!1);m(this,jt,null);m(this,me,null);m(this,pe,h.AnnotationEditorType.NONE);m(this,Zt,new Set);m(this,ne,null);m(this,ye,this.blur.bind(this));m(this,X,this.focus.bind(this));m(this,s,this.copy.bind(this));m(this,i,this.cut.bind(this));m(this,f,this.paste.bind(this));m(this,k,this.keydown.bind(this));m(this,b,this.onEditingAction.bind(this));m(this,v,this.onPageChanging.bind(this));m(this,d,this.onScaleChanging.bind(this));m(this,c,this.onRotationChanging.bind(this));m(this,a,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});m(this,o,[0,0]);m(this,x,null);m(this,l,null);m(this,u,null);O(this,l,e),O(this,u,r),O(this,Nt,S),this._eventBus=F,this._eventBus._on("editingaction",t(this,b)),this._eventBus._on("pagechanging",t(this,v)),this._eventBus._on("scalechanging",t(this,d)),this._eventBus._on("rotationchanging",t(this,c)),O(this,Vt,tt.annotationStorage),O(this,Yt,tt.filterFactory),O(this,ne,rt),O(this,Wt,yt||null),this.viewParameters={realScale:st.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const e=Ct.prototype,r=rt=>t(rt,l).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&rt.hasSomethingToControl(),S=(rt,{target:yt})=>{if(yt instanceof HTMLInputElement){const{type:Tt}=yt;return Tt!=="text"&&Tt!=="number"}return!0},F=this.TRANSLATE_SMALL,tt=this.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new w([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:S}],[["ctrl+z","mac+meta+z"],e.undo,{checker:S}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:S}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:S}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(rt,{target:yt})=>!(yt instanceof HTMLButtonElement)&&t(rt,l).contains(yt)&&!rt.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:rt=>t(rt,l).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-F,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-tt,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[F,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[tt,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-F],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-tt],checker:r}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,F],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,tt],checker:r}]]))}destroy(){var e;M(this,K,Ei).call(this),M(this,_,vn).call(this),this._eventBus._off("editingaction",t(this,b)),this._eventBus._off("pagechanging",t(this,v)),this._eventBus._off("scalechanging",t(this,d)),this._eventBus._off("rotationchanging",t(this,c));for(const r of t(this,Gt).values())r.destroy();t(this,Gt).clear(),t(this,Lt).clear(),t(this,te).clear(),O(this,_t,null),t(this,Zt).clear(),t(this,Xt).destroy(),(e=t(this,Nt))==null||e.destroy(),t(this,re)&&(clearTimeout(t(this,re)),O(this,re,null)),t(this,x)&&(clearTimeout(t(this,x)),O(this,x,null))}get hcmFilter(){return(0,h.shadow)(this,"hcmFilter",t(this,ne)?t(this,Yt).addHCMFilter(t(this,ne).foreground,t(this,ne).background):"none")}get direction(){return(0,h.shadow)(this,"direction",getComputedStyle(t(this,l)).direction)}get highlightColors(){return(0,h.shadow)(this,"highlightColors",t(this,Wt)?new Map(t(this,Wt).split(",").map(e=>e.split("=").map(r=>r.trim()))):null)}setMainHighlightColorPicker(e){O(this,me,e)}editAltText(e){var r;(r=t(this,Nt))==null||r.editAltText(this,e)}onPageChanging({pageNumber:e}){O(this,ve,e-1)}focusMainContainer(){t(this,l).focus()}findParent(e,r){for(const S of t(this,Gt).values()){const{x:F,y:tt,width:rt,height:yt}=S.div.getBoundingClientRect();if(e>=F&&e<=F+rt&&r>=tt&&r<=tt+yt)return S}return null}disableUserSelect(e=!1){t(this,u).classList.toggle("noUserSelect",e)}addShouldRescale(e){t(this,te).add(e)}removeShouldRescale(e){t(this,te).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*st.PixelsPerInch.PDF_TO_CSS_UNITS;for(const r of t(this,te))r.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&t(this,Vt)&&!t(this,Vt).has(e.id)&&t(this,Vt).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const r of t(this,Zt))if(r.div.contains(e)){O(this,jt,[r,e]),r._focusEventsAllowed=!1;break}}focus(){if(!t(this,jt))return;const[e,r]=t(this,jt);O(this,jt,null),r.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),r.focus()}addEditListeners(){M(this,Z,An).call(this),M(this,I,yn).call(this)}removeEditListeners(){M(this,K,Ei).call(this),M(this,L,wn).call(this)}copy(e){var S;if(e.preventDefault(),(S=t(this,_t))==null||S.commitOrRemove(),!this.hasSelection)return;const r=[];for(const F of t(this,Zt)){const tt=F.serialize(!0);tt&&r.push(tt)}r.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:r}=e;for(const tt of r.items)for(const rt of t(this,oe))if(rt.isHandlingMimeForPasting(tt.type)){rt.paste(tt,this.currentLayer);return}let S=r.getData("application/pdfjs");if(!S)return;try{S=JSON.parse(S)}catch(tt){(0,h.warn)(`paste: "${tt.message}".`);return}if(!Array.isArray(S))return;this.unselectAll();const F=this.currentLayer;try{const tt=[];for(const Tt of S){const St=F.deserialize(Tt);if(!St)return;tt.push(St)}const rt=()=>{for(const Tt of tt)M(this,Kt,_n).call(this,Tt);M(this,vt,En).call(this,tt)},yt=()=>{for(const Tt of tt)Tt.remove()};this.addCommands({cmd:rt,undo:yt,mustExec:!0})}catch(tt){(0,h.warn)(`paste: "${tt.message}".`)}}keydown(e){this.isEditorHandlingKeyboard||Ct._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(M(this,E,yr).call(this),M(this,Z,An).call(this),M(this,I,yn).call(this),M(this,ht,Ue).call(this,{isEditing:t(this,pe)!==h.AnnotationEditorType.NONE,isEmpty:M(this,nt,Qs).call(this),hasSomethingToUndo:t(this,Xt).hasSomethingToUndo(),hasSomethingToRedo:t(this,Xt).hasSomethingToRedo(),hasSelectedEditor:!1})):(M(this,_,vn).call(this),M(this,K,Ei).call(this),M(this,L,wn).call(this),M(this,ht,Ue).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!t(this,oe)){O(this,oe,e);for(const r of t(this,oe))M(this,bt,Js).call(this,r.defaultPropertiesToUpdate)}}getId(){return t(this,le).getId()}get currentLayer(){return t(this,Gt).get(t(this,ve))}getLayer(e){return t(this,Gt).get(e)}get currentPageIndex(){return t(this,ve)}addLayer(e){t(this,Gt).set(e.pageIndex,e),t(this,ie)?e.enable():e.disable()}removeLayer(e){t(this,Gt).delete(e.pageIndex)}updateMode(e,r=null,S=!1){if(t(this,pe)!==e){if(O(this,pe,e),e===h.AnnotationEditorType.NONE){this.setEditingState(!1),M(this,ee,_r).call(this);return}this.setEditingState(!0),M(this,Dt,wr).call(this),this.unselectAll();for(const F of t(this,Gt).values())F.updateMode(e);if(!r&&S){this.addNewEditorFromKeyboard();return}if(r){for(const F of t(this,Lt).values())if(F.annotationElementId===r){this.setSelected(F),F.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==t(this,pe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,r){var S;if(t(this,oe)){switch(e){case h.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case h.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(S=t(this,me))==null||S.updateColor(r);break}for(const F of t(this,Zt))F.updateParams(e,r);for(const F of t(this,oe))F.updateDefaultParams(e,r)}}enableWaiting(e=!1){if(t(this,he)!==e){O(this,he,e);for(const r of t(this,Gt).values())e?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",e)}}getEditors(e){const r=[];for(const S of t(this,Lt).values())S.pageIndex===e&&r.push(S);return r}getEditor(e){return t(this,Lt).get(e)}addEditor(e){t(this,Lt).set(e.id,e)}removeEditor(e){var r;e.div.contains(document.activeElement)&&(t(this,re)&&clearTimeout(t(this,re)),O(this,re,setTimeout(()=>{this.focusMainContainer(),O(this,re,null)},0))),t(this,Lt).delete(e.id),this.unselect(e),(!e.annotationElementId||!t(this,Jt).has(e.annotationElementId))&&((r=t(this,Vt))==null||r.remove(e.id))}addDeletedAnnotationElement(e){t(this,Jt).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return t(this,Jt).has(e)}removeDeletedAnnotationElement(e){t(this,Jt).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){t(this,_t)!==e&&(O(this,_t,e),e&&M(this,bt,Js).call(this,e.propertiesToUpdate))}toggleSelected(e){if(t(this,Zt).has(e)){t(this,Zt).delete(e),e.unselect(),M(this,ht,Ue).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,Zt).add(e),e.select(),M(this,bt,Js).call(this,e.propertiesToUpdate),M(this,ht,Ue).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const r of t(this,Zt))r!==e&&r.unselect();t(this,Zt).clear(),t(this,Zt).add(e),e.select(),M(this,bt,Js).call(this,e.propertiesToUpdate),M(this,ht,Ue).call(this,{hasSelectedEditor:!0})}isSelected(e){return t(this,Zt).has(e)}get firstSelectedEditor(){return t(this,Zt).values().next().value}unselect(e){e.unselect(),t(this,Zt).delete(e),M(this,ht,Ue).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,Zt).size!==0}get isEnterHandled(){return t(this,Zt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){t(this,Xt).undo(),M(this,ht,Ue).call(this,{hasSomethingToUndo:t(this,Xt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:M(this,nt,Qs).call(this)})}redo(){t(this,Xt).redo(),M(this,ht,Ue).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,Xt).hasSomethingToRedo(),isEmpty:M(this,nt,Qs).call(this)})}addCommands(e){t(this,Xt).add(e),M(this,ht,Ue).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:M(this,nt,Qs).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...t(this,Zt)],r=()=>{for(const F of e)F.remove()},S=()=>{for(const F of e)M(this,Kt,_n).call(this,F)};this.addCommands({cmd:r,undo:S,mustExec:!0})}commitOrRemove(){var e;(e=t(this,_t))==null||e.commitOrRemove()}hasSomethingToControl(){return t(this,_t)||this.hasSelection}selectAll(){for(const e of t(this,Zt))e.commit();M(this,vt,En).call(this,t(this,Lt).values())}unselectAll(){if(!(t(this,_t)&&(t(this,_t).commitOrRemove(),t(this,pe)!==h.AnnotationEditorType.NONE))&&this.hasSelection){for(const e of t(this,Zt))e.unselect();t(this,Zt).clear(),M(this,ht,Ue).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,r,S=!1){if(S||this.commitOrRemove(),!this.hasSelection)return;t(this,o)[0]+=e,t(this,o)[1]+=r;const[F,tt]=t(this,o),rt=[...t(this,Zt)];t(this,x)&&clearTimeout(t(this,x)),O(this,x,setTimeout(()=>{O(this,x,null),t(this,o)[0]=t(this,o)[1]=0,this.addCommands({cmd:()=>{for(const Tt of rt)t(this,Lt).has(Tt.id)&&Tt.translateInPage(F,tt)},undo:()=>{for(const Tt of rt)t(this,Lt).has(Tt.id)&&Tt.translateInPage(-F,-tt)},mustExec:!1})},1e3));for(const Tt of rt)Tt.translateInPage(e,r)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),O(this,fe,new Map);for(const e of t(this,Zt))t(this,fe).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,fe))return!1;this.disableUserSelect(!1);const e=t(this,fe);O(this,fe,null);let r=!1;for(const[{x:F,y:tt,pageIndex:rt},yt]of e)yt.newX=F,yt.newY=tt,yt.newPageIndex=rt,r||(r=F!==yt.savedX||tt!==yt.savedY||rt!==yt.savedPageIndex);if(!r)return!1;const S=(F,tt,rt,yt)=>{if(t(this,Lt).has(F.id)){const Tt=t(this,Gt).get(yt);Tt?F._setParentAndPosition(Tt,tt,rt):(F.pageIndex=yt,F.x=tt,F.y=rt)}};return this.addCommands({cmd:()=>{for(const[F,{newX:tt,newY:rt,newPageIndex:yt}]of e)S(F,tt,rt,yt)},undo:()=>{for(const[F,{savedX:tt,savedY:rt,savedPageIndex:yt}]of e)S(F,tt,rt,yt)},mustExec:!0}),!0}dragSelectedEditors(e,r){if(t(this,fe))for(const S of t(this,fe).keys())S.drag(e,r)}rebuild(e){if(e.parent===null){const r=this.getLayer(e.pageIndex);r?(r.changeParent(e),r.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||t(this,Zt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return t(this,_t)===e}getActive(){return t(this,_t)}getMode(){return t(this,pe)}get imageManager(){return(0,h.shadow)(this,"imageManager",new it)}};_t=new WeakMap,Lt=new WeakMap,Gt=new WeakMap,Nt=new WeakMap,Vt=new WeakMap,Xt=new WeakMap,ve=new WeakMap,Jt=new WeakMap,fe=new WeakMap,oe=new WeakMap,te=new WeakMap,Yt=new WeakMap,re=new WeakMap,Wt=new WeakMap,le=new WeakMap,ie=new WeakMap,he=new WeakMap,jt=new WeakMap,me=new WeakMap,pe=new WeakMap,Zt=new WeakMap,ne=new WeakMap,ye=new WeakMap,X=new WeakMap,s=new WeakMap,i=new WeakMap,f=new WeakMap,k=new WeakMap,b=new WeakMap,v=new WeakMap,d=new WeakMap,c=new WeakMap,a=new WeakMap,o=new WeakMap,x=new WeakMap,l=new WeakMap,u=new WeakMap,E=new WeakSet,yr=function(){window.addEventListener("focus",t(this,X)),window.addEventListener("blur",t(this,ye))},_=new WeakSet,vn=function(){window.removeEventListener("focus",t(this,X)),window.removeEventListener("blur",t(this,ye))},Z=new WeakSet,An=function(){window.addEventListener("keydown",t(this,k))},K=new WeakSet,Ei=function(){window.removeEventListener("keydown",t(this,k))},I=new WeakSet,yn=function(){document.addEventListener("copy",t(this,s)),document.addEventListener("cut",t(this,i)),document.addEventListener("paste",t(this,f))},L=new WeakSet,wn=function(){document.removeEventListener("copy",t(this,s)),document.removeEventListener("cut",t(this,i)),document.removeEventListener("paste",t(this,f))},ht=new WeakSet,Ue=function(e){Object.entries(e).some(([r,S])=>t(this,a)[r]!==S)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,a),e)})},bt=new WeakSet,Js=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Dt=new WeakSet,wr=function(){if(!t(this,ie)){O(this,ie,!0);for(const e of t(this,Gt).values())e.enable()}},ee=new WeakSet,_r=function(){if(this.unselectAll(),t(this,ie)){O(this,ie,!1);for(const e of t(this,Gt).values())e.disable()}},Kt=new WeakSet,_n=function(e){const r=t(this,Gt).get(e.pageIndex);r?r.addOrRebuild(e):this.addEditor(e)},nt=new WeakSet,Qs=function(){if(t(this,Lt).size===0)return!0;if(t(this,Lt).size===1)for(const e of t(this,Lt).values())return e.isEmpty();return!1},vt=new WeakSet,En=function(e){t(this,Zt).clear();for(const r of e)r.isEmpty()||(t(this,Zt).add(r),r.select());M(this,ht,Ue).call(this,{hasSelectedEditor:!0})},be(Ct,"TRANSLATE_SMALL",1),be(Ct,"TRANSLATE_BIG",10);let G=Ct},171:(Ot,kt,at)=>{at.d(kt,{PDFFetchStream:()=>it});var h=at(266),st=at(253);function A(z,G,D){return{method:"GET",headers:z,signal:D.signal,mode:"cors",credentials:G?"include":"same-origin",redirect:"follow"}}function U(z){const G=new Headers;for(const D in z){const ot=z[D];ot!==void 0&&G.append(D,ot)}return G}function gt(z){return z instanceof Uint8Array?z.buffer:z instanceof ArrayBuffer?z:((0,h.warn)(`getArrayBuffer - unexpected data format: ${z}`),new Uint8Array(z).buffer)}class it{constructor(G){this.source=G,this.isHttp=/^https?:/i.test(G.url),this.httpHeaders=this.isHttp&&G.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var G;return((G=this._fullRequestReader)==null?void 0:G._loaded)??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new H(this),this._fullRequestReader}getRangeReader(G,D){if(D<=this._progressiveDataLength)return null;const ot=new w(this,G,D);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(G){var D;(D=this._fullRequestReader)==null||D.cancel(G);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(G)}}class H{constructor(G){this._stream=G,this._reader=null,this._loaded=0,this._filename=null;const D=G.source;this._withCredentials=D.withCredentials||!1,this._contentLength=D.length,this._headersCapability=new h.PromiseCapability,this._disableRange=D.disableRange||!1,this._rangeChunkSize=D.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!D.disableStream,this._isRangeSupported=!D.disableRange,this._headers=U(this._stream.httpHeaders);const ot=D.url;fetch(ot,A(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,st.validateResponseStatus)(T.status))throw(0,st.createResponseStatusError)(T.status,ot);this._reader=T.body.getReader(),this._headersCapability.resolve();const q=V=>T.headers.get(V),{allowRangeRequests:B,suggestedLength:W}=(0,st.validateRangeRequestCapabilities)({getResponseHeader:q,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=B,this._contentLength=W||this._contentLength,this._filename=(0,st.extractFilenameFromHeader)(q),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new h.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:G,done:D}=await this._reader.read();return D?{value:G,done:D}:(this._loaded+=G.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:gt(G),done:!1})}cancel(G){var D;(D=this._reader)==null||D.cancel(G),this._abortController.abort()}}class w{constructor(G,D,ot){this._stream=G,this._reader=null,this._loaded=0;const T=G.source;this._withCredentials=T.withCredentials||!1,this._readCapability=new h.PromiseCapability,this._isStreamingSupported=!T.disableStream,this._abortController=new AbortController,this._headers=U(this._stream.httpHeaders),this._headers.append("Range",`bytes=${D}-${ot-1}`);const q=T.url;fetch(q,A(this._headers,this._withCredentials,this._abortController)).then(B=>{if(!(0,st.validateResponseStatus)(B.status))throw(0,st.createResponseStatusError)(B.status,q);this._readCapability.resolve(),this._reader=B.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:G,done:D}=await this._reader.read();return D?{value:G,done:D}:(this._loaded+=G.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:gt(G),done:!1})}cancel(G){var D;(D=this._reader)==null||D.cancel(G),this._abortController.abort()}}},742:(Ot,kt,at)=>{var U;at.d(kt,{FontFaceObject:()=>A,FontLoader:()=>st});var h=at(266);class st{constructor({ownerDocument:it=globalThis.document,styleElement:H=null}){m(this,U,new Set);this._document=it,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(it){this.nativeFontFaces.add(it),this._document.fonts.add(it)}removeNativeFontFace(it){this.nativeFontFaces.delete(it),this._document.fonts.delete(it)}insertRule(it){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const H=this.styleElement.sheet;H.insertRule(it,H.cssRules.length)}clear(){for(const it of this.nativeFontFaces)this._document.fonts.delete(it);this.nativeFontFaces.clear(),t(this,U).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:it,_inspectFont:H}){if(!(!it||t(this,U).has(it.loadedName))){if((0,h.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:w,src:z,style:G}=it,D=new FontFace(w,z,G);this.addNativeFontFace(D);try{await D.load(),t(this,U).add(w),H==null||H(it)}catch{(0,h.warn)(`Cannot load system font: ${it.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(D)}return}(0,h.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(it){if(it.attached||it.missingFile&&!it.systemFontInfo)return;if(it.attached=!0,it.systemFontInfo){await this.loadSystemFont(it);return}if(this.isFontLoadingAPISupported){const w=it.createNativeFontFace();if(w){this.addNativeFontFace(w);try{await w.loaded}catch(z){throw(0,h.warn)(`Failed to load font '${w.family}': '${z}'.`),it.disableFontFace=!0,z}}return}const H=it.createFontFaceRule();if(H){if(this.insertRule(H),this.isSyncFontLoadingSupported)return;await new Promise(w=>{const z=this._queueLoadingCallback(w);this._prepareFontLoadEvent(it,z)})}}get isFontLoadingAPISupported(){var H;const it=!!((H=this._document)!=null&&H.fonts);return(0,h.shadow)(this,"isFontLoadingAPISupported",it)}get isSyncFontLoadingSupported(){let it=!1;return(h.isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(it=!0),(0,h.shadow)(this,"isSyncFontLoadingSupported",it)}_queueLoadingCallback(it){function H(){for((0,h.assert)(!z.done,"completeRequest() cannot be called twice."),z.done=!0;w.length>0&&w[0].done;){const G=w.shift();setTimeout(G.callback,0)}}const{loadingRequests:w}=this,z={done:!1,complete:H,callback:it};return w.push(z),z}get _loadTestFont(){const it=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,h.shadow)(this,"_loadTestFont",it)}_prepareFontLoadEvent(it,H){function w(dt,_t){return dt.charCodeAt(_t)<<24|dt.charCodeAt(_t+1)<<16|dt.charCodeAt(_t+2)<<8|dt.charCodeAt(_t+3)&255}function z(dt,_t,Lt,Gt){const Nt=dt.substring(0,_t),Vt=dt.substring(_t+Lt);return Nt+Gt+Vt}let G,D;const ot=this._document.createElement("canvas");ot.width=1,ot.height=1;const T=ot.getContext("2d");let q=0;function B(dt,_t){if(++q>30){(0,h.warn)("Load test font never loaded."),_t();return}if(T.font="30px "+dt,T.fillText(".",0,20),T.getImageData(0,0,1,1).data[3]>0){_t();return}setTimeout(B.bind(null,dt,_t))}const W=`lt${Date.now()}${this.loadTestFontId++}`;let V=this._loadTestFont;V=z(V,976,W.length,W);const P=16,Q=1482184792;let C=w(V,P);for(G=0,D=W.length-3;G<D;G+=4)C=C-Q+w(W,G)|0;G<W.length&&(C=C-Q+w(W+"XXX",G)|0),V=z(V,P,4,(0,h.string32)(C));const Y=`url(data:font/opentype;base64,${btoa(V)});`,ft=`@font-face {font-family:"${W}";src:${Y}}`;this.insertRule(ft);const xt=this._document.createElement("div");xt.style.visibility="hidden",xt.style.width=xt.style.height="10px",xt.style.position="absolute",xt.style.top=xt.style.left="0px";for(const dt of[it.loadedName,W]){const _t=this._document.createElement("span");_t.textContent="Hi",_t.style.fontFamily=dt,xt.append(_t)}this._document.body.append(xt),B(W,()=>{xt.remove(),H.complete()})}}U=new WeakMap;class A{constructor(it,{isEvalSupported:H=!0,disableFontFace:w=!1,ignoreErrors:z=!1,inspectFont:G=null}){this.compiledGlyphs=Object.create(null);for(const D in it)this[D]=it[D];this.isEvalSupported=H!==!1,this.disableFontFace=w===!0,this.ignoreErrors=z===!0,this._inspectFont=G}createNativeFontFace(){var H;if(!this.data||this.disableFontFace)return null;let it;if(!this.cssFontInfo)it=new FontFace(this.loadedName,this.data,{});else{const w={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(w.style=`oblique ${this.cssFontInfo.italicAngle}deg`),it=new FontFace(this.cssFontInfo.fontFamily,this.data,w)}return(H=this._inspectFont)==null||H.call(this,this),it}createFontFaceRule(){var z;if(!this.data||this.disableFontFace)return null;const it=(0,h.bytesToString)(this.data),H=`url(data:${this.mimetype};base64,${btoa(it)});`;let w;if(!this.cssFontInfo)w=`@font-face {font-family:"${this.loadedName}";src:${H}}`;else{let G=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(G+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),w=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${G}src:${H}}`}return(z=this._inspectFont)==null||z.call(this,this,H),w}getPathGenerator(it,H){if(this.compiledGlyphs[H]!==void 0)return this.compiledGlyphs[H];let w;try{w=it.get(this.loadedName+"_path_"+H)}catch(z){if(!this.ignoreErrors)throw z;return(0,h.warn)(`getPathGenerator - ignoring character: "${z}".`),this.compiledGlyphs[H]=function(G,D){}}if(this.isEvalSupported&&h.FeatureTest.isEvalSupported){const z=[];for(const G of w){const D=G.args!==void 0?G.args.join(","):"";z.push("c.",G.cmd,"(",D,`);
`)}return this.compiledGlyphs[H]=new Function("c","size",z.join(""))}return this.compiledGlyphs[H]=function(z,G){for(const D of w)D.cmd==="scale"&&(D.args=[G,-G]),z[D.cmd].apply(z,D.args)}}}},472:(Ot,kt,at)=>{var A,U;at.d(kt,{Metadata:()=>st});var h=at(266);class st{constructor({parsedData:it,rawData:H}){m(this,A,void 0);m(this,U,void 0);O(this,A,it),O(this,U,H)}getRaw(){return t(this,U)}get(it){return t(this,A).get(it)??null}getAll(){return(0,h.objectFromMap)(t(this,A))}has(it){return t(this,A).has(it)}}A=new WeakMap,U=new WeakMap},474:(Ot,kt,at)=>{at.d(kt,{PDFNetworkStream:()=>H});var h=at(266),st=at(253);const A=200,U=206;function gt(G){const D=G.response;return typeof D!="string"?D:(0,h.stringToBytes)(D).buffer}class it{constructor(D,ot={}){this.url=D,this.isHttp=/^https?:/i.test(D),this.httpHeaders=this.isHttp&&ot.httpHeaders||Object.create(null),this.withCredentials=ot.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(D,ot,T){const q={begin:D,end:ot};for(const B in T)q[B]=T[B];return this.request(q)}requestFull(D){return this.request(D)}request(D){const ot=new XMLHttpRequest,T=this.currXhrId++,q=this.pendingRequests[T]={xhr:ot};ot.open("GET",this.url),ot.withCredentials=this.withCredentials;for(const B in this.httpHeaders){const W=this.httpHeaders[B];W!==void 0&&ot.setRequestHeader(B,W)}return this.isHttp&&"begin"in D&&"end"in D?(ot.setRequestHeader("Range",`bytes=${D.begin}-${D.end-1}`),q.expectedStatus=U):q.expectedStatus=A,ot.responseType="arraybuffer",D.onError&&(ot.onerror=function(B){D.onError(ot.status)}),ot.onreadystatechange=this.onStateChange.bind(this,T),ot.onprogress=this.onProgress.bind(this,T),q.onHeadersReceived=D.onHeadersReceived,q.onDone=D.onDone,q.onError=D.onError,q.onProgress=D.onProgress,ot.send(null),T}onProgress(D,ot){var q;const T=this.pendingRequests[D];T&&((q=T.onProgress)==null||q.call(T,ot))}onStateChange(D,ot){var V,P,Q;const T=this.pendingRequests[D];if(!T)return;const q=T.xhr;if(q.readyState>=2&&T.onHeadersReceived&&(T.onHeadersReceived(),delete T.onHeadersReceived),q.readyState!==4||!(D in this.pendingRequests))return;if(delete this.pendingRequests[D],q.status===0&&this.isHttp){(V=T.onError)==null||V.call(T,q.status);return}const B=q.status||A;if(!(B===A&&T.expectedStatus===U)&&B!==T.expectedStatus){(P=T.onError)==null||P.call(T,q.status);return}const W=gt(q);if(B===U){const C=q.getResponseHeader("Content-Range"),Y=/bytes (\d+)-(\d+)\/(\d+)/.exec(C);T.onDone({begin:parseInt(Y[1],10),chunk:W})}else W?T.onDone({begin:0,chunk:W}):(Q=T.onError)==null||Q.call(T,q.status)}getRequestXhr(D){return this.pendingRequests[D].xhr}isPendingRequest(D){return D in this.pendingRequests}abortRequest(D){const ot=this.pendingRequests[D].xhr;delete this.pendingRequests[D],ot.abort()}}class H{constructor(D){this._source=D,this._manager=new it(D.url,{httpHeaders:D.httpHeaders,withCredentials:D.withCredentials}),this._rangeChunkSize=D.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(D){const ot=this._rangeRequestReaders.indexOf(D);ot>=0&&this._rangeRequestReaders.splice(ot,1)}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new w(this._manager,this._source),this._fullRequestReader}getRangeReader(D,ot){const T=new z(this._manager,D,ot);return T.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(T),T}cancelAllRequests(D){var ot;(ot=this._fullRequestReader)==null||ot.cancel(D);for(const T of this._rangeRequestReaders.slice(0))T.cancel(D)}}class w{constructor(D,ot){this._manager=D;const T={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ot.url,this._fullRequestId=D.requestFull(T),this._headersReceivedCapability=new h.PromiseCapability,this._disableRange=ot.disableRange||!1,this._contentLength=ot.length,this._rangeChunkSize=ot.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const D=this._fullRequestId,ot=this._manager.getRequestXhr(D),T=W=>ot.getResponseHeader(W),{allowRangeRequests:q,suggestedLength:B}=(0,st.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});q&&(this._isRangeSupported=!0),this._contentLength=B||this._contentLength,this._filename=(0,st.extractFilenameFromHeader)(T),this._isRangeSupported&&this._manager.abortRequest(D),this._headersReceivedCapability.resolve()}_onDone(D){if(D&&(this._requests.length>0?this._requests.shift().resolve({value:D.chunk,done:!1}):this._cachedChunks.push(D.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(D){this._storedError=(0,st.createResponseStatusError)(D,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(D){var ot;(ot=this.onProgress)==null||ot.call(this,{loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const D=new h.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0,this._headersReceivedCapability.reject(D);for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class z{constructor(D,ot,T){this._manager=D;const q={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._requestId=D.requestRange(ot,T,q),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var D;(D=this.onClosed)==null||D.call(this,this)}_onDone(D){const ot=D.chunk;this._requests.length>0?this._requests.shift().resolve({value:ot,done:!1}):this._queuedChunk=ot,this._done=!0;for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(D){this._storedError=(0,st.createResponseStatusError)(D,this._url);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(D){var ot;this.isStreamingSupported||((ot=this.onProgress)==null||ot.call(this,{loaded:D.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ot=this._queuedChunk;return this._queuedChunk=null,{value:ot,done:!1}}if(this._done)return{value:void 0,done:!0};const D=new h.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},253:(Ot,kt,at)=>{at.d(kt,{createResponseStatusError:()=>it,extractFilenameFromHeader:()=>gt,validateRangeRequestCapabilities:()=>U,validateResponseStatus:()=>H});var h=at(266);function st(w){let z=!0,G=D("filename\\*","i").exec(w);if(G){G=G[1];let P=B(G);return P=unescape(P),P=W(P),P=V(P),T(P)}if(G=q(w),G){const P=V(G);return T(P)}if(G=D("filename","i").exec(w),G){G=G[1];let P=B(G);return P=V(P),T(P)}function D(P,Q){return new RegExp("(?:^|;)\\s*"+P+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Q)}function ot(P,Q){if(P){if(!/^[\x00-\xFF]+$/.test(Q))return Q;try{const C=new TextDecoder(P,{fatal:!0}),Y=(0,h.stringToBytes)(Q);Q=C.decode(Y),z=!1}catch{}}return Q}function T(P){return z&&/[\x80-\xff]/.test(P)&&(P=ot("utf-8",P),z&&(P=ot("iso-8859-1",P))),P}function q(P){const Q=[];let C;const Y=D("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(C=Y.exec(P))!==null;){let[,xt,dt,_t]=C;if(xt=parseInt(xt,10),xt in Q){if(xt===0)break;continue}Q[xt]=[dt,_t]}const ft=[];for(let xt=0;xt<Q.length&&xt in Q;++xt){let[dt,_t]=Q[xt];_t=B(_t),dt&&(_t=unescape(_t),xt===0&&(_t=W(_t))),ft.push(_t)}return ft.join("")}function B(P){if(P.startsWith('"')){const Q=P.slice(1).split('\\"');for(let C=0;C<Q.length;++C){const Y=Q[C].indexOf('"');Y!==-1&&(Q[C]=Q[C].slice(0,Y),Q.length=C+1),Q[C]=Q[C].replaceAll(/\\(.)/g,"$1")}P=Q.join('"')}return P}function W(P){const Q=P.indexOf("'");if(Q===-1)return P;const C=P.slice(0,Q),Y=P.slice(Q+1).replace(/^[^']*'/,"");return ot(C,Y)}function V(P){return!P.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(P)?P:P.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Q,C,Y,ft){if(Y==="q"||Y==="Q")return ft=ft.replaceAll("_"," "),ft=ft.replaceAll(/=([0-9a-fA-F]{2})/g,function(xt,dt){return String.fromCharCode(parseInt(dt,16))}),ot(C,ft);try{ft=atob(ft)}catch{}return ot(C,ft)})}return""}var A=at(473);function U({getResponseHeader:w,isHttp:z,rangeChunkSize:G,disableRange:D}){const ot={allowRangeRequests:!1,suggestedLength:void 0},T=parseInt(w("Content-Length"),10);return!Number.isInteger(T)||(ot.suggestedLength=T,T<=2*G)||D||!z||w("Accept-Ranges")!=="bytes"||(w("Content-Encoding")||"identity")!=="identity"||(ot.allowRangeRequests=!0),ot}function gt(w){const z=w("Content-Disposition");if(z){let G=st(z);if(G.includes("%"))try{G=decodeURIComponent(G)}catch{}if((0,A.isPdfFile)(G))return G}return null}function it(w,z){return w===404||w===0&&z.startsWith("file:")?new h.MissingPDFException('Missing PDF "'+z+'".'):new h.UnexpectedResponseException(`Unexpected server response (${w}) while retrieving PDF "${z}".`,w)}function H(w){return w===200||w===206}},498:(Ot,kt,at)=>{at.a(Ot,async(h,st)=>{try{let gt=function(Q){const C=G.parse(Q);return C.protocol==="file:"||C.host?C:/^[a-z]:[/\\]/i.test(Q)?G.parse(`file:///${Q}`):(C.host||(C.protocol="file:"),C)},it=function(Q,C){return{protocol:Q.protocol,auth:Q.auth,host:Q.hostname,port:Q.port,path:Q.path,method:"GET",headers:C}};at.d(kt,{PDFNodeStream:()=>ot});var A=at(266),U=at(253);let H,w,z,G;A.isNodeJS&&(H=await ts(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),w=await ts(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),z=await ts(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),G=await ts(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]));const D=/^file:\/\/\/[a-zA-Z]:\//;class ot{constructor(C){this.source=C,this.url=gt(C.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}getFullReader(){return(0,A.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new V(this):new B(this),this._fullRequestReader}getRangeReader(C,Y){if(Y<=this._progressiveDataLength)return null;const ft=this.isFsUrl?new P(this,C,Y):new W(this,C,Y);return this._rangeRequestReaders.push(ft),ft}cancelAllRequests(C){var Y;(Y=this._fullRequestReader)==null||Y.cancel(C);for(const ft of this._rangeRequestReaders.slice(0))ft.cancel(C)}}class T{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null;const Y=C.source;this._contentLength=Y.length,this._loaded=0,this._filename=null,this._disableRange=Y.disableRange||!1,this._rangeChunkSize=Y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Y.disableStream,this._isRangeSupported=!Y.disableRange,this._readableStream=null,this._readCapability=new A.PromiseCapability,this._headersCapability=new A.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Y;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new A.PromiseCapability,this.read()):(this._loaded+=C.length,(Y=this.onProgress)==null||Y.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",Y=>{this._error(Y)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new A.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class q{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new A.PromiseCapability;const Y=C.source;this._isStreamingSupported=!Y.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Y;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new A.PromiseCapability,this.read()):(this._loaded+=C.length,(Y=this.onProgress)==null||Y.call(this,{loaded:this._loaded}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",Y=>{this._error(Y)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class B extends T{constructor(C){super(C);const Y=ft=>{if(ft.statusCode===404){const Lt=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Lt,this._headersCapability.reject(Lt);return}this._headersCapability.resolve(),this._setReadableStream(ft);const xt=Lt=>this._readableStream.headers[Lt.toLowerCase()],{allowRangeRequests:dt,suggestedLength:_t}=(0,U.validateRangeRequestCapabilities)({getResponseHeader:xt,isHttp:C.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=dt,this._contentLength=_t||this._contentLength,this._filename=(0,U.extractFilenameFromHeader)(xt)};this._request=null,this._url.protocol==="http:"?this._request=w.request(it(this._url,C.httpHeaders),Y):this._request=z.request(it(this._url,C.httpHeaders),Y),this._request.on("error",ft=>{this._storedError=ft,this._headersCapability.reject(ft)}),this._request.end()}}class W extends q{constructor(C,Y,ft){super(C),this._httpHeaders={};for(const dt in C.httpHeaders){const _t=C.httpHeaders[dt];_t!==void 0&&(this._httpHeaders[dt]=_t)}this._httpHeaders.Range=`bytes=${Y}-${ft-1}`;const xt=dt=>{if(dt.statusCode===404){const _t=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=_t;return}this._setReadableStream(dt)};this._request=null,this._url.protocol==="http:"?this._request=w.request(it(this._url,this._httpHeaders),xt):this._request=z.request(it(this._url,this._httpHeaders),xt),this._request.on("error",dt=>{this._storedError=dt}),this._request.end()}}class V extends T{constructor(C){super(C);let Y=decodeURIComponent(this._url.path);D.test(this._url.href)&&(Y=Y.replace(/^\//,"")),H.lstat(Y,(ft,xt)=>{if(ft){ft.code==="ENOENT"&&(ft=new A.MissingPDFException(`Missing PDF "${Y}".`)),this._storedError=ft,this._headersCapability.reject(ft);return}this._contentLength=xt.size,this._setReadableStream(H.createReadStream(Y)),this._headersCapability.resolve()})}}class P extends q{constructor(C,Y,ft){super(C);let xt=decodeURIComponent(this._url.path);D.test(this._url.href)&&(xt=xt.replace(/^\//,"")),this._setReadableStream(H.createReadStream(xt,{start:Y,end:ft-1}))}}st()}catch(gt){st(gt)}},1)},738:(Ot,kt,at)=>{at.a(Ot,async(h,st)=>{try{at.d(kt,{NodeCMapReaderFactory:()=>D,NodeCanvasFactory:()=>G,NodeFilterFactory:()=>z,NodeStandardFontDataFactory:()=>ot});var A=at(822),U=at(266);let gt,it,H;if(U.isNodeJS){gt=await ts(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);try{it=await ts(()=>import("./__vite-browser-external-BIHI7g3E.js"),[])}catch{}try{H=await ts(()=>import("./path2d-polyfill.esm-DLl2bc68.js"),[])}catch{}}const w=function(T){return new Promise((q,B)=>{gt.readFile(T,(W,V)=>{if(W||!V){B(new Error(W));return}q(new Uint8Array(V))})})};class z extends A.BaseFilterFactory{}class G extends A.BaseCanvasFactory{_createCanvas(q,B){return it.createCanvas(q,B)}}class D extends A.BaseCMapReaderFactory{_fetchData(q,B){return w(q).then(W=>({cMapData:W,compressionType:B}))}}class ot extends A.BaseStandardFontDataFactory{_fetchData(q){return w(q)}}st()}catch(gt){st(gt)}},1)},890:(Ot,kt,at)=>{var it,H,w,z,G,D,xn;at.d(kt,{OptionalContentConfig:()=>gt});var h=at(266),st=at(825);const A=Symbol("INTERNAL");class U{constructor(q,B){m(this,it,!0);this.name=q,this.intent=B}get visible(){return t(this,it)}_setVisible(q,B){q!==A&&(0,h.unreachable)("Internal method `_setVisible` called."),O(this,it,B)}}it=new WeakMap;class gt{constructor(q){m(this,D);m(this,H,null);m(this,w,new Map);m(this,z,null);m(this,G,null);if(this.name=null,this.creator=null,q!==null){this.name=q.name,this.creator=q.creator,O(this,G,q.order);for(const B of q.groups)t(this,w).set(B.id,new U(B.name,B.intent));if(q.baseState==="OFF")for(const B of t(this,w).values())B._setVisible(A,!1);for(const B of q.on)t(this,w).get(B)._setVisible(A,!0);for(const B of q.off)t(this,w).get(B)._setVisible(A,!1);O(this,z,this.getHash())}}isVisible(q){if(t(this,w).size===0)return!0;if(!q)return(0,h.warn)("Optional content group not defined."),!0;if(q.type==="OCG")return t(this,w).has(q.id)?t(this,w).get(q.id).visible:((0,h.warn)(`Optional content group not found: ${q.id}`),!0);if(q.type==="OCMD"){if(q.expression)return M(this,D,xn).call(this,q.expression);if(!q.policy||q.policy==="AnyOn"){for(const B of q.ids){if(!t(this,w).has(B))return(0,h.warn)(`Optional content group not found: ${B}`),!0;if(t(this,w).get(B).visible)return!0}return!1}else if(q.policy==="AllOn"){for(const B of q.ids){if(!t(this,w).has(B))return(0,h.warn)(`Optional content group not found: ${B}`),!0;if(!t(this,w).get(B).visible)return!1}return!0}else if(q.policy==="AnyOff"){for(const B of q.ids){if(!t(this,w).has(B))return(0,h.warn)(`Optional content group not found: ${B}`),!0;if(!t(this,w).get(B).visible)return!0}return!1}else if(q.policy==="AllOff"){for(const B of q.ids){if(!t(this,w).has(B))return(0,h.warn)(`Optional content group not found: ${B}`),!0;if(t(this,w).get(B).visible)return!1}return!0}return(0,h.warn)(`Unknown optional content policy ${q.policy}.`),!0}return(0,h.warn)(`Unknown group type ${q.type}.`),!0}setVisibility(q,B=!0){if(!t(this,w).has(q)){(0,h.warn)(`Optional content group not found: ${q}`);return}t(this,w).get(q)._setVisible(A,!!B),O(this,H,null)}get hasInitialVisibility(){return t(this,z)===null||this.getHash()===t(this,z)}getOrder(){return t(this,w).size?t(this,G)?t(this,G).slice():[...t(this,w).keys()]:null}getGroups(){return t(this,w).size>0?(0,h.objectFromMap)(t(this,w)):null}getGroup(q){return t(this,w).get(q)||null}getHash(){if(t(this,H)!==null)return t(this,H);const q=new st.MurmurHash3_64;for(const[B,W]of t(this,w))q.update(`${B}:${W.visible}`);return O(this,H,q.hexdigest())}}H=new WeakMap,w=new WeakMap,z=new WeakMap,G=new WeakMap,D=new WeakSet,xn=function(q){const B=q.length;if(B<2)return!0;const W=q[0];for(let V=1;V<B;V++){const P=q[V];let Q;if(Array.isArray(P))Q=M(this,D,xn).call(this,P);else if(t(this,w).has(P))Q=t(this,w).get(P).visible;else return(0,h.warn)(`Optional content group not found: ${P}`),!0;switch(W){case"And":if(!Q)return!1;break;case"Or":if(Q)return!0;break;case"Not":return!Q;default:return!0}}return W==="And"}},739:(Ot,kt,at)=>{at.d(kt,{renderTextLayer:()=>T,updateTextLayer:()=>q});var h=at(266),st=at(473);const A=1e5,U=30,gt=.8,it=new Map;function H(B,W){let V;if(W&&h.FeatureTest.isOffscreenCanvasSupported)V=new OffscreenCanvas(B,B).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=B,V=P.getContext("2d",{alpha:!1})}return V}function w(B,W){const V=it.get(B);if(V)return V;const P=H(U,W);P.font=`${U}px ${B}`;const Q=P.measureText("");let C=Q.fontBoundingBoxAscent,Y=Math.abs(Q.fontBoundingBoxDescent);if(C){const xt=C/(C+Y);return it.set(B,xt),P.canvas.width=P.canvas.height=0,xt}P.strokeStyle="red",P.clearRect(0,0,U,U),P.strokeText("g",0,0);let ft=P.getImageData(0,0,U,U).data;Y=0;for(let xt=ft.length-1-3;xt>=0;xt-=4)if(ft[xt]>0){Y=Math.ceil(xt/4/U);break}P.clearRect(0,0,U,U),P.strokeText("A",0,U),ft=P.getImageData(0,0,U,U).data,C=0;for(let xt=0,dt=ft.length;xt<dt;xt+=4)if(ft[xt]>0){C=U-Math.floor(xt/4/U);break}if(P.canvas.width=P.canvas.height=0,C){const xt=C/(C+Y);return it.set(B,xt),xt}return it.set(B,gt),gt}function z(B,W,V){const P=document.createElement("span"),Q={angle:0,canvasWidth:0,hasText:W.str!=="",hasEOL:W.hasEOL,fontSize:0};B._textDivs.push(P);const C=h.Util.transform(B._transform,W.transform);let Y=Math.atan2(C[1],C[0]);const ft=V[W.fontName];ft.vertical&&(Y+=Math.PI/2);const xt=B._fontInspectorEnabled&&ft.fontSubstitution||ft.fontFamily,dt=Math.hypot(C[2],C[3]),_t=dt*w(xt,B._isOffscreenCanvasSupported);let Lt,Gt;Y===0?(Lt=C[4],Gt=C[5]-_t):(Lt=C[4]+_t*Math.sin(Y),Gt=C[5]-_t*Math.cos(Y));const Nt="calc(var(--scale-factor)*",Vt=P.style;B._container===B._rootContainer?(Vt.left=`${(100*Lt/B._pageWidth).toFixed(2)}%`,Vt.top=`${(100*Gt/B._pageHeight).toFixed(2)}%`):(Vt.left=`${Nt}${Lt.toFixed(2)}px)`,Vt.top=`${Nt}${Gt.toFixed(2)}px)`),Vt.fontSize=`${Nt}${dt.toFixed(2)}px)`,Vt.fontFamily=xt,Q.fontSize=dt,P.setAttribute("role","presentation"),P.textContent=W.str,P.dir=W.dir,B._fontInspectorEnabled&&(P.dataset.fontName=ft.fontSubstitutionLoadedName||W.fontName),Y!==0&&(Q.angle=Y*(180/Math.PI));let Xt=!1;if(W.str.length>1)Xt=!0;else if(W.str!==" "&&W.transform[0]!==W.transform[3]){const ve=Math.abs(W.transform[0]),Jt=Math.abs(W.transform[3]);ve!==Jt&&Math.max(ve,Jt)/Math.min(ve,Jt)>1.5&&(Xt=!0)}Xt&&(Q.canvasWidth=ft.vertical?W.height:W.width),B._textDivProperties.set(P,Q),B._isReadableStream&&B._layoutText(P)}function G(B){const{div:W,scale:V,properties:P,ctx:Q,prevFontSize:C,prevFontFamily:Y}=B,{style:ft}=W;let xt="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:dt}=ft,{canvasWidth:_t,fontSize:Lt}=P;(C!==Lt||Y!==dt)&&(Q.font=`${Lt*V}px ${dt}`,B.prevFontSize=Lt,B.prevFontFamily=dt);const{width:Gt}=Q.measureText(W.textContent);Gt>0&&(xt=`scaleX(${_t*V/Gt})`)}P.angle!==0&&(xt=`rotate(${P.angle}deg) ${xt}`),xt.length>0&&(ft.transform=xt)}function D(B){if(B._canceled)return;const W=B._textDivs,V=B._capability;if(W.length>A){V.resolve();return}if(!B._isReadableStream)for(const P of W)B._layoutText(P);V.resolve()}class ot{constructor({textContentSource:W,container:V,viewport:P,textDivs:Q,textDivProperties:C,textContentItemsStr:Y,isOffscreenCanvasSupported:ft}){var Gt;this._textContentSource=W,this._isReadableStream=W instanceof ReadableStream,this._container=this._rootContainer=V,this._textDivs=Q||[],this._textContentItemsStr=Y||[],this._isOffscreenCanvasSupported=ft,this._fontInspectorEnabled=!!((Gt=globalThis.FontInspector)!=null&&Gt.enabled),this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new h.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:H(0,ft)};const{pageWidth:xt,pageHeight:dt,pageX:_t,pageY:Lt}=P.rawDims;this._transform=[1,0,0,-1,-_t,Lt+dt],this._pageWidth=xt,this._pageHeight=dt,(0,st.setLayerDimensions)(V,P),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new h.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new h.AbortException("TextLayer task cancelled."))}_processItems(W,V){for(const P of W){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const Q=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),Q.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),z(this,P,V)}}_layoutText(W){const V=this._layoutTextParams.properties=this._textDivProperties.get(W);if(this._layoutTextParams.div=W,G(this._layoutTextParams),V.hasText&&this._container.append(W),V.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const W=new h.PromiseCapability;let V=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(({value:Q,done:C})=>{if(C){W.resolve();return}Object.assign(V,Q.styles),this._processItems(Q.items,V),P()},W.reject)};this._reader=this._textContentSource.getReader(),P()}else if(this._textContentSource){const{items:P,styles:Q}=this._textContentSource;this._processItems(P,Q),W.resolve()}else throw new Error('No "textContentSource" parameter specified.');W.promise.then(()=>{V=null,D(this)},this._capability.reject)}}function T(B){const W=new ot(B);return W._render(),W}function q({container:B,viewport:W,textDivs:V,textDivProperties:P,isOffscreenCanvasSupported:Q,mustRotate:C=!0,mustRescale:Y=!0}){if(C&&(0,st.setLayerDimensions)(B,{rotation:W.rotation}),Y){const ft=H(0,Q),xt={prevFontSize:null,prevFontFamily:null,div:null,scale:W.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ft};for(const dt of V)xt.properties=P.get(dt),xt.div=dt,G(xt)}}},92:(Ot,kt,at)=>{at.d(kt,{PDFDataTransportStream:()=>A});var h=at(266),st=at(473);class A{constructor({length:H,initialData:w,progressiveDone:z=!1,contentDispositionFilename:G=null,disableRange:D=!1,disableStream:ot=!1},T){if((0,h.assert)(T,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=z,this._contentDispositionFilename=G,(w==null?void 0:w.length)>0){const q=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;this._queuedChunks.push(q)}this._pdfDataRangeTransport=T,this._isStreamingSupported=!ot,this._isRangeSupported=!D,this._contentLength=H,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((q,B)=>{this._onReceiveData({begin:q,chunk:B})}),this._pdfDataRangeTransport.addProgressListener((q,B)=>{this._onProgress({loaded:q,total:B})}),this._pdfDataRangeTransport.addProgressiveReadListener(q=>{this._onReceiveData({chunk:q})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:H,chunk:w}){const z=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;if(H===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(z):this._queuedChunks.push(z);else{const G=this._rangeReaders.some(function(D){return D._begin!==H?!1:(D._enqueue(z),!0)});(0,h.assert)(G,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var H;return((H=this._fullRequestReader)==null?void 0:H._loaded)??0}_onProgress(H){var w,z,G,D;H.total===void 0?(z=(w=this._rangeReaders[0])==null?void 0:w.onProgress)==null||z.call(w,{loaded:H.loaded}):(D=(G=this._fullRequestReader)==null?void 0:G.onProgress)==null||D.call(G,{loaded:H.loaded,total:H.total})}_onProgressiveDone(){var H;(H=this._fullRequestReader)==null||H.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(H){const w=this._rangeReaders.indexOf(H);w>=0&&this._rangeReaders.splice(w,1)}getFullReader(){(0,h.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const H=this._queuedChunks;return this._queuedChunks=null,new U(this,H,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(H,w){if(w<=this._progressiveDataLength)return null;const z=new gt(this,H,w);return this._pdfDataRangeTransport.requestDataRange(H,w),this._rangeReaders.push(z),z}cancelAllRequests(H){var w;(w=this._fullRequestReader)==null||w.cancel(H);for(const z of this._rangeReaders.slice(0))z.cancel(H);this._pdfDataRangeTransport.abort()}}class U{constructor(H,w,z=!1,G=null){this._stream=H,this._done=z||!1,this._filename=(0,st.isPdfFile)(G)?G:null,this._queuedChunks=w||[],this._loaded=0;for(const D of this._queuedChunks)this._loaded+=D.byteLength;this._requests=[],this._headersReady=Promise.resolve(),H._fullRequestReader=this,this.onProgress=null}_enqueue(H){this._done||(this._requests.length>0?this._requests.shift().resolve({value:H,done:!1}):this._queuedChunks.push(H),this._loaded+=H.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const H=new h.PromiseCapability;return this._requests.push(H),H.promise}cancel(H){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class gt{constructor(H,w,z){this._stream=H,this._begin=w,this._end=z,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(H){if(!this._done){if(this._requests.length===0)this._queuedChunk=H;else{this._requests.shift().resolve({value:H,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const w=this._queuedChunk;return this._queuedChunk=null,{value:w,done:!1}}if(this._done)return{value:void 0,done:!0};const H=new h.PromiseCapability;return this._requests.push(H),H.promise}cancel(H){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},368:(Ot,kt,at)=>{at.d(kt,{GlobalWorkerOptions:()=>h});const h=Object.create(null);h.workerPort=null,h.workerSrc=""},160:(Ot,kt,at)=>{at.d(kt,{XfaLayer:()=>st});var h=at(521);class st{static setupStorage(U,gt,it,H,w){const z=H.getValue(gt,{value:null});switch(it.name){case"textarea":if(z.value!==null&&(U.textContent=z.value),w==="print")break;U.addEventListener("input",G=>{H.setValue(gt,{value:G.target.value})});break;case"input":if(it.attributes.type==="radio"||it.attributes.type==="checkbox"){if(z.value===it.attributes.xfaOn?U.setAttribute("checked",!0):z.value===it.attributes.xfaOff&&U.removeAttribute("checked"),w==="print")break;U.addEventListener("change",G=>{H.setValue(gt,{value:G.target.checked?G.target.getAttribute("xfaOn"):G.target.getAttribute("xfaOff")})})}else{if(z.value!==null&&U.setAttribute("value",z.value),w==="print")break;U.addEventListener("input",G=>{H.setValue(gt,{value:G.target.value})})}break;case"select":if(z.value!==null){U.setAttribute("value",z.value);for(const G of it.children)G.attributes.value===z.value?G.attributes.selected=!0:G.attributes.hasOwnProperty("selected")&&delete G.attributes.selected}U.addEventListener("input",G=>{const D=G.target.options,ot=D.selectedIndex===-1?"":D[D.selectedIndex].value;H.setValue(gt,{value:ot})});break}}static setAttributes({html:U,element:gt,storage:it=null,intent:H,linkService:w}){const{attributes:z}=gt,G=U instanceof HTMLAnchorElement;z.type==="radio"&&(z.name=`${z.name}-${H}`);for(const[D,ot]of Object.entries(z))if(ot!=null)switch(D){case"class":ot.length&&U.setAttribute(D,ot.join(" "));break;case"dataId":break;case"id":U.setAttribute("data-element-id",ot);break;case"style":Object.assign(U.style,ot);break;case"textContent":U.textContent=ot;break;default:(!G||D!=="href"&&D!=="newWindow")&&U.setAttribute(D,ot)}G&&w.addLinkAttributes(U,z.href,z.newWindow),it&&z.dataId&&this.setupStorage(U,z.dataId,gt,it)}static render(U){var q,B;const gt=U.annotationStorage,it=U.linkService,H=U.xfaHtml,w=U.intent||"display",z=document.createElement(H.name);H.attributes&&this.setAttributes({html:z,element:H,intent:w,linkService:it});const G=w!=="richText",D=U.div;if(D.append(z),U.viewport){const W=`matrix(${U.viewport.transform.join(",")})`;D.style.transform=W}G&&D.setAttribute("class","xfaLayer xfaFont");const ot=[];if(H.children.length===0){if(H.value){const W=document.createTextNode(H.value);z.append(W),G&&h.XfaText.shouldBuildText(H.name)&&ot.push(W)}return{textDivs:ot}}const T=[[H,-1,z]];for(;T.length>0;){const[W,V,P]=T.at(-1);if(V+1===W.children.length){T.pop();continue}const Q=W.children[++T.at(-1)[1]];if(Q===null)continue;const{name:C}=Q;if(C==="#text"){const ft=document.createTextNode(Q.value);ot.push(ft),P.append(ft);continue}const Y=(q=Q==null?void 0:Q.attributes)!=null&&q.xmlns?document.createElementNS(Q.attributes.xmlns,C):document.createElement(C);if(P.append(Y),Q.attributes&&this.setAttributes({html:Y,element:Q,storage:gt,intent:w,linkService:it}),((B=Q.children)==null?void 0:B.length)>0)T.push([Q,-1,Y]);else if(Q.value){const ft=document.createTextNode(Q.value);G&&h.XfaText.shouldBuildText(C)&&ot.push(ft),Y.append(ft)}}for(const W of D.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))W.setAttribute("readOnly",!0);return{textDivs:ot}}static update(U){const gt=`matrix(${U.viewport.transform.join(",")})`;U.div.style.transform=gt,U.div.hidden=!1}}},521:(Ot,kt,at)=>{at.d(kt,{XfaText:()=>h});class h{static textContent(A){const U=[],gt={items:U,styles:Object.create(null)};function it(H){var G;if(!H)return;let w=null;const z=H.name;if(z==="#text")w=H.value;else if(h.shouldBuildText(z))(G=H==null?void 0:H.attributes)!=null&&G.textContent?w=H.attributes.textContent:H.value&&(w=H.value);else return;if(w!==null&&U.push({str:w}),!!H.children)for(const D of H.children)it(D)}return it(A),gt}static shouldBuildText(A){return!(A==="textarea"||A==="input"||A==="option"||A==="select")}}},907:(Ot,kt,at)=>{at.a(Ot,async(h,st)=>{try{at.d(kt,{AbortException:()=>A.AbortException,AnnotationEditorLayer:()=>H.AnnotationEditorLayer,AnnotationEditorParamsType:()=>A.AnnotationEditorParamsType,AnnotationEditorType:()=>A.AnnotationEditorType,AnnotationEditorUIManager:()=>w.AnnotationEditorUIManager,AnnotationLayer:()=>z.AnnotationLayer,AnnotationMode:()=>A.AnnotationMode,CMapCompressionType:()=>A.CMapCompressionType,ColorPicker:()=>G.ColorPicker,DOMSVGFactory:()=>gt.DOMSVGFactory,DrawLayer:()=>D.DrawLayer,FeatureTest:()=>A.FeatureTest,GlobalWorkerOptions:()=>ot.GlobalWorkerOptions,ImageKind:()=>A.ImageKind,InvalidPDFException:()=>A.InvalidPDFException,MissingPDFException:()=>A.MissingPDFException,OPS:()=>A.OPS,Outliner:()=>T.Outliner,PDFDataRangeTransport:()=>U.PDFDataRangeTransport,PDFDateString:()=>gt.PDFDateString,PDFWorker:()=>U.PDFWorker,PasswordResponses:()=>A.PasswordResponses,PermissionFlag:()=>A.PermissionFlag,PixelsPerInch:()=>gt.PixelsPerInch,PromiseCapability:()=>A.PromiseCapability,RenderingCancelledException:()=>gt.RenderingCancelledException,UnexpectedResponseException:()=>A.UnexpectedResponseException,Util:()=>A.Util,VerbosityLevel:()=>A.VerbosityLevel,XfaLayer:()=>q.XfaLayer,build:()=>U.build,createValidAbsoluteUrl:()=>A.createValidAbsoluteUrl,fetchData:()=>gt.fetchData,getDocument:()=>U.getDocument,getFilenameFromUrl:()=>gt.getFilenameFromUrl,getPdfFilenameFromUrl:()=>gt.getPdfFilenameFromUrl,getXfaPageViewport:()=>gt.getXfaPageViewport,isDataScheme:()=>gt.isDataScheme,isPdfFile:()=>gt.isPdfFile,noContextMenu:()=>gt.noContextMenu,normalizeUnicode:()=>A.normalizeUnicode,renderTextLayer:()=>it.renderTextLayer,setLayerDimensions:()=>gt.setLayerDimensions,shadow:()=>A.shadow,updateTextLayer:()=>it.updateTextLayer,version:()=>U.version});var A=at(266),U=at(406),gt=at(473),it=at(739),H=at(629),w=at(812),z=at(640),G=at(97),D=at(423),ot=at(368),T=at(405),q=at(160),B=h([U]);U=(B.then?(await B)():B)[0];const W="4.0.379",V="9e14d04fd";st()}catch(W){st(W)}})},694:(Ot,kt,at)=>{var it,Er,w,xr,G,xi;at.d(kt,{MessageHandler:()=>gt});var h=at(266);const st={UNKNOWN:0,DATA:1,ERROR:2},A={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function U(ot){switch(ot instanceof Error||typeof ot=="object"&&ot!==null||(0,h.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ot.name){case"AbortException":return new h.AbortException(ot.message);case"MissingPDFException":return new h.MissingPDFException(ot.message);case"PasswordException":return new h.PasswordException(ot.message,ot.code);case"UnexpectedResponseException":return new h.UnexpectedResponseException(ot.message,ot.status);case"UnknownErrorException":return new h.UnknownErrorException(ot.message,ot.details);default:return new h.UnknownErrorException(ot.message,ot.toString())}}class gt{constructor(T,q,B){m(this,it);m(this,w);m(this,G);this.sourceName=T,this.targetName=q,this.comObj=B,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=W=>{const V=W.data;if(V.targetName!==this.sourceName)return;if(V.stream){M(this,w,xr).call(this,V);return}if(V.callback){const Q=V.callbackId,C=this.callbackCapabilities[Q];if(!C)throw new Error(`Cannot resolve callback ${Q}`);if(delete this.callbackCapabilities[Q],V.callback===st.DATA)C.resolve(V.data);else if(V.callback===st.ERROR)C.reject(U(V.reason));else throw new Error("Unexpected callback case");return}const P=this.actionHandler[V.action];if(!P)throw new Error(`Unknown action from worker: ${V.action}`);if(V.callbackId){const Q=this.sourceName,C=V.sourceName;new Promise(function(Y){Y(P(V.data))}).then(function(Y){B.postMessage({sourceName:Q,targetName:C,callback:st.DATA,callbackId:V.callbackId,data:Y})},function(Y){B.postMessage({sourceName:Q,targetName:C,callback:st.ERROR,callbackId:V.callbackId,reason:U(Y)})});return}if(V.streamId){M(this,it,Er).call(this,V);return}P(V.data)},B.addEventListener("message",this._onComObjOnMessage)}on(T,q){const B=this.actionHandler;if(B[T])throw new Error(`There is already an actionName called "${T}"`);B[T]=q}send(T,q,B){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:q},B)}sendWithPromise(T,q,B){const W=this.callbackId++,V=new h.PromiseCapability;this.callbackCapabilities[W]=V;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:W,data:q},B)}catch(P){V.reject(P)}return V.promise}sendWithStream(T,q,B,W){const V=this.streamId++,P=this.sourceName,Q=this.targetName,C=this.comObj;return new ReadableStream({start:Y=>{const ft=new h.PromiseCapability;return this.streamControllers[V]={controller:Y,startCall:ft,pullCall:null,cancelCall:null,isClosed:!1},C.postMessage({sourceName:P,targetName:Q,action:T,streamId:V,data:q,desiredSize:Y.desiredSize},W),ft.promise},pull:Y=>{const ft=new h.PromiseCapability;return this.streamControllers[V].pullCall=ft,C.postMessage({sourceName:P,targetName:Q,stream:A.PULL,streamId:V,desiredSize:Y.desiredSize}),ft.promise},cancel:Y=>{(0,h.assert)(Y instanceof Error,"cancel must have a valid reason");const ft=new h.PromiseCapability;return this.streamControllers[V].cancelCall=ft,this.streamControllers[V].isClosed=!0,C.postMessage({sourceName:P,targetName:Q,stream:A.CANCEL,streamId:V,reason:U(Y)}),ft.promise}},B)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}it=new WeakSet,Er=function(T){const q=T.streamId,B=this.sourceName,W=T.sourceName,V=this.comObj,P=this,Q=this.actionHandler[T.action],C={enqueue(Y,ft=1,xt){if(this.isCancelled)return;const dt=this.desiredSize;this.desiredSize-=ft,dt>0&&this.desiredSize<=0&&(this.sinkCapability=new h.PromiseCapability,this.ready=this.sinkCapability.promise),V.postMessage({sourceName:B,targetName:W,stream:A.ENQUEUE,streamId:q,chunk:Y},xt)},close(){this.isCancelled||(this.isCancelled=!0,V.postMessage({sourceName:B,targetName:W,stream:A.CLOSE,streamId:q}),delete P.streamSinks[q])},error(Y){(0,h.assert)(Y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,V.postMessage({sourceName:B,targetName:W,stream:A.ERROR,streamId:q,reason:U(Y)}))},sinkCapability:new h.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};C.sinkCapability.resolve(),C.ready=C.sinkCapability.promise,this.streamSinks[q]=C,new Promise(function(Y){Y(Q(T.data,C))}).then(function(){V.postMessage({sourceName:B,targetName:W,stream:A.START_COMPLETE,streamId:q,success:!0})},function(Y){V.postMessage({sourceName:B,targetName:W,stream:A.START_COMPLETE,streamId:q,reason:U(Y)})})},w=new WeakSet,xr=function(T){const q=T.streamId,B=this.sourceName,W=T.sourceName,V=this.comObj,P=this.streamControllers[q],Q=this.streamSinks[q];switch(T.stream){case A.START_COMPLETE:T.success?P.startCall.resolve():P.startCall.reject(U(T.reason));break;case A.PULL_COMPLETE:T.success?P.pullCall.resolve():P.pullCall.reject(U(T.reason));break;case A.PULL:if(!Q){V.postMessage({sourceName:B,targetName:W,stream:A.PULL_COMPLETE,streamId:q,success:!0});break}Q.desiredSize<=0&&T.desiredSize>0&&Q.sinkCapability.resolve(),Q.desiredSize=T.desiredSize,new Promise(function(C){var Y;C((Y=Q.onPull)==null?void 0:Y.call(Q))}).then(function(){V.postMessage({sourceName:B,targetName:W,stream:A.PULL_COMPLETE,streamId:q,success:!0})},function(C){V.postMessage({sourceName:B,targetName:W,stream:A.PULL_COMPLETE,streamId:q,reason:U(C)})});break;case A.ENQUEUE:if((0,h.assert)(P,"enqueue should have stream controller"),P.isClosed)break;P.controller.enqueue(T.chunk);break;case A.CLOSE:if((0,h.assert)(P,"close should have stream controller"),P.isClosed)break;P.isClosed=!0,P.controller.close(),M(this,G,xi).call(this,P,q);break;case A.ERROR:(0,h.assert)(P,"error should have stream controller"),P.controller.error(U(T.reason)),M(this,G,xi).call(this,P,q);break;case A.CANCEL_COMPLETE:T.success?P.cancelCall.resolve():P.cancelCall.reject(U(T.reason)),M(this,G,xi).call(this,P,q);break;case A.CANCEL:if(!Q)break;new Promise(function(C){var Y;C((Y=Q.onCancel)==null?void 0:Y.call(Q,U(T.reason)))}).then(function(){V.postMessage({sourceName:B,targetName:W,stream:A.CANCEL_COMPLETE,streamId:q,success:!0})},function(C){V.postMessage({sourceName:B,targetName:W,stream:A.CANCEL_COMPLETE,streamId:q,reason:U(C)})}),Q.sinkCapability.reject(U(T.reason)),Q.isCancelled=!0,delete this.streamSinks[q];break;default:throw new Error("Unexpected stream case")}},G=new WeakSet,xi=async function(T,q){var B,W,V;await Promise.allSettled([(B=T.startCall)==null?void 0:B.promise,(W=T.pullCall)==null?void 0:W.promise,(V=T.cancelCall)==null?void 0:V.promise]),delete this.streamControllers[q]}},825:(Ot,kt,at)=>{at.d(kt,{MurmurHash3_64:()=>gt});var h=at(266);const st=3285377520,A=4294901760,U=65535;class gt{constructor(H){this.h1=H?H&4294967295:st,this.h2=H?H&4294967295:st}update(H){let w,z;if(typeof H=="string"){w=new Uint8Array(H.length*2),z=0;for(let Y=0,ft=H.length;Y<ft;Y++){const xt=H.charCodeAt(Y);xt<=255?w[z++]=xt:(w[z++]=xt>>>8,w[z++]=xt&255)}}else if((0,h.isArrayBuffer)(H))w=H.slice(),z=w.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const G=z>>2,D=z-G*4,ot=new Uint32Array(w.buffer,0,G);let T=0,q=0,B=this.h1,W=this.h2;const V=3432918353,P=461845907,Q=V&U,C=P&U;for(let Y=0;Y<G;Y++)Y&1?(T=ot[Y],T=T*V&A|T*Q&U,T=T<<15|T>>>17,T=T*P&A|T*C&U,B^=T,B=B<<13|B>>>19,B=B*5+3864292196):(q=ot[Y],q=q*V&A|q*Q&U,q=q<<15|q>>>17,q=q*P&A|q*C&U,W^=q,W=W<<13|W>>>19,W=W*5+3864292196);switch(T=0,D){case 3:T^=w[G*4+2]<<16;case 2:T^=w[G*4+1]<<8;case 1:T^=w[G*4],T=T*V&A|T*Q&U,T=T<<15|T>>>17,T=T*P&A|T*C&U,G&1?B^=T:W^=T}this.h1=B,this.h2=W}hexdigest(){let H=this.h1,w=this.h2;return H^=w>>>1,H=H*3981806797&A|H*36045&U,w=w*4283543511&A|((w<<16|H>>>16)*2950163797&A)>>>16,H^=w>>>1,H=H*444984403&A|H*60499&U,w=w*3301882366&A|((w<<16|H>>>16)*3120437893&A)>>>16,H^=w>>>1,(H>>>0).toString(16).padStart(8,"0")+(w>>>0).toString(16).padStart(8,"0")}}},266:(Ot,kt,at)=>{var d;at.d(kt,{AbortException:()=>re,AnnotationBorderStyleType:()=>B,AnnotationEditorParamsType:()=>G,AnnotationEditorPrefix:()=>w,AnnotationEditorType:()=>z,AnnotationMode:()=>H,AnnotationPrefix:()=>v,AnnotationType:()=>q,BaseException:()=>Xt,CMapCompressionType:()=>V,FONT_IDENTITY_MATRIX:()=>A,FeatureTest:()=>pe,FormatError:()=>Yt,IDENTITY_MATRIX:()=>st,ImageKind:()=>T,InvalidPDFException:()=>fe,LINE_FACTOR:()=>gt,MAX_IMAGE_SIZE_TO_CACHE:()=>U,MissingPDFException:()=>oe,OPS:()=>P,PasswordException:()=>ve,PasswordResponses:()=>Q,PermissionFlag:()=>D,PromiseCapability:()=>s,RenderingIntentFlag:()=>it,TextRenderingMode:()=>ot,UnexpectedResponseException:()=>te,UnknownErrorException:()=>Jt,Util:()=>ne,VerbosityLevel:()=>W,assert:()=>Lt,bytesToString:()=>Wt,createValidAbsoluteUrl:()=>Nt,getUuid:()=>b,getVerbosityLevel:()=>ft,info:()=>xt,isArrayBuffer:()=>X,isNodeJS:()=>h,normalizeUnicode:()=>k,objectFromMap:()=>he,setVerbosityLevel:()=>Y,shadow:()=>Vt,string32:()=>ie,stringToBytes:()=>le,unreachable:()=>_t,warn:()=>dt});const h=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),st=[1,0,0,1,0,0],A=[.001,0,0,.001,0,0],U=1e7,gt=1.35,it={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},H={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},w="pdfjs_internal_editor_",z={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},G={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32},D={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ot={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},T={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},q={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},B={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},W={ERRORS:0,WARNINGS:1,INFOS:5},V={NONE:0,BINARY:1},P={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let C=W.WARNINGS;function Y(c){Number.isInteger(c)&&(C=c)}function ft(){return C}function xt(c){C>=W.INFOS&&console.log(`Info: ${c}`)}function dt(c){C>=W.WARNINGS&&console.log(`Warning: ${c}`)}function _t(c){throw new Error(c)}function Lt(c,a){c||_t(a)}function Gt(c){switch(c==null?void 0:c.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Nt(c,a=null,o=null){var x;if(!c)return null;try{if(o&&typeof c=="string"&&(o.addDefaultProtocol&&c.startsWith("www.")&&((x=c.match(/\./g))==null?void 0:x.length)>=2&&(c=`http://${c}`),o.tryConvertEncoding))try{c=ye(c)}catch{}const l=a?new URL(c,a):new URL(c);if(Gt(l))return l}catch{}return null}function Vt(c,a,o,x=!1){return Object.defineProperty(c,a,{value:o,enumerable:!x,configurable:!0,writable:!1}),o}const Xt=function(){function c(a,o){this.constructor===c&&_t("Cannot initialize BaseException."),this.message=a,this.name=o}return c.prototype=new Error,c.constructor=c,c}();class ve extends Xt{constructor(a,o){super(a,"PasswordException"),this.code=o}}class Jt extends Xt{constructor(a,o){super(a,"UnknownErrorException"),this.details=o}}class fe extends Xt{constructor(a){super(a,"InvalidPDFException")}}class oe extends Xt{constructor(a){super(a,"MissingPDFException")}}class te extends Xt{constructor(a,o){super(a,"UnexpectedResponseException"),this.status=o}}class Yt extends Xt{constructor(a){super(a,"FormatError")}}class re extends Xt{constructor(a){super(a,"AbortException")}}function Wt(c){(typeof c!="object"||(c==null?void 0:c.length)===void 0)&&_t("Invalid argument for bytesToString");const a=c.length,o=8192;if(a<o)return String.fromCharCode.apply(null,c);const x=[];for(let l=0;l<a;l+=o){const u=Math.min(l+o,a),E=c.subarray(l,u);x.push(String.fromCharCode.apply(null,E))}return x.join("")}function le(c){typeof c!="string"&&_t("Invalid argument for stringToBytes");const a=c.length,o=new Uint8Array(a);for(let x=0;x<a;++x)o[x]=c.charCodeAt(x)&255;return o}function ie(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function he(c){const a=Object.create(null);for(const[o,x]of c)a[o]=x;return a}function jt(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function me(){try{return new Function(""),!0}catch{return!1}}class pe{static get isLittleEndian(){return Vt(this,"isLittleEndian",jt())}static get isEvalSupported(){return Vt(this,"isEvalSupported",me())}static get isOffscreenCanvasSupported(){return Vt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Vt(this,"platform",{isMac:navigator.platform.includes("Mac")}):Vt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var a,o;return Vt(this,"isCSSRoundSupported",(o=(a=globalThis.CSS)==null?void 0:a.supports)==null?void 0:o.call(a,"width: round(1.5px, 1px)"))}}const Zt=[...Array(256).keys()].map(c=>c.toString(16).padStart(2,"0"));class ne{static makeHexColor(a,o,x){return`#${Zt[a]}${Zt[o]}${Zt[x]}`}static scaleMinMax(a,o){let x;a[0]?(a[0]<0&&(x=o[0],o[0]=o[1],o[1]=x),o[0]*=a[0],o[1]*=a[0],a[3]<0&&(x=o[2],o[2]=o[3],o[3]=x),o[2]*=a[3],o[3]*=a[3]):(x=o[0],o[0]=o[2],o[2]=x,x=o[1],o[1]=o[3],o[3]=x,a[1]<0&&(x=o[2],o[2]=o[3],o[3]=x),o[2]*=a[1],o[3]*=a[1],a[2]<0&&(x=o[0],o[0]=o[1],o[1]=x),o[0]*=a[2],o[1]*=a[2]),o[0]+=a[4],o[1]+=a[4],o[2]+=a[5],o[3]+=a[5]}static transform(a,o){return[a[0]*o[0]+a[2]*o[1],a[1]*o[0]+a[3]*o[1],a[0]*o[2]+a[2]*o[3],a[1]*o[2]+a[3]*o[3],a[0]*o[4]+a[2]*o[5]+a[4],a[1]*o[4]+a[3]*o[5]+a[5]]}static applyTransform(a,o){const x=a[0]*o[0]+a[1]*o[2]+o[4],l=a[0]*o[1]+a[1]*o[3]+o[5];return[x,l]}static applyInverseTransform(a,o){const x=o[0]*o[3]-o[1]*o[2],l=(a[0]*o[3]-a[1]*o[2]+o[2]*o[5]-o[4]*o[3])/x,u=(-a[0]*o[1]+a[1]*o[0]+o[4]*o[1]-o[5]*o[0])/x;return[l,u]}static getAxialAlignedBoundingBox(a,o){const x=this.applyTransform(a,o),l=this.applyTransform(a.slice(2,4),o),u=this.applyTransform([a[0],a[3]],o),E=this.applyTransform([a[2],a[1]],o);return[Math.min(x[0],l[0],u[0],E[0]),Math.min(x[1],l[1],u[1],E[1]),Math.max(x[0],l[0],u[0],E[0]),Math.max(x[1],l[1],u[1],E[1])]}static inverseTransform(a){const o=a[0]*a[3]-a[1]*a[2];return[a[3]/o,-a[1]/o,-a[2]/o,a[0]/o,(a[2]*a[5]-a[4]*a[3])/o,(a[4]*a[1]-a[5]*a[0])/o]}static singularValueDecompose2dScale(a){const o=[a[0],a[2],a[1],a[3]],x=a[0]*o[0]+a[1]*o[2],l=a[0]*o[1]+a[1]*o[3],u=a[2]*o[0]+a[3]*o[2],E=a[2]*o[1]+a[3]*o[3],j=(x+E)/2,_=Math.sqrt((x+E)**2-4*(x*E-u*l))/2,N=j+_||1,Z=j-_||1;return[Math.sqrt(N),Math.sqrt(Z)]}static normalizeRect(a){const o=a.slice(0);return a[0]>a[2]&&(o[0]=a[2],o[2]=a[0]),a[1]>a[3]&&(o[1]=a[3],o[3]=a[1]),o}static intersect(a,o){const x=Math.max(Math.min(a[0],a[2]),Math.min(o[0],o[2])),l=Math.min(Math.max(a[0],a[2]),Math.max(o[0],o[2]));if(x>l)return null;const u=Math.max(Math.min(a[1],a[3]),Math.min(o[1],o[3])),E=Math.min(Math.max(a[1],a[3]),Math.max(o[1],o[3]));return u>E?null:[x,u,l,E]}static bezierBoundingBox(a,o,x,l,u,E,j,_){const N=[],Z=[[],[]];let J,K,lt,I,g,L,$,ht;for(let Dt=0;Dt<2;++Dt){if(Dt===0?(K=6*a-12*x+6*u,J=-3*a+9*x-9*u+3*j,lt=3*x-3*a):(K=6*o-12*l+6*E,J=-3*o+9*l-9*E+3*_,lt=3*l-3*o),Math.abs(J)<1e-12){if(Math.abs(K)<1e-12)continue;I=-lt/K,0<I&&I<1&&N.push(I);continue}$=K*K-4*lt*J,ht=Math.sqrt($),!($<0)&&(g=(-K+ht)/(2*J),0<g&&g<1&&N.push(g),L=(-K-ht)/(2*J),0<L&&L<1&&N.push(L))}let ut=N.length,bt;const Et=ut;for(;ut--;)I=N[ut],bt=1-I,Z[0][ut]=bt*bt*bt*a+3*bt*bt*I*x+3*bt*I*I*u+I*I*I*j,Z[1][ut]=bt*bt*bt*o+3*bt*bt*I*l+3*bt*I*I*E+I*I*I*_;return Z[0][Et]=a,Z[1][Et]=o,Z[0][Et+1]=j,Z[1][Et+1]=_,Z[0].length=Z[1].length=Et+2,[Math.min(...Z[0]),Math.min(...Z[1]),Math.max(...Z[0]),Math.max(...Z[1])]}}function ye(c){return decodeURIComponent(escape(c))}function X(c){return typeof c=="object"&&(c==null?void 0:c.byteLength)!==void 0}class s{constructor(){m(this,d,!1);this.promise=new Promise((a,o)=>{this.resolve=x=>{O(this,d,!0),a(x)},this.reject=x=>{O(this,d,!0),o(x)}})}get settled(){return t(this,d)}}d=new WeakMap;let i=null,f=null;function k(c){return i||(i=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,f=new Map([["\uFB05","\u017Ft"]])),c.replaceAll(i,(a,o,x)=>o?o.normalize("NFKC"):f.get(x))}function b(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const c=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(c);else for(let a=0;a<32;a++)c[a]=Math.floor(Math.random()*255);return Wt(c)}const v="pdfjs_internal_id_"}},Tn={};function os(Ot){var kt=Tn[Ot];if(kt!==void 0)return kt.exports;var at=Tn[Ot]={exports:{}};return Mr[Ot](at,at.exports,os),at.exports}(()=>{var Ot=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",kt=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",at=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",h=A=>{A&&A.d<1&&(A.d=1,A.forEach(U=>U.r--),A.forEach(U=>U.r--?U.r++:U()))},st=A=>A.map(U=>{if(U!==null&&typeof U=="object"){if(U[Ot])return U;if(U.then){var gt=[];gt.d=0,U.then(w=>{it[kt]=w,h(gt)},w=>{it[at]=w,h(gt)});var it={};return it[Ot]=w=>w(gt),it}}var H={};return H[Ot]=w=>{},H[kt]=U,H});os.a=(A,U,gt)=>{var it;gt&&((it=[]).d=-1);var H=new Set,w=A.exports,z,G,D,ot=new Promise((T,q)=>{D=q,G=T});ot[kt]=w,ot[Ot]=T=>(it&&T(it),H.forEach(T),ot.catch(q=>{})),A.exports=ot,U(T=>{z=st(T);var q,B=()=>z.map(V=>{if(V[at])throw V[at];return V[kt]}),W=new Promise(V=>{q=()=>V(B),q.r=0;var P=Q=>Q!==it&&!H.has(Q)&&(H.add(Q),Q&&!Q.d&&(q.r++,Q.push(q)));z.map(Q=>Q[Ot](P))});return q.r?W:B()},T=>(T?D(ot[at]=T):G(w),h(it))),it&&it.d<0&&(it.d=0)}})(),os.d=(Ot,kt)=>{for(var at in kt)os.o(kt,at)&&!os.o(Ot,at)&&Object.defineProperty(Ot,at,{enumerable:!0,get:kt[at]})},os.o=(Ot,kt)=>Object.prototype.hasOwnProperty.call(Ot,kt);var se=os(907);se=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=se),se.AbortException,se.AnnotationEditorLayer,se.AnnotationEditorParamsType,se.AnnotationEditorType,se.AnnotationEditorUIManager,se.AnnotationLayer,se.AnnotationMode,se.CMapCompressionType,se.ColorPicker,se.DOMSVGFactory,se.DrawLayer,se.FeatureTest;var Pr=se.GlobalWorkerOptions;se.ImageKind,se.InvalidPDFException,se.MissingPDFException,se.OPS,se.Outliner,se.PDFDataRangeTransport,se.PDFDateString,se.PDFWorker,se.PasswordResponses,se.PermissionFlag,se.PixelsPerInch,se.PromiseCapability,se.RenderingCancelledException,se.UnexpectedResponseException,se.Util,se.VerbosityLevel,se.XfaLayer,se.build,se.createValidAbsoluteUrl,se.fetchData;var Lr=se.getDocument;se.getFilenameFromUrl,se.getPdfFilenameFromUrl,se.getXfaPageViewport,se.isDataScheme,se.isPdfFile,se.noContextMenu,se.normalizeUnicode,se.renderTextLayer,se.setLayerDimensions,se.shadow,se.updateTextLayer,se.version;function Dr(Ot){return new Worker("/assets/pdf.worker-DR2SpLif.js",{name:Ot==null?void 0:Ot.name})}var Ir={exports:{}};(function(Ot,kt){(function(at,h){Ot.exports=h()})(window,function(){return function(at){var h={};function st(A){if(h[A])return h[A].exports;var U=h[A]={i:A,l:!1,exports:{}};return at[A].call(U.exports,U,U.exports,st),U.l=!0,U.exports}return st.m=at,st.c=h,st.d=function(A,U,gt){st.o(A,U)||Object.defineProperty(A,U,{enumerable:!0,get:gt})},st.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},st.t=function(A,U){if(1&U&&(A=st(A)),8&U||4&U&&typeof A=="object"&&A&&A.__esModule)return A;var gt=Object.create(null);if(st.r(gt),Object.defineProperty(gt,"default",{enumerable:!0,value:A}),2&U&&typeof A!="string")for(var it in A)st.d(gt,it,(function(H){return A[H]}).bind(null,it));return gt},st.n=function(A){var U=A&&A.__esModule?function(){return A.default}:function(){return A};return st.d(U,"a",U),U},st.o=function(A,U){return Object.prototype.hasOwnProperty.call(A,U)},st.p="",st(st.s=0)}([function(at,h,st){st.r(h);var A,U="fslightbox-",gt="".concat(U,"styles"),it="".concat(U,"cursor-grabbing"),H="".concat(U,"full-dimension"),w="".concat(U,"flex-centered"),z="".concat(U,"open"),G="".concat(U,"transform-transition"),D="".concat(U,"absoluted"),ot="".concat(U,"slide-btn"),T="".concat(ot,"-container"),q="".concat(U,"fade-in"),B="".concat(U,"fade-out"),W=q+"-strong",V=B+"-strong",P="".concat(U,"opacity-"),Q="".concat(P,"1"),C="".concat(U,"source");function Y(l){return(Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function ft(l){var u=l.stageIndexes,E=l.core.stageManager,j=l.props.sources.length-1;E.getPreviousSlideIndex=function(){return u.current===0?j:u.current-1},E.getNextSlideIndex=function(){return u.current===j?0:u.current+1},E.updateStageIndexes=j===0?function(){}:j===1?function(){u.current===0?(u.next=1,delete u.previous):(u.previous=0,delete u.next)}:function(){u.previous=E.getPreviousSlideIndex(),u.next=E.getNextSlideIndex()},E.i=j<=2?function(){return!0}:function(_){var N=u.current;if(N===0&&_===j||N===j&&_===0)return!0;var Z=N-_;return Z===-1||Z===0||Z===1}}(typeof document>"u"?"undefined":Y(document))==="object"&&((A=document.createElement("style")).className=gt,A.appendChild(document.createTextNode(".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:pinch-zoom;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media (min-width:768px){.fslightbox-slide-btn{padding:10px}}@media (min-width:1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container-next{padding-left:30px}}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightboxl{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightboxl div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightboxl 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightboxl div:nth-child(1){animation-delay:-.45s}.fslightboxl div:nth-child(2){animation-delay:-.3s}.fslightboxl div:nth-child(3){animation-delay:-.15s}@keyframes fslightboxl{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}")),document.head.appendChild(A));function xt(l){var u,E=l.props,j=0,_={};this.getSourceTypeFromLocalStorageByUrl=function(Z){return u[Z]?u[Z]:N(Z)},this.handleReceivedSourceTypeForUrl=function(Z,J){if(_[J]===!1&&(j--,Z!=="invalid"?_[J]=Z:delete _[J],j===0)){(function(K,lt){for(var I in lt)K[I]=lt[I]})(u,_);try{localStorage.setItem("fslightbox-types",JSON.stringify(u))}catch{}}};var N=function(Z){j++,_[Z]=!1};if(E.disableLocalStorage)this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){};else{try{u=JSON.parse(localStorage.getItem("fslightbox-types"))}catch{}u||(u={},this.getSourceTypeFromLocalStorageByUrl=N)}}function dt(l,u,E,j){var _=l.data,N=l.elements.sources,Z=E/j,J=0;this.adjustSize=function(){if((J=_.maxSourceWidth/Z)<_.maxSourceHeight)return E<_.maxSourceWidth&&(J=j),K();J=j>_.maxSourceHeight?_.maxSourceHeight:j,K()};var K=function(){N[u].style.width=J*Z+"px",N[u].style.height=J+"px"}}function _t(l,u){var E=this,j=l.collections.sourceSizers,_=l.elements,N=_.sourceAnimationWrappers,Z=_.sources,J=l.isl,K=l.resolve;function lt(I,g){j[u]=K(dt,[u,I,g]),j[u].adjustSize()}this.runActions=function(I,g){J[u]=!0,Z[u].classList.add(Q),N[u].classList.add(W),N[u].removeChild(N[u].firstChild),lt(I,g),E.runActions=lt}}function Lt(l,u){var E,j=this,_=l.elements.sources,N=l.props,Z=(0,l.resolve)(_t,[u]);this.handleImageLoad=function(J){var K=J.target,lt=K.naturalWidth,I=K.naturalHeight;Z.runActions(lt,I)},this.handleVideoLoad=function(J){var K=J.target,lt=K.videoWidth,I=K.videoHeight;E=!0,Z.runActions(lt,I)},this.handleNotMetaDatedVideoLoad=function(){E||j.handleYoutubeLoad()},this.handleYoutubeLoad=function(){var J=1920,K=1080;N.maxYoutubeDimensions&&(J=N.maxYoutubeDimensions.width,K=N.maxYoutubeDimensions.height),Z.runActions(J,K)},this.handleCustomLoad=function(){var J=_[u],K=J.offsetWidth,lt=J.offsetHeight;K&&lt?Z.runActions(K,lt):setTimeout(j.handleCustomLoad)}}function Gt(l,u,E){var j=l.elements.sources,_=l.props.customClasses,N=_[u]?_[u]:"";j[u].className=E+" "+N}function Nt(l,u){var E=l.elements.sources,j=l.props.customAttributes;for(var _ in j[u])E[u].setAttribute(_,j[u][_])}function Vt(l,u){var E=l.collections.sourceLoadHandlers,j=l.elements,_=j.sources,N=j.sourceAnimationWrappers,Z=l.props.sources;_[u]=document.createElement("img"),Gt(l,u,C),_[u].src=Z[u],_[u].onload=E[u].handleImageLoad,Nt(l,u),N[u].appendChild(_[u])}function Xt(l,u){var E=l.collections.sourceLoadHandlers,j=l.elements,_=j.sources,N=j.sourceAnimationWrappers,Z=l.props,J=Z.sources,K=Z.videosPosters;_[u]=document.createElement("video"),Gt(l,u,C),_[u].src=J[u],_[u].onloadedmetadata=function(I){E[u].handleVideoLoad(I)},_[u].controls=!0,Nt(l,u),K[u]&&(_[u].poster=K[u]);var lt=document.createElement("source");lt.src=J[u],_[u].appendChild(lt),setTimeout(E[u].handleNotMetaDatedVideoLoad,3e3),N[u].appendChild(_[u])}function ve(l,u){var E=l.collections.sourceLoadHandlers,j=l.elements,_=j.sources,N=j.sourceAnimationWrappers,Z=l.props.sources;_[u]=document.createElement("iframe"),Gt(l,u,"".concat(C," ").concat(U,"youtube-iframe"));var J=Z[u],K=J.split("?")[1];_[u].src="https://www.youtube.com/embed/".concat(J.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],"?").concat(K||""),_[u].allowFullscreen=!0,Nt(l,u),N[u].appendChild(_[u]),E[u].handleYoutubeLoad()}function Jt(l,u){var E=l.collections.sourceLoadHandlers,j=l.elements,_=j.sources,N=j.sourceAnimationWrappers,Z=l.props.sources;_[u]=Z[u],Gt(l,u,"".concat(_[u].className," ").concat(C)),N[u].appendChild(_[u]),E[u].handleCustomLoad()}function fe(l,u){var E=l.elements,j=E.sources,_=E.sourceAnimationWrappers;l.props.sources,j[u]=document.createElement("div"),j[u].className="".concat(U,"invalid-file-wrapper ").concat(w),j[u].innerHTML="Invalid source",_[u].classList.add(W),_[u].removeChild(_[u].firstChild),_[u].appendChild(j[u])}function oe(l){var u=l.collections,E=u.sourceLoadHandlers,j=u.sourcesRenderFunctions,_=l.core.sourceDisplayFacade,N=l.resolve;this.runActionsForSourceTypeAndIndex=function(Z,J){var K;switch(Z!=="invalid"&&(E[J]=N(Lt,[J])),Z){case"image":K=Vt;break;case"video":K=Xt;break;case"youtube":K=ve;break;case"custom":K=Jt;break;default:K=fe}j[J]=function(){return K(l,J)},_.displaySourcesWhichShouldBeDisplayed()}}function te(){var l,u,E,j={isUrlYoutubeOne:function(N){var Z=document.createElement("a");return Z.href=N,Z.hostname==="www.youtube.com"||Z.hostname==="youtu.be"},getTypeFromResponseContentType:function(N){return N.slice(0,N.indexOf("/"))}};function _(){if(E.readyState!==4){if(E.readyState===2){var N;switch(j.getTypeFromResponseContentType(E.getResponseHeader("content-type"))){case"image":N="image";break;case"video":N="video";break;default:N="invalid"}E.onreadystatechange=null,E.abort(),u(N)}}else u("invalid")}this.setUrlToCheck=function(N){l=N},this.getSourceType=function(N){if(j.isUrlYoutubeOne(l))return N("youtube");u=N,(E=new XMLHttpRequest).onreadystatechange=_,E.open("GET",l,!0),E.send()}}function Yt(l,u,E){var j=l.props,_=j.types,N=j.type,Z=j.sources,J=l.resolve;this.getTypeSetByClientForIndex=function(K){var lt;return _&&_[K]?lt=_[K]:N&&(lt=N),lt},this.retrieveTypeWithXhrForIndex=function(K){var lt=J(te);lt.setUrlToCheck(Z[K]),lt.getSourceType(function(I){u.handleReceivedSourceTypeForUrl(I,Z[K]),E.runActionsForSourceTypeAndIndex(I,K)})}}function re(l,u){var E=l.core.stageManager,j=l.elements,_=j.smw,N=j.sourceWrappersContainer,Z=l.props,J=0,K=document.createElement("div");function lt(g){K.style.transform="translateX(".concat(g+J,"px)"),J=0}function I(){return(1+Z.slideDistance)*innerWidth}K.className="".concat(D," ").concat(H," ").concat(w),K.s=function(){K.style.display="flex"},K.h=function(){K.style.display="none"},K.a=function(){K.classList.add(G)},K.d=function(){K.classList.remove(G)},K.n=function(){K.style.removeProperty("transform")},K.v=function(g){return J=g,K},K.ne=function(){lt(-I())},K.z=function(){lt(0)},K.p=function(){lt(I())},E.i(u)||K.h(),_[u]=K,N.appendChild(K),function(g,L){var $=g.elements,ht=$.smw,ut=$.sourceAnimationWrappers,bt=document.createElement("div"),Et=document.createElement("div");Et.className="fslightboxl";for(var Dt=0;Dt<3;Dt++){var Bt=document.createElement("div");Et.appendChild(Bt)}bt.appendChild(Et),ht[L].appendChild(bt),ut[L]=bt}(l,u)}function Wt(l,u,E,j){var _=document.createElementNS("http://www.w3.org/2000/svg","svg");_.setAttributeNS(null,"width",u),_.setAttributeNS(null,"height",u),_.setAttributeNS(null,"viewBox",E);var N=document.createElementNS("http://www.w3.org/2000/svg","path");return N.setAttributeNS(null,"class","".concat(U,"svg-path")),N.setAttributeNS(null,"d",j),_.appendChild(N),l.appendChild(_),_}function le(l,u){var E=document.createElement("div");return E.className="".concat(U,"toolbar-button ").concat(w),E.title=u,l.appendChild(E),E}function ie(l,u){var E=document.createElement("div");E.className="".concat(U,"toolbar"),u.appendChild(E),function(j,_){var N=j.componentsServices,Z=j.data,J=j.fs,K="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",lt=le(_);lt.title="Enter fullscreen";var I=Wt(lt,"20px","0 0 18 18",K);N.ofs=function(){Z.ifs=!0,lt.title="Exit fullscreen",I.setAttributeNS(null,"width","24px"),I.setAttributeNS(null,"height","24px"),I.setAttributeNS(null,"viewBox","0 0 950 1024"),I.firstChild.setAttributeNS(null,"d","M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z")},N.xfs=function(){Z.ifs=!1,lt.title="Enter fullscreen",I.setAttributeNS(null,"width","20px"),I.setAttributeNS(null,"height","20px"),I.setAttributeNS(null,"viewBox","0 0 18 18"),I.firstChild.setAttributeNS(null,"d",K)},lt.onclick=J.t}(l,E),function(j,_){var N=le(_,"Close");N.onclick=j.core.lightboxCloser.closeLightbox,Wt(N,"20px","0 0 24 24","M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z")}(l,E)}function he(l){var u=l.props.sources,E=l.elements.container,j=document.createElement("div");j.className="".concat(U,"nav"),E.appendChild(j),ie(l,j),u.length>1&&function(_,N){var Z=_.componentsServices,J=_.props.sources,K=(_.stageIndexes,document.createElement("div"));K.className="".concat(U,"slide-number-container");var lt=document.createElement("div");lt.className=w;var I=document.createElement("span");Z.setSlideNumber=function($){return I.innerHTML=$};var g=document.createElement("span");g.className="".concat(U,"slash");var L=document.createElement("div");L.innerHTML=J.length,K.appendChild(lt),lt.appendChild(I),lt.appendChild(g),lt.appendChild(L),N.appendChild(K),setTimeout(function(){lt.offsetWidth>55&&(K.style.justifyContent="flex-start")})}(l,j)}function jt(l,u,E,j){var _=l.elements.container,N=E.charAt(0).toUpperCase()+E.slice(1),Z=document.createElement("div");Z.className="".concat(T," ").concat(T,"-").concat(E),Z.title="".concat(N," slide"),Z.onclick=u,function(J,K){var lt=document.createElement("div");lt.className="".concat(ot," ").concat(w),Wt(lt,"20px","0 0 20 20",K),J.appendChild(lt)}(Z,j),_.appendChild(Z)}function me(l){var u=l.core,E=u.lightboxCloser,j=u.slideChangeFacade,_=l.fs;this.listener=function(N){switch(N.key){case"Escape":E.closeLightbox();break;case"ArrowLeft":j.changeToPrevious();break;case"ArrowRight":j.changeToNext();break;case"F11":N.preventDefault(),_.t()}}}function pe(l){var u=l.elements,E=l.sourcePointerProps,j=l.stageIndexes;function _(N,Z){u.smw[N].v(E.swipedX)[Z]()}this.runActionsForEvent=function(N){var Z,J,K;u.container.contains(u.slideSwipingHoverer)||u.container.appendChild(u.slideSwipingHoverer),Z=u.container,J=it,(K=Z.classList).contains(J)||K.add(J),E.swipedX=N.screenX-E.downScreenX;var lt=j.previous,I=j.next;_(j.current,"z"),lt!==void 0&&E.swipedX>0?_(lt,"ne"):I!==void 0&&E.swipedX<0&&_(I,"p")}}function Zt(l){var u=l.props.sources,E=l.resolve,j=l.sourcePointerProps,_=E(pe);u.length===1?this.listener=function(){j.swipedX=1}:this.listener=function(N){j.isPointering&&_.runActionsForEvent(N)}}function ne(l){var u=l.core.slideIndexChanger,E=l.elements.smw,j=l.stageIndexes,_=l.sws;function N(J){var K=E[j.current];K.a(),K[J]()}function Z(J,K){J!==void 0&&(E[J].s(),E[J][K]())}this.runPositiveSwipedXActions=function(){var J=j.previous;if(J===void 0)N("z");else{N("p");var K=j.next;u.changeTo(J);var lt=j.previous;_.d(lt),_.b(K),N("z"),Z(lt,"ne")}},this.runNegativeSwipedXActions=function(){var J=j.next;if(J===void 0)N("z");else{N("ne");var K=j.previous;u.changeTo(J);var lt=j.next;_.d(lt),_.b(K),N("z"),Z(lt,"p")}}}function ye(l,u){l.contains(u)&&l.removeChild(u)}function X(l){var u=l.core.lightboxCloser,E=l.elements,j=l.resolve,_=l.sourcePointerProps,N=j(ne);this.runNoSwipeActions=function(){ye(E.container,E.slideSwipingHoverer),_.isSourceDownEventTarget||u.closeLightbox(),_.isPointering=!1},this.runActions=function(){_.swipedX>0?N.runPositiveSwipedXActions():N.runNegativeSwipedXActions(),ye(E.container,E.slideSwipingHoverer),E.container.classList.remove(it),_.isPointering=!1}}function s(l){var u=l.resolve,E=l.sourcePointerProps,j=u(X);this.listener=function(){E.isPointering&&(E.swipedX?j.runActions():j.runNoSwipeActions())}}function i(l){var u=this,E=l.core,j=E.eventsDispatcher,_=E.globalEventsController,N=E.scrollbarRecompensor,Z=l.data,J=l.elements,K=l.fs,lt=l.props,I=l.sourcePointerProps;this.isLightboxFadingOut=!1,this.runActions=function(){u.isLightboxFadingOut=!0,J.container.classList.add(V),_.removeListeners(),lt.exitFullscreenOnClose&&Z.ifs&&K.x(),setTimeout(function(){u.isLightboxFadingOut=!1,I.isPointering=!1,J.container.classList.remove(V),document.documentElement.classList.remove(z),N.removeRecompense(),document.body.removeChild(J.container),j.dispatch("onClose")},270)}}function f(l,u){var E=l.classList;E.contains(u)&&E.remove(u)}function k(l){var u,E,j;E=(u=l).core.eventsDispatcher,j=u.props,E.dispatch=function(_){j[_]&&j[_]()},function(_){var N=_.componentsServices,Z=_.data,J=_.fs,K=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];function lt(g){for(var L=0;L<K.length;L++)document[g](K[L],I)}function I(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?N.ofs():N.xfs()}J.o=function(){N.ofs();var g=document.documentElement;g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()},J.x=function(){N.xfs(),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},J.t=function(){Z.ifs?J.x():J.o()},J.l=function(){lt("addEventListener")},J.q=function(){lt("removeEventListener")}}(l),function(_){var N=_.core,Z=N.globalEventsController,J=N.windowResizeActioner,K=_.fs,lt=_.resolve,I=lt(me),g=lt(Zt),L=lt(s);Z.attachListeners=function(){document.addEventListener("pointermove",g.listener),document.addEventListener("pointerup",L.listener),addEventListener("resize",J.runActions),document.addEventListener("keydown",I.listener),K.l()},Z.removeListeners=function(){document.removeEventListener("pointermove",g.listener),document.removeEventListener("pointerup",L.listener),removeEventListener("resize",J.runActions),document.removeEventListener("keydown",I.listener),K.q()}}(l),function(_){var N=_.core.lightboxCloser,Z=(0,_.resolve)(i);N.closeLightbox=function(){Z.isLightboxFadingOut||Z.runActions()}}(l),function(_){var N=_.data,Z=_.core.scrollbarRecompensor;function J(){document.body.offsetHeight>innerHeight&&(document.body.style.marginRight=N.scrollbarWidth+"px")}Z.addRecompense=function(){document.readyState==="complete"?J():addEventListener("load",function(){J(),Z.addRecompense=J})},Z.removeRecompense=function(){document.body.style.removeProperty("margin-right")}}(l),function(_){var N=_.core,Z=N.slideChangeFacade,J=N.slideIndexChanger,K=N.stageManager;_.props.sources.length>1?(Z.changeToPrevious=function(){J.jumpTo(K.getPreviousSlideIndex())},Z.changeToNext=function(){J.jumpTo(K.getNextSlideIndex())}):(Z.changeToPrevious=function(){},Z.changeToNext=function(){})}(l),function(_){var N=_.componentsServices,Z=_.core,J=Z.slideIndexChanger,K=Z.sourceDisplayFacade,lt=Z.stageManager,I=_.elements,g=I.smw,L=I.sourceAnimationWrappers,$=_.isl,ht=_.stageIndexes,ut=_.sws;J.changeTo=function(bt){ht.current=bt,lt.updateStageIndexes(),N.setSlideNumber(bt+1),K.displaySourcesWhichShouldBeDisplayed()},J.jumpTo=function(bt){var Et=ht.previous,Dt=ht.current,Bt=ht.next,ee=$[Dt],Ht=$[bt];J.changeTo(bt);for(var Kt=0;Kt<g.length;Kt++)g[Kt].d();ut.d(Dt),ut.c(),requestAnimationFrame(function(){requestAnimationFrame(function(){var R=ht.previous,nt=ht.next;function At(){lt.i(Dt)?Dt===ht.previous?g[Dt].ne():Dt===ht.next&&g[Dt].p():(g[Dt].h(),g[Dt].n())}ee&&L[Dt].classList.add(B),Ht&&L[ht.current].classList.add(q),ut.a(),R!==void 0&&R!==Dt&&g[R].ne(),g[ht.current].n(),nt!==void 0&&nt!==Dt&&g[nt].p(),ut.b(Et),ut.b(Bt),$[Dt]?setTimeout(At,260):At()})})}}(l),function(_){var N=_.core.sourcesPointerDown,Z=_.elements,J=Z.smw,K=Z.sources,lt=_.sourcePointerProps,I=_.stageIndexes;N.listener=function(g){g.target.tagName!=="VIDEO"&&g.preventDefault(),lt.isPointering=!0,lt.downScreenX=g.screenX,lt.swipedX=0;var L=K[I.current];L&&L.contains(g.target)?lt.isSourceDownEventTarget=!0:lt.isSourceDownEventTarget=!1;for(var $=0;$<J.length;$++)J[$].d()}}(l),function(_){var N=_.collections.sourcesRenderFunctions,Z=_.core.sourceDisplayFacade,J=_.props,K=_.stageIndexes;function lt(I){N[I]&&(N[I](),delete N[I])}Z.displaySourcesWhichShouldBeDisplayed=function(){if(J.loadOnlyCurrentSource)lt(K.current);else for(var I in K)lt(K[I])}}(l),function(_){var N=_.core.stageManager,Z=_.elements,J=Z.smw,K=Z.sourceAnimationWrappers,lt=_.isl,I=_.stageIndexes,g=_.sws;g.a=function(){for(var L in I)J[I[L]].s()},g.b=function(L){L===void 0||N.i(L)||(J[L].h(),J[L].n())},g.c=function(){for(var L in I)g.d(I[L])},g.d=function(L){if(lt[L]){var $=K[L];f($,W),f($,q),f($,B)}}}(l),function(_){var N=_.collections.sourceSizers,Z=_.core.windowResizeActioner,J=_.data,K=_.elements.smw,lt=_.stageIndexes;Z.runActions=function(){innerWidth<992?J.maxSourceWidth=innerWidth:J.maxSourceWidth=.9*innerWidth,J.maxSourceHeight=.9*innerHeight;for(var I=0;I<K.length;I++)K[I].d(),N[I]&&N[I].adjustSize();var g=lt.previous,L=lt.next;g!==void 0&&K[g].ne(),L!==void 0&&K[L].p()}}(l)}function b(l){var u=l.componentsServices,E=l.core,j=E.eventsDispatcher,_=E.globalEventsController,N=E.scrollbarRecompensor,Z=E.sourceDisplayFacade,J=E.stageManager,K=E.windowResizeActioner,lt=l.data,I=l.elements,g=(l.props,l.stageIndexes),L=l.sws;function $(){var ht,ut;lt.i=!0,lt.scrollbarWidth=function(){var bt=document.createElement("div"),Et=bt.style,Dt=document.createElement("div");Et.visibility="hidden",Et.width="100px",Et.msOverflowStyle="scrollbar",Et.overflow="scroll",Dt.style.width="100%",document.body.appendChild(bt);var Bt=bt.offsetWidth;bt.appendChild(Dt);var ee=Dt.offsetWidth;return document.body.removeChild(bt),Bt-ee}(),k(l),I.container=document.createElement("div"),I.container.className="".concat(U,"container ").concat(H," ").concat(W),function(bt){var Et=bt.elements;Et.slideSwipingHoverer=document.createElement("div"),Et.slideSwipingHoverer.className="".concat(U,"slide-swiping-hoverer ").concat(H," ").concat(D)}(l),he(l),function(bt){var Et=bt.core.sourcesPointerDown,Dt=bt.elements,Bt=bt.props.sources,ee=document.createElement("div");ee.className="".concat(D," ").concat(H),Dt.container.appendChild(ee),ee.addEventListener("pointerdown",Et.listener),Dt.sourceWrappersContainer=ee;for(var Ht=0;Ht<Bt.length;Ht++)re(bt,Ht)}(l),l.props.sources.length>1&&(ut=(ht=l).core.slideChangeFacade,jt(ht,ut.changeToPrevious,"previous","M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"),jt(ht,ut.changeToNext,"next","M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z")),function(bt){for(var Et=bt.props.sources,Dt=bt.resolve,Bt=Dt(xt),ee=Dt(oe),Ht=Dt(Yt,[Bt,ee]),Kt=0;Kt<Et.length;Kt++)if(typeof Et[Kt]=="string"){var R=Ht.getTypeSetByClientForIndex(Kt);if(R)ee.runActionsForSourceTypeAndIndex(R,Kt);else{var nt=Bt.getSourceTypeFromLocalStorageByUrl(Et[Kt]);nt?ee.runActionsForSourceTypeAndIndex(nt,Kt):Ht.retrieveTypeWithXhrForIndex(Kt)}}else ee.runActionsForSourceTypeAndIndex("custom",Kt)}(l),j.dispatch("onInit")}l.open=function(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ut=g.previous,bt=g.current,Et=g.next;g.current=ht,lt.i||ft(l),J.updateStageIndexes(),lt.i?(L.c(),L.a(),L.b(ut),L.b(bt),L.b(Et),j.dispatch("onShow")):$(),Z.displaySourcesWhichShouldBeDisplayed(),u.setSlideNumber(ht+1),document.body.appendChild(I.container),document.documentElement.classList.add(z),N.addRecompense(),_.attachListeners(),K.runActions(),I.smw[g.current].n(),j.dispatch("onOpen")}}function v(l,u,E){return(v=d()?Reflect.construct.bind():function(j,_,N){var Z=[null];Z.push.apply(Z,_);var J=new(Function.bind.apply(j,Z));return N&&c(J,N.prototype),J}).apply(null,arguments)}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c(l,u){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,j){return E.__proto__=j,E})(l,u)}function a(l){return function(u){if(Array.isArray(u))return o(u)}(l)||function(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}(l)||function(u,E){if(u){if(typeof u=="string")return o(u,E);var j=Object.prototype.toString.call(u).slice(8,-1);if(j==="Object"&&u.constructor&&(j=u.constructor.name),j==="Map"||j==="Set")return Array.from(u);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return o(u,E)}}(l)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(l,u){(u==null||u>l.length)&&(u=l.length);for(var E=0,j=new Array(u);E<u;E++)j[E]=l[E];return j}function x(){for(var l=document.getElementsByTagName("a"),u=function(_){if(!l[_].hasAttribute("data-fslightbox"))return"continue";var N=l[_].hasAttribute("data-href")?l[_].getAttribute("data-href"):l[_].getAttribute("href");if(!N)return console.warn('The "data-fslightbox" attribute was set without the "href" attribute.'),"continue";var Z=l[_].getAttribute("data-fslightbox");fsLightboxInstances[Z]||(fsLightboxInstances[Z]=new FsLightbox);var J=null;N.charAt(0)==="#"?(J=document.getElementById(N.substring(1)).cloneNode(!0)).removeAttribute("id"):J=N,fsLightboxInstances[Z].props.sources.push(J),fsLightboxInstances[Z].elements.a.push(l[_]);var K=fsLightboxInstances[Z].props.sources.length-1;l[_].onclick=function(ut){ut.preventDefault(),fsLightboxInstances[Z].open(K)},ht("types","data-type"),ht("videosPosters","data-video-poster"),ht("customClasses","data-class"),ht("customClasses","data-custom-class");for(var lt=["href","data-fslightbox","data-href","data-type","data-video-poster","data-class","data-custom-class"],I=l[_].attributes,g=fsLightboxInstances[Z].props.customAttributes,L=0;L<I.length;L++)if(lt.indexOf(I[L].name)===-1&&I[L].name.substr(0,5)==="data-"){g[K]||(g[K]={});var $=I[L].name.substr(5);g[K][$]=I[L].value}function ht(ut,bt){l[_].hasAttribute(bt)&&(fsLightboxInstances[Z].props[ut][K]=l[_].getAttribute(bt))}},E=0;E<l.length;E++)u(E);var j=Object.keys(fsLightboxInstances);window.fsLightbox=fsLightboxInstances[j[j.length-1]]}window.FsLightbox=function(){var l=this;this.props={sources:[],customAttributes:[],customClasses:[],types:[],videosPosters:[],slideDistance:.3},this.data={isFullscreenOpen:!1,maxSourceWidth:0,maxSourceHeight:0,scrollbarWidth:0},this.isl=[],this.sourcePointerProps={downScreenX:null,isPointering:!1,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={},this.elements={a:[],container:null,slideSwipingHoverer:null,smw:[],sourceWrappersContainer:null,sources:[],sourceAnimationWrappers:[]},this.componentsServices={setSlideNumber:function(){}},this.resolve=function(u){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return E.unshift(l),v(u,a(E))},this.collections={sourceLoadHandlers:[],sourcesRenderFunctions:[],sourceSizers:[]},this.core={eventsDispatcher:{},globalEventsController:{},lightboxCloser:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},stageManager:{},windowResizeActioner:{}},this.fs={},this.sws={},b(this),this.close=function(){return l.core.lightboxCloser.closeLightbox()}},window.fsLightboxInstances={},x(),window.refreshFsLightbox=function(){for(var l in fsLightboxInstances){var u=fsLightboxInstances[l].props;fsLightboxInstances[l]=new FsLightbox,fsLightboxInstances[l].props=u,fsLightboxInstances[l].props.sources=[],fsLightboxInstances[l].elements.a=[]}x()}}])})})(Ir);const Fr="cmaps/";class Or{constructor(kt,at=1){if(!kt||!kt.dataset.url)throw new Error("invalid element!");this.element=kt,this.url=kt.dataset.url,this.scale=at,this.data=[]}loading(kt){kt?this.element.classList.add("pdf-preview__loading"):this.element.classList.remove("pdf-preview__loading")}async fetchFile(){return this.loading(!0),fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(kt=>kt.blob()).then(kt=>this.blobtoDataUrl(kt)).then(kt=>this.draw(kt))}blobtoDataUrl(kt){return new Promise(at=>{const h=new FileReader;h.readAsDataURL(kt),h.onload=()=>{at(h.result)}})}draw(kt){Pr.workerPort=Dr(),Lr({data:atob(kt.replace("data:application/pdf;base64,","")),cMapUrl:Fr,cMapPacked:!0}).promise.then(async at=>{await this.getPage(1,at)},at=>{console.error(at)}).then(()=>{const at=document.createElement("img");at.setAttribute("class","pdf-preview__image"),at.onload=()=>{this.element.addEventListener("click",this.display(this.data)),this.element.appendChild(at),this.loading(!1)},at.src=this.data[0]}),this.createModal(kt)}createModal(kt){const at=document.createElement("object");at.data=kt,at.setAttribute("type","application/pdf"),at.style.minWidth="100px",at.style.minHeight="100px",at.style.display="block",document.body.appendChild(at)}display(kt){var at=new window.FsLightbox;return at.props.sources=kt,refreshFsLightbox(),()=>{at.open()}}async getPage(kt,at){const h=this.scale,st=this.data;return new Promise(A=>{at.getPage(kt).then(function(U){var gt=U.getViewport({scale:h}),it=document.createElement("canvas"),H=it.getContext("2d");it.height=gt.height,it.width=gt.width;var w={canvasContext:H,viewport:gt},z=U.render(w);z.promise.then(async()=>{st.push(it.toDataURL("image/png")),A()})})})}}document.querySelectorAll('[data-role="pdf-preview"]').forEach(Ot=>{new Or(Ot).fetchFile()})})();
