var ra=Object.defineProperty;var aa=(Te,Se,Re)=>Se in Te?ra(Te,Se,{enumerable:!0,configurable:!0,writable:!0,value:Re}):Te[Se]=Re;var be=(Te,Se,Re)=>(aa(Te,typeof Se!="symbol"?Se+"":Se,Re),Re),Li=(Te,Se,Re)=>{if(!Se.has(Te))throw TypeError("Cannot "+Re)};var t=(Te,Se,Re)=>(Li(Te,Se,"read from private field"),Re?Re.call(Te):Se.get(Te)),m=(Te,Se,Re)=>{if(Se.has(Te))throw TypeError("Cannot add the same private member more than once");Se instanceof WeakSet?Se.add(Te):Se.set(Te,Re)},O=(Te,Se,Re,os)=>(Li(Te,Se,"write to private field"),os?os.call(Te,Re):Se.set(Te,Re),Re);var Qe=(Te,Se,Re,os)=>({set _(Zs){O(Te,Se,Zs,Re)},get _(){return t(Te,Se,os)}}),M=(Te,Se,Re)=>(Li(Te,Se,"access private method"),Re);(async()=>{(function(){const Mt=document.createElement("link").relList;if(Mt&&Mt.supports&&Mt.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))ht(h);new MutationObserver(h=>{for(const st of h)if(st.type==="childList")for(const A of st.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&ht(A)}).observe(document,{childList:!0,subtree:!0});function Et(h){const st={};return h.integrity&&(st.integrity=h.integrity),h.referrerPolicy&&(st.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?st.credentials="include":h.crossOrigin==="anonymous"?st.credentials="omit":st.credentials="same-origin",st}function ht(h){if(h.ep)return;h.ep=!0;const st=Et(h);fetch(h.href,st)}})();const Te=document.querySelectorAll('[data-role="auth-menu"'),Se=document.querySelector(".main-header__auth-menu"),Re=document.querySelector(".main-header__auth-bg");Se&&Re&&(Te.forEach(Mt=>Mt.addEventListener("click",os)),Re.addEventListener("click",os));function os(){Se.classList.toggle("main-header__auth-menu_open")}const Zs=document.querySelectorAll('[data-role="toggle-section"]'),Pr=document.querySelectorAll(".toggle-section__item");Zs.forEach(Mt=>Mt.addEventListener("click",Lr));function Lr(){Pr.forEach(Mt=>Mt.classList.remove("toggle-section__item_show")),Zs.forEach(Mt=>Mt.classList.remove("toggle-section__list-button_active")),document.querySelector(this.dataset.target).classList.add("toggle-section__item_show"),this.classList.add("toggle-section__list-button_active")}document.querySelectorAll(".password__toggler").forEach(Mt=>Mt.addEventListener("click",Dr));function Dr(){const Mt=document.querySelector(this.dataset.target);Mt.type=Mt.type==="password"?"text":"password"}const Ir=document.getElementById("js-modal-area"),Fr=document.querySelectorAll(".modal"),Or=document.querySelectorAll('[data-role="modal"]'),Nr=document.querySelectorAll(".modal__dialog");Fr.forEach(Mt=>{Ur(),document.getElementById("js-modal-area").appendChild(Mt)}),Or.forEach(Mt=>{Mt.addEventListener("click",Br)}),Nr.forEach(Mt=>Mt.addEventListener("click",Hr));function Br(){document.querySelector(this.dataset.target).classList.toggle("modal_open")}function Hr(Mt){Mt.stopPropagation()}function Ur(){if(!Ir){const Mt=document.createElement("div");Mt.setAttribute("id","js-modal-area"),Mt.style.zIndex="100",Mt.style.position="relative",document.body.appendChild(Mt)}}function zr(){const Mt=document.querySelector('[data-role="modal-open"]');Mt&&Mt.dataset.errors!="{}"&&document.querySelector(Mt.dataset.target).classList.add("modal_open")}window.onload=zr;const jr="modulepreload",qr=function(Mt){return"/"+Mt},Rn={},ts=function(Mt,Et,ht){let h=Promise.resolve();if(Et&&Et.length>0){const st=document.getElementsByTagName("link"),A=document.querySelector("meta[property=csp-nonce]"),H=(A==null?void 0:A.nonce)||(A==null?void 0:A.getAttribute("nonce"));h=Promise.all(Et.map(gt=>{if(gt=qr(gt),gt in Rn)return;Rn[gt]=!0;const it=gt.endsWith(".css"),U=it?'[rel="stylesheet"]':"";if(ht)for(let z=st.length-1;z>=0;z--){const G=st[z];if(G.href===gt&&(!it||G.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${gt}"]${U}`))return;const w=document.createElement("link");if(w.rel=it?"stylesheet":jr,it||(w.as="script",w.crossOrigin=""),w.href=gt,H&&w.setAttribute("nonce",H),document.head.appendChild(w),it)return new Promise((z,G)=>{w.addEventListener("load",z),w.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${gt}`)))})}))}return h.then(()=>Mt()).catch(st=>{const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=st,window.dispatchEvent(A),!A.defaultPrevented)throw st})};var Wr={640:(Mt,Et,ht)=>{var ie,jt,ms,pe,On,ne,Nn,$,s,i,f,R,b,v,d,c,a,o,E,l,u,_,j,x,N,Bn,J,ci,lt,Di,g,Ii,V,ot,ut,bt,_t,It,Bt,Fi,Ut,Yt,k,nt,Hn,vt,Oi;ht.d(Et,{AnnotationLayer:()=>le,FreeTextAnnotationElement:()=>xt,InkAnnotationElement:()=>Jt,StampAnnotationElement:()=>re});var h=ht(266),st=ht(473),A=ht(780);function H(Tt){return Math.floor(Math.max(0,Math.min(1,Tt))*255).toString(16).padStart(2,"0")}function gt(Tt){return Math.max(0,Math.min(255,255*Tt))}class it{static CMYK_G([p,e,r,C]){return["G",1-Math.min(1,.3*p+.59*r+.11*e+C)]}static G_CMYK([p]){return["CMYK",0,0,0,1-p]}static G_RGB([p]){return["RGB",p,p,p]}static G_rgb([p]){return p=gt(p),[p,p,p]}static G_HTML([p]){const e=H(p);return`#${e}${e}${e}`}static RGB_G([p,e,r]){return["G",.3*p+.59*e+.11*r]}static RGB_rgb(p){return p.map(gt)}static RGB_HTML(p){return`#${p.map(H).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([p,e,r,C]){return["RGB",1-Math.min(1,p+C),1-Math.min(1,r+C),1-Math.min(1,e+C)]}static CMYK_rgb([p,e,r,C]){return[gt(1-Math.min(1,p+C)),gt(1-Math.min(1,r+C)),gt(1-Math.min(1,e+C))]}static CMYK_HTML(p){const e=this.CMYK_RGB(p).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([p,e,r]){const C=1-p,F=1-e,tt=1-r,rt=Math.min(C,F,tt);return["CMYK",C,F,tt,rt]}}var U=ht(160);const w=1e3,z=9,G=new WeakSet;function D(Tt){return{width:Tt[2]-Tt[0],height:Tt[3]-Tt[1]}}class at{static create(p){switch(p.data.annotationType){case h.AnnotationType.LINK:return new q(p);case h.AnnotationType.TEXT:return new B(p);case h.AnnotationType.WIDGET:switch(p.data.fieldType){case"Tx":return new K(p);case"Btn":return p.data.radioButton?new S(p):p.data.checkBox?new Q(p):new X(p);case"Ch":return new ft(p);case"Sig":return new P(p)}return new W(p);case h.AnnotationType.POPUP:return new Ct(p);case h.AnnotationType.FREETEXT:return new xt(p);case h.AnnotationType.LINE:return new Dt(p);case h.AnnotationType.SQUARE:return new Gt(p);case h.AnnotationType.CIRCLE:return new Nt(p);case h.AnnotationType.POLYLINE:return new Kt(p);case h.AnnotationType.CARET:return new ve(p);case h.AnnotationType.INK:return new Jt(p);case h.AnnotationType.POLYGON:return new $t(p);case h.AnnotationType.HIGHLIGHT:return new fe(p);case h.AnnotationType.UNDERLINE:return new oe(p);case h.AnnotationType.SQUIGGLY:return new te(p);case h.AnnotationType.STRIKEOUT:return new Xt(p);case h.AnnotationType.STAMP:return new re(p);case h.AnnotationType.FILEATTACHMENT:return new Wt(p);default:return new T(p)}}}const he=class he{constructor(p,{isRenderable:e=!1,ignoreBorder:r=!1,createQuadrilaterals:C=!1}={}){m(this,ie,!1);this.isRenderable=e,this.data=p.data,this.layer=p.layer,this.linkService=p.linkService,this.downloadManager=p.downloadManager,this.imageResourcesPath=p.imageResourcesPath,this.renderForms=p.renderForms,this.svgFactory=p.svgFactory,this.annotationStorage=p.annotationStorage,this.enableScripting=p.enableScripting,this.hasJSActions=p.hasJSActions,this._fieldObjects=p.fieldObjects,this.parent=p.parent,e&&(this.container=this._createContainer(r)),C&&this._createQuadrilaterals()}static _hasPopupData({titleObj:p,contentsObj:e,richText:r}){return!!(p!=null&&p.str||e!=null&&e.str||r!=null&&r.str)}get hasPopupData(){return he._hasPopupData(this.data)}_createContainer(p){const{data:e,parent:{page:r,viewport:C}}=this,F=document.createElement("section");F.setAttribute("data-annotation-id",e.id),this instanceof W||(F.tabIndex=w),F.style.zIndex=this.parent.zIndex++,this.data.popupRef&&F.setAttribute("aria-haspopup","dialog"),e.noRotate&&F.classList.add("norotate");const{pageWidth:tt,pageHeight:rt,pageX:yt,pageY:kt}=C.rawDims;if(!e.rect||this instanceof Ct){const{rotation:Qt}=e;return!e.hasOwnCanvas&&Qt!==0&&this.setRotation(Qt,F),F}const{width:St,height:zt}=D(e.rect),Ft=h.Util.normalizeRect([e.rect[0],r.view[3]-e.rect[1]+r.view[1],e.rect[2],r.view[3]-e.rect[3]+r.view[1]]);if(!p&&e.borderStyle.width>0){F.style.borderWidth=`${e.borderStyle.width}px`;const Qt=e.borderStyle.horizontalCornerRadius,qt=e.borderStyle.verticalCornerRadius;if(Qt>0||qt>0){const ce=`calc(${Qt}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;F.style.borderRadius=ce}else if(this instanceof S){const ce=`calc(${St}px * var(--scale-factor)) / calc(${zt}px * var(--scale-factor))`;F.style.borderRadius=ce}switch(e.borderStyle.style){case h.AnnotationBorderStyleType.SOLID:F.style.borderStyle="solid";break;case h.AnnotationBorderStyleType.DASHED:F.style.borderStyle="dashed";break;case h.AnnotationBorderStyleType.BEVELED:(0,h.warn)("Unimplemented border style: beveled");break;case h.AnnotationBorderStyleType.INSET:(0,h.warn)("Unimplemented border style: inset");break;case h.AnnotationBorderStyleType.UNDERLINE:F.style.borderBottomStyle="solid";break}const ae=e.borderColor||null;ae?(O(this,ie,!0),F.style.borderColor=h.Util.makeHexColor(ae[0]|0,ae[1]|0,ae[2]|0)):F.style.borderWidth=0}F.style.left=`${100*(Ft[0]-yt)/tt}%`,F.style.top=`${100*(Ft[1]-kt)/rt}%`;const{rotation:Pt}=e;return e.hasOwnCanvas||Pt===0?(F.style.width=`${100*St/tt}%`,F.style.height=`${100*zt/rt}%`):this.setRotation(Pt,F),F}setRotation(p,e=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:C}=this.parent.viewport.rawDims,{width:F,height:tt}=D(this.data.rect);let rt,yt;p%180===0?(rt=100*F/r,yt=100*tt/C):(rt=100*tt/r,yt=100*F/C),e.style.width=`${rt}%`,e.style.height=`${yt}%`,e.setAttribute("data-main-rotation",(360-p)%360)}get _commonActions(){const p=(e,r,C)=>{const F=C.detail[e],tt=F[0],rt=F.slice(1);C.target.style[r]=it[`${tt}_HTML`](rt),this.annotationStorage.setValue(this.data.id,{[r]:it[`${tt}_rgb`](rt)})};return(0,h.shadow)(this,"_commonActions",{display:e=>{const{display:r}=e.detail,C=r%2===1;this.container.style.visibility=C?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:C,noPrint:r===1||r===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:r}=e.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{p("bgColor","backgroundColor",e)},fillColor:e=>{p("fillColor","backgroundColor",e)},fgColor:e=>{p("fgColor","color",e)},textColor:e=>{p("textColor","color",e)},borderColor:e=>{p("borderColor","borderColor",e)},strokeColor:e=>{p("strokeColor","borderColor",e)},rotation:e=>{const r=e.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(p,e){var C;const r=this._commonActions;for(const F of Object.keys(e.detail))(C=p[F]||r[F])==null||C(e)}_setDefaultPropertiesFromJS(p){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const r=this._commonActions;for(const[C,F]of Object.entries(e)){const tt=r[C];if(tt){const rt={detail:{[C]:F},target:p};tt(rt),delete e[C]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:p}=this.data;if(!p)return;const[e,r,C,F]=this.data.rect;if(p.length===1){const[,{x:qt,y:ae},{x:ce,y:we}]=p[0];if(C===qt&&F===ae&&e===ce&&r===we)return}const{style:tt}=this.container;let rt;if(t(this,ie)){const{borderColor:qt,borderWidth:ae}=tt;tt.borderWidth=0,rt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${qt}" stroke-width="${ae}">`],this.container.classList.add("hasBorder")}const yt=C-e,kt=F-r,{svgFactory:St}=this,zt=St.createElement("svg");zt.classList.add("quadrilateralsContainer"),zt.setAttribute("width",0),zt.setAttribute("height",0);const Ft=St.createElement("defs");zt.append(Ft);const Pt=St.createElement("clipPath"),Qt=`clippath_${this.data.id}`;Pt.setAttribute("id",Qt),Pt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(Pt);for(const[,{x:qt,y:ae},{x:ce,y:we}]of p){const Ce=St.createElement("rect"),Be=(ce-e)/yt,Me=(F-ae)/kt,Pe=(qt-ce)/yt,Fe=(ae-we)/kt;Ce.setAttribute("x",Be),Ce.setAttribute("y",Me),Ce.setAttribute("width",Pe),Ce.setAttribute("height",Fe),Pt.append(Ce),rt==null||rt.push(`<rect vector-effect="non-scaling-stroke" x="${Be}" y="${Me}" width="${Pe}" height="${Fe}"/>`)}t(this,ie)&&(rt.push("</g></svg>')"),tt.backgroundImage=rt.join("")),this.container.append(zt),this.container.style.clipPath=`url(#${Qt})`}_createPopup(){const{container:p,data:e}=this;p.setAttribute("aria-haspopup","dialog");const r=new Ct({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(r.render())}render(){(0,h.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(p,e=null){const r=[];if(this._fieldObjects){const C=this._fieldObjects[p];if(C)for(const{page:F,id:tt,exportValues:rt}of C){if(F===-1||tt===e)continue;const yt=typeof rt=="string"?rt:null,kt=document.querySelector(`[data-element-id="${tt}"]`);if(kt&&!G.has(kt)){(0,h.warn)(`_getElementsByName - element not allowed: ${tt}`);continue}r.push({id:tt,exportValue:yt,domElement:kt})}return r}for(const C of document.getElementsByName(p)){const{exportValue:F}=C,tt=C.getAttribute("data-element-id");tt!==e&&G.has(C)&&r.push({id:tt,exportValue:F,domElement:C})}return r}show(){var p;this.container&&(this.container.hidden=!1),(p=this.popup)==null||p.maybeShow()}hide(){var p;this.container&&(this.container.hidden=!0),(p=this.popup)==null||p.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const p=this.getElementsToTriggerPopup();if(Array.isArray(p))for(const e of p)e.classList.add("highlightArea");else p.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:p,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:p,editId:e})})}};ie=new WeakMap;let T=he;class q extends T{constructor(e,r=null){super(e,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});m(this,jt);m(this,pe);m(this,ne);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:r}=this,C=document.createElement("a");C.setAttribute("data-element-id",e.id);let F=!1;return e.url?(r.addLinkAttributes(C,e.url,e.newWindow),F=!0):e.action?(this._bindNamedAction(C,e.action),F=!0):e.attachment?(M(this,pe,On).call(this,C,e.attachment,e.attachmentDest),F=!0):e.setOCGState?(M(this,ne,Nn).call(this,C,e.setOCGState),F=!0):e.dest?(this._bindLink(C,e.dest),F=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(C,e),F=!0),e.resetForm?(this._bindResetFormAction(C,e.resetForm),F=!0):this.isTooltipOnly&&!F&&(this._bindLink(C,""),F=!0)),this.container.classList.add("linkAnnotation"),F&&this.container.append(C),this.container}_bindLink(e,r){e.href=this.linkService.getDestinationHash(r),e.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&M(this,jt,ms).call(this)}_bindNamedAction(e,r){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(r),!1),M(this,jt,ms).call(this)}_bindJSAction(e,r){e.href=this.linkService.getAnchorUrl("");const C=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const F of Object.keys(r.actions)){const tt=C.get(F);tt&&(e[tt]=()=>{var rt;return(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:F}}),!1})}e.onclick||(e.onclick=()=>!1),M(this,jt,ms).call(this)}_bindResetFormAction(e,r){const C=e.onclick;if(C||(e.href=this.linkService.getAnchorUrl("")),M(this,jt,ms).call(this),!this._fieldObjects){(0,h.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),C||(e.onclick=()=>!1);return}e.onclick=()=>{var zt;C==null||C();const{fields:F,refs:tt,include:rt}=r,yt=[];if(F.length!==0||tt.length!==0){const Ft=new Set(tt);for(const Pt of F){const Qt=this._fieldObjects[Pt]||[];for(const{id:qt}of Qt)Ft.add(qt)}for(const Pt of Object.values(this._fieldObjects))for(const Qt of Pt)Ft.has(Qt.id)===rt&&yt.push(Qt)}else for(const Ft of Object.values(this._fieldObjects))yt.push(...Ft);const kt=this.annotationStorage,St=[];for(const Ft of yt){const{id:Pt}=Ft;switch(St.push(Pt),Ft.type){case"text":{const qt=Ft.defaultValue||"";kt.setValue(Pt,{value:qt});break}case"checkbox":case"radiobutton":{const qt=Ft.defaultValue===Ft.exportValues;kt.setValue(Pt,{value:qt});break}case"combobox":case"listbox":{const qt=Ft.defaultValue||"";kt.setValue(Pt,{value:qt});break}default:continue}const Qt=document.querySelector(`[data-element-id="${Pt}"]`);if(Qt){if(!G.has(Qt)){(0,h.warn)(`_bindResetFormAction - element not allowed: ${Pt}`);continue}}else continue;Qt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((zt=this.linkService.eventBus)==null||zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:St,name:"ResetForm"}})),!1}}}jt=new WeakSet,ms=function(){this.container.setAttribute("data-internal-link","")},pe=new WeakSet,On=function(e,r,C=null){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var F;return(F=this.downloadManager)==null||F.openOrDownloadData(r.content,r.filename,C),!1},M(this,jt,ms).call(this)},ne=new WeakSet,Nn=function(e,r){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(r),!1),M(this,jt,ms).call(this)};class B extends T{constructor(p){super(p,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const p=document.createElement("img");return p.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",p.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),p.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(p),this.container}}class W extends T{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(p){var e;this.data.hasOwnCanvas&&(((e=p.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(p.previousSibling.hidden=!0),p.hidden=!1)}_getKeyModifier(p){return h.FeatureTest.platform.isMac?p.metaKey:p.ctrlKey}_setEventListener(p,e,r,C,F){r.includes("mouse")?p.addEventListener(r,tt=>{var rt;(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:C,value:F(tt),shift:tt.shiftKey,modifier:this._getKeyModifier(tt)}})}):p.addEventListener(r,tt=>{var rt;if(r==="blur"){if(!e.focused||!tt.relatedTarget)return;e.focused=!1}else if(r==="focus"){if(e.focused)return;e.focused=!0}F&&((rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:C,value:F(tt)}}))})}_setEventListeners(p,e,r,C){var F,tt,rt;for(const[yt,kt]of r)(kt==="Action"||(F=this.data.actions)!=null&&F[kt])&&((kt==="Focus"||kt==="Blur")&&(e||(e={focused:!1})),this._setEventListener(p,e,yt,kt,C),kt==="Focus"&&!((tt=this.data.actions)!=null&&tt.Blur)?this._setEventListener(p,e,"blur","Blur",null):kt==="Blur"&&!((rt=this.data.actions)!=null&&rt.Focus)&&this._setEventListener(p,e,"focus","Focus",null))}_setBackgroundColor(p){const e=this.data.backgroundColor||null;p.style.backgroundColor=e===null?"transparent":h.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(p){const e=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,C=this.data.defaultAppearanceData.fontSize||z,F=p.style;let tt;const rt=2,yt=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-rt),St=Math.round(kt/(h.LINE_FACTOR*C))||1,zt=kt/St;tt=Math.min(C,yt(zt/h.LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-rt);tt=Math.min(C,yt(kt/h.LINE_FACTOR))}F.fontSize=`calc(${tt}px * var(--scale-factor))`,F.color=h.Util.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(F.textAlign=e[this.data.textAlignment])}_setRequired(p,e){e?p.setAttribute("required",!0):p.removeAttribute("required"),p.setAttribute("aria-required",e)}}class K extends W{constructor(p){const e=p.renderForms||p.data.hasOwnCanvas||!p.data.hasAppearance&&!!p.data.fieldValue;super(p,{isRenderable:e})}setPropertyOnSiblings(p,e,r,C){const F=this.annotationStorage;for(const tt of this._getElementsByName(p.name,p.id))tt.domElement&&(tt.domElement[e]=r),F.setValue(tt.id,{[C]:r})}render(){var C,F;const p=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const tt=p.getValue(e,{value:this.data.fieldValue});let rt=tt.value||"";const yt=p.getValue(e,{charLimit:this.data.maxLen}).charLimit;yt&&rt.length>yt&&(rt=rt.slice(0,yt));let kt=tt.formattedValue||((C=this.data.textContent)==null?void 0:C.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const St={userValue:rt,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=kt??rt,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",kt??rt),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),G.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=w,this._setRequired(r,this.data.required),yt&&(r.maxLength=yt),r.addEventListener("input",Ft=>{p.setValue(e,{value:Ft.target.value}),this.setPropertyOnSiblings(r,"value",Ft.target.value,"value"),St.formattedValue=null}),r.addEventListener("resetform",Ft=>{const Pt=this.data.defaultFieldValue??"";r.value=St.userValue=Pt,St.formattedValue=null});let zt=Ft=>{const{formattedValue:Pt}=St;Pt!=null&&(Ft.target.value=Pt),Ft.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",Pt=>{var qt;if(St.focused)return;const{target:Qt}=Pt;St.userValue&&(Qt.value=St.userValue),St.lastCommittedValue=Qt.value,St.commitKey=1,(qt=this.data.actions)!=null&&qt.Focus||(St.focused=!0)}),r.addEventListener("updatefromsandbox",Pt=>{this.showElementAndHideCanvas(Pt.target);const Qt={value(qt){St.userValue=qt.detail.value??"",p.setValue(e,{value:St.userValue.toString()}),qt.target.value=St.userValue},formattedValue(qt){const{formattedValue:ae}=qt.detail;St.formattedValue=ae,ae!=null&&qt.target!==document.activeElement&&(qt.target.value=ae),p.setValue(e,{formattedValue:ae})},selRange(qt){qt.target.setSelectionRange(...qt.detail.selRange)},charLimit:qt=>{var Ce;const{charLimit:ae}=qt.detail,{target:ce}=qt;if(ae===0){ce.removeAttribute("maxLength");return}ce.setAttribute("maxLength",ae);let we=St.userValue;!we||we.length<=ae||(we=we.slice(0,ae),ce.value=St.userValue=we,p.setValue(e,{value:we}),(Ce=this.linkService.eventBus)==null||Ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:we,willCommit:!0,commitKey:1,selStart:ce.selectionStart,selEnd:ce.selectionEnd}}))}};this._dispatchEventFromSandbox(Qt,Pt)}),r.addEventListener("keydown",Pt=>{var ae;St.commitKey=1;let Qt=-1;if(Pt.key==="Escape"?Qt=0:Pt.key==="Enter"&&!this.data.multiLine?Qt=2:Pt.key==="Tab"&&(St.commitKey=3),Qt===-1)return;const{value:qt}=Pt.target;St.lastCommittedValue!==qt&&(St.lastCommittedValue=qt,St.userValue=qt,(ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:qt,willCommit:!0,commitKey:Qt,selStart:Pt.target.selectionStart,selEnd:Pt.target.selectionEnd}}))});const Ft=zt;zt=null,r.addEventListener("blur",Pt=>{var qt,ae;if(!St.focused||!Pt.relatedTarget)return;(qt=this.data.actions)!=null&&qt.Blur||(St.focused=!1);const{value:Qt}=Pt.target;St.userValue=Qt,St.lastCommittedValue!==Qt&&((ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Qt,willCommit:!0,commitKey:St.commitKey,selStart:Pt.target.selectionStart,selEnd:Pt.target.selectionEnd}})),Ft(Pt)}),(F=this.data.actions)!=null&&F.Keystroke&&r.addEventListener("beforeinput",Pt=>{var Me;St.lastCommittedValue=null;const{data:Qt,target:qt}=Pt,{value:ae,selectionStart:ce,selectionEnd:we}=qt;let Ce=ce,Be=we;switch(Pt.inputType){case"deleteWordBackward":{const Pe=ae.substring(0,ce).match(/\w*[^\w]*$/);Pe&&(Ce-=Pe[0].length);break}case"deleteWordForward":{const Pe=ae.substring(ce).match(/^[^\w]*\w*/);Pe&&(Be+=Pe[0].length);break}case"deleteContentBackward":ce===we&&(Ce-=1);break;case"deleteContentForward":ce===we&&(Be+=1);break}Pt.preventDefault(),(Me=this.linkService.eventBus)==null||Me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:ae,change:Qt||"",willCommit:!1,selStart:Ce,selEnd:Be}})}),this._setEventListeners(r,St,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Pt=>Pt.target.value)}if(zt&&r.addEventListener("blur",zt),this.data.comb){const Ft=(this.data.rect[2]-this.data.rect[0])/yt;r.classList.add("comb"),r.style.letterSpacing=`calc(${Ft}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class P extends W{constructor(p){super(p,{isRenderable:!!p.data.hasOwnCanvas})}}class Q extends W{constructor(p){super(p,{isRenderable:p.renderForms})}render(){const p=this.annotationStorage,e=this.data,r=e.id;let C=p.getValue(r,{value:e.exportValue===e.fieldValue}).value;typeof C=="string"&&(C=C!=="Off",p.setValue(r,{value:C})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const F=document.createElement("input");return G.add(F),F.setAttribute("data-element-id",r),F.disabled=e.readOnly,this._setRequired(F,this.data.required),F.type="checkbox",F.name=e.fieldName,C&&F.setAttribute("checked",!0),F.setAttribute("exportValue",e.exportValue),F.tabIndex=w,F.addEventListener("change",tt=>{const{name:rt,checked:yt}=tt.target;for(const kt of this._getElementsByName(rt,r)){const St=yt&&kt.exportValue===e.exportValue;kt.domElement&&(kt.domElement.checked=St),p.setValue(kt.id,{value:St})}p.setValue(r,{value:yt})}),F.addEventListener("resetform",tt=>{const rt=e.defaultFieldValue||"Off";tt.target.checked=rt===e.exportValue}),this.enableScripting&&this.hasJSActions&&(F.addEventListener("updatefromsandbox",tt=>{const rt={value(yt){yt.target.checked=yt.detail.value!=="Off",p.setValue(r,{value:yt.target.checked})}};this._dispatchEventFromSandbox(rt,tt)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],tt=>tt.target.checked)),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class S extends W{constructor(p){super(p,{isRenderable:p.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const p=this.annotationStorage,e=this.data,r=e.id;let C=p.getValue(r,{value:e.fieldValue===e.buttonValue}).value;if(typeof C=="string"&&(C=C!==e.buttonValue,p.setValue(r,{value:C})),C)for(const tt of this._getElementsByName(e.fieldName,r))p.setValue(tt.id,{value:!1});const F=document.createElement("input");if(G.add(F),F.setAttribute("data-element-id",r),F.disabled=e.readOnly,this._setRequired(F,this.data.required),F.type="radio",F.name=e.fieldName,C&&F.setAttribute("checked",!0),F.tabIndex=w,F.addEventListener("change",tt=>{const{name:rt,checked:yt}=tt.target;for(const kt of this._getElementsByName(rt,r))p.setValue(kt.id,{value:!1});p.setValue(r,{value:yt})}),F.addEventListener("resetform",tt=>{const rt=e.defaultFieldValue;tt.target.checked=rt!=null&&rt===e.buttonValue}),this.enableScripting&&this.hasJSActions){const tt=e.buttonValue;F.addEventListener("updatefromsandbox",rt=>{const yt={value:kt=>{const St=tt===kt.detail.value;for(const zt of this._getElementsByName(kt.target.name)){const Ft=St&&zt.id===r;zt.domElement&&(zt.domElement.checked=Ft),p.setValue(zt.id,{value:Ft})}}};this._dispatchEventFromSandbox(yt,rt)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],rt=>rt.target.checked)}return this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class X extends q{constructor(p){super(p,{ignoreBorder:p.data.hasAppearance})}render(){const p=super.render();p.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(p.title=this.data.alternativeText);const e=p.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),p}}class ft extends W{constructor(p){super(p,{isRenderable:p.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const p=this.annotationStorage,e=this.data.id,r=p.getValue(e,{value:this.data.fieldValue}),C=document.createElement("select");G.add(C),C.setAttribute("data-element-id",e),C.disabled=this.data.readOnly,this._setRequired(C,this.data.required),C.name=this.data.fieldName,C.tabIndex=w;let F=this.data.combo&&this.data.options.length>0;this.data.combo||(C.size=this.data.options.length,this.data.multiSelect&&(C.multiple=!0)),C.addEventListener("resetform",St=>{const zt=this.data.defaultFieldValue;for(const Ft of C.options)Ft.selected=Ft.value===zt});for(const St of this.data.options){const zt=document.createElement("option");zt.textContent=St.displayValue,zt.value=St.exportValue,r.value.includes(St.exportValue)&&(zt.setAttribute("selected",!0),F=!1),C.append(zt)}let tt=null;if(F){const St=document.createElement("option");St.value=" ",St.setAttribute("hidden",!0),St.setAttribute("selected",!0),C.prepend(St),tt=()=>{St.remove(),C.removeEventListener("input",tt),tt=null},C.addEventListener("input",tt)}const rt=St=>{const zt=St?"value":"textContent",{options:Ft,multiple:Pt}=C;return Pt?Array.prototype.filter.call(Ft,Qt=>Qt.selected).map(Qt=>Qt[zt]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][zt]};let yt=rt(!1);const kt=St=>{const zt=St.target.options;return Array.prototype.map.call(zt,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(C.addEventListener("updatefromsandbox",St=>{const zt={value(Ft){tt==null||tt();const Pt=Ft.detail.value,Qt=new Set(Array.isArray(Pt)?Pt:[Pt]);for(const qt of C.options)qt.selected=Qt.has(qt.value);p.setValue(e,{value:rt(!0)}),yt=rt(!1)},multipleSelection(Ft){C.multiple=!0},remove(Ft){const Pt=C.options,Qt=Ft.detail.remove;Pt[Qt].selected=!1,C.remove(Qt),Pt.length>0&&Array.prototype.findIndex.call(Pt,qt=>qt.selected)===-1&&(Pt[0].selected=!0),p.setValue(e,{value:rt(!0),items:kt(Ft)}),yt=rt(!1)},clear(Ft){for(;C.length!==0;)C.remove(0);p.setValue(e,{value:null,items:[]}),yt=rt(!1)},insert(Ft){const{index:Pt,displayValue:Qt,exportValue:qt}=Ft.detail.insert,ae=C.children[Pt],ce=document.createElement("option");ce.textContent=Qt,ce.value=qt,ae?ae.before(ce):C.append(ce),p.setValue(e,{value:rt(!0),items:kt(Ft)}),yt=rt(!1)},items(Ft){const{items:Pt}=Ft.detail;for(;C.length!==0;)C.remove(0);for(const Qt of Pt){const{displayValue:qt,exportValue:ae}=Qt,ce=document.createElement("option");ce.textContent=qt,ce.value=ae,C.append(ce)}C.options.length>0&&(C.options[0].selected=!0),p.setValue(e,{value:rt(!0),items:kt(Ft)}),yt=rt(!1)},indices(Ft){const Pt=new Set(Ft.detail.indices);for(const Qt of Ft.target.options)Qt.selected=Pt.has(Qt.index);p.setValue(e,{value:rt(!0)}),yt=rt(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(zt,St)}),C.addEventListener("input",St=>{var Ft;const zt=rt(!0);p.setValue(e,{value:zt}),St.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:yt,changeEx:zt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(C,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],St=>St.target.value)):C.addEventListener("input",function(St){p.setValue(e,{value:rt(!0)})}),this.data.combo&&this._setTextStyle(C),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class Ct extends T{constructor(p){const{data:e,elements:r}=p;super(p,{isRenderable:T._hasPopupData(e)}),this.elements=r}render(){this.container.classList.add("popupAnnotation");const p=new dt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const r of this.elements)r.popup=p,e.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(r=>`${h.AnnotationPrefix}${r}`).join(",")),this.container}}class dt{constructor({container:p,color:e,elements:r,titleObj:C,modificationDate:F,contentsObj:tt,richText:rt,parent:yt,rect:kt,parentRect:St,open:zt}){m(this,N);m(this,J);m(this,lt);m(this,g);m(this,$,M(this,N,Bn).bind(this));m(this,s,M(this,g,Ii).bind(this));m(this,i,M(this,lt,Di).bind(this));m(this,f,M(this,J,ci).bind(this));m(this,R,null);m(this,b,null);m(this,v,null);m(this,d,null);m(this,c,null);m(this,a,null);m(this,o,null);m(this,E,!1);m(this,l,null);m(this,u,null);m(this,_,null);m(this,j,null);m(this,x,!1);var Ft;O(this,b,p),O(this,j,C),O(this,v,tt),O(this,_,rt),O(this,a,yt),O(this,R,e),O(this,u,kt),O(this,o,St),O(this,c,r),O(this,d,st.PDFDateString.toDateObject(F)),this.trigger=r.flatMap(Pt=>Pt.getElementsToTriggerPopup());for(const Pt of this.trigger)Pt.addEventListener("click",t(this,f)),Pt.addEventListener("mouseenter",t(this,i)),Pt.addEventListener("mouseleave",t(this,s)),Pt.classList.add("popupTriggerArea");for(const Pt of r)(Ft=Pt.container)==null||Ft.addEventListener("keydown",t(this,$));t(this,b).hidden=!0,zt&&M(this,J,ci).call(this)}render(){if(t(this,l))return;const{page:{view:p},viewport:{rawDims:{pageWidth:e,pageHeight:r,pageX:C,pageY:F}}}=t(this,a),tt=O(this,l,document.createElement("div"));if(tt.className="popup",t(this,R)){const we=tt.style.outlineColor=h.Util.makeHexColor(...t(this,R));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?tt.style.backgroundColor=`color-mix(in srgb, ${we} 30%, white)`:tt.style.backgroundColor=h.Util.makeHexColor(...t(this,R).map(Ce=>Math.floor(.7*(255-Ce)+Ce)))}const rt=document.createElement("span");rt.className="header";const yt=document.createElement("h1");if(rt.append(yt),{dir:yt.dir,str:yt.textContent}=t(this,j),tt.append(rt),t(this,d)){const we=document.createElement("span");we.classList.add("popupDate"),we.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),we.setAttribute("data-l10n-args",JSON.stringify({date:t(this,d).toLocaleDateString(),time:t(this,d).toLocaleTimeString()})),rt.append(we)}const kt=t(this,v),St=t(this,_);if(St!=null&&St.str&&(!(kt!=null&&kt.str)||kt.str===St.str))U.XfaLayer.render({xfaHtml:St.html,intent:"richText",div:tt}),tt.lastChild.classList.add("richText","popupContent");else{const we=this._formatContents(kt);tt.append(we)}let zt=!!t(this,o),Ft=zt?t(this,o):t(this,u);for(const we of t(this,c))if(!Ft||h.Util.intersect(we.data.rect,Ft)!==null){Ft=we.data.rect,zt=!0;break}const Pt=h.Util.normalizeRect([Ft[0],p[3]-Ft[1]+p[1],Ft[2],p[3]-Ft[3]+p[1]]),Qt=zt?Ft[2]-Ft[0]+5:0,qt=Pt[0]+Qt,ae=Pt[1],{style:ce}=t(this,b);ce.left=`${100*(qt-C)/e}%`,ce.top=`${100*(ae-F)/r}%`,t(this,b).append(tt)}_formatContents({str:p,dir:e}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=e;const C=p.split(/(?:\r\n?|\n)/);for(let F=0,tt=C.length;F<tt;++F){const rt=C[F];r.append(document.createTextNode(rt)),F<tt-1&&r.append(document.createElement("br"))}return r}forceHide(){O(this,x,this.isVisible),t(this,x)&&(t(this,b).hidden=!0)}maybeShow(){t(this,x)&&(O(this,x,!1),t(this,b).hidden=!1)}get isVisible(){return t(this,b).hidden===!1}}$=new WeakMap,s=new WeakMap,i=new WeakMap,f=new WeakMap,R=new WeakMap,b=new WeakMap,v=new WeakMap,d=new WeakMap,c=new WeakMap,a=new WeakMap,o=new WeakMap,E=new WeakMap,l=new WeakMap,u=new WeakMap,_=new WeakMap,j=new WeakMap,x=new WeakMap,N=new WeakSet,Bn=function(p){p.altKey||p.shiftKey||p.ctrlKey||p.metaKey||(p.key==="Enter"||p.key==="Escape"&&t(this,E))&&M(this,J,ci).call(this)},J=new WeakSet,ci=function(){O(this,E,!t(this,E)),t(this,E)?(M(this,lt,Di).call(this),t(this,b).addEventListener("click",t(this,f)),t(this,b).addEventListener("keydown",t(this,$))):(M(this,g,Ii).call(this),t(this,b).removeEventListener("click",t(this,f)),t(this,b).removeEventListener("keydown",t(this,$)))},lt=new WeakSet,Di=function(){t(this,l)||this.render(),this.isVisible?t(this,E)&&t(this,b).classList.add("focused"):(t(this,b).hidden=!1,t(this,b).style.zIndex=parseInt(t(this,b).style.zIndex)+1e3)},g=new WeakSet,Ii=function(){t(this,b).classList.remove("focused"),!(t(this,E)||!this.isVisible)&&(t(this,b).hidden=!0,t(this,b).style.zIndex=parseInt(t(this,b).style.zIndex)-1e3)};class xt extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0}),this.textContent=p.data.textContent,this.textPosition=p.data.textPosition,this.annotationEditorType=h.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const p=document.createElement("div");p.classList.add("annotationTextContent"),p.setAttribute("role","comment");for(const e of this.textContent){const r=document.createElement("span");r.textContent=e,p.append(r)}this.container.append(p)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Dt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,V,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:r,height:C}=D(e.rect),F=this.svgFactory.create(r,C,!0),tt=O(this,V,this.svgFactory.createElement("svg:line"));return tt.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),tt.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),tt.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),tt.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),tt.setAttribute("stroke-width",e.borderStyle.width||1),tt.setAttribute("stroke","transparent"),tt.setAttribute("fill","transparent"),F.append(tt),this.container.append(F),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,V)}addHighlightArea(){this.container.classList.add("highlightArea")}}V=new WeakMap;class Gt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,ot,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:r,height:C}=D(e.rect),F=this.svgFactory.create(r,C,!0),tt=e.borderStyle.width,rt=O(this,ot,this.svgFactory.createElement("svg:rect"));return rt.setAttribute("x",tt/2),rt.setAttribute("y",tt/2),rt.setAttribute("width",r-tt),rt.setAttribute("height",C-tt),rt.setAttribute("stroke-width",tt||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),F.append(rt),this.container.append(F),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ot)}addHighlightArea(){this.container.classList.add("highlightArea")}}ot=new WeakMap;class Nt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,ut,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:r,height:C}=D(e.rect),F=this.svgFactory.create(r,C,!0),tt=e.borderStyle.width,rt=O(this,ut,this.svgFactory.createElement("svg:ellipse"));return rt.setAttribute("cx",r/2),rt.setAttribute("cy",C/2),rt.setAttribute("rx",r/2-tt/2),rt.setAttribute("ry",C/2-tt/2),rt.setAttribute("stroke-width",tt||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),F.append(rt),this.container.append(F),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ut)}addHighlightArea(){this.container.classList.add("highlightArea")}}ut=new WeakMap;class Kt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,bt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:r,height:C}=D(e.rect),F=this.svgFactory.create(r,C,!0);let tt=[];for(const yt of e.vertices){const kt=yt.x-e.rect[0],St=e.rect[3]-yt.y;tt.push(kt+","+St)}tt=tt.join(" ");const rt=O(this,bt,this.svgFactory.createElement(this.svgElementName));return rt.setAttribute("points",tt),rt.setAttribute("stroke-width",e.borderStyle.width||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),F.append(rt),this.container.append(F),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,bt)}addHighlightArea(){this.container.classList.add("highlightArea")}}bt=new WeakMap;class $t extends Kt{constructor(p){super(p),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ve extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Jt extends T{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,_t,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=h.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:r,height:C}=D(e.rect),F=this.svgFactory.create(r,C,!0);for(const tt of e.inkLists){let rt=[];for(const kt of tt){const St=kt.x-e.rect[0],zt=e.rect[3]-kt.y;rt.push(`${St},${zt}`)}rt=rt.join(" ");const yt=this.svgFactory.createElement(this.svgElementName);t(this,_t).push(yt),yt.setAttribute("points",rt),yt.setAttribute("stroke-width",e.borderStyle.width||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),F.append(yt)}return this.container.append(F),this.container}getElementsToTriggerPopup(){return t(this,_t)}addHighlightArea(){this.container.classList.add("highlightArea")}}_t=new WeakMap;class fe extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class oe extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class te extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Xt extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class re extends T{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Wt extends T{constructor(e){var F;super(e,{isRenderable:!0});m(this,Bt);m(this,It,null);const{filename:r,content:C}=this.data.file;this.filename=(0,st.getFilenameFromUrl)(r,!0),this.content=C,(F=this.linkService.eventBus)==null||F.dispatch("fileattachmentannotation",{source:this,filename:r,content:C})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:r}=this;let C;r.hasAppearance||r.fillAlpha===0?C=document.createElement("div"):(C=document.createElement("img"),C.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(C.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),C.addEventListener("dblclick",M(this,Bt,Fi).bind(this)),O(this,It,C);const{isMac:F}=h.FeatureTest.platform;return e.addEventListener("keydown",tt=>{tt.key==="Enter"&&(F?tt.metaKey:tt.ctrlKey)&&M(this,Bt,Fi).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():C.classList.add("popupTriggerArea"),e.append(C),e}getElementsToTriggerPopup(){return t(this,It)}addHighlightArea(){this.container.classList.add("highlightArea")}}It=new WeakMap,Bt=new WeakSet,Fi=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};class le{constructor({div:p,accessibilityManager:e,annotationCanvasMap:r,page:C,viewport:F}){m(this,nt);m(this,vt);m(this,Ut,null);m(this,Yt,null);m(this,k,new Map);this.div=p,O(this,Ut,e),O(this,Yt,r),this.page=C,this.viewport=F,this.zIndex=0}async render(p){const{annotations:e}=p,r=this.div;(0,st.setLayerDimensions)(r,this.viewport);const C=new Map,F={data:null,layer:r,linkService:p.linkService,downloadManager:p.downloadManager,imageResourcesPath:p.imageResourcesPath||"",renderForms:p.renderForms!==!1,svgFactory:new st.DOMSVGFactory,annotationStorage:p.annotationStorage||new A.AnnotationStorage,enableScripting:p.enableScripting===!0,hasJSActions:p.hasJSActions,fieldObjects:p.fieldObjects,parent:this,elements:null};for(const tt of e){if(tt.noHTML)continue;const rt=tt.annotationType===h.AnnotationType.POPUP;if(rt){const St=C.get(tt.id);if(!St)continue;F.elements=St}else{const{width:St,height:zt}=D(tt.rect);if(St<=0||zt<=0)continue}F.data=tt;const yt=at.create(F);if(!yt.isRenderable)continue;if(!rt&&tt.popupRef){const St=C.get(tt.popupRef);St?St.push(yt):C.set(tt.popupRef,[yt])}yt.annotationEditorType>0&&t(this,k).set(yt.data.id,yt);const kt=yt.render();tt.hidden&&(kt.style.visibility="hidden"),M(this,nt,Hn).call(this,kt,tt.id)}M(this,vt,Oi).call(this)}update({viewport:p}){const e=this.div;this.viewport=p,(0,st.setLayerDimensions)(e,{rotation:p.rotation}),M(this,vt,Oi).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(t(this,k).values())}getEditableAnnotation(p){return t(this,k).get(p)}}Ut=new WeakMap,Yt=new WeakMap,k=new WeakMap,nt=new WeakSet,Hn=function(p,e){var C;const r=p.firstChild||p;r.id=`${h.AnnotationPrefix}${e}`,this.div.append(p),(C=t(this,Ut))==null||C.moveElementInDOM(this.div,p,r,!1)},vt=new WeakSet,Oi=function(){if(!t(this,Yt))return;const p=this.div;for(const[e,r]of t(this,Yt)){const C=p.querySelector(`[data-annotation-id="${e}"]`);if(!C)continue;const{firstChild:F}=C;F?F.nodeName==="CANVAS"?F.replaceWith(r):F.before(r):C.append(r)}t(this,Yt).clear()}},780:(Mt,Et,ht)=>{var U,w,z,Un,D;ht.d(Et,{AnnotationStorage:()=>gt,PrintAnnotationStorage:()=>it,SerializableEmpty:()=>H});var h=ht(266),st=ht(115),A=ht(825);const H=Object.freeze({map:null,hash:"",transfer:void 0});class gt{constructor(){m(this,z);m(this,U,!1);m(this,w,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(T,q){const B=t(this,w).get(T);return B===void 0?q:Object.assign(q,B)}getRawValue(T){return t(this,w).get(T)}remove(T){if(t(this,w).delete(T),t(this,w).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const q of t(this,w).values())if(q instanceof st.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(T,q){const B=t(this,w).get(T);let W=!1;if(B!==void 0)for(const[K,P]of Object.entries(q))B[K]!==P&&(W=!0,B[K]=P);else W=!0,t(this,w).set(T,q);W&&M(this,z,Un).call(this),q instanceof st.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(q.constructor._type)}has(T){return t(this,w).has(T)}getAll(){return t(this,w).size>0?(0,h.objectFromMap)(t(this,w)):null}setAll(T){for(const[q,B]of Object.entries(T))this.setValue(q,B)}get size(){return t(this,w).size}resetModified(){t(this,U)&&(O(this,U,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new it(this)}get serializable(){if(t(this,w).size===0)return H;const T=new Map,q=new A.MurmurHash3_64,B=[],W=Object.create(null);let K=!1;for(const[P,Q]of t(this,w)){const S=Q instanceof st.AnnotationEditor?Q.serialize(!1,W):Q;S&&(T.set(P,S),q.update(`${P}:${JSON.stringify(S)}`),K||(K=!!S.bitmap))}if(K)for(const P of T.values())P.bitmap&&B.push(P.bitmap);return T.size>0?{map:T,hash:q.hexdigest(),transfer:B}:H}}U=new WeakMap,w=new WeakMap,z=new WeakSet,Un=function(){t(this,U)||(O(this,U,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class it extends gt{constructor(q){super();m(this,D,void 0);const{map:B,hash:W,transfer:K}=q.serializable,P=structuredClone(B,K?{transfer:K}:null);O(this,D,{map:P,hash:W,transfer:K})}get print(){(0,h.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,D)}}D=new WeakMap},406:(Mt,Et,ht)=>{ht.a(Mt,async(h,st)=>{var Q,S,X,ft,Es,dt,di,Dt,Gt,Nt,Kt,$t,ui,Jt,fe,oe,te,Xt,pi,Wt,le,Ni,he,jt;try{let me=function(I){if(typeof I=="string"||I instanceof URL?I={url:I}:(0,A.isArrayBuffer)(I)&&(I={data:I}),typeof I!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!I.url&&!I.data&&!I.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const g=new v,{docId:L}=g,V=I.url?pe(I.url):null,ot=I.data?Zt(I.data):null,ut=I.httpHeaders||null,bt=I.withCredentials===!0,_t=I.password??null,It=I.range instanceof d?I.range:null,Bt=Number.isInteger(I.rangeChunkSize)&&I.rangeChunkSize>0?I.rangeChunkSize:ne;let ee=I.worker instanceof l?I.worker:null;const Ut=I.verbosity,Yt=typeof I.docBaseUrl=="string"&&!(0,gt.isDataScheme)(I.docBaseUrl)?I.docBaseUrl:null,k=typeof I.cMapUrl=="string"?I.cMapUrl:null,nt=I.cMapPacked!==!1,At=I.CMapReaderFactory||i,vt=typeof I.standardFontDataUrl=="string"?I.standardFontDataUrl:null,Lt=I.StandardFontDataFactory||R,Tt=I.stopAtErrors!==!0,p=Number.isInteger(I.maxImageSize)&&I.maxImageSize>-1?I.maxImageSize:-1,e=I.isEvalSupported!==!1,r=typeof I.isOffscreenCanvasSupported=="boolean"?I.isOffscreenCanvasSupported:!A.isNodeJS,C=Number.isInteger(I.canvasMaxAreaInBytes)?I.canvasMaxAreaInBytes:-1,F=typeof I.disableFontFace=="boolean"?I.disableFontFace:A.isNodeJS,tt=I.fontExtraProperties===!0,rt=I.enableXfa===!0,yt=I.ownerDocument||globalThis.document,kt=I.disableRange===!0,St=I.disableStream===!0,zt=I.disableAutoFetch===!0,Ft=I.pdfBug===!0,Pt=It?It.length:I.length??NaN,Qt=typeof I.useSystemFonts=="boolean"?I.useSystemFonts:!A.isNodeJS&&!F,qt=typeof I.useWorkerFetch=="boolean"?I.useWorkerFetch:At===gt.DOMCMapReaderFactory&&Lt===gt.DOMStandardFontDataFactory&&k&&vt&&(0,gt.isValidFetchUrl)(k,document.baseURI)&&(0,gt.isValidFetchUrl)(vt,document.baseURI),ae=I.canvasFactory||new s({ownerDocument:yt}),ce=I.filterFactory||new f({docId:L,ownerDocument:yt}),we=null;(0,A.setVerbosityLevel)(Ut);const Ce={canvasFactory:ae,filterFactory:ce};if(qt||(Ce.cMapReaderFactory=new At({baseUrl:k,isCompressed:nt}),Ce.standardFontDataFactory=new Lt({baseUrl:vt})),!ee){const Pe={verbosity:Ut,port:z.GlobalWorkerOptions.workerPort};ee=Pe.port?l.fromPort(Pe):new l(Pe),g._worker=ee}const Be={docId:L,apiVersion:"4.0.379",data:ot,password:_t,disableAutoFetch:zt,rangeChunkSize:Bt,length:Pt,docBaseUrl:Yt,enableXfa:rt,evaluatorOptions:{maxImageSize:p,disableFontFace:F,ignoreErrors:Tt,isEvalSupported:e,isOffscreenCanvasSupported:r,canvasMaxAreaInBytes:C,fontExtraProperties:tt,useSystemFonts:Qt,cMapUrl:qt?k:null,standardFontDataUrl:qt?vt:null}},Me={ignoreErrors:Tt,isEvalSupported:e,disableFontFace:F,fontExtraProperties:tt,enableXfa:rt,ownerDocument:yt,disableAutoFetch:zt,pdfBug:Ft,styleElement:we};return ee.promise.then(function(){if(g.destroyed)throw new Error("Loading aborted");const Pe=b(ee,Be),Fe=new Promise(function(ls){let Oe;It?Oe=new T.PDFDataTransportStream({length:Pt,initialData:It.initialData,progressiveDone:It.progressiveDone,contentDispositionFilename:It.contentDispositionFilename,disableRange:kt,disableStream:St},It):ot||(Oe=(Ge=>A.isNodeJS?new W.PDFNodeStream(Ge):(0,gt.isValidFetchUrl)(Ge.url)?new q.PDFFetchStream(Ge):new B.PDFNetworkStream(Ge))({url:V,length:Pt,httpHeaders:ut,withCredentials:bt,rangeChunkSize:Bt,disableRange:kt,disableStream:St})),ls(Oe)});return Promise.all([Pe,Fe]).then(function([ls,Oe]){if(g.destroyed)throw new Error("Loading aborted");const Ge=new G.MessageHandler(L,ls,ee.port),ue=new u(Ge,g,Oe,Me,Ce);g._transport=ue,Ge.send("Ready",null)})}).catch(g._capability.reject),g},pe=function(I){if(I instanceof URL)return I.href;try{return new URL(I,window.location).href}catch{if(A.isNodeJS&&typeof I=="string")return I}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},Zt=function(I){if(A.isNodeJS&&typeof Buffer<"u"&&I instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(I instanceof Uint8Array&&I.byteLength===I.buffer.byteLength)return I;if(typeof I=="string")return(0,A.stringToBytes)(I);if(typeof I=="object"&&!isNaN(I==null?void 0:I.length)||(0,A.isArrayBuffer)(I))return new Uint8Array(I);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};ht.d(Et,{PDFDataRangeTransport:()=>d,PDFWorker:()=>l,build:()=>Z,getDocument:()=>me,version:()=>N});var A=ht(266),H=ht(780),gt=ht(473),it=ht(742),U=ht(738),w=ht(250),z=ht(368),G=ht(694),D=ht(472),at=ht(890),T=ht(92),q=ht(171),B=ht(474),W=ht(498),K=ht(521),P=h([U,W]);[U,W]=P.then?(await P)():P;const ne=65536,ye=100,$=5e3,s=A.isNodeJS?U.NodeCanvasFactory:gt.DOMCanvasFactory,i=A.isNodeJS?U.NodeCMapReaderFactory:gt.DOMCMapReaderFactory,f=A.isNodeJS?U.NodeFilterFactory:gt.DOMFilterFactory,R=A.isNodeJS?U.NodeStandardFontDataFactory:gt.DOMStandardFontDataFactory;async function b(I,g){if(I.destroyed)throw new Error("Worker was destroyed");const L=await I.messageHandler.sendWithPromise("GetDocRequest",g,g.data?[g.data.buffer]:null);if(I.destroyed)throw new Error("Worker was destroyed");return L}const J=class J{constructor(){this._capability=new A.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Qe(J,Q)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var g,L,V;this.destroyed=!0;try{(g=this._worker)!=null&&g.port&&(this._worker._pendingDestroy=!0),await((L=this._transport)==null?void 0:L.destroy())}catch(ot){throw(V=this._worker)!=null&&V.port&&delete this._worker._pendingDestroy,ot}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Q=new WeakMap,m(J,Q,0);let v=J;class d{constructor(g,L,V=!1,ot=null){this.length=g,this.initialData=L,this.progressiveDone=V,this.contentDispositionFilename=ot,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new A.PromiseCapability}addRangeListener(g){this._rangeListeners.push(g)}addProgressListener(g){this._progressListeners.push(g)}addProgressiveReadListener(g){this._progressiveReadListeners.push(g)}addProgressiveDoneListener(g){this._progressiveDoneListeners.push(g)}onDataRange(g,L){for(const V of this._rangeListeners)V(g,L)}onDataProgress(g,L){this._readyCapability.promise.then(()=>{for(const V of this._progressListeners)V(g,L)})}onDataProgressiveRead(g){this._readyCapability.promise.then(()=>{for(const L of this._progressiveReadListeners)L(g)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const g of this._progressiveDoneListeners)g()})}transportReady(){this._readyCapability.resolve()}requestDataRange(g,L){(0,A.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class c{constructor(g,L){this._pdfInfo=g,this._transport=L}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(g){return this._transport.getPage(g)}getPageIndex(g){return this._transport.getPageIndex(g)}getDestinations(){return this._transport.getDestinations()}getDestination(g){return this._transport.getDestination(g)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(g=!1){return this._transport.startCleanup(g||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class a{constructor(g,L,V,ot=!1){m(this,ft);m(this,dt);m(this,S,null);m(this,X,!1);this._pageIndex=g,this._pageInfo=L,this._transport=V,this._stats=ot?new gt.StatTimer:null,this._pdfBug=ot,this.commonObjs=V.commonObjs,this.objs=new _,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:g,rotation:L=this.rotate,offsetX:V=0,offsetY:ot=0,dontFlip:ut=!1}={}){return new gt.PageViewport({viewBox:this.view,scale:g,rotation:L,offsetX:V,offsetY:ot,dontFlip:ut})}getAnnotations({intent:g="display"}={}){const L=this._transport.getRenderingIntent(g);return this._transport.getAnnotations(this._pageIndex,L.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var g;return((g=this._transport._htmlForXfa)==null?void 0:g.children[this._pageIndex])||null}render({canvasContext:g,viewport:L,intent:V="display",annotationMode:ot=A.AnnotationMode.ENABLE,transform:ut=null,background:bt=null,optionalContentConfigPromise:_t=null,annotationCanvasMap:It=null,pageColors:Bt=null,printAnnotationStorage:ee=null}){var Lt,Tt;(Lt=this._stats)==null||Lt.time("Overall");const Ut=this._transport.getRenderingIntent(V,ot,ee);O(this,X,!1),M(this,dt,di).call(this),_t||(_t=this._transport.getOptionalContentConfig());let Yt=this._intentStates.get(Ut.cacheKey);Yt||(Yt=Object.create(null),this._intentStates.set(Ut.cacheKey,Yt)),Yt.streamReaderCancelTimeout&&(clearTimeout(Yt.streamReaderCancelTimeout),Yt.streamReaderCancelTimeout=null);const k=!!(Ut.renderingIntent&A.RenderingIntentFlag.PRINT);Yt.displayReadyCapability||(Yt.displayReadyCapability=new A.PromiseCapability,Yt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Tt=this._stats)==null||Tt.time("Page Request"),this._pumpOperatorList(Ut));const nt=p=>{var e,r;Yt.renderTasks.delete(At),(this._maybeCleanupAfterRender||k)&&O(this,X,!0),M(this,ft,Es).call(this,!k),p?(At.capability.reject(p),this._abortOperatorList({intentState:Yt,reason:p instanceof Error?p:new Error(p)})):At.capability.resolve(),(e=this._stats)==null||e.timeEnd("Rendering"),(r=this._stats)==null||r.timeEnd("Overall")},At=new x({callback:nt,params:{canvasContext:g,viewport:L,transform:ut,background:bt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:It,operatorList:Yt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:Bt});(Yt.renderTasks||(Yt.renderTasks=new Set)).add(At);const vt=At.task;return Promise.all([Yt.displayReadyCapability.promise,_t]).then(([p,e])=>{var r;if(this.destroyed){nt();return}(r=this._stats)==null||r.time("Rendering"),At.initializeGraphics({transparency:p,optionalContentConfig:e}),At.operatorListChanged()}).catch(nt),vt}getOperatorList({intent:g="display",annotationMode:L=A.AnnotationMode.ENABLE,printAnnotationStorage:V=null}={}){var It;function ot(){bt.operatorList.lastChunk&&(bt.opListReadCapability.resolve(bt.operatorList),bt.renderTasks.delete(_t))}const ut=this._transport.getRenderingIntent(g,L,V,!0);let bt=this._intentStates.get(ut.cacheKey);bt||(bt=Object.create(null),this._intentStates.set(ut.cacheKey,bt));let _t;return bt.opListReadCapability||(_t=Object.create(null),_t.operatorListChanged=ot,bt.opListReadCapability=new A.PromiseCapability,(bt.renderTasks||(bt.renderTasks=new Set)).add(_t),bt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(It=this._stats)==null||It.time("Page Request"),this._pumpOperatorList(ut)),bt.opListReadCapability.promise}streamTextContent({includeMarkedContent:g=!1,disableNormalization:L=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:g===!0,disableNormalization:L===!0},{highWaterMark:100,size(V){return V.items.length}})}getTextContent(g={}){if(this._transport._htmlForXfa)return this.getXfa().then(V=>K.XfaText.textContent(V));const L=this.streamTextContent(g);return new Promise(function(V,ot){function ut(){bt.read().then(function({value:It,done:Bt}){if(Bt){V(_t);return}Object.assign(_t.styles,It.styles),_t.items.push(...It.items),ut()},ot)}const bt=L.getReader(),_t={items:[],styles:Object.create(null)};ut()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const g=[];for(const L of this._intentStates.values())if(this._abortOperatorList({intentState:L,reason:new Error("Page was destroyed."),force:!0}),!L.opListReadCapability)for(const V of L.renderTasks)g.push(V.completed),V.cancel();return this.objs.clear(),O(this,X,!1),M(this,dt,di).call(this),Promise.all(g)}cleanup(g=!1){O(this,X,!0);const L=M(this,ft,Es).call(this,!1);return g&&L&&this._stats&&(this._stats=new gt.StatTimer),L}_startRenderPage(g,L){var ot,ut;const V=this._intentStates.get(L);V&&((ot=this._stats)==null||ot.timeEnd("Page Request"),(ut=V.displayReadyCapability)==null||ut.resolve(g))}_renderPageChunk(g,L){for(let V=0,ot=g.length;V<ot;V++)L.operatorList.fnArray.push(g.fnArray[V]),L.operatorList.argsArray.push(g.argsArray[V]);L.operatorList.lastChunk=g.lastChunk,L.operatorList.separateAnnots=g.separateAnnots;for(const V of L.renderTasks)V.operatorListChanged();g.lastChunk&&M(this,ft,Es).call(this,!0)}_pumpOperatorList({renderingIntent:g,cacheKey:L,annotationStorageSerializable:V}){const{map:ot,transfer:ut}=V,bt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:g,cacheKey:L,annotationStorage:ot},ut).getReader(),_t=this._intentStates.get(L);_t.streamReader=bt;const It=()=>{bt.read().then(({value:Bt,done:ee})=>{if(ee){_t.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Bt,_t),It())},Bt=>{if(_t.streamReader=null,!this._transport.destroyed){if(_t.operatorList){_t.operatorList.lastChunk=!0;for(const ee of _t.renderTasks)ee.operatorListChanged();M(this,ft,Es).call(this,!0)}if(_t.displayReadyCapability)_t.displayReadyCapability.reject(Bt);else if(_t.opListReadCapability)_t.opListReadCapability.reject(Bt);else throw Bt}})};It()}_abortOperatorList({intentState:g,reason:L,force:V=!1}){if(g.streamReader){if(g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null),!V){if(g.renderTasks.size>0)return;if(L instanceof gt.RenderingCancelledException){let ot=ye;L.extraDelay>0&&L.extraDelay<1e3&&(ot+=L.extraDelay),g.streamReaderCancelTimeout=setTimeout(()=>{g.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:g,reason:L,force:!0})},ot);return}}if(g.streamReader.cancel(new A.AbortException(L.message)).catch(()=>{}),g.streamReader=null,!this._transport.destroyed){for(const[ot,ut]of this._intentStates)if(ut===g){this._intentStates.delete(ot);break}this.cleanup()}}}get stats(){return this._stats}}S=new WeakMap,X=new WeakMap,ft=new WeakSet,Es=function(g=!1){if(M(this,dt,di).call(this),!t(this,X)||this.destroyed)return!1;if(g)return O(this,S,setTimeout(()=>{O(this,S,null),M(this,ft,Es).call(this,!1)},$)),!1;for(const{renderTasks:L,operatorList:V}of this._intentStates.values())if(L.size>0||!V.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),O(this,X,!1),!0},dt=new WeakSet,di=function(){t(this,S)&&(clearTimeout(t(this,S)),O(this,S,null))};class o{constructor(){m(this,Dt,new Set);m(this,Gt,Promise.resolve())}postMessage(g,L){const V={data:structuredClone(g,L?{transfer:L}:null)};t(this,Gt).then(()=>{for(const ot of t(this,Dt))ot.call(this,V)})}addEventListener(g,L){t(this,Dt).add(L)}removeEventListener(g,L){t(this,Dt).delete(L)}terminate(){t(this,Dt).clear()}}Dt=new WeakMap,Gt=new WeakMap;const E={isWorkerDisabled:!1,fakeWorkerId:0};A.isNodeJS&&(E.isWorkerDisabled=!0,(Nt=z.GlobalWorkerOptions).workerSrc||(Nt.workerSrc="./pdf.worker.mjs")),E.isSameOrigin=function(I,g){let L;try{if(L=new URL(I),!L.origin||L.origin==="null")return!1}catch{return!1}const V=new URL(g,L);return L.origin===V.origin},E.createCDNWrapper=function(I){const g=`await import("${I}");`;return URL.createObjectURL(new Blob([g],{type:"text/javascript"}))};const Y=class Y{constructor({name:g=null,port:L=null,verbosity:V=(0,A.getVerbosityLevel)()}={}){var ot;if(this.name=g,this.destroyed=!1,this.verbosity=V,this._readyCapability=new A.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,L){if((ot=t(Y,Kt))!=null&&ot.has(L))throw new Error("Cannot use more than one PDFWorker per port.");(t(Y,Kt)||O(Y,Kt,new WeakMap)).set(L,this),this._initializeFromPort(L);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(g){this._port=g,this._messageHandler=new G.MessageHandler("main","worker",g),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!E.isWorkerDisabled&&!t(Y,$t,ui)){let{workerSrc:g}=Y;try{E.isSameOrigin(window.location.href,g)||(g=E.createCDNWrapper(new URL(g,window.location).href));const L=new Worker(g,{type:"module"}),V=new G.MessageHandler("main","worker",L),ot=()=>{L.removeEventListener("error",ut),V.destroy(),L.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ut=()=>{this._webWorker||ot()};L.addEventListener("error",ut),V.on("test",_t=>{if(L.removeEventListener("error",ut),this.destroyed){ot();return}_t?(this._messageHandler=V,this._port=L,this._webWorker=L,this._readyCapability.resolve(),V.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),V.destroy(),L.terminate())}),V.on("ready",_t=>{if(L.removeEventListener("error",ut),this.destroyed){ot();return}try{bt()}catch{this._setupFakeWorker()}});const bt=()=>{const _t=new Uint8Array;V.send("test",_t,[_t.buffer])};bt();return}catch{(0,A.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){E.isWorkerDisabled||((0,A.warn)("Setting up fake worker."),E.isWorkerDisabled=!0),Y._setupFakeWorkerGlobal.then(g=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const L=new o;this._port=L;const V=`fake${E.fakeWorkerId++}`,ot=new G.MessageHandler(V+"_worker",V,L);g.setup(ot,L);const ut=new G.MessageHandler(V,V+"_worker",L);this._messageHandler=ut,this._readyCapability.resolve(),ut.send("configure",{verbosity:this.verbosity})}).catch(g=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${g.message}".`))})}destroy(){var g;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(g=t(Y,Kt))==null||g.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(g){var V;if(!(g!=null&&g.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const L=(V=t(this,Kt))==null?void 0:V.get(g.port);if(L){if(L._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return L}return new Y(g)}static get workerSrc(){if(z.GlobalWorkerOptions.workerSrc)return z.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){const g=async()=>t(this,$t,ui)?t(this,$t,ui):(await ts(()=>import(this.workerSrc).then(async L=>(await L.__tla,L)),[])).WorkerMessageHandler;return(0,A.shadow)(this,"_setupFakeWorkerGlobal",g())}};Kt=new WeakMap,$t=new WeakSet,ui=function(){var g;try{return((g=globalThis.pdfjsWorker)==null?void 0:g.WorkerMessageHandler)||null}catch{return null}},m(Y,$t),m(Y,Kt,void 0);let l=Y;class u{constructor(g,L,V,ot,ut){m(this,Xt);m(this,Jt,new Map);m(this,fe,new Map);m(this,oe,new Map);m(this,te,null);this.messageHandler=g,this.loadingTask=L,this.commonObjs=new _,this.fontLoader=new it.FontLoader({ownerDocument:ot.ownerDocument,styleElement:ot.styleElement}),this._params=ot,this.canvasFactory=ut.canvasFactory,this.filterFactory=ut.filterFactory,this.cMapReaderFactory=ut.cMapReaderFactory,this.standardFontDataFactory=ut.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=V,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new A.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,A.shadow)(this,"annotationStorage",new H.AnnotationStorage)}getRenderingIntent(g,L=A.AnnotationMode.ENABLE,V=null,ot=!1){let ut=A.RenderingIntentFlag.DISPLAY,bt=H.SerializableEmpty;switch(g){case"any":ut=A.RenderingIntentFlag.ANY;break;case"display":break;case"print":ut=A.RenderingIntentFlag.PRINT;break;default:(0,A.warn)(`getRenderingIntent - invalid intent: ${g}`)}switch(L){case A.AnnotationMode.DISABLE:ut+=A.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case A.AnnotationMode.ENABLE:break;case A.AnnotationMode.ENABLE_FORMS:ut+=A.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case A.AnnotationMode.ENABLE_STORAGE:ut+=A.RenderingIntentFlag.ANNOTATIONS_STORAGE,bt=(ut&A.RenderingIntentFlag.PRINT&&V instanceof H.PrintAnnotationStorage?V:this.annotationStorage).serializable;break;default:(0,A.warn)(`getRenderingIntent - invalid annotationMode: ${L}`)}return ot&&(ut+=A.RenderingIntentFlag.OPLIST),{renderingIntent:ut,cacheKey:`${ut}_${bt.hash}`,annotationStorageSerializable:bt}}destroy(){var V;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new A.PromiseCapability,(V=t(this,te))==null||V.reject(new Error("Worker was destroyed during onPassword callback"));const g=[];for(const ot of t(this,fe).values())g.push(ot._destroy());t(this,fe).clear(),t(this,oe).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const L=this.messageHandler.sendWithPromise("Terminate",null);return g.push(L),Promise.all(g).then(()=>{var ot;this.commonObjs.clear(),this.fontLoader.clear(),t(this,Jt).clear(),this.filterFactory.destroy(),(ot=this._networkStream)==null||ot.cancelAllRequests(new A.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:g,loadingTask:L}=this;g.on("GetReader",(V,ot)=>{(0,A.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ut=>{this._lastProgress={loaded:ut.loaded,total:ut.total}},ot.onPull=()=>{this._fullReader.read().then(function({value:ut,done:bt}){if(bt){ot.close();return}(0,A.assert)(ut instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ot.enqueue(new Uint8Array(ut),1,[ut])}).catch(ut=>{ot.error(ut)})},ot.onCancel=ut=>{this._fullReader.cancel(ut),ot.ready.catch(bt=>{if(!this.destroyed)throw bt})}}),g.on("ReaderHeadersReady",V=>{const ot=new A.PromiseCapability,ut=this._fullReader;return ut.headersReady.then(()=>{var bt;(!ut.isStreamingSupported||!ut.isRangeSupported)&&(this._lastProgress&&((bt=L.onProgress)==null||bt.call(L,this._lastProgress)),ut.onProgress=_t=>{var It;(It=L.onProgress)==null||It.call(L,{loaded:_t.loaded,total:_t.total})}),ot.resolve({isStreamingSupported:ut.isStreamingSupported,isRangeSupported:ut.isRangeSupported,contentLength:ut.contentLength})},ot.reject),ot.promise}),g.on("GetRangeReader",(V,ot)=>{(0,A.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ut=this._networkStream.getRangeReader(V.begin,V.end);if(!ut){ot.close();return}ot.onPull=()=>{ut.read().then(function({value:bt,done:_t}){if(_t){ot.close();return}(0,A.assert)(bt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ot.enqueue(new Uint8Array(bt),1,[bt])}).catch(bt=>{ot.error(bt)})},ot.onCancel=bt=>{ut.cancel(bt),ot.ready.catch(_t=>{if(!this.destroyed)throw _t})}}),g.on("GetDoc",({pdfInfo:V})=>{this._numPages=V.numPages,this._htmlForXfa=V.htmlForXfa,delete V.htmlForXfa,L._capability.resolve(new c(V,this))}),g.on("DocException",function(V){let ot;switch(V.name){case"PasswordException":ot=new A.PasswordException(V.message,V.code);break;case"InvalidPDFException":ot=new A.InvalidPDFException(V.message);break;case"MissingPDFException":ot=new A.MissingPDFException(V.message);break;case"UnexpectedResponseException":ot=new A.UnexpectedResponseException(V.message,V.status);break;case"UnknownErrorException":ot=new A.UnknownErrorException(V.message,V.details);break;default:(0,A.unreachable)("DocException - expected a valid Error.")}L._capability.reject(ot)}),g.on("PasswordRequest",V=>{if(O(this,te,new A.PromiseCapability),L.onPassword){const ot=ut=>{ut instanceof Error?t(this,te).reject(ut):t(this,te).resolve({password:ut})};try{L.onPassword(ot,V.code)}catch(ut){t(this,te).reject(ut)}}else t(this,te).reject(new A.PasswordException(V.message,V.code));return t(this,te).promise}),g.on("DataLoaded",V=>{var ot;(ot=L.onProgress)==null||ot.call(L,{loaded:V.length,total:V.length}),this.downloadInfoCapability.resolve(V)}),g.on("StartRenderPage",V=>{this.destroyed||t(this,fe).get(V.pageIndex)._startRenderPage(V.transparency,V.cacheKey)}),g.on("commonobj",([V,ot,ut])=>{var bt;if(this.destroyed||this.commonObjs.has(V))return null;switch(ot){case"Font":const _t=this._params;if("error"in ut){const Ut=ut.error;(0,A.warn)(`Error during font loading: ${Ut}`),this.commonObjs.resolve(V,Ut);break}const It=_t.pdfBug&&((bt=globalThis.FontInspector)!=null&&bt.enabled)?(Ut,Yt)=>globalThis.FontInspector.fontAdded(Ut,Yt):null,Bt=new it.FontFaceObject(ut,{isEvalSupported:_t.isEvalSupported,disableFontFace:_t.disableFontFace,ignoreErrors:_t.ignoreErrors,inspectFont:It});this.fontLoader.bind(Bt).catch(Ut=>g.sendWithPromise("FontFallback",{id:V})).finally(()=>{!_t.fontExtraProperties&&Bt.data&&(Bt.data=null),this.commonObjs.resolve(V,Bt)});break;case"CopyLocalImage":const{imageRef:ee}=ut;(0,A.assert)(ee,"The imageRef must be defined.");for(const Ut of t(this,fe).values())for(const[,Yt]of Ut.objs)if(Yt.ref===ee)return Yt.dataLen?(this.commonObjs.resolve(V,structuredClone(Yt)),Yt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(V,ut);break;default:throw new Error(`Got unknown common object type ${ot}`)}return null}),g.on("obj",([V,ot,ut,bt])=>{var It;if(this.destroyed)return;const _t=t(this,fe).get(ot);if(!_t.objs.has(V)){if(_t._intentStates.size===0){(It=bt==null?void 0:bt.bitmap)==null||It.close();return}switch(ut){case"Image":_t.objs.resolve(V,bt),(bt==null?void 0:bt.dataLen)>A.MAX_IMAGE_SIZE_TO_CACHE&&(_t._maybeCleanupAfterRender=!0);break;case"Pattern":_t.objs.resolve(V,bt);break;default:throw new Error(`Got unknown object type ${ut}`)}}}),g.on("DocProgress",V=>{var ot;this.destroyed||((ot=L.onProgress)==null||ot.call(L,{loaded:V.loaded,total:V.total}))}),g.on("FetchBuiltInCMap",V=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(V):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),g.on("FetchStandardFontData",V=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(V):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var V;this.annotationStorage.size<=0&&(0,A.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:g,transfer:L}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:g,filename:((V=this._fullReader)==null?void 0:V.filename)??null},L).finally(()=>{this.annotationStorage.resetModified()})}getPage(g){if(!Number.isInteger(g)||g<=0||g>this._numPages)return Promise.reject(new Error("Invalid page request."));const L=g-1,V=t(this,oe).get(L);if(V)return V;const ot=this.messageHandler.sendWithPromise("GetPage",{pageIndex:L}).then(ut=>{if(this.destroyed)throw new Error("Transport destroyed");const bt=new a(L,ut,this,this._params.pdfBug);return t(this,fe).set(L,bt),bt});return t(this,oe).set(L,ot),ot}getPageIndex(g){return typeof g!="object"||g===null||!Number.isInteger(g.num)||g.num<0||!Number.isInteger(g.gen)||g.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:g.num,gen:g.gen})}getAnnotations(g,L){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:g,intent:L})}getFieldObjects(){return M(this,Xt,pi).call(this,"GetFieldObjects")}hasJSActions(){return M(this,Xt,pi).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(g){return typeof g!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:g})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return M(this,Xt,pi).call(this,"GetDocJSActions")}getPageJSActions(g){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:g})}getStructTree(g){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:g})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(g=>new at.OptionalContentConfig(g))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const g="GetMetadata",L=t(this,Jt).get(g);if(L)return L;const V=this.messageHandler.sendWithPromise(g,null).then(ot=>{var ut,bt;return{info:ot[0],metadata:ot[1]?new D.Metadata(ot[1]):null,contentDispositionFilename:((ut=this._fullReader)==null?void 0:ut.filename)??null,contentLength:((bt=this._fullReader)==null?void 0:bt.contentLength)??null}});return t(this,Jt).set(g,V),V}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(g=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const L of t(this,fe).values())if(!L.cleanup())throw new Error(`startCleanup: Page ${L.pageNumber} is currently rendering.`);this.commonObjs.clear(),g||this.fontLoader.clear(),t(this,Jt).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:g,enableXfa:L}=this._params;return(0,A.shadow)(this,"loadingParams",{disableAutoFetch:g,enableXfa:L})}}Jt=new WeakMap,fe=new WeakMap,oe=new WeakMap,te=new WeakMap,Xt=new WeakSet,pi=function(g,L=null){const V=t(this,Jt).get(g);if(V)return V;const ot=this.messageHandler.sendWithPromise(g,L);return t(this,Jt).set(g,ot),ot};class _{constructor(){m(this,le);m(this,Wt,Object.create(null))}get(g,L=null){if(L){const ot=M(this,le,Ni).call(this,g);return ot.capability.promise.then(()=>L(ot.data)),null}const V=t(this,Wt)[g];if(!(V!=null&&V.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${g}.`);return V.data}has(g){var L;return((L=t(this,Wt)[g])==null?void 0:L.capability.settled)??!1}resolve(g,L=null){const V=M(this,le,Ni).call(this,g);V.data=L,V.capability.resolve()}clear(){var g;for(const L in t(this,Wt)){const{data:V}=t(this,Wt)[L];(g=V==null?void 0:V.bitmap)==null||g.close()}O(this,Wt,Object.create(null))}*[Symbol.iterator](){for(const g in t(this,Wt)){const{capability:L,data:V}=t(this,Wt)[g];L.settled&&(yield[g,V])}}}Wt=new WeakMap,le=new WeakSet,Ni=function(g){var L;return(L=t(this,Wt))[g]||(L[g]={capability:new A.PromiseCapability,data:null})};class j{constructor(g){m(this,he,null);O(this,he,g),this.onContinue=null}get promise(){return t(this,he).capability.promise}cancel(g=0){t(this,he).cancel(null,g)}get separateAnnots(){const{separateAnnots:g}=t(this,he).operatorList;if(!g)return!1;const{annotationCanvasMap:L}=t(this,he);return g.form||g.canvas&&(L==null?void 0:L.size)>0}}he=new WeakMap;const lt=class lt{constructor({callback:g,params:L,objs:V,commonObjs:ot,annotationCanvasMap:ut,operatorList:bt,pageIndex:_t,canvasFactory:It,filterFactory:Bt,useRequestAnimationFrame:ee=!1,pdfBug:Ut=!1,pageColors:Yt=null}){this.callback=g,this.params=L,this.objs=V,this.commonObjs=ot,this.annotationCanvasMap=ut,this.operatorListIdx=null,this.operatorList=bt,this._pageIndex=_t,this.canvasFactory=It,this.filterFactory=Bt,this._pdfBug=Ut,this.pageColors=Yt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ee===!0&&typeof window<"u",this.cancelled=!1,this.capability=new A.PromiseCapability,this.task=new j(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=L.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:g=!1,optionalContentConfig:L}){var _t,It;if(this.cancelled)return;if(this._canvas){if(t(lt,jt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(lt,jt).add(this._canvas)}this._pdfBug&&((_t=globalThis.StepperManager)!=null&&_t.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:V,viewport:ot,transform:ut,background:bt}=this.params;this.gfx=new w.CanvasGraphics(V,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:L},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:ut,viewport:ot,transparency:g,background:bt}),this.operatorListIdx=0,this.graphicsReady=!0,(It=this.graphicsReadyCallback)==null||It.call(this)}cancel(g=null,L=0){var V;this.running=!1,this.cancelled=!0,(V=this.gfx)==null||V.endDrawing(),t(lt,jt).delete(this._canvas),this.callback(g||new gt.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,L))}operatorListChanged(){var g;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(g=this.stepper)==null||g.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(lt,jt).delete(this._canvas),this.callback())))}};jt=new WeakMap,m(lt,jt,new WeakSet);let x=lt;const N="4.0.379",Z="9e14d04fd";st()}catch(me){st(me)}})},822:(Mt,Et,ht)=>{ht.d(Et,{BaseCMapReaderFactory:()=>H,BaseCanvasFactory:()=>A,BaseFilterFactory:()=>st,BaseSVGFactory:()=>it,BaseStandardFontDataFactory:()=>gt});var h=ht(266);class st{constructor(){this.constructor===st&&(0,h.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(w){return"none"}addHCMFilter(w,z){return"none"}addHighlightHCMFilter(w,z,G,D){return"none"}destroy(w=!1){}}class A{constructor(){this.constructor===A&&(0,h.unreachable)("Cannot initialize BaseCanvasFactory.")}create(w,z){if(w<=0||z<=0)throw new Error("Invalid canvas size");const G=this._createCanvas(w,z);return{canvas:G,context:G.getContext("2d")}}reset(w,z,G){if(!w.canvas)throw new Error("Canvas is not specified");if(z<=0||G<=0)throw new Error("Invalid canvas size");w.canvas.width=z,w.canvas.height=G}destroy(w){if(!w.canvas)throw new Error("Canvas is not specified");w.canvas.width=0,w.canvas.height=0,w.canvas=null,w.context=null}_createCanvas(w,z){(0,h.unreachable)("Abstract method `_createCanvas` called.")}}class H{constructor({baseUrl:w=null,isCompressed:z=!0}){this.constructor===H&&(0,h.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=w,this.isCompressed=z}async fetch({name:w}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!w)throw new Error("CMap name must be specified.");const z=this.baseUrl+w+(this.isCompressed?".bcmap":""),G=this.isCompressed?h.CMapCompressionType.BINARY:h.CMapCompressionType.NONE;return this._fetchData(z,G).catch(D=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${z}`)})}_fetchData(w,z){(0,h.unreachable)("Abstract method `_fetchData` called.")}}class gt{constructor({baseUrl:w=null}){this.constructor===gt&&(0,h.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=w}async fetch({filename:w}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!w)throw new Error("Font filename must be specified.");const z=`${this.baseUrl}${w}`;return this._fetchData(z).catch(G=>{throw new Error(`Unable to load font data at: ${z}`)})}_fetchData(w){(0,h.unreachable)("Abstract method `_fetchData` called.")}}class it{constructor(){this.constructor===it&&(0,h.unreachable)("Cannot initialize BaseSVGFactory.")}create(w,z,G=!1){if(w<=0||z<=0)throw new Error("Invalid SVG dimensions");const D=this._createSVG("svg:svg");return D.setAttribute("version","1.1"),G||(D.setAttribute("width",`${w}px`),D.setAttribute("height",`${z}px`)),D.setAttribute("preserveAspectRatio","none"),D.setAttribute("viewBox",`0 0 ${w} ${z}`),D}createElement(w){if(typeof w!="string")throw new Error("Invalid SVG element type");return this._createSVG(w)}_createSVG(w){(0,h.unreachable)("Abstract method `_createSVG` called.")}}},250:(Mt,Et,ht)=>{var me,Bi,Zt,Hi;ht.d(Et,{CanvasGraphics:()=>he});var h=ht(266),st=ht(473);const A={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function H($,s){if(!s)return;const i=s[2]-s[0],f=s[3]-s[1],R=new Path2D;R.rect(s[0],s[1],i,f),$.clip(R)}class gt{constructor(){this.constructor===gt&&(0,h.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,h.unreachable)("Abstract method `getPattern` called.")}}class it extends gt{constructor(s){super(),this._type=s[1],this._bbox=s[2],this._colorStops=s[3],this._p0=s[4],this._p1=s[5],this._r0=s[6],this._r1=s[7],this.matrix=null}_createGradient(s){let i;this._type==="axial"?i=s.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=s.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const f of this._colorStops)i.addColorStop(f[0],f[1]);return i}getPattern(s,i,f,R){let b;if(R===A.STROKE||R===A.FILL){const v=i.current.getClippedPathBoundingBox(R,(0,st.getCurrentTransform)(s))||[0,0,0,0],d=Math.ceil(v[2]-v[0])||1,c=Math.ceil(v[3]-v[1])||1,a=i.cachedCanvases.getCanvas("pattern",d,c,!0),o=a.context;o.clearRect(0,0,o.canvas.width,o.canvas.height),o.beginPath(),o.rect(0,0,o.canvas.width,o.canvas.height),o.translate(-v[0],-v[1]),f=h.Util.transform(f,[1,0,0,1,v[0],v[1]]),o.transform(...i.baseTransform),this.matrix&&o.transform(...this.matrix),H(o,this._bbox),o.fillStyle=this._createGradient(o),o.fill(),b=s.createPattern(a.canvas,"no-repeat");const E=new DOMMatrix(f);b.setTransform(E)}else H(s,this._bbox),b=this._createGradient(s);return b}}function U($,s,i,f,R,b,v,d){const c=s.coords,a=s.colors,o=$.data,E=$.width*4;let l;c[i+1]>c[f+1]&&(l=i,i=f,f=l,l=b,b=v,v=l),c[f+1]>c[R+1]&&(l=f,f=R,R=l,l=v,v=d,d=l),c[i+1]>c[f+1]&&(l=i,i=f,f=l,l=b,b=v,v=l);const u=(c[i]+s.offsetX)*s.scaleX,_=(c[i+1]+s.offsetY)*s.scaleY,j=(c[f]+s.offsetX)*s.scaleX,x=(c[f+1]+s.offsetY)*s.scaleY,N=(c[R]+s.offsetX)*s.scaleX,Z=(c[R+1]+s.offsetY)*s.scaleY;if(_>=Z)return;const J=a[b],Y=a[b+1],lt=a[b+2],I=a[v],g=a[v+1],L=a[v+2],V=a[d],ot=a[d+1],ut=a[d+2],bt=Math.round(_),_t=Math.round(Z);let It,Bt,ee,Ut,Yt,k,nt,At;for(let vt=bt;vt<=_t;vt++){if(vt<x){const r=vt<_?0:(_-vt)/(_-x);It=u-(u-j)*r,Bt=J-(J-I)*r,ee=Y-(Y-g)*r,Ut=lt-(lt-L)*r}else{let r;vt>Z?r=1:x===Z?r=0:r=(x-vt)/(x-Z),It=j-(j-N)*r,Bt=I-(I-V)*r,ee=g-(g-ot)*r,Ut=L-(L-ut)*r}let Lt;vt<_?Lt=0:vt>Z?Lt=1:Lt=(_-vt)/(_-Z),Yt=u-(u-N)*Lt,k=J-(J-V)*Lt,nt=Y-(Y-ot)*Lt,At=lt-(lt-ut)*Lt;const Tt=Math.round(Math.min(It,Yt)),p=Math.round(Math.max(It,Yt));let e=E*vt+Tt*4;for(let r=Tt;r<=p;r++)Lt=(It-r)/(It-Yt),Lt<0?Lt=0:Lt>1&&(Lt=1),o[e++]=Bt-(Bt-k)*Lt|0,o[e++]=ee-(ee-nt)*Lt|0,o[e++]=Ut-(Ut-At)*Lt|0,o[e++]=255}}function w($,s,i){const f=s.coords,R=s.colors;let b,v;switch(s.type){case"lattice":const d=s.verticesPerRow,c=Math.floor(f.length/d)-1,a=d-1;for(b=0;b<c;b++){let o=b*d;for(let E=0;E<a;E++,o++)U($,i,f[o],f[o+1],f[o+d],R[o],R[o+1],R[o+d]),U($,i,f[o+d+1],f[o+1],f[o+d],R[o+d+1],R[o+1],R[o+d])}break;case"triangles":for(b=0,v=f.length;b<v;b+=3)U($,i,f[b],f[b+1],f[b+2],R[b],R[b+1],R[b+2]);break;default:throw new Error("illegal figure")}}class z extends gt{constructor(s){super(),this._coords=s[2],this._colors=s[3],this._figures=s[4],this._bounds=s[5],this._bbox=s[7],this._background=s[8],this.matrix=null}_createMeshCanvas(s,i,f){const R=Math.floor(this._bounds[0]),b=Math.floor(this._bounds[1]),v=Math.ceil(this._bounds[2])-R,d=Math.ceil(this._bounds[3])-b,c=Math.min(Math.ceil(Math.abs(v*s[0]*1.1)),3e3),a=Math.min(Math.ceil(Math.abs(d*s[1]*1.1)),3e3),o=v/c,E=d/a,l={coords:this._coords,colors:this._colors,offsetX:-R,offsetY:-b,scaleX:1/o,scaleY:1/E},u=c+2*2,_=a+2*2,j=f.getCanvas("mesh",u,_,!1),x=j.context,N=x.createImageData(c,a);if(i){const Z=N.data;for(let J=0,Y=Z.length;J<Y;J+=4)Z[J]=i[0],Z[J+1]=i[1],Z[J+2]=i[2],Z[J+3]=255}for(const Z of this._figures)w(N,Z,l);return x.putImageData(N,2,2),{canvas:j.canvas,offsetX:R-2*o,offsetY:b-2*E,scaleX:o,scaleY:E}}getPattern(s,i,f,R){H(s,this._bbox);let b;if(R===A.SHADING)b=h.Util.singularValueDecompose2dScale((0,st.getCurrentTransform)(s));else if(b=h.Util.singularValueDecompose2dScale(i.baseTransform),this.matrix){const d=h.Util.singularValueDecompose2dScale(this.matrix);b=[b[0]*d[0],b[1]*d[1]]}const v=this._createMeshCanvas(b,R===A.SHADING?null:this._background,i.cachedCanvases);return R!==A.SHADING&&(s.setTransform(...i.baseTransform),this.matrix&&s.transform(...this.matrix)),s.translate(v.offsetX,v.offsetY),s.scale(v.scaleX,v.scaleY),s.createPattern(v.canvas,"no-repeat")}}class G extends gt{getPattern(){return"hotpink"}}function D($){switch($[0]){case"RadialAxial":return new it($);case"Mesh":return new z($);case"Dummy":return new G}throw new Error(`Unknown IR type: ${$[0]}`)}const at={COLORED:1,UNCOLORED:2},jt=class jt{constructor(s,i,f,R,b){this.operatorList=s[2],this.matrix=s[3]||[1,0,0,1,0,0],this.bbox=s[4],this.xstep=s[5],this.ystep=s[6],this.paintType=s[7],this.tilingType=s[8],this.color=i,this.ctx=f,this.canvasGraphicsFactory=R,this.baseTransform=b}createPatternCanvas(s){const i=this.operatorList,f=this.bbox,R=this.xstep,b=this.ystep,v=this.paintType,d=this.tilingType,c=this.color,a=this.canvasGraphicsFactory;(0,h.info)("TilingType: "+d);const o=f[0],E=f[1],l=f[2],u=f[3],_=h.Util.singularValueDecompose2dScale(this.matrix),j=h.Util.singularValueDecompose2dScale(this.baseTransform),x=[_[0]*j[0],_[1]*j[1]],N=this.getSizeAndScale(R,this.ctx.canvas.width,x[0]),Z=this.getSizeAndScale(b,this.ctx.canvas.height,x[1]),J=s.cachedCanvases.getCanvas("pattern",N.size,Z.size,!0),Y=J.context,lt=a.createCanvasGraphics(Y);lt.groupLevel=s.groupLevel,this.setFillAndStrokeStyleToContext(lt,v,c);let I=o,g=E,L=l,V=u;return o<0&&(I=0,L+=Math.abs(o)),E<0&&(g=0,V+=Math.abs(E)),Y.translate(-(N.scale*I),-(Z.scale*g)),lt.transform(N.scale,0,0,Z.scale,0,0),Y.save(),this.clipBbox(lt,I,g,L,V),lt.baseTransform=(0,st.getCurrentTransform)(lt.ctx),lt.executeOperatorList(i),lt.endDrawing(),{canvas:J.canvas,scaleX:N.scale,scaleY:Z.scale,offsetX:I,offsetY:g}}getSizeAndScale(s,i,f){s=Math.abs(s);const R=Math.max(jt.MAX_PATTERN_SIZE,i);let b=Math.ceil(s*f);return b>=R?b=R:f=b/s,{scale:f,size:b}}clipBbox(s,i,f,R,b){const v=R-i,d=b-f;s.ctx.rect(i,f,v,d),s.current.updateRectMinMax((0,st.getCurrentTransform)(s.ctx),[i,f,R,b]),s.clip(),s.endPath()}setFillAndStrokeStyleToContext(s,i,f){const R=s.ctx,b=s.current;switch(i){case at.COLORED:const v=this.ctx;R.fillStyle=v.fillStyle,R.strokeStyle=v.strokeStyle,b.fillColor=v.fillStyle,b.strokeColor=v.strokeStyle;break;case at.UNCOLORED:const d=h.Util.makeHexColor(f[0],f[1],f[2]);R.fillStyle=d,R.strokeStyle=d,b.fillColor=d,b.strokeColor=d;break;default:throw new h.FormatError(`Unsupported paint type: ${i}`)}}getPattern(s,i,f,R){let b=f;R!==A.SHADING&&(b=h.Util.transform(b,i.baseTransform),this.matrix&&(b=h.Util.transform(b,this.matrix)));const v=this.createPatternCanvas(i);let d=new DOMMatrix(b);d=d.translate(v.offsetX,v.offsetY),d=d.scale(1/v.scaleX,1/v.scaleY);const c=s.createPattern(v.canvas,"repeat");return c.setTransform(d),c}};be(jt,"MAX_PATTERN_SIZE",3e3);let T=jt;function q({src:$,srcPos:s=0,dest:i,width:f,height:R,nonBlackColor:b=4294967295,inverseDecode:v=!1}){const d=h.FeatureTest.isLittleEndian?4278190080:255,[c,a]=v?[b,d]:[d,b],o=f>>3,E=f&7,l=$.length;i=new Uint32Array(i.buffer);let u=0;for(let _=0;_<R;_++){for(const x=s+o;s<x;s++){const N=s<l?$[s]:255;i[u++]=N&128?a:c,i[u++]=N&64?a:c,i[u++]=N&32?a:c,i[u++]=N&16?a:c,i[u++]=N&8?a:c,i[u++]=N&4?a:c,i[u++]=N&2?a:c,i[u++]=N&1?a:c}if(E===0)continue;const j=s<l?$[s++]:255;for(let x=0;x<E;x++)i[u++]=j&1<<7-x?a:c}return{srcPos:s,destPos:u}}const B=16,W=100,K=4096,P=15,Q=10,S=1e3,X=16;function ft($,s){if($._removeMirroring)throw new Error("Context is already forwarding operations.");$.__originalSave=$.save,$.__originalRestore=$.restore,$.__originalRotate=$.rotate,$.__originalScale=$.scale,$.__originalTranslate=$.translate,$.__originalTransform=$.transform,$.__originalSetTransform=$.setTransform,$.__originalResetTransform=$.resetTransform,$.__originalClip=$.clip,$.__originalMoveTo=$.moveTo,$.__originalLineTo=$.lineTo,$.__originalBezierCurveTo=$.bezierCurveTo,$.__originalRect=$.rect,$.__originalClosePath=$.closePath,$.__originalBeginPath=$.beginPath,$._removeMirroring=()=>{$.save=$.__originalSave,$.restore=$.__originalRestore,$.rotate=$.__originalRotate,$.scale=$.__originalScale,$.translate=$.__originalTranslate,$.transform=$.__originalTransform,$.setTransform=$.__originalSetTransform,$.resetTransform=$.__originalResetTransform,$.clip=$.__originalClip,$.moveTo=$.__originalMoveTo,$.lineTo=$.__originalLineTo,$.bezierCurveTo=$.__originalBezierCurveTo,$.rect=$.__originalRect,$.closePath=$.__originalClosePath,$.beginPath=$.__originalBeginPath,delete $._removeMirroring},$.save=function(){s.save(),this.__originalSave()},$.restore=function(){s.restore(),this.__originalRestore()},$.translate=function(i,f){s.translate(i,f),this.__originalTranslate(i,f)},$.scale=function(i,f){s.scale(i,f),this.__originalScale(i,f)},$.transform=function(i,f,R,b,v,d){s.transform(i,f,R,b,v,d),this.__originalTransform(i,f,R,b,v,d)},$.setTransform=function(i,f,R,b,v,d){s.setTransform(i,f,R,b,v,d),this.__originalSetTransform(i,f,R,b,v,d)},$.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},$.rotate=function(i){s.rotate(i),this.__originalRotate(i)},$.clip=function(i){s.clip(i),this.__originalClip(i)},$.moveTo=function(i,f){s.moveTo(i,f),this.__originalMoveTo(i,f)},$.lineTo=function(i,f){s.lineTo(i,f),this.__originalLineTo(i,f)},$.bezierCurveTo=function(i,f,R,b,v,d){s.bezierCurveTo(i,f,R,b,v,d),this.__originalBezierCurveTo(i,f,R,b,v,d)},$.rect=function(i,f,R,b){s.rect(i,f,R,b),this.__originalRect(i,f,R,b)},$.closePath=function(){s.closePath(),this.__originalClosePath()},$.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class Ct{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,i,f){let R;return this.cache[s]!==void 0?(R=this.cache[s],this.canvasFactory.reset(R,i,f)):(R=this.canvasFactory.create(i,f),this.cache[s]=R),R}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const i=this.cache[s];this.canvasFactory.destroy(i),delete this.cache[s]}}}function dt($,s,i,f,R,b,v,d,c,a){const[o,E,l,u,_,j]=(0,st.getCurrentTransform)($);if(E===0&&l===0){const Z=v*o+_,J=Math.round(Z),Y=d*u+j,lt=Math.round(Y),I=(v+c)*o+_,g=Math.abs(Math.round(I)-J)||1,L=(d+a)*u+j,V=Math.abs(Math.round(L)-lt)||1;return $.setTransform(Math.sign(o),0,0,Math.sign(u),J,lt),$.drawImage(s,i,f,R,b,0,0,g,V),$.setTransform(o,E,l,u,_,j),[g,V]}if(o===0&&u===0){const Z=d*l+_,J=Math.round(Z),Y=v*E+j,lt=Math.round(Y),I=(d+a)*l+_,g=Math.abs(Math.round(I)-J)||1,L=(v+c)*E+j,V=Math.abs(Math.round(L)-lt)||1;return $.setTransform(0,Math.sign(E),Math.sign(l),0,J,lt),$.drawImage(s,i,f,R,b,0,0,V,g),$.setTransform(o,E,l,u,_,j),[V,g]}$.drawImage(s,i,f,R,b,v,d,c,a);const x=Math.hypot(o,E),N=Math.hypot(l,u);return[x*c,N*a]}function xt($){const{width:s,height:i}=$;if(s>S||i>S)return null;const f=1e3,R=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),b=s+1;let v=new Uint8Array(b*(i+1)),d,c,a;const o=s+7&-8;let E=new Uint8Array(o*i),l=0;for(const x of $.data){let N=128;for(;N>0;)E[l++]=x&N?0:255,N>>=1}let u=0;for(l=0,E[l]!==0&&(v[0]=1,++u),c=1;c<s;c++)E[l]!==E[l+1]&&(v[c]=E[l]?2:1,++u),l++;for(E[l]!==0&&(v[c]=2,++u),d=1;d<i;d++){l=d*o,a=d*b,E[l-o]!==E[l]&&(v[a]=E[l]?1:8,++u);let x=(E[l]?4:0)+(E[l-o]?8:0);for(c=1;c<s;c++)x=(x>>2)+(E[l+1]?4:0)+(E[l-o+1]?8:0),R[x]&&(v[a+c]=R[x],++u),l++;if(E[l-o]!==E[l]&&(v[a+c]=E[l]?2:4,++u),u>f)return null}for(l=o*(i-1),a=d*b,E[l]!==0&&(v[a]=8,++u),c=1;c<s;c++)E[l]!==E[l+1]&&(v[a+c]=E[l]?4:8,++u),l++;if(E[l]!==0&&(v[a+c]=4,++u),u>f)return null;const _=new Int32Array([0,b,-1,0,-b,0,0,0,1]),j=new Path2D;for(d=0;u&&d<=i;d++){let x=d*b;const N=x+s;for(;x<N&&!v[x];)x++;if(x===N)continue;j.moveTo(x%b,d);const Z=x;let J=v[x];do{const Y=_[J];do x+=Y;while(!v[x]);const lt=v[x];lt!==5&&lt!==10?(J=lt,v[x]=0):(J=lt&51*J>>4,v[x]&=J>>2|J<<2),j.lineTo(x%b,x/b|0),v[x]||--u}while(Z!==x);--d}return E=null,v=null,function(x){x.save(),x.scale(1/s,-1/i),x.translate(0,-i),x.fill(j),x.beginPath(),x.restore()}}class Dt{constructor(s,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=h.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=h.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,i])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,i){this.x=s,this.y=i}updatePathMinMax(s,i,f){[i,f]=h.Util.applyTransform([i,f],s),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,f),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,f)}updateRectMinMax(s,i){const f=h.Util.applyTransform(i,s),R=h.Util.applyTransform(i.slice(2),s),b=h.Util.applyTransform([i[0],i[3]],s),v=h.Util.applyTransform([i[2],i[1]],s);this.minX=Math.min(this.minX,f[0],R[0],b[0],v[0]),this.minY=Math.min(this.minY,f[1],R[1],b[1],v[1]),this.maxX=Math.max(this.maxX,f[0],R[0],b[0],v[0]),this.maxY=Math.max(this.maxY,f[1],R[1],b[1],v[1])}updateScalingPathMinMax(s,i){h.Util.scaleMinMax(s,i),this.minX=Math.min(this.minX,i[0]),this.maxX=Math.max(this.maxX,i[1]),this.minY=Math.min(this.minY,i[2]),this.maxY=Math.max(this.maxY,i[3])}updateCurvePathMinMax(s,i,f,R,b,v,d,c,a,o){const E=h.Util.bezierBoundingBox(i,f,R,b,v,d,c,a);if(o){o[0]=Math.min(o[0],E[0],E[2]),o[1]=Math.max(o[1],E[0],E[2]),o[2]=Math.min(o[2],E[1],E[3]),o[3]=Math.max(o[3],E[1],E[3]);return}this.updateRectMinMax(s,E)}getPathBoundingBox(s=A.FILL,i=null){const f=[this.minX,this.minY,this.maxX,this.maxY];if(s===A.STROKE){i||(0,h.unreachable)("Stroke bounding box must include transform.");const R=h.Util.singularValueDecompose2dScale(i),b=R[0]*this.lineWidth/2,v=R[1]*this.lineWidth/2;f[0]-=b,f[1]-=v,f[2]+=b,f[3]+=v}return f}updateClipFromPath(){const s=h.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=A.FILL,i=null){return h.Util.intersect(this.clipBox,this.getPathBoundingBox(s,i))}}function Gt($,s){if(typeof ImageData<"u"&&s instanceof ImageData){$.putImageData(s,0,0);return}const i=s.height,f=s.width,R=i%X,b=(i-R)/X,v=R===0?b:b+1,d=$.createImageData(f,X);let c=0,a;const o=s.data,E=d.data;let l,u,_,j;if(s.kind===h.ImageKind.GRAYSCALE_1BPP){const x=o.byteLength,N=new Uint32Array(E.buffer,0,E.byteLength>>2),Z=N.length,J=f+7>>3,Y=4294967295,lt=h.FeatureTest.isLittleEndian?4278190080:255;for(l=0;l<v;l++){for(_=l<b?X:R,a=0,u=0;u<_;u++){const I=x-c;let g=0;const L=I>J?f:I*8-7,V=L&-8;let ot=0,ut=0;for(;g<V;g+=8)ut=o[c++],N[a++]=ut&128?Y:lt,N[a++]=ut&64?Y:lt,N[a++]=ut&32?Y:lt,N[a++]=ut&16?Y:lt,N[a++]=ut&8?Y:lt,N[a++]=ut&4?Y:lt,N[a++]=ut&2?Y:lt,N[a++]=ut&1?Y:lt;for(;g<L;g++)ot===0&&(ut=o[c++],ot=128),N[a++]=ut&ot?Y:lt,ot>>=1}for(;a<Z;)N[a++]=0;$.putImageData(d,0,l*X)}}else if(s.kind===h.ImageKind.RGBA_32BPP){for(u=0,j=f*X*4,l=0;l<b;l++)E.set(o.subarray(c,c+j)),c+=j,$.putImageData(d,0,u),u+=X;l<v&&(j=f*R*4,E.set(o.subarray(c,c+j)),$.putImageData(d,0,u))}else if(s.kind===h.ImageKind.RGB_24BPP)for(_=X,j=f*_,l=0;l<v;l++){for(l>=b&&(_=R,j=f*_),a=0,u=j;u--;)E[a++]=o[c++],E[a++]=o[c++],E[a++]=o[c++],E[a++]=255;$.putImageData(d,0,l*X)}else throw new Error(`bad image kind: ${s.kind}`)}function Nt($,s){if(s.bitmap){$.drawImage(s.bitmap,0,0);return}const i=s.height,f=s.width,R=i%X,b=(i-R)/X,v=R===0?b:b+1,d=$.createImageData(f,X);let c=0;const a=s.data,o=d.data;for(let E=0;E<v;E++){const l=E<b?X:R;({srcPos:c}=q({src:a,srcPos:c,dest:o,width:f,height:l,nonBlackColor:0})),$.putImageData(d,0,E*X)}}function Kt($,s){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const f of i)$[f]!==void 0&&(s[f]=$[f]);$.setLineDash!==void 0&&(s.setLineDash($.getLineDash()),s.lineDashOffset=$.lineDashOffset)}function $t($){if($.strokeStyle=$.fillStyle="#000000",$.fillRule="nonzero",$.globalAlpha=1,$.lineWidth=1,$.lineCap="butt",$.lineJoin="miter",$.miterLimit=10,$.globalCompositeOperation="source-over",$.font="10px sans-serif",$.setLineDash!==void 0&&($.setLineDash([]),$.lineDashOffset=0),!h.isNodeJS){const{filter:s}=$;s!=="none"&&s!==""&&($.filter="none")}}function ve($,s,i,f){const R=$.length;for(let b=3;b<R;b+=4){const v=$[b];if(v===0)$[b-3]=s,$[b-2]=i,$[b-1]=f;else if(v<255){const d=255-v;$[b-3]=$[b-3]*v+s*d>>8,$[b-2]=$[b-2]*v+i*d>>8,$[b-1]=$[b-1]*v+f*d>>8}}}function Jt($,s,i){const f=$.length,R=1/255;for(let b=3;b<f;b+=4){const v=i?i[$[b]]:$[b];s[b]=s[b]*v*R|0}}function fe($,s,i){const f=$.length;for(let R=3;R<f;R+=4){const b=$[R-3]*77+$[R-2]*152+$[R-1]*28;s[R]=i?s[R]*i[b>>8]>>8:s[R]*b>>16}}function oe($,s,i,f,R,b,v,d,c,a,o){const E=!!b,l=E?b[0]:0,u=E?b[1]:0,_=E?b[2]:0,j=R==="Luminosity"?fe:Jt,x=Math.min(f,Math.ceil(1048576/i));for(let N=0;N<f;N+=x){const Z=Math.min(x,f-N),J=$.getImageData(d-a,N+(c-o),i,Z),Y=s.getImageData(d,N+c,i,Z);E&&ve(J.data,l,u,_),j(J.data,Y.data,v),s.putImageData(Y,d,N+c)}}function te($,s,i,f){const R=f[0],b=f[1],v=f[2]-R,d=f[3]-b;v===0||d===0||(oe(s.context,i,v,d,s.subtype,s.backdrop,s.transferMap,R,b,s.offsetX,s.offsetY),$.save(),$.globalAlpha=1,$.globalCompositeOperation="source-over",$.setTransform(1,0,0,1,0,0),$.drawImage(i.canvas,0,0),$.restore())}function Xt($,s){const i=h.Util.singularValueDecompose2dScale($);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const f=Math.fround((globalThis.devicePixelRatio||1)*st.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:i[0]<=f||i[1]<=f}const re=["butt","round","square"],Wt=["miter","round","bevel"],le={},ie={},ye=class ye{constructor(s,i,f,R,b,{optionalContentConfig:v,markedContentStack:d=null},c,a){m(this,me);m(this,Zt);this.ctx=s,this.current=new Dt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=f,this.canvasFactory=R,this.filterFactory=b,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=v,this.cachedCanvases=new Ct(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=a,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,i=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):i}beginDrawing({transform:s,viewport:i,transparency:f=!1,background:R=null}){const b=this.ctx.canvas.width,v=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=R||"#ffffff",this.ctx.fillRect(0,0,b,v),this.ctx.fillStyle=d,f){const c=this.cachedCanvases.getCanvas("transparent",b,v);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...(0,st.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),$t(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=(0,st.getCurrentTransform)(this.ctx)}executeOperatorList(s,i,f,R){const b=s.argsArray,v=s.fnArray;let d=i||0;const c=b.length;if(c===d)return d;const a=c-d>Q&&typeof f=="function",o=a?Date.now()+P:0;let E=0;const l=this.commonObjs,u=this.objs;let _;for(;;){if(R!==void 0&&d===R.nextBreakPoint)return R.breakIt(d,f),d;if(_=v[d],_!==h.OPS.dependency)this[_].apply(this,b[d]);else for(const j of b[d]){const x=j.startsWith("g_")?l:u;if(!x.has(j))return x.get(j,f),d}if(d++,d===c)return d;if(a&&++E>Q){if(Date.now()>o)return f(),d;E=0}}}endDrawing(){M(this,me,Bi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const i of s.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);s.clear()}this._cachedBitmapsMap.clear(),M(this,Zt,Hi).call(this)}_scaleImage(s,i){const f=s.width,R=s.height;let b=Math.max(Math.hypot(i[0],i[1]),1),v=Math.max(Math.hypot(i[2],i[3]),1),d=f,c=R,a="prescale1",o,E;for(;b>2&&d>1||v>2&&c>1;){let l=d,u=c;b>2&&d>1&&(l=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),b/=d/l),v>2&&c>1&&(u=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,v/=c/u),o=this.cachedCanvases.getCanvas(a,l,u),E=o.context,E.clearRect(0,0,l,u),E.drawImage(s,0,0,d,c,0,0,l,u),s=o.canvas,d=l,c=u,a=a==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:d,paintHeight:c}}_createMaskCanvas(s){const i=this.ctx,{width:f,height:R}=s,b=this.current.fillColor,v=this.current.patternFill,d=(0,st.getCurrentTransform)(i);let c,a,o,E;if((s.bitmap||s.data)&&s.count>1){const L=s.bitmap||s.data.buffer;a=JSON.stringify(v?d:[d.slice(0,4),b]),c=this._cachedBitmapsMap.get(L),c||(c=new Map,this._cachedBitmapsMap.set(L,c));const V=c.get(a);if(V&&!v){const ot=Math.round(Math.min(d[0],d[2])+d[4]),ut=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:V,offsetX:ot,offsetY:ut}}o=V}o||(E=this.cachedCanvases.getCanvas("maskCanvas",f,R),Nt(E.context,s));let l=h.Util.transform(d,[1/f,0,0,-1/R,0,0]);l=h.Util.transform(l,[1,0,0,1,0,-R]);const[u,_,j,x]=h.Util.getAxialAlignedBoundingBox([0,0,f,R],l),N=Math.round(j-u)||1,Z=Math.round(x-_)||1,J=this.cachedCanvases.getCanvas("fillCanvas",N,Z),Y=J.context,lt=u,I=_;Y.translate(-lt,-I),Y.transform(...l),o||(o=this._scaleImage(E.canvas,(0,st.getCurrentTransformInverse)(Y)),o=o.img,c&&v&&c.set(a,o)),Y.imageSmoothingEnabled=Xt((0,st.getCurrentTransform)(Y),s.interpolate),dt(Y,o,0,0,o.width,o.height,0,0,f,R),Y.globalCompositeOperation="source-in";const g=h.Util.transform((0,st.getCurrentTransformInverse)(Y),[1,0,0,1,-lt,-I]);return Y.fillStyle=v?b.getPattern(i,this,g,A.FILL):b,Y.fillRect(0,0,f,R),c&&!v&&(this.cachedCanvases.delete("fillCanvas"),c.set(a,J.canvas)),{canvas:J.canvas,offsetX:Math.round(lt),offsetY:Math.round(I)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=re[s]}setLineJoin(s){this.ctx.lineJoin=Wt[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,i){const f=this.ctx;f.setLineDash!==void 0&&(f.setLineDash(s),f.lineDashOffset=i)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[i,f]of s)switch(i){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f[0],f[1]);break;case"CA":this.current.strokeAlpha=f;break;case"ca":this.current.fillAlpha=f,this.ctx.globalAlpha=f;break;case"BM":this.ctx.globalCompositeOperation=f;break;case"SMask":this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,i=this.ctx.canvas.height,f="smaskGroupAt"+this.groupLevel,R=this.cachedCanvases.getCanvas(f,s,i);this.suspendedCtx=this.ctx,this.ctx=R.context;const b=this.ctx;b.setTransform(...(0,st.getCurrentTransform)(this.suspendedCtx)),Kt(this.suspendedCtx,b),ft(b,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Kt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,f=this.suspendedCtx;te(f,i,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Kt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Kt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,i,f,R,b,v){this.ctx.transform(s,i,f,R,b,v),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,i,f){const R=this.ctx,b=this.current;let v=b.x,d=b.y,c,a;const o=(0,st.getCurrentTransform)(R),E=o[0]===0&&o[3]===0||o[1]===0&&o[2]===0,l=E?f.slice(0):null;for(let u=0,_=0,j=s.length;u<j;u++)switch(s[u]|0){case h.OPS.rectangle:v=i[_++],d=i[_++];const x=i[_++],N=i[_++],Z=v+x,J=d+N;R.moveTo(v,d),x===0||N===0?R.lineTo(Z,J):(R.lineTo(Z,d),R.lineTo(Z,J),R.lineTo(v,J)),E||b.updateRectMinMax(o,[v,d,Z,J]),R.closePath();break;case h.OPS.moveTo:v=i[_++],d=i[_++],R.moveTo(v,d),E||b.updatePathMinMax(o,v,d);break;case h.OPS.lineTo:v=i[_++],d=i[_++],R.lineTo(v,d),E||b.updatePathMinMax(o,v,d);break;case h.OPS.curveTo:c=v,a=d,v=i[_+4],d=i[_+5],R.bezierCurveTo(i[_],i[_+1],i[_+2],i[_+3],v,d),b.updateCurvePathMinMax(o,c,a,i[_],i[_+1],i[_+2],i[_+3],v,d,l),_+=6;break;case h.OPS.curveTo2:c=v,a=d,R.bezierCurveTo(v,d,i[_],i[_+1],i[_+2],i[_+3]),b.updateCurvePathMinMax(o,c,a,v,d,i[_],i[_+1],i[_+2],i[_+3],l),v=i[_+2],d=i[_+3],_+=4;break;case h.OPS.curveTo3:c=v,a=d,v=i[_+2],d=i[_+3],R.bezierCurveTo(i[_],i[_+1],v,d,v,d),b.updateCurvePathMinMax(o,c,a,i[_],i[_+1],v,d,v,d,l),_+=4;break;case h.OPS.closePath:R.closePath();break}E&&b.updateScalingPathMinMax(o,l),b.setCurrentPoint(v,d)}closePath(){this.ctx.closePath()}stroke(s=!0){const i=this.ctx,f=this.current.strokeColor;i.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof f=="object"&&(f!=null&&f.getPattern)?(i.save(),i.strokeStyle=f.getPattern(i,this,(0,st.getCurrentTransformInverse)(i),A.STROKE),this.rescaleAndStroke(!1),i.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const i=this.ctx,f=this.current.fillColor,R=this.current.patternFill;let b=!1;R&&(i.save(),i.fillStyle=f.getPattern(i,this,(0,st.getCurrentTransformInverse)(i),A.FILL),b=!0);const v=this.current.getClippedPathBoundingBox();this.contentVisible&&v!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),b&&i.restore(),s&&this.consumePath(v)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=le}eoClip(){this.pendingClip=ie}beginText(){this.current.textMatrix=h.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,i=this.ctx;if(s===void 0){i.beginPath();return}i.save(),i.beginPath();for(const f of s)i.setTransform(...f.transform),i.translate(f.x,f.y),f.addToPath(i,f.fontSize);i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,i){var o;const f=this.commonObjs.get(s),R=this.current;if(!f)throw new Error(`Can't find font for ${s}`);if(R.fontMatrix=f.fontMatrix||h.FONT_IDENTITY_MATRIX,(R.fontMatrix[0]===0||R.fontMatrix[3]===0)&&(0,h.warn)("Invalid font matrix for font "+s),i<0?(i=-i,R.fontDirection=-1):R.fontDirection=1,this.current.font=f,this.current.fontSize=i,f.isType3Font)return;const b=f.loadedName||"sans-serif",v=((o=f.systemFontInfo)==null?void 0:o.css)||`"${b}", ${f.fallbackName}`;let d="normal";f.black?d="900":f.bold&&(d="bold");const c=f.italic?"italic":"normal";let a=i;i<B?a=B:i>W&&(a=W),this.current.fontSizeScale=i/a,this.ctx.font=`${c} ${d} ${a}px ${v}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,i){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=i}setLeadingMoveText(s,i){this.setLeading(-i),this.moveText(s,i)}setTextMatrix(s,i,f,R,b,v){this.current.textMatrix=[s,i,f,R,b,v],this.current.textMatrixScale=Math.hypot(s,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,i,f,R){const b=this.ctx,v=this.current,d=v.font,c=v.textRenderingMode,a=v.fontSize/v.fontSizeScale,o=c&h.TextRenderingMode.FILL_STROKE_MASK,E=!!(c&h.TextRenderingMode.ADD_TO_PATH_FLAG),l=v.patternFill&&!d.missingFile;let u;(d.disableFontFace||E||l)&&(u=d.getPathGenerator(this.commonObjs,s)),d.disableFontFace||l?(b.save(),b.translate(i,f),b.beginPath(),u(b,a),R&&b.setTransform(...R),(o===h.TextRenderingMode.FILL||o===h.TextRenderingMode.FILL_STROKE)&&b.fill(),(o===h.TextRenderingMode.STROKE||o===h.TextRenderingMode.FILL_STROKE)&&b.stroke(),b.restore()):((o===h.TextRenderingMode.FILL||o===h.TextRenderingMode.FILL_STROKE)&&b.fillText(s,i,f),(o===h.TextRenderingMode.STROKE||o===h.TextRenderingMode.FILL_STROKE)&&b.strokeText(s,i,f)),E&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,st.getCurrentTransform)(b),x:i,y:f,fontSize:a,addToPath:u})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const i=s.getImageData(0,0,10,10).data;let f=!1;for(let R=3;R<i.length;R+=4)if(i[R]>0&&i[R]<255){f=!0;break}return(0,h.shadow)(this,"isFontSubpixelAAEnabled",f)}showText(s){const i=this.current,f=i.font;if(f.isType3Font)return this.showType3Text(s);const R=i.fontSize;if(R===0)return;const b=this.ctx,v=i.fontSizeScale,d=i.charSpacing,c=i.wordSpacing,a=i.fontDirection,o=i.textHScale*a,E=s.length,l=f.vertical,u=l?1:-1,_=f.defaultVMetrics,j=R*i.fontMatrix[0],x=i.textRenderingMode===h.TextRenderingMode.FILL&&!f.disableFontFace&&!i.patternFill;b.save(),b.transform(...i.textMatrix),b.translate(i.x,i.y+i.textRise),a>0?b.scale(o,-1):b.scale(o,1);let N;if(i.patternFill){b.save();const I=i.fillColor.getPattern(b,this,(0,st.getCurrentTransformInverse)(b),A.FILL);N=(0,st.getCurrentTransform)(b),b.restore(),b.fillStyle=I}let Z=i.lineWidth;const J=i.textMatrixScale;if(J===0||Z===0){const I=i.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;(I===h.TextRenderingMode.STROKE||I===h.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=J;if(v!==1&&(b.scale(v,v),Z/=v),b.lineWidth=Z,f.isInvalidPDFjsFont){const I=[];let g=0;for(const L of s)I.push(L.unicode),g+=L.width;b.fillText(I.join(""),0,0),i.x+=g*j*o,b.restore(),this.compose();return}let Y=0,lt;for(lt=0;lt<E;++lt){const I=s[lt];if(typeof I=="number"){Y+=u*I*R/1e3;continue}let g=!1;const L=(I.isSpace?c:0)+d,V=I.fontChar,ot=I.accent;let ut,bt,_t=I.width;if(l){const Bt=I.vmetric||_,ee=-(I.vmetric?Bt[1]:_t*.5)*j,Ut=Bt[2]*j;_t=Bt?-Bt[0]:_t,ut=ee/v,bt=(Y+Ut)/v}else ut=Y/v,bt=0;if(f.remeasure&&_t>0){const Bt=b.measureText(V).width*1e3/R*v;if(_t<Bt&&this.isFontSubpixelAAEnabled){const ee=_t/Bt;g=!0,b.save(),b.scale(ee,1),ut/=ee}else _t!==Bt&&(ut+=(_t-Bt)/2e3*R/v)}if(this.contentVisible&&(I.isInFont||f.missingFile)){if(x&&!ot)b.fillText(V,ut,bt);else if(this.paintChar(V,ut,bt,N),ot){const Bt=ut+R*ot.offset.x/v,ee=bt-R*ot.offset.y/v;this.paintChar(ot.fontChar,Bt,ee,N)}}const It=l?_t*j-L*a:_t*j+L*a;Y+=It,g&&b.restore()}l?i.y-=Y:i.x+=Y*o,b.restore(),this.compose()}showType3Text(s){const i=this.ctx,f=this.current,R=f.font,b=f.fontSize,v=f.fontDirection,d=R.vertical?1:-1,c=f.charSpacing,a=f.wordSpacing,o=f.textHScale*v,E=f.fontMatrix||h.FONT_IDENTITY_MATRIX,l=s.length,u=f.textRenderingMode===h.TextRenderingMode.INVISIBLE;let _,j,x,N;if(!(u||b===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...f.textMatrix),i.translate(f.x,f.y),i.scale(o,v),_=0;_<l;++_){if(j=s[_],typeof j=="number"){N=d*j*b/1e3,this.ctx.translate(N,0),f.x+=N*o;continue}const Z=(j.isSpace?a:0)+c,J=R.charProcOperatorList[j.operatorListId];if(!J){(0,h.warn)(`Type3 character "${j.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=j,this.save(),i.scale(b,b),i.transform(...E),this.executeOperatorList(J),this.restore()),x=h.Util.applyTransform([j.width,0],E)[0]*b+Z,i.translate(x,0),f.x+=x*o}i.restore(),this.processingType3=null}}setCharWidth(s,i){}setCharWidthAndBounds(s,i,f,R,b,v){this.ctx.rect(f,R,b-f,v-R),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let i;if(s[0]==="TilingPattern"){const f=s[1],R=this.baseTransform||(0,st.getCurrentTransform)(this.ctx),b={createCanvasGraphics:v=>new ye(v,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new T(s,f,this.ctx,b,R)}else i=this._getPattern(s[1],s[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,i,f){const R=h.Util.makeHexColor(s,i,f);this.ctx.strokeStyle=R,this.current.strokeColor=R}setFillRGBColor(s,i,f){const R=h.Util.makeHexColor(s,i,f);this.ctx.fillStyle=R,this.current.fillColor=R,this.current.patternFill=!1}_getPattern(s,i=null){let f;return this.cachedPatterns.has(s)?f=this.cachedPatterns.get(s):(f=D(this.getObject(s)),this.cachedPatterns.set(s,f)),i&&(f.matrix=i),f}shadingFill(s){if(!this.contentVisible)return;const i=this.ctx;this.save();const f=this._getPattern(s);i.fillStyle=f.getPattern(i,this,(0,st.getCurrentTransformInverse)(i),A.SHADING);const R=(0,st.getCurrentTransformInverse)(i);if(R){const{width:b,height:v}=i.canvas,[d,c,a,o]=h.Util.getAxialAlignedBoundingBox([0,0,b,v],R);this.ctx.fillRect(d,c,a-d,o-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,h.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,h.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,st.getCurrentTransform)(this.ctx),i)){const f=i[2]-i[0],R=i[3]-i[1];this.ctx.rect(i[0],i[1],f,R),this.current.updateRectMinMax((0,st.getCurrentTransform)(this.ctx),i),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;s.isolated||(0,h.info)("TODO: Support non-isolated groups."),s.knockout&&(0,h.warn)("Knockout groups not supported.");const f=(0,st.getCurrentTransform)(i);if(s.matrix&&i.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let R=h.Util.getAxialAlignedBoundingBox(s.bbox,(0,st.getCurrentTransform)(i));const b=[0,0,i.canvas.width,i.canvas.height];R=h.Util.intersect(R,b)||[0,0,0,0];const v=Math.floor(R[0]),d=Math.floor(R[1]);let c=Math.max(Math.ceil(R[2])-v,1),a=Math.max(Math.ceil(R[3])-d,1),o=1,E=1;c>K&&(o=c/K,c=K),a>K&&(E=a/K,a=K),this.current.startNewPathAndClipBox([0,0,c,a]);let l="groupAt"+this.groupLevel;s.smask&&(l+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(l,c,a),_=u.context;_.scale(1/o,1/E),_.translate(-v,-d),_.transform(...f),s.smask?this.smaskStack.push({canvas:u.canvas,context:_,offsetX:v,offsetY:d,scaleX:o,scaleY:E,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(v,d),i.scale(o,E),i.save()),Kt(i,_),this.ctx=_,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,f=this.groupStack.pop();if(this.ctx=f,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const R=(0,st.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...R);const b=h.Util.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],R);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(b)}}beginAnnotation(s,i,f,R,b){if(M(this,me,Bi).call(this),$t(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(i)&&i.length===4){const v=i[2]-i[0],d=i[3]-i[1];if(b&&this.annotationCanvasMap){f=f.slice(),f[4]-=i[0],f[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=v,i[3]=d;const[c,a]=h.Util.singularValueDecompose2dScale((0,st.getCurrentTransform)(this.ctx)),{viewportScale:o}=this,E=Math.ceil(v*this.outputScaleX*o),l=Math.ceil(d*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(E,l);const{canvas:u,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(s,u),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(c,0,0,-a,0,d*a),$t(this.ctx)}else $t(this.ctx),this.ctx.rect(i[0],i[1],v,d),this.ctx.clip(),this.endPath()}this.current=new Dt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...f),this.transform(...R)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),M(this,Zt,Hi).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const i=s.count;s=this.getObject(s.data,s),s.count=i;const f=this.ctx,R=this.processingType3;if(R&&(R.compiled===void 0&&(R.compiled=xt(s)),R.compiled)){R.compiled(f);return}const b=this._createMaskCanvas(s),v=b.canvas;f.save(),f.setTransform(1,0,0,1,0,0),f.drawImage(v,b.offsetX,b.offsetY),f.restore(),this.compose()}paintImageMaskXObjectRepeat(s,i,f=0,R=0,b,v){if(!this.contentVisible)return;s=this.getObject(s.data,s);const d=this.ctx;d.save();const c=(0,st.getCurrentTransform)(d);d.transform(i,f,R,b,0,0);const a=this._createMaskCanvas(s);d.setTransform(1,0,0,1,a.offsetX-c[4],a.offsetY-c[5]);for(let o=0,E=v.length;o<E;o+=2){const l=h.Util.transform(c,[i,f,R,b,v[o],v[o+1]]),[u,_]=h.Util.applyTransform([0,0],l);d.drawImage(a.canvas,u,_)}d.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const i=this.ctx,f=this.current.fillColor,R=this.current.patternFill;for(const b of s){const{data:v,width:d,height:c,transform:a}=b,o=this.cachedCanvases.getCanvas("maskCanvas",d,c),E=o.context;E.save();const l=this.getObject(v,b);Nt(E,l),E.globalCompositeOperation="source-in",E.fillStyle=R?f.getPattern(E,this,(0,st.getCurrentTransformInverse)(i),A.FILL):f,E.fillRect(0,0,d,c),E.restore(),i.save(),i.transform(...a),i.scale(1,-1),dt(i,o.canvas,0,0,d,c,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const i=this.getObject(s);if(!i){(0,h.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(s,i,f,R){if(!this.contentVisible)return;const b=this.getObject(s);if(!b){(0,h.warn)("Dependent image isn't ready yet");return}const v=b.width,d=b.height,c=[];for(let a=0,o=R.length;a<o;a+=2)c.push({transform:[i,0,0,f,R[a],R[a+1]],x:0,y:0,w:v,h:d});this.paintInlineImageXObjectGroup(b,c)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:i,width:f,height:R}=s,b=this.cachedCanvases.getCanvas("inlineImage",f,R),v=b.context;return v.filter=this.current.transferMaps,v.drawImage(i,0,0),v.filter="none",b.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const i=s.width,f=s.height,R=this.ctx;if(this.save(),!h.isNodeJS){const{filter:d}=R;d!=="none"&&d!==""&&(R.filter="none")}R.scale(1/i,-1/f);let b;if(s.bitmap)b=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)b=s;else{const d=this.cachedCanvases.getCanvas("inlineImage",i,f).context;Gt(d,s),b=this.applyTransferMapsToCanvas(d)}const v=this._scaleImage(b,(0,st.getCurrentTransformInverse)(R));R.imageSmoothingEnabled=Xt((0,st.getCurrentTransform)(R),s.interpolate),dt(R,v.img,0,0,v.paintWidth,v.paintHeight,0,-f,i,f),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,i){if(!this.contentVisible)return;const f=this.ctx;let R;if(s.bitmap)R=s.bitmap;else{const b=s.width,v=s.height,d=this.cachedCanvases.getCanvas("inlineImage",b,v).context;Gt(d,s),R=this.applyTransferMapsToCanvas(d)}for(const b of i)f.save(),f.transform(...b.transform),f.scale(1,-1),dt(f,R,b.x,b.y,b.w,b.h,0,-1,1,1),f.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,i){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,i){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const f=this.ctx;this.pendingClip&&(i||(this.pendingClip===ie?f.clip("evenodd"):f.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),f.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,st.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const i=Math.abs(s[0]*s[3]-s[2]*s[1]),f=Math.hypot(s[0],s[2]),R=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(f,R)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a:i,b:f,c:R,d:b}=this.ctx.getTransform();let v,d;if(f===0&&R===0){const c=Math.abs(i),a=Math.abs(b);if(c===a)if(s===0)v=d=1/c;else{const o=c*s;v=d=o<1?1/o:1}else if(s===0)v=1/c,d=1/a;else{const o=c*s,E=a*s;v=o<1?1/o:1,d=E<1?1/E:1}}else{const c=Math.abs(i*b-f*R),a=Math.hypot(i,f),o=Math.hypot(R,b);if(s===0)v=o/c,d=a/c;else{const E=s*c;v=o>E?o/E:1,d=a>E?a/E:1}}this._cachedScaleForStroking[0]=v,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:i}=this,{lineWidth:f}=this.current,[R,b]=this.getScaleForStroking();if(i.lineWidth=f||1,R===1&&b===1){i.stroke();return}const v=i.getLineDash();if(s&&i.save(),i.scale(R,b),v.length>0){const d=Math.max(R,b);i.setLineDash(v.map(c=>c/d)),i.lineDashOffset/=d}i.stroke(),s&&i.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};me=new WeakSet,Bi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Zt=new WeakSet,Hi=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const i=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}};let he=ye;for(const $ in h.OPS)he.prototype[$]!==void 0&&(he.prototype[h.OPS[$]]=he.prototype[$])},473:(Mt,Et,ht)=>{var Kt,$t,ve,Jt,fe,oe,te,Xt,re,Wt,le,ie,Cs,jt,Ss,pe,Ui,ne,gi,$,fi,i,Ws,R,Vs;ht.d(Et,{DOMCMapReaderFactory:()=>w,DOMCanvasFactory:()=>it,DOMFilterFactory:()=>gt,DOMSVGFactory:()=>G,DOMStandardFontDataFactory:()=>z,PDFDateString:()=>X,PageViewport:()=>D,PixelsPerInch:()=>H,RenderingCancelledException:()=>at,StatTimer:()=>K,fetchData:()=>U,getColorValues:()=>dt,getCurrentTransform:()=>xt,getCurrentTransformInverse:()=>Dt,getFilenameFromUrl:()=>B,getPdfFilenameFromUrl:()=>W,getRGB:()=>Ct,getXfaPageViewport:()=>ft,isDataScheme:()=>T,isPdfFile:()=>q,isValidFetchUrl:()=>P,noContextMenu:()=>Q,setLayerDimensions:()=>Gt});var h=ht(822),st=ht(266);const A="http://www.w3.org/2000/svg",Nt=class Nt{};be(Nt,"CSS",96),be(Nt,"PDF",72),be(Nt,"PDF_TO_CSS_UNITS",Nt.CSS/Nt.PDF);let H=Nt;class gt extends h.BaseFilterFactory{constructor({docId:c,ownerDocument:a=globalThis.document}={}){super();m(this,ie);m(this,jt);m(this,pe);m(this,ne);m(this,$);m(this,i);m(this,R);m(this,Kt,void 0);m(this,$t,void 0);m(this,ve,void 0);m(this,Jt,void 0);m(this,fe,void 0);m(this,oe,void 0);m(this,te,void 0);m(this,Xt,void 0);m(this,re,void 0);m(this,Wt,void 0);m(this,le,0);O(this,ve,c),O(this,Jt,a)}addFilter(c){if(!c)return"none";let a=t(this,ie,Cs).get(c);if(a)return a;let o,E,l,u;if(c.length===1){const N=c[0],Z=new Array(256);for(let J=0;J<256;J++)Z[J]=N[J]/255;u=o=E=l=Z.join(",")}else{const[N,Z,J]=c,Y=new Array(256),lt=new Array(256),I=new Array(256);for(let g=0;g<256;g++)Y[g]=N[g]/255,lt[g]=Z[g]/255,I[g]=J[g]/255;o=Y.join(","),E=lt.join(","),l=I.join(","),u=`${o}${E}${l}`}if(a=t(this,ie,Cs).get(u),a)return t(this,ie,Cs).set(c,a),a;const _=`g_${t(this,ve)}_transfer_map_${Qe(this,le)._++}`,j=`url(#${_})`;t(this,ie,Cs).set(c,j),t(this,ie,Cs).set(u,j);const x=M(this,ne,gi).call(this,_);return M(this,i,Ws).call(this,o,E,l,x),j}addHCMFilter(c,a){var Z;const o=`${c}-${a}`;if(t(this,oe)===o)return t(this,te);if(O(this,oe,o),O(this,te,"none"),(Z=t(this,fe))==null||Z.remove(),!c||!a)return t(this,te);const E=M(this,R,Vs).call(this,c);c=st.Util.makeHexColor(...E);const l=M(this,R,Vs).call(this,a);if(a=st.Util.makeHexColor(...l),t(this,jt,Ss).style.color="",c==="#000000"&&a==="#ffffff"||c===a)return t(this,te);const u=new Array(256);for(let J=0;J<=255;J++){const Y=J/255;u[J]=Y<=.03928?Y/12.92:((Y+.055)/1.055)**2.4}const _=u.join(","),j=`g_${t(this,ve)}_hcm_filter`,x=O(this,Xt,M(this,ne,gi).call(this,j));M(this,i,Ws).call(this,_,_,_,x),M(this,pe,Ui).call(this,x);const N=(J,Y)=>{const lt=E[J]/255,I=l[J]/255,g=new Array(Y+1);for(let L=0;L<=Y;L++)g[L]=lt+L/Y*(I-lt);return g.join(",")};return M(this,i,Ws).call(this,N(0,5),N(1,5),N(2,5),x),O(this,te,`url(#${j})`),t(this,te)}addHighlightHCMFilter(c,a,o,E){var I;const l=`${c}-${a}-${o}-${E}`;if(t(this,re)===l)return t(this,Wt);if(O(this,re,l),O(this,Wt,"none"),(I=t(this,Xt))==null||I.remove(),!c||!a)return t(this,Wt);const[u,_]=[c,a].map(M(this,R,Vs).bind(this));let j=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),x=Math.round(.2126*_[0]+.7152*_[1]+.0722*_[2]),[N,Z]=[o,E].map(M(this,R,Vs).bind(this));x<j&&([j,x,N,Z]=[x,j,Z,N]),t(this,jt,Ss).style.color="";const J=(g,L,V)=>{const ot=new Array(256),ut=(x-j)/V,bt=g/255,_t=(L-g)/(255*V);let It=0;for(let Bt=0;Bt<=V;Bt++){const ee=Math.round(j+Bt*ut),Ut=bt+Bt*_t;for(let Yt=It;Yt<=ee;Yt++)ot[Yt]=Ut;It=ee+1}for(let Bt=It;Bt<256;Bt++)ot[Bt]=ot[It-1];return ot.join(",")},Y=`g_${t(this,ve)}_hcm_highlight_filter`,lt=O(this,Xt,M(this,ne,gi).call(this,Y));return M(this,pe,Ui).call(this,lt),M(this,i,Ws).call(this,J(N[0],Z[0],5),J(N[1],Z[1],5),J(N[2],Z[2],5),lt),O(this,Wt,`url(#${Y})`),t(this,Wt)}destroy(c=!1){c&&(t(this,te)||t(this,Wt))||(t(this,$t)&&(t(this,$t).parentNode.parentNode.remove(),O(this,$t,null)),t(this,Kt)&&(t(this,Kt).clear(),O(this,Kt,null)),O(this,le,0))}}Kt=new WeakMap,$t=new WeakMap,ve=new WeakMap,Jt=new WeakMap,fe=new WeakMap,oe=new WeakMap,te=new WeakMap,Xt=new WeakMap,re=new WeakMap,Wt=new WeakMap,le=new WeakMap,ie=new WeakSet,Cs=function(){return t(this,Kt)||O(this,Kt,new Map)},jt=new WeakSet,Ss=function(){if(!t(this,$t)){const c=t(this,Jt).createElement("div"),{style:a}=c;a.visibility="hidden",a.contain="strict",a.width=a.height=0,a.position="absolute",a.top=a.left=0,a.zIndex=-1;const o=t(this,Jt).createElementNS(A,"svg");o.setAttribute("width",0),o.setAttribute("height",0),O(this,$t,t(this,Jt).createElementNS(A,"defs")),c.append(o),o.append(t(this,$t)),t(this,Jt).body.append(c)}return t(this,$t)},pe=new WeakSet,Ui=function(c){const a=t(this,Jt).createElementNS(A,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),c.append(a)},ne=new WeakSet,gi=function(c){const a=t(this,Jt).createElementNS(A,"filter");return a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("id",c),t(this,jt,Ss).append(a),a},$=new WeakSet,fi=function(c,a,o){const E=t(this,Jt).createElementNS(A,a);E.setAttribute("type","discrete"),E.setAttribute("tableValues",o),c.append(E)},i=new WeakSet,Ws=function(c,a,o,E){const l=t(this,Jt).createElementNS(A,"feComponentTransfer");E.append(l),M(this,$,fi).call(this,l,"feFuncR",c),M(this,$,fi).call(this,l,"feFuncG",a),M(this,$,fi).call(this,l,"feFuncB",o)},R=new WeakSet,Vs=function(c){return t(this,jt,Ss).style.color=c,Ct(getComputedStyle(t(this,jt,Ss)).getPropertyValue("color"))};class it extends h.BaseCanvasFactory{constructor({ownerDocument:d=globalThis.document}={}){super(),this._document=d}_createCanvas(d,c){const a=this._document.createElement("canvas");return a.width=d,a.height=c,a}}async function U(v,d="text"){if(P(v,document.baseURI)){const c=await fetch(v);if(!c.ok)throw new Error(c.statusText);switch(d){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"json":return c.json()}return c.text()}return new Promise((c,a)=>{const o=new XMLHttpRequest;o.open("GET",v,!0),o.responseType=d,o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(o.status===200||o.status===0){let E;switch(d){case"arraybuffer":case"blob":case"json":E=o.response;break;default:E=o.responseText;break}if(E){c(E);return}}a(new Error(o.statusText))}},o.send(null)})}class w extends h.BaseCMapReaderFactory{_fetchData(d,c){return U(d,this.isCompressed?"arraybuffer":"text").then(a=>({cMapData:a instanceof ArrayBuffer?new Uint8Array(a):(0,st.stringToBytes)(a),compressionType:c}))}}class z extends h.BaseStandardFontDataFactory{_fetchData(d){return U(d,"arraybuffer").then(c=>new Uint8Array(c))}}class G extends h.BaseSVGFactory{_createSVG(d){return document.createElementNS(A,d)}}class D{constructor({viewBox:d,scale:c,rotation:a,offsetX:o=0,offsetY:E=0,dontFlip:l=!1}){this.viewBox=d,this.scale=c,this.rotation=a,this.offsetX=o,this.offsetY=E;const u=(d[2]+d[0])/2,_=(d[3]+d[1])/2;let j,x,N,Z;switch(a%=360,a<0&&(a+=360),a){case 180:j=-1,x=0,N=0,Z=1;break;case 90:j=0,x=1,N=1,Z=0;break;case 270:j=0,x=-1,N=-1,Z=0;break;case 0:j=1,x=0,N=0,Z=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(N=-N,Z=-Z);let J,Y,lt,I;j===0?(J=Math.abs(_-d[1])*c+o,Y=Math.abs(u-d[0])*c+E,lt=(d[3]-d[1])*c,I=(d[2]-d[0])*c):(J=Math.abs(u-d[0])*c+o,Y=Math.abs(_-d[1])*c+E,lt=(d[2]-d[0])*c,I=(d[3]-d[1])*c),this.transform=[j*c,x*c,N*c,Z*c,J-j*c*u-N*c*_,Y-x*c*u-Z*c*_],this.width=lt,this.height=I}get rawDims(){const{viewBox:d}=this;return(0,st.shadow)(this,"rawDims",{pageWidth:d[2]-d[0],pageHeight:d[3]-d[1],pageX:d[0],pageY:d[1]})}clone({scale:d=this.scale,rotation:c=this.rotation,offsetX:a=this.offsetX,offsetY:o=this.offsetY,dontFlip:E=!1}={}){return new D({viewBox:this.viewBox.slice(),scale:d,rotation:c,offsetX:a,offsetY:o,dontFlip:E})}convertToViewportPoint(d,c){return st.Util.applyTransform([d,c],this.transform)}convertToViewportRectangle(d){const c=st.Util.applyTransform([d[0],d[1]],this.transform),a=st.Util.applyTransform([d[2],d[3]],this.transform);return[c[0],c[1],a[0],a[1]]}convertToPdfPoint(d,c){return st.Util.applyInverseTransform([d,c],this.transform)}}class at extends st.BaseException{constructor(d,c=0){super(d,"RenderingCancelledException"),this.extraDelay=c}}function T(v){const d=v.length;let c=0;for(;c<d&&v[c].trim()==="";)c++;return v.substring(c,c+5).toLowerCase()==="data:"}function q(v){return typeof v=="string"&&/\.pdf$/i.test(v)}function B(v,d=!1){return d||([v]=v.split(/[#?]/,1)),v.substring(v.lastIndexOf("/")+1)}function W(v,d="document.pdf"){if(typeof v!="string")return d;if(T(v))return(0,st.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),d;const c=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,a=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=c.exec(v);let E=a.exec(o[1])||a.exec(o[2])||a.exec(o[3]);if(E&&(E=E[0],E.includes("%")))try{E=a.exec(decodeURIComponent(E))[0]}catch{}return E||d}class K{constructor(){be(this,"started",Object.create(null));be(this,"times",[])}time(d){d in this.started&&(0,st.warn)(`Timer is already running for ${d}`),this.started[d]=Date.now()}timeEnd(d){d in this.started||(0,st.warn)(`Timer has not been started for ${d}`),this.times.push({name:d,start:this.started[d],end:Date.now()}),delete this.started[d]}toString(){const d=[];let c=0;for(const{name:a}of this.times)c=Math.max(a.length,c);for(const{name:a,start:o,end:E}of this.times)d.push(`${a.padEnd(c)} ${E-o}ms
`);return d.join("")}}function P(v,d){try{const{protocol:c}=d?new URL(v,d):new URL(v);return c==="http:"||c==="https:"}catch{return!1}}function Q(v){v.preventDefault()}let S;class X{static toDateObject(d){if(!d||typeof d!="string")return null;S||(S=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const c=S.exec(d);if(!c)return null;const a=parseInt(c[1],10);let o=parseInt(c[2],10);o=o>=1&&o<=12?o-1:0;let E=parseInt(c[3],10);E=E>=1&&E<=31?E:1;let l=parseInt(c[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(c[5],10);u=u>=0&&u<=59?u:0;let _=parseInt(c[6],10);_=_>=0&&_<=59?_:0;const j=c[7]||"Z";let x=parseInt(c[8],10);x=x>=0&&x<=23?x:0;let N=parseInt(c[9],10)||0;return N=N>=0&&N<=59?N:0,j==="-"?(l+=x,u+=N):j==="+"&&(l-=x,u-=N),new Date(Date.UTC(a,o,E,l,u,_))}}function ft(v,{scale:d=1,rotation:c=0}){const{width:a,height:o}=v.attributes.style,E=[0,0,parseInt(a),parseInt(o)];return new D({viewBox:E,scale:d,rotation:c})}function Ct(v){if(v.startsWith("#")){const d=parseInt(v.slice(1),16);return[(d&16711680)>>16,(d&65280)>>8,d&255]}return v.startsWith("rgb(")?v.slice(4,-1).split(",").map(d=>parseInt(d)):v.startsWith("rgba(")?v.slice(5,-1).split(",").map(d=>parseInt(d)).slice(0,3):((0,st.warn)(`Not a valid color format: "${v}"`),[0,0,0])}function dt(v){const d=document.createElement("span");d.style.visibility="hidden",document.body.append(d);for(const c of v.keys()){d.style.color=c;const a=window.getComputedStyle(d).color;v.set(c,Ct(a))}d.remove()}function xt(v){const{a:d,b:c,c:a,d:o,e:E,f:l}=v.getTransform();return[d,c,a,o,E,l]}function Dt(v){const{a:d,b:c,c:a,d:o,e:E,f:l}=v.getTransform().invertSelf();return[d,c,a,o,E,l]}function Gt(v,d,c=!1,a=!0){if(d instanceof D){const{pageWidth:o,pageHeight:E}=d.rawDims,{style:l}=v,u=st.FeatureTest.isCSSRoundSupported,_=`var(--scale-factor) * ${o}px`,j=`var(--scale-factor) * ${E}px`,x=u?`round(${_}, 1px)`:`calc(${_})`,N=u?`round(${j}, 1px)`:`calc(${j})`;!c||d.rotation%180===0?(l.width=x,l.height=N):(l.width=N,l.height=x)}a&&v.setAttribute("data-main-rotation",d.rotation)}},423:(Mt,Et,ht)=>{var H,gt,it,U,zi,z,ji,D,qi;ht.d(Et,{DrawLayer:()=>A});var h=ht(473),st=ht(266);const T=class T{constructor({pageIndex:B}){m(this,z);m(this,H,null);m(this,gt,0);m(this,it,new Map);this.pageIndex=B}setParent(B){if(!t(this,H)){O(this,H,B);return}if(t(this,H)!==B){if(t(this,it).size>0)for(const W of t(this,it).values())W.remove(),B.append(W);O(this,H,B)}}static get _svgFactory(){return(0,st.shadow)(this,"_svgFactory",new h.DOMSVGFactory)}highlight({outlines:B,box:W},K,P){var Nt;const Q=Qe(this,gt)._++,S=M(this,z,ji).call(this,W);S.classList.add("highlight");const X=T._svgFactory.createElement("defs");S.append(X);const ft=T._svgFactory.createElement("path");X.append(ft);const Ct=`path_p${this.pageIndex}_${Q}`;ft.setAttribute("id",Ct),ft.setAttribute("d",M(Nt=T,D,qi).call(Nt,B));const dt=T._svgFactory.createElement("clipPath");X.append(dt);const xt=`clip_${Ct}`;dt.setAttribute("id",xt),dt.setAttribute("clipPathUnits","objectBoundingBox");const Dt=T._svgFactory.createElement("use");dt.append(Dt),Dt.setAttribute("href",`#${Ct}`),Dt.classList.add("clip");const Gt=T._svgFactory.createElement("use");return S.append(Gt),S.setAttribute("fill",K),S.setAttribute("fill-opacity",P),Gt.setAttribute("href",`#${Ct}`),t(this,it).set(Q,S),{id:Q,clipPathId:`url(#${xt})`}}highlightOutline({outlines:B,box:W}){var dt;const K=Qe(this,gt)._++,P=M(this,z,ji).call(this,W);P.classList.add("highlightOutline");const Q=T._svgFactory.createElement("defs");P.append(Q);const S=T._svgFactory.createElement("path");Q.append(S);const X=`path_p${this.pageIndex}_${K}`;S.setAttribute("id",X),S.setAttribute("d",M(dt=T,D,qi).call(dt,B)),S.setAttribute("vector-effect","non-scaling-stroke");const ft=T._svgFactory.createElement("use");P.append(ft),ft.setAttribute("href",`#${X}`);const Ct=ft.cloneNode();return P.append(Ct),ft.classList.add("mainOutline"),Ct.classList.add("secondaryOutline"),t(this,it).set(K,P),K}updateBox(B,W){var K;M(K=T,U,zi).call(K,t(this,it).get(B),W)}rotate(B,W){t(this,it).get(B).setAttribute("data-main-rotation",W)}changeColor(B,W){t(this,it).get(B).setAttribute("fill",W)}changeOpacity(B,W){t(this,it).get(B).setAttribute("fill-opacity",W)}addClass(B,W){t(this,it).get(B).classList.add(W)}removeClass(B,W){t(this,it).get(B).classList.remove(W)}remove(B){t(this,H)!==null&&(t(this,it).get(B).remove(),t(this,it).delete(B))}destroy(){O(this,H,null);for(const B of t(this,it).values())B.remove();t(this,it).clear()}};H=new WeakMap,gt=new WeakMap,it=new WeakMap,U=new WeakSet,zi=function(B,{x:W,y:K,width:P,height:Q}){const{style:S}=B;S.top=`${100*K}%`,S.left=`${100*W}%`,S.width=`${100*P}%`,S.height=`${100*Q}%`},z=new WeakSet,ji=function(B){var K;const W=T._svgFactory.create(1,1,!0);return t(this,H).append(W),M(K=T,U,zi).call(K,W,B),W},D=new WeakSet,qi=function(B){const W=[];for(const K of B){let[P,Q]=K;W.push(`M${P} ${Q}`);for(let S=2;S<K.length;S+=2){const X=K[S],ft=K[S+1];X===P?(W.push(`V${ft}`),Q=ft):ft===Q&&(W.push(`H${X}`),P=X)}W.push("Z")}return W.join(" ")},m(T,U),m(T,D);let A=T},629:(Mt,Et,ht)=>{var T,q,B,W,K,P,Q,S,X,ft,zn,dt,jn,Dt,qn,Nt,Gs,$t,Wi,Jt,Wn,oe,Vi,re,Wt,le,ie,he,jt,me,pe,Zt,ne,ye,Gi,s,Vn,f,Xi,b,mi,d,Yi,a,Gn,E,Xn,_,j,x,N,Z,J,Y,lt,I,g,L,V,ot,ut,bt,_t,Yn,Bt,Kn,Ut,$n,k,Jn,At,Ki,Lt,Qn,p,$i,r,Zn,F,tr,rt,er,kt,sr,zt,ir,Pt,Ze,qt,Ji,ce,bi,Ce,vi,Me,Ts,Fe,Qi,Oe,Ai,ue,nr,Rs,Zi,ei,rr,si,ar,Ms,tn,bs,yi,es,ks,Le,De,ss,Xe,is,vs,Ye,cs,qe,Ue,Ps,ds,Xs,us,Ys,As,wi,Ls,en,ii,or,ni,hr,Ds,sn,ys,xi,ri,lr,ps,ws,Ke,Fs,ai,Os,$e,Ns,Ne,ns,xs,_s,Je,de,rs,Bs,nn,Hs,rn,gs,Ks,Us,an,zs,on;ht.d(Et,{AnnotationEditorLayer:()=>at});var h=ht(266),st=ht(115),A=ht(812),H=ht(640);const Xt=class Xt extends st.AnnotationEditor{constructor(n){super({...n,name:"freeTextEditor"});m(this,ft);m(this,dt);m(this,Dt);m(this,Nt);m(this,$t);m(this,Jt);m(this,oe);m(this,T,this.editorDivBlur.bind(this));m(this,q,this.editorDivFocus.bind(this));m(this,B,this.editorDivInput.bind(this));m(this,W,this.editorDivKeydown.bind(this));m(this,K,void 0);m(this,P,"");m(this,Q,`${this.id}-editor`);m(this,S,void 0);m(this,X,null);O(this,K,n.color||Xt._defaultColor||st.AnnotationEditor._defaultLineColor),O(this,S,n.fontSize||Xt._defaultFontSize)}static get _keyboardManager(){const n=Xt.prototype,y=mt=>mt.isEmpty(),et=A.AnnotationEditorUIManager.TRANSLATE_SMALL,ct=A.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new A.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-et,0],checker:y}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-ct,0],checker:y}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[et,0],checker:y}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[ct,0],checker:y}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-et],checker:y}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-ct],checker:y}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,et],checker:y}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,ct],checker:y}]]))}static initialize(n){st.AnnotationEditor.initialize(n,{strings:["pdfjs-free-text-default-content"]});const y=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(y.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,y){switch(n){case h.AnnotationEditorParamsType.FREETEXT_SIZE:Xt._defaultFontSize=y;break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:Xt._defaultColor=y;break}}updateParams(n,y){switch(n){case h.AnnotationEditorParamsType.FREETEXT_SIZE:M(this,ft,zn).call(this,y);break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:M(this,dt,jn).call(this,y);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,Xt._defaultFontSize],[h.AnnotationEditorParamsType.FREETEXT_COLOR,Xt._defaultColor||st.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,S)],[h.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,K)]]}_translateEmpty(n,y){this._uiManager.translateSelectedEditors(n,y,!0)}getInitialTranslation(){const n=this.parentScale;return[-Xt._internalPadding*n,-(Xt._internalPadding+t(this,S))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(h.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,W)),this.editorDiv.addEventListener("focus",t(this,q)),this.editorDiv.addEventListener("blur",t(this,T)),this.editorDiv.addEventListener("input",t(this,B)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,Q)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,W)),this.editorDiv.removeEventListener("focus",t(this,q)),this.editorDiv.removeEventListener("blur",t(this,T)),this.editorDiv.removeEventListener("input",t(this,B)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var n;if(this.width){M(this,oe,Vi).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=t(this,P),y=O(this,P,M(this,Dt,qn).call(this).trimEnd());if(n===y)return;const et=ct=>{if(O(this,P,ct),!ct){this.remove();return}M(this,$t,Wi).call(this),this._uiManager.rebuild(this),M(this,Nt,Gs).call(this)};this.addCommands({cmd:()=>{et(y)},undo:()=>{et(n)},mustExec:!1}),M(this,Nt,Gs).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(n){this.enterInEditMode()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){Xt._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let n,y;this.width&&(n=this.x,y=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,Q)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),st.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(ct=>{var mt;return(mt=this.editorDiv)==null?void 0:mt.setAttribute("default-content",ct)}),this.editorDiv.contentEditable=!0;const{style:et}=this.editorDiv;if(et.fontSize=`calc(${t(this,S)}px * var(--scale-factor))`,et.color=t(this,K),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,A.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ct,mt]=this.parentDimensions;if(this.annotationElementId){const{position:Rt}=t(this,X);let[Ot,wt]=this.getInitialTranslation();[Ot,wt]=this.pageTranslationToScreen(Ot,wt);const[Ht,Vt]=this.pageDimensions,[ge,Ae]=this.pageTranslation;let _e,Ee;switch(this.rotation){case 0:_e=n+(Rt[0]-ge)/Ht,Ee=y+this.height-(Rt[1]-Ae)/Vt;break;case 90:_e=n+(Rt[0]-ge)/Ht,Ee=y-(Rt[1]-Ae)/Vt,[Ot,wt]=[wt,-Ot];break;case 180:_e=n-this.width+(Rt[0]-ge)/Ht,Ee=y-(Rt[1]-Ae)/Vt,[Ot,wt]=[-Ot,-wt];break;case 270:_e=n+(Rt[0]-ge-this.height*Vt)/Ht,Ee=y+(Rt[1]-Ae-this.width*Ht)/Vt,[Ot,wt]=[-wt,Ot];break}this.setAt(_e*ct,Ee*mt,Ot,wt)}else this.setAt(n*ct,y*mt,this.width*ct,this.height*mt);M(this,$t,Wi).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(n,y,et){let ct=null;if(n instanceof H.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Rt,fontColor:Ot},rect:wt,rotation:Ht,id:Vt},textContent:ge,textPosition:Ae,parent:{page:{pageNumber:_e}}}=n;if(!ge||ge.length===0)return null;ct=n={annotationType:h.AnnotationEditorType.FREETEXT,color:Array.from(Ot),fontSize:Rt,value:ge.join(`
`),position:Ae,pageIndex:_e-1,rect:wt,rotation:Ht,id:Vt,deleted:!1}}const mt=super.deserialize(n,y,et);return O(mt,S,n.fontSize),O(mt,K,h.Util.makeHexColor(...n.color)),O(mt,P,n.value),mt.annotationElementId=n.id||null,O(mt,X,ct),mt}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const y=Xt._internalPadding*this.parentScale,et=this.getRect(y,y),ct=st.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,K)),mt={annotationType:h.AnnotationEditorType.FREETEXT,color:ct,fontSize:t(this,S),value:t(this,P),pageIndex:this.pageIndex,rect:et,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?mt:this.annotationElementId&&!M(this,Jt,Wn).call(this,mt)?null:(mt.id=this.annotationElementId,mt)}};T=new WeakMap,q=new WeakMap,B=new WeakMap,W=new WeakMap,K=new WeakMap,P=new WeakMap,Q=new WeakMap,S=new WeakMap,X=new WeakMap,ft=new WeakSet,zn=function(n){const y=ct=>{this.editorDiv.style.fontSize=`calc(${ct}px * var(--scale-factor))`,this.translate(0,-(ct-t(this,S))*this.parentScale),O(this,S,ct),M(this,Nt,Gs).call(this)},et=t(this,S);this.addCommands({cmd:()=>{y(n)},undo:()=>{y(et)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},dt=new WeakSet,jn=function(n){const y=t(this,K);this.addCommands({cmd:()=>{O(this,K,this.editorDiv.style.color=n)},undo:()=>{O(this,K,this.editorDiv.style.color=y)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Dt=new WeakSet,qn=function(){const n=this.editorDiv.getElementsByTagName("div");if(n.length===0)return this.editorDiv.innerText;const y=[];for(const et of n)y.push(et.innerText.replace(/\r\n?|\n/,""));return y.join(`
`)},Nt=new WeakSet,Gs=function(){const[n,y]=this.parentDimensions;let et;if(this.isAttachedToDOM)et=this.div.getBoundingClientRect();else{const{currentLayer:ct,div:mt}=this,Rt=mt.style.display;mt.style.display="hidden",ct.div.append(this.div),et=mt.getBoundingClientRect(),mt.remove(),mt.style.display=Rt}this.rotation%180===this.parentRotation%180?(this.width=et.width/n,this.height=et.height/y):(this.width=et.height/n,this.height=et.width/y),this.fixAndSetPosition()},$t=new WeakSet,Wi=function(){if(this.editorDiv.replaceChildren(),!!t(this,P))for(const n of t(this,P).split(`
`)){const y=document.createElement("div");y.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(y)}},Jt=new WeakSet,Wn=function(n){const{value:y,fontSize:et,color:ct,rect:mt,pageIndex:Rt}=t(this,X);return n.value!==y||n.fontSize!==et||n.rect.some((Ot,wt)=>Math.abs(Ot-mt[wt])>=1)||n.color.some((Ot,wt)=>Ot!==ct[wt])||n.pageIndex!==Rt},oe=new WeakSet,Vi=function(n=!1){if(!this.annotationElementId)return;if(M(this,Nt,Gs).call(this),!n&&(this.width===0||this.height===0)){setTimeout(()=>M(this,oe,Vi).call(this,!0),0);return}const y=Xt._internalPadding*this.parentScale;t(this,X).rect=this.getRect(y,y)},be(Xt,"_freeTextDefaultContent",""),be(Xt,"_internalPadding",0),be(Xt,"_defaultColor",null),be(Xt,"_defaultFontSize",10),be(Xt,"_type","freetext"),be(Xt,"_editorType",h.AnnotationEditorType.FREETEXT);let gt=Xt;var it=ht(97),U=ht(405);const u=class u extends st.AnnotationEditor{constructor(n){var y;super({...n,name:"highlightEditor"});m(this,ye);m(this,s);m(this,f);m(this,b);m(this,a);m(this,E);m(this,re,void 0);m(this,Wt,null);m(this,le,null);m(this,ie,null);m(this,he,null);m(this,jt,null);m(this,me,null);m(this,pe,null);m(this,Zt,void 0);m(this,ne,null);u._defaultColor||(u._defaultColor=((y=this._uiManager.highlightColors)==null?void 0:y.values().next().value)||"#fff066"),this.color=n.color||u._defaultColor,O(this,Zt,n.opacity||u._defaultOpacity),O(this,re,n.boxes||null),this._isDraggable=!1,M(this,ye,Gi).call(this),M(this,b,mi).call(this),this.rotate(this.rotation)}static initialize(n){st.AnnotationEditor.initialize(n)}static updateDefaultParams(n,y){switch(n){case h.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:u._defaultColor=y;break}}get toolbarPosition(){return t(this,pe)}updateParams(n,y){switch(n){case h.AnnotationEditorParamsType.HIGHLIGHT_COLOR:M(this,s,Vn).call(this,y);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,u._defaultColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||u._defaultColor]]}async addEditToolbar(){const n=await super.addEditToolbar();return n?(this._uiManager.highlightColors&&(O(this,le,new it.ColorPicker({editor:this})),n.addColorPicker(t(this,le))),n):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(0)}getRect(n,y){return super.getRect(n,y,0)}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){super.remove(),M(this,f,Xi).call(this)}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(M(this,b,mi).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var et;let y=!1;this.parent&&!n?M(this,f,Xi).call(this):n&&(M(this,b,mi).call(this,n),y=!this.parent&&((et=this.div)==null?void 0:et.classList.contains("selectedEditor"))),super.setParent(n),y&&this.select()}rotate(n){var et,ct;const{drawLayer:y}=this.parent;y.rotate(t(this,me),n),y.rotate(t(this,ne),n),y.updateBox(t(this,me),M(et=u,d,Yi).call(et,this,n)),y.updateBox(t(this,ne),M(ct=u,d,Yi).call(ct,t(this,ie).box,n))}render(){if(this.div)return this.div;const n=super.render(),y=O(this,he,document.createElement("div"));n.append(y),y.className="internal",y.style.clipPath=t(this,Wt);const[et,ct]=this.parentDimensions;return this.setDims(this.width*et,this.height*ct),(0,A.bindEvents)(this,t(this,he),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){this.parent.drawLayer.addClass(t(this,ne),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(t(this,ne),"hovered")}select(){var n,y;super.select(),(n=this.parent)==null||n.drawLayer.removeClass(t(this,ne),"hovered"),(y=this.parent)==null||y.drawLayer.addClass(t(this,ne),"selected")}unselect(){var n;super.unselect(),(n=this.parent)==null||n.drawLayer.removeClass(t(this,ne),"selected")}static deserialize(n,y,et){var ge;const ct=super.deserialize(n,y,et),{rect:mt,color:Rt,quadPoints:Ot}=n;ct.color=h.Util.makeHexColor(...Rt),O(ct,Zt,n.opacity);const[wt,Ht]=ct.pageDimensions;ct.width=(mt[2]-mt[0])/wt,ct.height=(mt[3]-mt[1])/Ht;const Vt=O(ct,re,[]);for(let Ae=0;Ae<Ot.length;Ae+=8)Vt.push({x:Ot[4]/wt,y:1-Ot[Ae+5]/Ht,width:(Ot[Ae+2]-Ot[Ae])/wt,height:(Ot[Ae+5]-Ot[Ae+1])/Ht});return M(ge=ct,ye,Gi).call(ge),ct}serialize(n=!1){if(this.isEmpty()||n)return null;const y=this.getRect(0,0),et=st.AnnotationEditor._colorManager.convert(this.color);return{annotationType:h.AnnotationEditorType.HIGHLIGHT,color:et,opacity:t(this,Zt),quadPoints:M(this,a,Gn).call(this),outlines:M(this,E,Xn).call(this),pageIndex:this.pageIndex,rect:y,rotation:0,structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};re=new WeakMap,Wt=new WeakMap,le=new WeakMap,ie=new WeakMap,he=new WeakMap,jt=new WeakMap,me=new WeakMap,pe=new WeakMap,Zt=new WeakMap,ne=new WeakMap,ye=new WeakSet,Gi=function(){const n=new U.Outliner(t(this,re),.001);O(this,jt,n.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=t(this,jt).box;const y=new U.Outliner(t(this,re),.0025,.001,this._uiManager.direction==="ltr");O(this,ie,y.getOutlines());const{lastPoint:et}=t(this,ie).box;O(this,pe,[(et[0]-this.x)/this.width,(et[1]-this.y)/this.height])},s=new WeakSet,Vn=function(n){const y=this.color;this.addCommands({cmd:()=>{var et;this.color=n,this.parent.drawLayer.changeColor(t(this,me),n),(et=t(this,le))==null||et.updateColor(n)},undo:()=>{var et;this.color=y,this.parent.drawLayer.changeColor(t(this,me),y),(et=t(this,le))==null||et.updateColor(y)},mustExec:!0,type:h.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,Xi=function(){t(this,me)===null||!this.parent||(this.parent.drawLayer.remove(t(this,me)),O(this,me,null),this.parent.drawLayer.remove(t(this,ne)),O(this,ne,null))},b=new WeakSet,mi=function(n=this.parent){t(this,me)===null&&({id:Qe(this,me)._,clipPathId:Qe(this,Wt)._}=n.drawLayer.highlight(t(this,jt),this.color,t(this,Zt)),t(this,he)&&(t(this,he).style.clipPath=t(this,Wt)),O(this,ne,n.drawLayer.highlightOutline(t(this,ie))))},d=new WeakSet,Yi=function({x:n,y,width:et,height:ct},mt){switch(mt){case 90:return{x:1-y-ct,y:n,width:ct,height:et};case 180:return{x:1-n-et,y:1-y-ct,width:et,height:ct};case 270:return{x:y,y:1-n-et,width:ct,height:et}}return{x:n,y,width:et,height:ct}},a=new WeakSet,Gn=function(){const[n,y]=this.pageDimensions,et=t(this,re),ct=new Array(et.length*8);let mt=0;for(const{x:Rt,y:Ot,width:wt,height:Ht}of et){const Vt=Rt*n,ge=(1-Ot-Ht)*y;ct[mt]=ct[mt+4]=Vt,ct[mt+1]=ct[mt+3]=ge,ct[mt+2]=ct[mt+6]=Vt+wt*n,ct[mt+5]=ct[mt+7]=ge+Ht*y,mt+=8}return ct},E=new WeakSet,Xn=function(){const[n,y]=this.pageDimensions,et=this.width*n,ct=this.height*y,mt=this.x*n,Rt=(1-this.y-this.height)*y,Ot=[];for(const wt of t(this,jt).outlines){const Ht=new Array(wt.length);for(let Vt=0;Vt<wt.length;Vt+=2)Ht[Vt]=mt+wt[Vt]*et,Ht[Vt+1]=Rt+(1-wt[Vt+1])*ct;Ot.push(Ht)}return Ot},m(u,d),be(u,"_defaultColor",null),be(u,"_defaultOpacity",1),be(u,"_l10nPromise"),be(u,"_type","highlight"),be(u,"_editorType",h.AnnotationEditorType.HIGHLIGHT);let w=u;var z=ht(473);const ke=class ke extends st.AnnotationEditor{constructor(n){super({...n,name:"inkEditor"});m(this,_t);m(this,Bt);m(this,Ut);m(this,k);m(this,At);m(this,Lt);m(this,p);m(this,r);m(this,F);m(this,rt);m(this,kt);m(this,zt);m(this,Pt);m(this,qt);m(this,ce);m(this,Ce);m(this,Me);m(this,Fe);m(this,Oe);m(this,si);m(this,Ms);m(this,bs);m(this,es);m(this,_,0);m(this,j,0);m(this,x,this.canvasPointermove.bind(this));m(this,N,this.canvasPointerleave.bind(this));m(this,Z,this.canvasPointerup.bind(this));m(this,J,this.canvasPointerdown.bind(this));m(this,Y,null);m(this,lt,new Path2D);m(this,I,!1);m(this,g,!1);m(this,L,!1);m(this,V,null);m(this,ot,0);m(this,ut,0);m(this,bt,null);this.color=n.color||null,this.thickness=n.thickness||null,this.opacity=n.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(n){st.AnnotationEditor.initialize(n)}static updateDefaultParams(n,y){switch(n){case h.AnnotationEditorParamsType.INK_THICKNESS:ke._defaultThickness=y;break;case h.AnnotationEditorParamsType.INK_COLOR:ke._defaultColor=y;break;case h.AnnotationEditorParamsType.INK_OPACITY:ke._defaultOpacity=y/100;break}}updateParams(n,y){switch(n){case h.AnnotationEditorParamsType.INK_THICKNESS:M(this,_t,Yn).call(this,y);break;case h.AnnotationEditorParamsType.INK_COLOR:M(this,Bt,Kn).call(this,y);break;case h.AnnotationEditorParamsType.INK_OPACITY:M(this,Ut,$n).call(this,y);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,ke._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,ke._defaultColor||st.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(ke._defaultOpacity*100)]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ke._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,this.color||ke._defaultColor||st.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ke._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(M(this,ce,bi).call(this),M(this,Ce,vi).call(this)),this.isAttachedToDOM||(this.parent.add(this),M(this,Me,Ts).call(this)),M(this,es,ks).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,Y)&&(clearTimeout(t(this,Y)),O(this,Y,null)),t(this,V).disconnect(),O(this,V,null),super.remove())}setParent(n){!this.parent&&n?this._uiManager.removeShouldRescale(this):this.parent&&n===null&&this._uiManager.addShouldRescale(this),super.setParent(n)}onScaleChanging(){const[n,y]=this.parentDimensions,et=this.width*n,ct=this.height*y;this.setDimensions(et,ct)}enableEditMode(){t(this,I)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,J)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,J)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,I)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),O(this,I,!0),this.div.classList.add("disabled"),M(this,es,ks).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(n){this._focusEventsAllowed&&(super.focusin(n),this.enableEditMode())}canvasPointerdown(n){n.button!==0||!this.isInEditMode()||t(this,I)||(this.setInForeground(),n.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),M(this,Lt,Qn).call(this,n.offsetX,n.offsetY))}canvasPointermove(n){n.preventDefault(),M(this,p,$i).call(this,n.offsetX,n.offsetY)}canvasPointerup(n){n.preventDefault(),M(this,qt,Ji).call(this,n)}canvasPointerleave(n){M(this,qt,Ji).call(this,n)}get isResizable(){return!this.isEmpty()&&t(this,I)}render(){if(this.div)return this.div;let n,y;this.width&&(n=this.x,y=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[et,ct,mt,Rt]=M(this,k,Jn).call(this);if(this.setAt(et,ct,0,0),this.setDims(mt,Rt),M(this,ce,bi).call(this),this.width){const[Ot,wt]=this.parentDimensions;this.setAspectRatio(this.width*Ot,this.height*wt),this.setAt(n*Ot,y*wt,this.width*Ot,this.height*wt),O(this,L,!0),M(this,Me,Ts).call(this),this.setDims(this.width*Ot,this.height*wt),M(this,Pt,Ze).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return M(this,Ce,vi).call(this),this.div}setDimensions(n,y){const et=Math.round(n),ct=Math.round(y);if(t(this,ot)===et&&t(this,ut)===ct)return;O(this,ot,et),O(this,ut,ct),this.canvas.style.visibility="hidden";const[mt,Rt]=this.parentDimensions;this.width=n/mt,this.height=y/Rt,this.fixAndSetPosition(),t(this,I)&&M(this,Fe,Qi).call(this,n,y),M(this,Me,Ts).call(this),M(this,Pt,Ze).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(n,y,et){var fs,We,Ve;if(n instanceof H.InkAnnotationElement)return null;const ct=super.deserialize(n,y,et);ct.thickness=n.thickness,ct.color=h.Util.makeHexColor(...n.color),ct.opacity=n.opacity;const[mt,Rt]=ct.pageDimensions,Ot=ct.width*mt,wt=ct.height*Rt,Ht=ct.parentScale,Vt=n.thickness/2;O(ct,I,!0),O(ct,ot,Math.round(Ot)),O(ct,ut,Math.round(wt));const{paths:ge,rect:Ae,rotation:_e}=n;for(let{bezier:Ie}of ge){Ie=M(fs=ke,ei,rr).call(fs,Ie,Ae,_e);const as=[];ct.paths.push(as);let js=Ht*(Ie[0]-Vt),qs=Ht*(Ie[1]-Vt);for(let je=2,Mi=Ie.length;je<Mi;je+=6){const Pi=Ht*(Ie[je]-Vt),hi=Ht*(Ie[je+1]-Vt),li=Ht*(Ie[je+2]-Vt),na=Ht*(Ie[je+3]-Vt),In=Ht*(Ie[je+4]-Vt),Fn=Ht*(Ie[je+5]-Vt);as.push([[js,qs],[Pi,hi],[li,na],[In,Fn]]),js=In,qs=Fn}const oi=M(this,ue,nr).call(this,as);ct.bezierPath2D.push(oi)}const Ee=M(We=ct,Ms,tn).call(We);return O(ct,j,Math.max(st.AnnotationEditor.MIN_SIZE,Ee[2]-Ee[0])),O(ct,_,Math.max(st.AnnotationEditor.MIN_SIZE,Ee[3]-Ee[1])),M(Ve=ct,Fe,Qi).call(Ve,Ot,wt),ct}serialize(){if(this.isEmpty())return null;const n=this.getRect(0,0),y=st.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:h.AnnotationEditorType.INK,color:y,thickness:this.thickness,opacity:this.opacity,paths:M(this,si,ar).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,n),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};_=new WeakMap,j=new WeakMap,x=new WeakMap,N=new WeakMap,Z=new WeakMap,J=new WeakMap,Y=new WeakMap,lt=new WeakMap,I=new WeakMap,g=new WeakMap,L=new WeakMap,V=new WeakMap,ot=new WeakMap,ut=new WeakMap,bt=new WeakMap,_t=new WeakSet,Yn=function(n){const y=this.thickness;this.addCommands({cmd:()=>{this.thickness=n,M(this,es,ks).call(this)},undo:()=>{this.thickness=y,M(this,es,ks).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Bt=new WeakSet,Kn=function(n){const y=this.color;this.addCommands({cmd:()=>{this.color=n,M(this,Pt,Ze).call(this)},undo:()=>{this.color=y,M(this,Pt,Ze).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ut=new WeakSet,$n=function(n){n/=100;const y=this.opacity;this.addCommands({cmd:()=>{this.opacity=n,M(this,Pt,Ze).call(this)},undo:()=>{this.opacity=y,M(this,Pt,Ze).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},k=new WeakSet,Jn=function(){const{parentRotation:n,parentDimensions:[y,et]}=this;switch(n){case 90:return[0,et,et,y];case 180:return[y,et,y,et];case 270:return[y,0,et,y];default:return[0,0,y,et]}},At=new WeakSet,Ki=function(){const{ctx:n,color:y,opacity:et,thickness:ct,parentScale:mt,scaleFactor:Rt}=this;n.lineWidth=ct*mt/Rt,n.lineCap="round",n.lineJoin="round",n.miterLimit=10,n.strokeStyle=`${y}${(0,A.opacityToHex)(et)}`},Lt=new WeakSet,Qn=function(n,y){this.canvas.addEventListener("contextmenu",z.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,N)),this.canvas.addEventListener("pointermove",t(this,x)),this.canvas.addEventListener("pointerup",t(this,Z)),this.canvas.removeEventListener("pointerdown",t(this,J)),this.isEditing=!0,t(this,L)||(O(this,L,!0),M(this,Me,Ts).call(this),this.thickness||(this.thickness=ke._defaultThickness),this.color||(this.color=ke._defaultColor||st.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ke._defaultOpacity)),this.currentPath.push([n,y]),O(this,g,!1),M(this,At,Ki).call(this),O(this,bt,()=>{M(this,rt,er).call(this),t(this,bt)&&window.requestAnimationFrame(t(this,bt))}),window.requestAnimationFrame(t(this,bt))},p=new WeakSet,$i=function(n,y){const[et,ct]=this.currentPath.at(-1);if(this.currentPath.length>1&&n===et&&y===ct)return;const mt=this.currentPath;let Rt=t(this,lt);if(mt.push([n,y]),O(this,g,!0),mt.length<=2){Rt.moveTo(...mt[0]),Rt.lineTo(n,y);return}mt.length===3&&(O(this,lt,Rt=new Path2D),Rt.moveTo(...mt[0])),M(this,kt,sr).call(this,Rt,...mt.at(-3),...mt.at(-2),n,y)},r=new WeakSet,Zn=function(){if(this.currentPath.length===0)return;const n=this.currentPath.at(-1);t(this,lt).lineTo(...n)},F=new WeakSet,tr=function(n,y){O(this,bt,null),n=Math.min(Math.max(n,0),this.canvas.width),y=Math.min(Math.max(y,0),this.canvas.height),M(this,p,$i).call(this,n,y),M(this,r,Zn).call(this);let et;if(this.currentPath.length!==1)et=M(this,zt,ir).call(this);else{const wt=[n,y];et=[[wt,wt.slice(),wt.slice(),wt]]}const ct=t(this,lt),mt=this.currentPath;this.currentPath=[],O(this,lt,new Path2D);const Rt=()=>{this.allRawPaths.push(mt),this.paths.push(et),this.bezierPath2D.push(ct),this.rebuild()},Ot=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(M(this,ce,bi).call(this),M(this,Ce,vi).call(this)),M(this,es,ks).call(this))};this.addCommands({cmd:Rt,undo:Ot,mustExec:!0})},rt=new WeakSet,er=function(){if(!t(this,g))return;O(this,g,!1);const n=Math.ceil(this.thickness*this.parentScale),y=this.currentPath.slice(-3),et=y.map(Rt=>Rt[0]),ct=y.map(Rt=>Rt[1]);Math.min(...et)-n,Math.max(...et)+n,Math.min(...ct)-n,Math.max(...ct)+n;const{ctx:mt}=this;mt.save(),mt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Rt of this.bezierPath2D)mt.stroke(Rt);mt.stroke(t(this,lt)),mt.restore()},kt=new WeakSet,sr=function(n,y,et,ct,mt,Rt,Ot){const wt=(y+ct)/2,Ht=(et+mt)/2,Vt=(ct+Rt)/2,ge=(mt+Ot)/2;n.bezierCurveTo(wt+2*(ct-wt)/3,Ht+2*(mt-Ht)/3,Vt+2*(ct-Vt)/3,ge+2*(mt-ge)/3,Vt,ge)},zt=new WeakSet,ir=function(){const n=this.currentPath;if(n.length<=2)return[[n[0],n[0],n.at(-1),n.at(-1)]];const y=[];let et,[ct,mt]=n[0];for(et=1;et<n.length-2;et++){const[Ae,_e]=n[et],[Ee,fs]=n[et+1],We=(Ae+Ee)/2,Ve=(_e+fs)/2,Ie=[ct+2*(Ae-ct)/3,mt+2*(_e-mt)/3],as=[We+2*(Ae-We)/3,Ve+2*(_e-Ve)/3];y.push([[ct,mt],Ie,as,[We,Ve]]),[ct,mt]=[We,Ve]}const[Rt,Ot]=n[et],[wt,Ht]=n[et+1],Vt=[ct+2*(Rt-ct)/3,mt+2*(Ot-mt)/3],ge=[wt+2*(Rt-wt)/3,Ht+2*(Ot-Ht)/3];return y.push([[ct,mt],Vt,ge,[wt,Ht]]),y},Pt=new WeakSet,Ze=function(){if(this.isEmpty()){M(this,Oe,Ai).call(this);return}M(this,At,Ki).call(this);const{canvas:n,ctx:y}=this;y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,n.width,n.height),M(this,Oe,Ai).call(this);for(const et of this.bezierPath2D)y.stroke(et)},qt=new WeakSet,Ji=function(n){this.canvas.removeEventListener("pointerleave",t(this,N)),this.canvas.removeEventListener("pointermove",t(this,x)),this.canvas.removeEventListener("pointerup",t(this,Z)),this.canvas.addEventListener("pointerdown",t(this,J)),t(this,Y)&&clearTimeout(t(this,Y)),O(this,Y,setTimeout(()=>{O(this,Y,null),this.canvas.removeEventListener("contextmenu",z.noContextMenu)},10)),M(this,F,tr).call(this,n.offsetX,n.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ce=new WeakSet,bi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ce=new WeakSet,vi=function(){O(this,V,new ResizeObserver(n=>{const y=n[0].contentRect;y.width&&y.height&&this.setDimensions(y.width,y.height)})),t(this,V).observe(this.div)},Me=new WeakSet,Ts=function(){if(!t(this,L))return;const[n,y]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*n),this.canvas.height=Math.ceil(this.height*y),M(this,Oe,Ai).call(this)},Fe=new WeakSet,Qi=function(n,y){const et=M(this,bs,yi).call(this),ct=(n-et)/t(this,j),mt=(y-et)/t(this,_);this.scaleFactor=Math.min(ct,mt)},Oe=new WeakSet,Ai=function(){const n=M(this,bs,yi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+n,this.translationY*this.scaleFactor+n)},ue=new WeakSet,nr=function(n){const y=new Path2D;for(let et=0,ct=n.length;et<ct;et++){const[mt,Rt,Ot,wt]=n[et];et===0&&y.moveTo(...mt),y.bezierCurveTo(Rt[0],Rt[1],Ot[0],Ot[1],wt[0],wt[1])}return y},Rs=new WeakSet,Zi=function(n,y,et){const[ct,mt,Rt,Ot]=y;switch(et){case 0:for(let wt=0,Ht=n.length;wt<Ht;wt+=2)n[wt]+=ct,n[wt+1]=Ot-n[wt+1];break;case 90:for(let wt=0,Ht=n.length;wt<Ht;wt+=2){const Vt=n[wt];n[wt]=n[wt+1]+ct,n[wt+1]=Vt+mt}break;case 180:for(let wt=0,Ht=n.length;wt<Ht;wt+=2)n[wt]=Rt-n[wt],n[wt+1]+=mt;break;case 270:for(let wt=0,Ht=n.length;wt<Ht;wt+=2){const Vt=n[wt];n[wt]=Rt-n[wt+1],n[wt+1]=Ot-Vt}break;default:throw new Error("Invalid rotation")}return n},ei=new WeakSet,rr=function(n,y,et){const[ct,mt,Rt,Ot]=y;switch(et){case 0:for(let wt=0,Ht=n.length;wt<Ht;wt+=2)n[wt]-=ct,n[wt+1]=Ot-n[wt+1];break;case 90:for(let wt=0,Ht=n.length;wt<Ht;wt+=2){const Vt=n[wt];n[wt]=n[wt+1]-mt,n[wt+1]=Vt-ct}break;case 180:for(let wt=0,Ht=n.length;wt<Ht;wt+=2)n[wt]=Rt-n[wt],n[wt+1]-=mt;break;case 270:for(let wt=0,Ht=n.length;wt<Ht;wt+=2){const Vt=n[wt];n[wt]=Ot-n[wt+1],n[wt+1]=Rt-Vt}break;default:throw new Error("Invalid rotation")}return n},si=new WeakSet,ar=function(n,y,et,ct){var Ht,Vt;const mt=[],Rt=this.thickness/2,Ot=n*y+Rt,wt=n*et+Rt;for(const ge of this.paths){const Ae=[],_e=[];for(let Ee=0,fs=ge.length;Ee<fs;Ee++){const[We,Ve,Ie,as]=ge[Ee],js=n*We[0]+Ot,qs=n*We[1]+wt,oi=n*Ve[0]+Ot,je=n*Ve[1]+wt,Mi=n*Ie[0]+Ot,Pi=n*Ie[1]+wt,hi=n*as[0]+Ot,li=n*as[1]+wt;Ee===0&&(Ae.push(js,qs),_e.push(js,qs)),Ae.push(oi,je,Mi,Pi,hi,li),_e.push(oi,je),Ee===fs-1&&_e.push(hi,li)}mt.push({bezier:M(Ht=ke,Rs,Zi).call(Ht,Ae,ct,this.rotation),points:M(Vt=ke,Rs,Zi).call(Vt,_e,ct,this.rotation)})}return mt},Ms=new WeakSet,tn=function(){let n=1/0,y=-1/0,et=1/0,ct=-1/0;for(const mt of this.paths)for(const[Rt,Ot,wt,Ht]of mt){const Vt=h.Util.bezierBoundingBox(...Rt,...Ot,...wt,...Ht);n=Math.min(n,Vt[0]),et=Math.min(et,Vt[1]),y=Math.max(y,Vt[2]),ct=Math.max(ct,Vt[3])}return[n,et,y,ct]},bs=new WeakSet,yi=function(){return t(this,I)?Math.ceil(this.thickness*this.parentScale):0},es=new WeakSet,ks=function(n=!1){if(this.isEmpty())return;if(!t(this,I)){M(this,Pt,Ze).call(this);return}const y=M(this,Ms,tn).call(this),et=M(this,bs,yi).call(this);O(this,j,Math.max(st.AnnotationEditor.MIN_SIZE,y[2]-y[0])),O(this,_,Math.max(st.AnnotationEditor.MIN_SIZE,y[3]-y[1]));const ct=Math.ceil(et+t(this,j)*this.scaleFactor),mt=Math.ceil(et+t(this,_)*this.scaleFactor),[Rt,Ot]=this.parentDimensions;this.width=ct/Rt,this.height=mt/Ot,this.setAspectRatio(ct,mt);const wt=this.translationX,Ht=this.translationY;this.translationX=-y[0],this.translationY=-y[1],M(this,Me,Ts).call(this),M(this,Pt,Ze).call(this),O(this,ot,ct),O(this,ut,mt),this.setDims(ct,mt);const Vt=n?et/this.scaleFactor/2:0;this.translate(wt-this.translationX-Vt,Ht-this.translationY-Vt)},m(ke,ue),m(ke,Rs),m(ke,ei),be(ke,"_defaultColor",null),be(ke,"_defaultOpacity",1),be(ke,"_defaultThickness",1),be(ke,"_type","ink"),be(ke,"_editorType",h.AnnotationEditorType.INK);let G=ke;const Is=class Is extends st.AnnotationEditor{constructor(n){super({...n,name:"stampEditor"});m(this,ds);m(this,us);m(this,As);m(this,Ls);m(this,ii);m(this,ni);m(this,Ds);m(this,ys);m(this,ri);m(this,Le,null);m(this,De,null);m(this,ss,null);m(this,Xe,null);m(this,is,null);m(this,vs,"");m(this,Ye,null);m(this,cs,null);m(this,qe,null);m(this,Ue,!1);m(this,Ps,!1);O(this,Xe,n.bitmapUrl),O(this,is,n.bitmapFile)}static initialize(n){st.AnnotationEditor.initialize(n)}static get supportedTypes(){const n=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,h.shadow)(this,"supportedTypes",n.map(y=>`image/${y}`))}static get supportedTypesStr(){return(0,h.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(n){return this.supportedTypes.includes(n)}static paste(n,y){y.pasteEditor(h.AnnotationEditorType.STAMP,{bitmapFile:n.getAsFile()})}remove(){var n,y;t(this,De)&&(O(this,Le,null),this._uiManager.imageManager.deleteId(t(this,De)),(n=t(this,Ye))==null||n.remove(),O(this,Ye,null),(y=t(this,cs))==null||y.disconnect(),O(this,cs,null),t(this,qe)&&(clearTimeout(t(this,qe)),O(this,qe,null))),super.remove()}rebuild(){if(!this.parent){t(this,De)&&M(this,As,wi).call(this);return}super.rebuild(),this.div!==null&&(t(this,De)&&M(this,As,wi).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,ss)||t(this,Le)||t(this,Xe)||t(this,is))}get isResizable(){return!0}render(){if(this.div)return this.div;let n,y;if(this.width&&(n=this.x,y=this.y),super.render(),this.div.hidden=!0,t(this,Le)?M(this,Ls,en).call(this):M(this,As,wi).call(this),this.width){const[et,ct]=this.parentDimensions;this.setAt(n*et,y*ct,this.width*et,this.height*ct)}return this.div}getImageForAltText(){return t(this,Ye)}static deserialize(n,y,et){if(n instanceof H.StampAnnotationElement)return null;const ct=super.deserialize(n,y,et),{rect:mt,bitmapUrl:Rt,bitmapId:Ot,isSvg:wt,accessibilityData:Ht}=n;Ot&&et.imageManager.isValidId(Ot)?O(ct,De,Ot):O(ct,Xe,Rt),O(ct,Ue,wt);const[Vt,ge]=ct.pageDimensions;return ct.width=(mt[2]-mt[0])/Vt,ct.height=(mt[3]-mt[1])/ge,Ht&&(ct.altTextData=Ht),ct}serialize(n=!1,y=null){if(this.isEmpty())return null;const et={annotationType:h.AnnotationEditorType.STAMP,bitmapId:t(this,De),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,Ue),structTreeParentId:this._structTreeParentId};if(n)return et.bitmapUrl=M(this,ys,xi).call(this,!0),et.accessibilityData=this.altTextData,et;const{decorative:ct,altText:mt}=this.altTextData;if(!ct&&mt&&(et.accessibilityData={type:"Figure",alt:mt}),y===null)return et;y.stamps||(y.stamps=new Map);const Rt=t(this,Ue)?(et.rect[2]-et.rect[0])*(et.rect[3]-et.rect[1]):null;if(!y.stamps.has(t(this,De)))y.stamps.set(t(this,De),{area:Rt,serialized:et}),et.bitmap=M(this,ys,xi).call(this,!1);else if(t(this,Ue)){const Ot=y.stamps.get(t(this,De));Rt>Ot.area&&(Ot.area=Rt,Ot.serialized.bitmap.close(),Ot.serialized.bitmap=M(this,ys,xi).call(this,!1))}return et}};Le=new WeakMap,De=new WeakMap,ss=new WeakMap,Xe=new WeakMap,is=new WeakMap,vs=new WeakMap,Ye=new WeakMap,cs=new WeakMap,qe=new WeakMap,Ue=new WeakMap,Ps=new WeakMap,ds=new WeakSet,Xs=function(n,y=!1){if(!n){this.remove();return}O(this,Le,n.bitmap),y||(O(this,De,n.id),O(this,Ue,n.isSvg)),n.file&&O(this,vs,n.file.name),M(this,Ls,en).call(this)},us=new WeakSet,Ys=function(){O(this,ss,null),this._uiManager.enableWaiting(!1),t(this,Ye)&&this.div.focus()},As=new WeakSet,wi=function(){if(t(this,De)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,De)).then(y=>M(this,ds,Xs).call(this,y,!0)).finally(()=>M(this,us,Ys).call(this));return}if(t(this,Xe)){const y=t(this,Xe);O(this,Xe,null),this._uiManager.enableWaiting(!0),O(this,ss,this._uiManager.imageManager.getFromUrl(y).then(et=>M(this,ds,Xs).call(this,et)).finally(()=>M(this,us,Ys).call(this)));return}if(t(this,is)){const y=t(this,is);O(this,is,null),this._uiManager.enableWaiting(!0),O(this,ss,this._uiManager.imageManager.getFromFile(y).then(et=>M(this,ds,Xs).call(this,et)).finally(()=>M(this,us,Ys).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=Is.supportedTypesStr,O(this,ss,new Promise(y=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const et=await this._uiManager.imageManager.getFromFile(n.files[0]);M(this,ds,Xs).call(this,et)}y()}),n.addEventListener("cancel",()=>{this.remove(),y()})}).finally(()=>M(this,us,Ys).call(this))),n.click()},Ls=new WeakSet,en=function(){const{div:n}=this;let{width:y,height:et}=t(this,Le);const[ct,mt]=this.pageDimensions,Rt=.75;if(this.width)y=this.width*ct,et=this.height*mt;else if(y>Rt*ct||et>Rt*mt){const Vt=Math.min(Rt*ct/y,Rt*mt/et);y*=Vt,et*=Vt}const[Ot,wt]=this.parentDimensions;this.setDims(y*Ot/ct,et*wt/mt),this._uiManager.enableWaiting(!1);const Ht=O(this,Ye,document.createElement("canvas"));n.append(Ht),n.hidden=!1,M(this,Ds,sn).call(this,y,et),M(this,ri,lr).call(this),t(this,Ps)||(this.parent.addUndoableEditor(this),O(this,Ps,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton(),t(this,vs)&&Ht.setAttribute("aria-label",t(this,vs))},ii=new WeakSet,or=function(n,y){var Rt;const[et,ct]=this.parentDimensions;this.width=n/et,this.height=y/ct,this.setDims(n,y),(Rt=this._initialOptions)!=null&&Rt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,qe)!==null&&clearTimeout(t(this,qe)),O(this,qe,setTimeout(()=>{O(this,qe,null),M(this,Ds,sn).call(this,n,y)},200))},ni=new WeakSet,hr=function(n,y){const{width:et,height:ct}=t(this,Le);let mt=et,Rt=ct,Ot=t(this,Le);for(;mt>2*n||Rt>2*y;){const wt=mt,Ht=Rt;mt>2*n&&(mt=mt>=16384?Math.floor(mt/2)-1:Math.ceil(mt/2)),Rt>2*y&&(Rt=Rt>=16384?Math.floor(Rt/2)-1:Math.ceil(Rt/2));const Vt=new OffscreenCanvas(mt,Rt);Vt.getContext("2d").drawImage(Ot,0,0,wt,Ht,0,0,mt,Rt),Ot=Vt.transferToImageBitmap()}return Ot},Ds=new WeakSet,sn=function(n,y){n=Math.ceil(n),y=Math.ceil(y);const et=t(this,Ye);if(!et||et.width===n&&et.height===y)return;et.width=n,et.height=y;const ct=t(this,Ue)?t(this,Le):M(this,ni,hr).call(this,n,y),mt=et.getContext("2d");mt.filter=this._uiManager.hcmFilter,mt.drawImage(ct,0,0,ct.width,ct.height,0,0,n,y)},ys=new WeakSet,xi=function(n){if(n){if(t(this,Ue)){const et=this._uiManager.imageManager.getSvgUrl(t(this,De));if(et)return et}const y=document.createElement("canvas");return{width:y.width,height:y.height}=t(this,Le),y.getContext("2d").drawImage(t(this,Le),0,0),y.toDataURL()}if(t(this,Ue)){const[y,et]=this.pageDimensions,ct=Math.round(this.width*y*z.PixelsPerInch.PDF_TO_CSS_UNITS),mt=Math.round(this.height*et*z.PixelsPerInch.PDF_TO_CSS_UNITS),Rt=new OffscreenCanvas(ct,mt);return Rt.getContext("2d").drawImage(t(this,Le),0,0,t(this,Le).width,t(this,Le).height,0,0,ct,mt),Rt.transferToImageBitmap()}return structuredClone(t(this,Le))},ri=new WeakSet,lr=function(){O(this,cs,new ResizeObserver(n=>{const y=n[0].contentRect;y.width&&y.height&&M(this,ii,or).call(this,y.width,y.height)})),t(this,cs).observe(this.div)},be(Is,"_type","stamp"),be(Is,"_editorType",h.AnnotationEditorType.STAMP);let D=Is;const ze=class ze{constructor({uiManager:pt,pageIndex:n,div:y,accessibilityManager:et,annotationLayer:ct,drawLayer:mt,textLayer:Rt,viewport:Ot,l10n:wt}){m(this,Bs);m(this,Hs);m(this,gs);m(this,Us);m(this,zs);m(this,ps,void 0);m(this,ws,!1);m(this,Ke,null);m(this,Fs,this.pointerup.bind(this));m(this,ai,this.pointerUpAfterSelection.bind(this));m(this,Os,this.pointerdown.bind(this));m(this,$e,null);m(this,Ns,this.selectionStart.bind(this));m(this,Ne,new Map);m(this,ns,!1);m(this,xs,!1);m(this,_s,!1);m(this,Je,null);m(this,de,void 0);const Ht=[...t(ze,rs).values()];if(!ze._initialized){ze._initialized=!0;for(const Vt of Ht)Vt.initialize(wt)}pt.registerEditorTypes(Ht),O(this,de,pt),this.pageIndex=n,this.div=y,O(this,ps,et),O(this,Ke,ct),this.viewport=Ot,O(this,Je,Rt),this.drawLayer=mt,t(this,de).addLayer(this)}get isEmpty(){return t(this,Ne).size===0}updateToolbar(pt){t(this,de).updateToolbar(pt)}updateMode(pt=t(this,de).getMode()){switch(M(this,zs,on).call(this),pt){case h.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;case h.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case h.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}if(pt!==h.AnnotationEditorType.NONE){const{classList:n}=this.div;for(const y of t(ze,rs).values())n.toggle(`${y._type}Editing`,pt===y._editorType);this.div.hidden=!1}}addInkEditorIfNeeded(pt){if(t(this,de).getMode()===h.AnnotationEditorType.INK){if(!pt){for(const n of t(this,Ne).values())if(n.isEmpty()){n.setInBackground();return}}M(this,gs,Ks).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(pt){t(this,de).setEditingState(pt)}addCommands(pt){t(this,de).addCommands(pt)}togglePointerEvents(pt=!1){this.div.classList.toggle("disabled",!pt)}enable(){this.togglePointerEvents(!0);const pt=new Set;for(const y of t(this,Ne).values())y.enableEditing(),y.annotationElementId&&pt.add(y.annotationElementId);if(!t(this,Ke))return;const n=t(this,Ke).getEditableAnnotations();for(const y of n){if(y.hide(),t(this,de).isDeletedAnnotationElement(y.data.id)||pt.has(y.data.id))continue;const et=this.deserialize(y);et&&(this.addOrRebuild(et),et.enableEditing())}}disable(){var y;O(this,_s,!0),this.togglePointerEvents(!1);const pt=new Set;for(const et of t(this,Ne).values()){if(et.disableEditing(),!et.annotationElementId||et.serialize()!==null){pt.add(et.annotationElementId);continue}(y=this.getEditableAnnotation(et.annotationElementId))==null||y.show(),et.remove()}if(t(this,Ke)){const et=t(this,Ke).getEditableAnnotations();for(const ct of et){const{id:mt}=ct.data;pt.has(mt)||t(this,de).isDeletedAnnotationElement(mt)||ct.show()}}M(this,zs,on).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const et of t(ze,rs).values())n.remove(`${et._type}Editing`);this.disableTextSelection(),O(this,_s,!1)}getEditableAnnotation(pt){var n;return((n=t(this,Ke))==null?void 0:n.getEditableAnnotation(pt))||null}setActiveEditor(pt){t(this,de).getActive()!==pt&&t(this,de).setActiveEditor(pt)}enableTextSelection(){var pt;(pt=t(this,Je))!=null&&pt.div&&document.addEventListener("selectstart",t(this,Ns))}disableTextSelection(){var pt;(pt=t(this,Je))!=null&&pt.div&&document.removeEventListener("selectstart",t(this,Ns))}enableClick(){this.div.addEventListener("pointerdown",t(this,Os)),this.div.addEventListener("pointerup",t(this,Fs))}disableClick(){this.div.removeEventListener("pointerdown",t(this,Os)),this.div.removeEventListener("pointerup",t(this,Fs))}attach(pt){t(this,Ne).set(pt.id,pt);const{annotationElementId:n}=pt;n&&t(this,de).isDeletedAnnotationElement(n)&&t(this,de).removeDeletedAnnotationElement(pt)}detach(pt){var n;t(this,Ne).delete(pt.id),(n=t(this,ps))==null||n.removePointerInTextLayer(pt.contentDiv),!t(this,_s)&&pt.annotationElementId&&t(this,de).addDeletedAnnotationElement(pt)}remove(pt){this.detach(pt),t(this,de).removeEditor(pt),pt.div.remove(),pt.isAttachedToDOM=!1,t(this,xs)||this.addInkEditorIfNeeded(!1)}changeParent(pt){var n;pt.parent!==this&&(pt.annotationElementId&&(t(this,de).addDeletedAnnotationElement(pt.annotationElementId),st.AnnotationEditor.deleteAnnotationElement(pt),pt.annotationElementId=null),this.attach(pt),(n=pt.parent)==null||n.detach(pt),pt.setParent(this),pt.div&&pt.isAttachedToDOM&&(pt.div.remove(),this.div.append(pt.div)))}add(pt){if(this.changeParent(pt),t(this,de).addEditor(pt),this.attach(pt),!pt.isAttachedToDOM){const n=pt.render();this.div.append(n),pt.isAttachedToDOM=!0}pt.fixAndSetPosition(),pt.onceAdded(),t(this,de).addToAnnotationStorage(pt)}moveEditorInDOM(pt){var y;if(!pt.isAttachedToDOM)return;const{activeElement:n}=document;pt.div.contains(n)&&!t(this,$e)&&(pt._focusEventsAllowed=!1,O(this,$e,setTimeout(()=>{O(this,$e,null),pt.div.contains(document.activeElement)?pt._focusEventsAllowed=!0:(pt.div.addEventListener("focusin",()=>{pt._focusEventsAllowed=!0},{once:!0}),n.focus())},0))),pt._structTreeParentId=(y=t(this,ps))==null?void 0:y.moveElementInDOM(this.div,pt.div,pt.contentDiv,!0)}addOrRebuild(pt){pt.needsToBeRebuilt()?(pt.parent||(pt.parent=this),pt.rebuild()):this.add(pt)}addUndoableEditor(pt){const n=()=>pt._uiManager.rebuild(pt),y=()=>{pt.remove()};this.addCommands({cmd:n,undo:y,mustExec:!1})}getNextId(){return t(this,de).getId()}canCreateNewEmptyEditor(){var pt;return(pt=t(this,Bs,nn))==null?void 0:pt.canCreateNewEmptyEditor()}pasteEditor(pt,n){t(this,de).updateToolbar(pt),t(this,de).updateMode(pt);const{offsetX:y,offsetY:et}=M(this,Us,an).call(this),ct=this.getNextId(),mt=M(this,Hs,rn).call(this,{parent:this,id:ct,x:y,y:et,uiManager:t(this,de),isCentered:!0,...n});mt&&this.add(mt)}deserialize(pt){var n;return((n=t(ze,rs).get(pt.annotationType??pt.annotationEditorType))==null?void 0:n.deserialize(pt,this,t(this,de)))||null}addNewEditor(){M(this,gs,Ks).call(this,M(this,Us,an).call(this),!0)}setSelected(pt){t(this,de).setSelected(pt)}toggleSelected(pt){t(this,de).toggleSelected(pt)}isSelected(pt){return t(this,de).isSelected(pt)}unselect(pt){t(this,de).unselect(pt)}selectionStart(pt){var n;(n=t(this,Je))==null||n.div.addEventListener("pointerup",t(this,ai),{once:!0})}pointerUpAfterSelection(pt){var Vt;const n=document.getSelection();if(n.rangeCount===0)return;const y=n.getRangeAt(0);if(y.collapsed||!((Vt=t(this,Je))!=null&&Vt.div.contains(y.commonAncestorContainer)))return;const{x:et,y:ct,width:mt,height:Rt}=t(this,Je).div.getBoundingClientRect(),Ot=y.getClientRects();let wt;switch(this.viewport.rotation){case 90:wt=(ge,Ae,_e,Ee)=>({x:(Ae-ct)/Rt,y:1-(ge+_e-et)/mt,width:Ee/Rt,height:_e/mt});break;case 180:wt=(ge,Ae,_e,Ee)=>({x:1-(ge+_e-et)/mt,y:1-(Ae+Ee-ct)/Rt,width:_e/mt,height:Ee/Rt});break;case 270:wt=(ge,Ae,_e,Ee)=>({x:1-(Ae+Ee-ct)/Rt,y:(ge-et)/mt,width:Ee/Rt,height:_e/mt});break;default:wt=(ge,Ae,_e,Ee)=>({x:(ge-et)/mt,y:(Ae-ct)/Rt,width:_e/mt,height:Ee/Rt});break}const Ht=[];for(const{x:ge,y:Ae,width:_e,height:Ee}of Ot)_e===0||Ee===0||Ht.push(wt(ge,Ae,_e,Ee));Ht.length!==0&&M(this,gs,Ks).call(this,pt,!1,{boxes:Ht}),n.empty()}pointerup(pt){const{isMac:n}=h.FeatureTest.platform;if(!(pt.button!==0||pt.ctrlKey&&n)&&pt.target===this.div&&t(this,ns)){if(O(this,ns,!1),!t(this,ws)){O(this,ws,!0);return}if(t(this,de).getMode()===h.AnnotationEditorType.STAMP){t(this,de).unselectAll();return}M(this,gs,Ks).call(this,pt,!1)}}pointerdown(pt){if(t(this,de).getMode()===h.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),t(this,ns)){O(this,ns,!1);return}const{isMac:n}=h.FeatureTest.platform;if(pt.button!==0||pt.ctrlKey&&n||pt.target!==this.div)return;O(this,ns,!0);const y=t(this,de).getActive();O(this,ws,!y||y.isEmpty())}findNewParent(pt,n,y){const et=t(this,de).findParent(n,y);return et===null||et===this?!1:(et.changeParent(pt),!0)}destroy(){var pt,n;((pt=t(this,de).getActive())==null?void 0:pt.parent)===this&&(t(this,de).commitOrRemove(),t(this,de).setActiveEditor(null)),t(this,$e)&&(clearTimeout(t(this,$e)),O(this,$e,null));for(const y of t(this,Ne).values())(n=t(this,ps))==null||n.removePointerInTextLayer(y.contentDiv),y.setParent(null),y.isAttachedToDOM=!1,y.div.remove();this.div=null,t(this,Ne).clear(),t(this,de).removeLayer(this)}render({viewport:pt}){this.viewport=pt,(0,z.setLayerDimensions)(this.div,pt);for(const n of t(this,de).getEditors(this.pageIndex))this.add(n);this.updateMode()}update({viewport:pt}){t(this,de).commitOrRemove();const n=this.viewport.rotation,y=pt.rotation;if(this.viewport=pt,(0,z.setLayerDimensions)(this.div,{rotation:y}),n!==y)for(const et of t(this,Ne).values())et.rotate(y);this.updateMode()}get pageDimensions(){const{pageWidth:pt,pageHeight:n}=this.viewport.rawDims;return[pt,n]}};ps=new WeakMap,ws=new WeakMap,Ke=new WeakMap,Fs=new WeakMap,ai=new WeakMap,Os=new WeakMap,$e=new WeakMap,Ns=new WeakMap,Ne=new WeakMap,ns=new WeakMap,xs=new WeakMap,_s=new WeakMap,Je=new WeakMap,de=new WeakMap,rs=new WeakMap,Bs=new WeakSet,nn=function(){return t(ze,rs).get(t(this,de).getMode())},Hs=new WeakSet,rn=function(pt){const n=t(this,Bs,nn);return n?new n.prototype.constructor(pt):null},gs=new WeakSet,Ks=function(pt,n,y={}){const et=this.getNextId(),ct=M(this,Hs,rn).call(this,{parent:this,id:et,x:pt.offsetX,y:pt.offsetY,uiManager:t(this,de),isCentered:n,...y});return ct&&this.add(ct),ct},Us=new WeakSet,an=function(){const{x:pt,y:n,width:y,height:et}=this.div.getBoundingClientRect(),ct=Math.max(0,pt),mt=Math.max(0,n),Rt=Math.min(window.innerWidth,pt+y),Ot=Math.min(window.innerHeight,n+et),wt=(ct+Rt)/2-pt,Ht=(mt+Ot)/2-n,[Vt,ge]=this.viewport.rotation%180===0?[wt,Ht]:[Ht,wt];return{offsetX:Vt,offsetY:ge}},zs=new WeakSet,on=function(){O(this,xs,!0);for(const pt of t(this,Ne).values())pt.isEmpty()&&pt.remove();O(this,xs,!1)},be(ze,"_initialized",!1),m(ze,rs,new Map([gt,G,D,w].map(pt=>[pt._editorType,pt])));let at=ze},97:(Mt,Et,ht)=>{var gt,it,U,w,z,G,D,at,T,q,hn,W,ln,P,cr,S,dr;ht.d(Et,{ColorPicker:()=>H});var h=ht(266),st=ht(812),A=ht(473);const ft=class ft{constructor({editor:dt=null,uiManager:xt=null}){m(this,q);m(this,W);m(this,P);m(this,S);m(this,gt,M(this,P,cr).bind(this));m(this,it,null);m(this,U,null);m(this,w,void 0);m(this,z,null);m(this,G,!1);m(this,D,!1);m(this,at,void 0);m(this,T,null);var Dt;O(this,D,!dt),O(this,T,(dt==null?void 0:dt._uiManager)||xt),O(this,at,t(this,T)._eventBus),O(this,w,(dt==null?void 0:dt.color)||((Dt=t(this,T))==null?void 0:Dt.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return(0,h.shadow)(this,"_keyboardManager",new st.KeyboardManager([[["Escape","mac+Escape"],ft.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ft.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ft.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ft.prototype._moveToPrevious],[["Home","mac+Home"],ft.prototype._moveToBeginning],[["End","mac+End"],ft.prototype._moveToEnd]]))}renderButton(){const dt=O(this,it,document.createElement("button"));dt.className="colorPicker",dt.tabIndex="0",dt.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),dt.setAttribute("aria-haspopup",!0),dt.addEventListener("click",M(this,S,dr).bind(this));const xt=O(this,U,document.createElement("span"));return xt.className="swatch",xt.style.backgroundColor=t(this,w),dt.append(xt),dt}renderMainDropdown(){const dt=O(this,z,M(this,q,hn).call(this,h.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR));return dt.setAttribute("aria-orientation","horizontal"),dt.setAttribute("aria-labelledby","highlightColorPickerLabel"),dt}_colorSelectFromKeyboard(dt){const xt=dt.target.getAttribute("data-color");xt&&M(this,W,ln).call(this,xt,dt)}_moveToNext(dt){var xt,Dt;if(dt.target===t(this,it)){(xt=t(this,z).firstChild)==null||xt.focus();return}(Dt=dt.target.nextSibling)==null||Dt.focus()}_moveToPrevious(dt){var xt;(xt=dt.target.previousSibling)==null||xt.focus()}_moveToBeginning(){var dt;(dt=t(this,z).firstChild)==null||dt.focus()}_moveToEnd(){var dt;(dt=t(this,z).lastChild)==null||dt.focus()}hideDropdown(){var dt;(dt=t(this,z))==null||dt.classList.add("hidden")}_hideDropdownFromKeyboard(){t(this,D)||!t(this,z)||t(this,z).classList.contains("hidden")||(this.hideDropdown(),t(this,it).removeEventListener("keydown",t(this,gt)),t(this,it).focus({preventScroll:!0,focusVisible:t(this,G)}))}updateColor(dt){if(t(this,U)&&(t(this,U).style.backgroundColor=dt),!t(this,z))return;const xt=t(this,T).highlightColors.values();for(const Dt of t(this,z).children)Dt.setAttribute("aria-selected",xt.next().value===dt)}destroy(){var dt,xt;(dt=t(this,it))==null||dt.remove(),O(this,it,null),O(this,U,null),(xt=t(this,z))==null||xt.remove(),O(this,z,null)}};gt=new WeakMap,it=new WeakMap,U=new WeakMap,w=new WeakMap,z=new WeakMap,G=new WeakMap,D=new WeakMap,at=new WeakMap,T=new WeakMap,q=new WeakSet,hn=function(dt){const xt=document.createElement("div");xt.addEventListener("contextmenu",A.noContextMenu),xt.className="dropdown",xt.role="listbox",xt.setAttribute("aria-multiselectable",!1),xt.setAttribute("aria-orientation","vertical"),xt.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[Dt,Gt]of t(this,T).highlightColors){const Nt=document.createElement("button");Nt.tabIndex="0",Nt.role="option",Nt.setAttribute("data-color",Gt),Nt.title=Dt,Nt.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${Dt}`);const Kt=document.createElement("span");Nt.append(Kt),Kt.className="swatch",Kt.style.backgroundColor=Gt,Nt.setAttribute("aria-selected",Gt===t(this,w)),Nt.addEventListener("click",M(this,W,ln).bind(this,dt,Gt)),xt.append(Nt)}return xt.addEventListener("keydown",t(this,gt)),xt},W=new WeakSet,ln=function(dt,xt,Dt){Dt.stopPropagation(),t(this,at).dispatch("switchannotationeditorparams",{source:this,type:dt,value:xt})},P=new WeakSet,cr=function(dt){ft._keyboardManager.exec(this,dt)},S=new WeakSet,dr=function(dt){if(t(this,z)&&!t(this,z).classList.contains("hidden")){this.hideDropdown();return}if(t(this,it).addEventListener("keydown",t(this,gt)),O(this,G,dt.detail===0),t(this,z)){t(this,z).classList.remove("hidden");return}const xt=O(this,z,M(this,q,hn).call(this,h.AnnotationEditorParamsType.HIGHLIGHT_COLOR));t(this,it).append(xt)};let H=ft},115:(Mt,Et,ht)=>{var w,z,G,D,at,T,q,B,cn,P,Q,S,X,ft,ur,dt,pr,Dt,gr,Nt,_i,$t,fr,Jt,dn,te,Xt,re,Wt,le,ie,he,jt,me,pe,Zt,ne,ye,$,s,i,f,un,b,pn,d,gn,a,fn,E,mr,u,br,j,mn,N,bn,J,vn,lt,vr,g,Ar,V,yr,ut,wr,_t,An,Bt,$s;ht.d(Et,{AnnotationEditor:()=>it});var h=ht(812),st=ht(266),A=ht(473);const K=class K{constructor(k){m(this,B);m(this,w,"");m(this,z,!1);m(this,G,null);m(this,D,null);m(this,at,null);m(this,T,!1);m(this,q,null);O(this,q,k)}static initialize(k){K._l10nPromise||(K._l10nPromise=k)}async render(){const k=O(this,G,document.createElement("button"));k.className="altText";const nt=await K._l10nPromise.get("pdfjs-editor-alt-text-button-label");k.textContent=nt,k.setAttribute("aria-label",nt),k.tabIndex="0",k.addEventListener("contextmenu",A.noContextMenu),k.addEventListener("pointerdown",vt=>vt.stopPropagation());const At=vt=>{vt.preventDefault(),t(this,q)._uiManager.editAltText(t(this,q))};return k.addEventListener("click",At,{capture:!0}),k.addEventListener("keydown",vt=>{vt.target===k&&vt.key==="Enter"&&(O(this,T,!0),At(vt))}),await M(this,B,cn).call(this),k}finish(){t(this,G)&&(t(this,G).focus({focusVisible:t(this,T)}),O(this,T,!1))}get data(){return{altText:t(this,w),decorative:t(this,z)}}set data({altText:k,decorative:nt}){t(this,w)===k&&t(this,z)===nt||(O(this,w,k),O(this,z,nt),M(this,B,cn).call(this))}toggle(k=!1){t(this,G)&&(!k&&t(this,at)&&(clearTimeout(t(this,at)),O(this,at,null)),t(this,G).disabled=!k)}destroy(){var k;(k=t(this,G))==null||k.remove(),O(this,G,null),O(this,D,null)}};w=new WeakMap,z=new WeakMap,G=new WeakMap,D=new WeakMap,at=new WeakMap,T=new WeakMap,q=new WeakMap,B=new WeakSet,cn=async function(){var At,vt;const k=t(this,G);if(!k)return;if(!t(this,w)&&!t(this,z)){k.classList.remove("done"),(At=t(this,D))==null||At.remove();return}k.classList.add("done"),K._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(Lt=>{k.setAttribute("aria-label",Lt)});let nt=t(this,D);if(!nt){O(this,D,nt=document.createElement("span")),nt.className="tooltip",nt.setAttribute("role","tooltip");const Lt=nt.id=`alt-text-tooltip-${t(this,q).id}`;k.setAttribute("aria-describedby",Lt);const Tt=100;k.addEventListener("mouseenter",()=>{O(this,at,setTimeout(()=>{O(this,at,null),t(this,D).classList.add("show"),t(this,q)._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:t(this,q).editorType,data:{action:"alt_text_tooltip"}}})},Tt))}),k.addEventListener("mouseleave",()=>{var p;t(this,at)&&(clearTimeout(t(this,at)),O(this,at,null)),(p=t(this,D))==null||p.classList.remove("show")})}nt.innerText=t(this,z)?await K._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):t(this,w),nt.parentNode||k.append(nt),(vt=t(this,q).getImageForAltText())==null||vt.setAttribute("aria-describedby",nt.id)},be(K,"_l10nPromise",null);let H=K;const oe=class oe{constructor(k){m(this,dt);m(this,Dt);m(this,Nt);m(this,$t);m(this,Jt);m(this,P,null);m(this,Q,null);m(this,S,void 0);m(this,X,null);O(this,S,k)}render(){const k=O(this,P,document.createElement("div"));k.className="editToolbar",k.addEventListener("contextmenu",A.noContextMenu),k.addEventListener("pointerdown",M(oe,ft,ur));const nt=O(this,X,document.createElement("div"));nt.className="buttons",k.append(nt);const At=t(this,S).toolbarPosition;if(At){const{style:vt}=k,Lt=t(this,S)._uiManager.direction==="ltr"?1-At[0]:At[0];vt.insetInlineEnd=`${100*Lt}%`,vt.top=`calc(${100*At[1]}% + var(--editor-toolbar-vert-offset))`}return M(this,$t,fr).call(this),k}hide(){var k;t(this,P).classList.add("hidden"),(k=t(this,Q))==null||k.hideDropdown()}show(){t(this,P).classList.remove("hidden")}addAltTextButton(k){M(this,Nt,_i).call(this,k),t(this,X).prepend(k,t(this,Jt,dn))}addColorPicker(k){O(this,Q,k);const nt=k.renderButton();M(this,Nt,_i).call(this,nt),t(this,X).prepend(nt,t(this,Jt,dn))}remove(){var k;t(this,P).remove(),(k=t(this,Q))==null||k.destroy(),O(this,Q,null)}};P=new WeakMap,Q=new WeakMap,S=new WeakMap,X=new WeakMap,ft=new WeakSet,ur=function(k){k.stopPropagation()},dt=new WeakSet,pr=function(k){t(this,S)._focusEventsAllowed=!1,k.preventDefault(),k.stopPropagation()},Dt=new WeakSet,gr=function(k){t(this,S)._focusEventsAllowed=!0,k.preventDefault(),k.stopPropagation()},Nt=new WeakSet,_i=function(k){k.addEventListener("focusin",M(this,dt,pr).bind(this),{capture:!0}),k.addEventListener("focusout",M(this,Dt,gr).bind(this),{capture:!0}),k.addEventListener("contextmenu",A.noContextMenu)},$t=new WeakSet,fr=function(){const k=document.createElement("button");k.className="delete",k.tabIndex=0,k.setAttribute("data-l10n-id",`pdfjs-editor-remove-${t(this,S).editorType}-button`),M(this,Nt,_i).call(this,k),k.addEventListener("click",nt=>{t(this,S)._uiManager.delete()}),t(this,X).append(k)},Jt=new WeakSet,dn=function(){const k=document.createElement("div");return k.className="divider",k},m(oe,ft);let gt=oe;const Ut=class Ut{constructor(k){m(this,f);m(this,b);m(this,a);m(this,E);m(this,u);m(this,j);m(this,N);m(this,J);m(this,lt);m(this,g);m(this,V);m(this,ut);m(this,_t);m(this,Bt);m(this,te,null);m(this,Xt,null);m(this,re,!1);m(this,Wt,null);m(this,le,null);m(this,ie,this.focusin.bind(this));m(this,he,this.focusout.bind(this));m(this,jt,null);m(this,me,"");m(this,pe,!1);m(this,Zt,!1);m(this,ne,!1);m(this,ye,!1);m(this,$,null);be(this,"_initialOptions",Object.create(null));be(this,"_uiManager",null);be(this,"_focusEventsAllowed",!0);be(this,"_l10nPromise",null);m(this,s,!1);m(this,i,Ut._zIndex++);this.constructor===Ut&&(0,st.unreachable)("Cannot initialize AnnotationEditor."),this.parent=k.parent,this.id=k.id,this.width=this.height=null,this.pageIndex=k.parent.pageIndex,this.name=k.name,this.div=null,this._uiManager=k.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=k.isCentered,this._structTreeParentId=null;const{rotation:nt,rawDims:{pageWidth:At,pageHeight:vt,pageX:Lt,pageY:Tt}}=this.parent.viewport;this.rotation=nt,this.pageRotation=(360+nt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[At,vt],this.pageTranslation=[Lt,Tt];const[p,e]=this.parentDimensions;this.x=k.x/p,this.y=k.y/e,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const k=Ut.prototype._resizeWithKeyboard,nt=h.AnnotationEditorUIManager.TRANSLATE_SMALL,At=h.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,st.shadow)(this,"_resizerKeyboardManager",new h.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],k,{args:[-nt,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],k,{args:[-At,0]}],[["ArrowRight","mac+ArrowRight"],k,{args:[nt,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],k,{args:[At,0]}],[["ArrowUp","mac+ArrowUp"],k,{args:[0,-nt]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],k,{args:[0,-At]}],[["ArrowDown","mac+ArrowDown"],k,{args:[0,nt]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],k,{args:[0,At]}],[["Escape","mac+Escape"],Ut.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,st.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(k){const nt=new U({id:k.parent.getNextId(),parent:k.parent,uiManager:k._uiManager});nt.annotationElementId=k.annotationElementId,nt.deleted=!0,nt._uiManager.addToAnnotationStorage(nt)}static initialize(k,nt=null){if(Ut._l10nPromise||(Ut._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(vt=>[vt,k.get(vt.replaceAll(/([A-Z])/g,Lt=>`-${Lt.toLowerCase()}`))]))),nt==null?void 0:nt.strings)for(const vt of nt.strings)Ut._l10nPromise.set(vt,k.get(vt));if(Ut._borderLineWidth!==-1)return;const At=getComputedStyle(document.documentElement);Ut._borderLineWidth=parseFloat(At.getPropertyValue("--outline-width"))||0}static updateDefaultParams(k,nt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(k){return!1}static paste(k,nt){(0,st.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,s)}set _isDraggable(k){var nt;O(this,s,k),(nt=this.div)==null||nt.classList.toggle("draggable",k)}get isEnterHandled(){return!0}center(){const[k,nt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*nt/(k*2),this.y+=this.width*k/(nt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*nt/(k*2),this.y-=this.width*k/(nt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(k){this._uiManager.addCommands(k)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,i)}setParent(k){k!==null?(this.pageIndex=k.pageIndex,this.pageDimensions=k.pageDimensions):M(this,Bt,$s).call(this),this.parent=k}focusin(k){this._focusEventsAllowed&&(t(this,pe)?O(this,pe,!1):this.parent.setSelected(this))}focusout(k){var nt,At;!this._focusEventsAllowed||!this.isAttachedToDOM||(nt=k.relatedTarget)!=null&&nt.closest(`#${this.id}`)||(k.preventDefault(),(At=this.parent)!=null&&At.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(k,nt,At,vt){const[Lt,Tt]=this.parentDimensions;[At,vt]=this.screenToPageTranslation(At,vt),this.x=(k+At)/Lt,this.y=(nt+vt)/Tt,this.fixAndSetPosition()}translate(k,nt){M(this,f,un).call(this,this.parentDimensions,k,nt)}translateInPage(k,nt){M(this,f,un).call(this,this.pageDimensions,k,nt),this.div.scrollIntoView({block:"nearest"})}drag(k,nt){const[At,vt]=this.parentDimensions;if(this.x+=k/At,this.y+=nt/vt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:r,y:C}=this.div.getBoundingClientRect();this.parent.findNewParent(this,r,C)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Lt,y:Tt}=this;const[p,e]=M(this,b,pn).call(this);Lt+=p,Tt+=e,this.div.style.left=`${(100*Lt).toFixed(2)}%`,this.div.style.top=`${(100*Tt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(k=this.rotation){const[nt,At]=this.pageDimensions;let{x:vt,y:Lt,width:Tt,height:p}=this;switch(Tt*=nt,p*=At,vt*=nt,Lt*=At,k){case 0:vt=Math.max(0,Math.min(nt-Tt,vt)),Lt=Math.max(0,Math.min(At-p,Lt));break;case 90:vt=Math.max(0,Math.min(nt-p,vt)),Lt=Math.min(At,Math.max(Tt,Lt));break;case 180:vt=Math.min(nt,Math.max(Tt,vt)),Lt=Math.min(At,Math.max(p,Lt));break;case 270:vt=Math.min(nt,Math.max(p,vt)),Lt=Math.max(0,Math.min(At-Tt,Lt));break}this.x=vt/=nt,this.y=Lt/=At;const[e,r]=M(this,b,pn).call(this);vt+=e,Lt+=r;const{style:C}=this.div;C.left=`${(100*vt).toFixed(2)}%`,C.top=`${(100*Lt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(k,nt){var At;return M(At=Ut,d,gn).call(At,k,nt,this.parentRotation)}pageTranslationToScreen(k,nt){var At;return M(At=Ut,d,gn).call(At,k,nt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:k,pageDimensions:[nt,At]}=this,vt=nt*k,Lt=At*k;return st.FeatureTest.isCSSRoundSupported?[Math.round(vt),Math.round(Lt)]:[vt,Lt]}setDims(k,nt){const[At,vt]=this.parentDimensions;this.div.style.width=`${(100*k/At).toFixed(2)}%`,t(this,re)||(this.div.style.height=`${(100*nt/vt).toFixed(2)}%`)}fixDims(){const{style:k}=this.div,{height:nt,width:At}=k,vt=At.endsWith("%"),Lt=!t(this,re)&&nt.endsWith("%");if(vt&&Lt)return;const[Tt,p]=this.parentDimensions;vt||(k.width=`${(100*parseFloat(At)/Tt).toFixed(2)}%`),!t(this,re)&&!Lt&&(k.height=`${(100*parseFloat(nt)/p).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var k;(k=t(this,Xt))==null||k.finish()}async addEditToolbar(){return t(this,jt)||t(this,ne)?t(this,jt):(O(this,jt,new gt(this)),this.div.append(t(this,jt).render()),t(this,Xt)&&t(this,jt).addAltTextButton(await t(this,Xt).render()),t(this,jt))}removeEditToolbar(){var k;t(this,jt)&&(t(this,jt).remove(),O(this,jt,null),(k=t(this,Xt))==null||k.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){t(this,Xt)||(H.initialize(Ut._l10nPromise),O(this,Xt,new H(this)),await this.addEditToolbar())}get altTextData(){var k;return(k=t(this,Xt))==null?void 0:k.data}set altTextData(k){t(this,Xt)&&(t(this,Xt).data=k)}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,ie)),this.div.addEventListener("focusout",t(this,he));const[k,nt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*nt/k).toFixed(2)}%`,this.div.style.maxHeight=`${(100*k/nt).toFixed(2)}%`);const[At,vt]=this.getInitialTranslation();return this.translate(At,vt),(0,h.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(k){const{isMac:nt}=st.FeatureTest.platform;if(k.button!==0||k.ctrlKey&&nt){k.preventDefault();return}if(O(this,pe,!0),this._isDraggable){M(this,lt,vr).call(this,k);return}M(this,J,vn).call(this,k)}moveInDOM(){t(this,$)&&clearTimeout(t(this,$)),O(this,$,setTimeout(()=>{var k;O(this,$,null),(k=this.parent)==null||k.moveEditorInDOM(this)},0))}_setParentAndPosition(k,nt,At){k.changeParent(this),this.x=nt,this.y=At,this.fixAndSetPosition()}getRect(k,nt,At=this.rotation){const vt=this.parentScale,[Lt,Tt]=this.pageDimensions,[p,e]=this.pageTranslation,r=k/vt,C=nt/vt,F=this.x*Lt,tt=this.y*Tt,rt=this.width*Lt,yt=this.height*Tt;switch(At){case 0:return[F+r+p,Tt-tt-C-yt+e,F+r+rt+p,Tt-tt-C+e];case 90:return[F+C+p,Tt-tt+r+e,F+C+yt+p,Tt-tt+r+rt+e];case 180:return[F-r-rt+p,Tt-tt+C+e,F-r+p,Tt-tt+C+yt+e];case 270:return[F-C-yt+p,Tt-tt-r-rt+e,F-C+p,Tt-tt-r+e];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(k,nt){const[At,vt,Lt,Tt]=k,p=Lt-At,e=Tt-vt;switch(this.rotation){case 0:return[At,nt-Tt,p,e];case 90:return[At,nt-vt,e,p];case 180:return[Lt,nt-vt,p,e];case 270:return[Lt,nt-Tt,e,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){O(this,ne,!0)}disableEditMode(){O(this,ne,!1)}isInEditMode(){return t(this,ne)}shouldGetKeyboardEvents(){return t(this,ye)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var k,nt;(k=this.div)==null||k.addEventListener("focusin",t(this,ie)),(nt=this.div)==null||nt.addEventListener("focusout",t(this,he))}rotate(k){}serialize(k=!1,nt=null){(0,st.unreachable)("An editor must be serializable")}static deserialize(k,nt,At){const vt=new this.prototype.constructor({parent:nt,id:nt.getNextId(),uiManager:At});vt.rotation=k.rotation;const[Lt,Tt]=vt.pageDimensions,[p,e,r,C]=vt.getRectInCurrentCoords(k.rect,Tt);return vt.x=p/Lt,vt.y=e/Tt,vt.width=r/Lt,vt.height=C/Tt,vt}remove(){this.div.removeEventListener("focusin",t(this,ie)),this.div.removeEventListener("focusout",t(this,he)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),t(this,$)&&(clearTimeout(t(this,$)),O(this,$,null)),M(this,Bt,$s).call(this),this.removeEditToolbar()}get isResizable(){return!1}makeResizable(){this.isResizable&&(M(this,E,mr).call(this),t(this,Wt).classList.remove("hidden"),(0,h.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(k){if(!this.isResizable||k.target!==this.div||k.key!=="Enter")return;this._uiManager.setSelected(this),O(this,le,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const nt=t(this,Wt).children;if(!t(this,te)){O(this,te,Array.from(nt));const Tt=M(this,g,Ar).bind(this),p=M(this,V,yr).bind(this);for(const e of t(this,te)){const r=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",Tt),e.addEventListener("blur",p),e.addEventListener("focus",M(this,ut,wr).bind(this,r)),Ut._l10nPromise.get(`pdfjs-editor-resizer-label-${r}`).then(C=>e.setAttribute("aria-label",C))}}const At=t(this,te)[0];let vt=0;for(const Tt of nt){if(Tt===At)break;vt++}const Lt=(360-this.rotation+this.parentRotation)%360/90*(t(this,te).length/4);if(Lt!==vt){if(Lt<vt)for(let p=0;p<vt-Lt;p++)t(this,Wt).append(t(this,Wt).firstChild);else if(Lt>vt)for(let p=0;p<Lt-vt;p++)t(this,Wt).firstChild.before(t(this,Wt).lastChild);let Tt=0;for(const p of nt){const e=t(this,te)[Tt++].getAttribute("data-resizer-name");Ut._l10nPromise.get(`pdfjs-editor-resizer-label-${e}`).then(r=>p.setAttribute("aria-label",r))}}M(this,_t,An).call(this,0),O(this,ye,!0),t(this,Wt).firstChild.focus({focusVisible:!0}),k.preventDefault(),k.stopImmediatePropagation()}_resizeWithKeyboard(k,nt){t(this,ye)&&M(this,N,bn).call(this,t(this,me),{movementX:k,movementY:nt})}_stopResizingWithKeyboard(){M(this,Bt,$s).call(this),this.div.focus()}select(){var k,nt;if(this.makeResizable(),(k=this.div)==null||k.classList.add("selectedEditor"),!t(this,jt)){this.addEditToolbar().then(()=>{var At,vt;(At=this.div)!=null&&At.classList.contains("selectedEditor")&&((vt=t(this,jt))==null||vt.show())});return}(nt=t(this,jt))==null||nt.show()}unselect(){var k,nt,At,vt;(k=t(this,Wt))==null||k.classList.add("hidden"),(nt=this.div)==null||nt.classList.remove("selectedEditor"),(At=this.div)!=null&&At.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus(),(vt=t(this,jt))==null||vt.hide()}updateParams(k,nt){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return t(this,Zt)}set isEditing(k){O(this,Zt,k),this.parent&&(k?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(k,nt){O(this,re,!0);const At=k/nt,{style:vt}=this.div;vt.aspectRatio=At,vt.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}};te=new WeakMap,Xt=new WeakMap,re=new WeakMap,Wt=new WeakMap,le=new WeakMap,ie=new WeakMap,he=new WeakMap,jt=new WeakMap,me=new WeakMap,pe=new WeakMap,Zt=new WeakMap,ne=new WeakMap,ye=new WeakMap,$=new WeakMap,s=new WeakMap,i=new WeakMap,f=new WeakSet,un=function([k,nt],At,vt){[At,vt]=this.screenToPageTranslation(At,vt),this.x+=At/k,this.y+=vt/nt,this.fixAndSetPosition()},b=new WeakSet,pn=function(){const[k,nt]=this.parentDimensions,{_borderLineWidth:At}=Ut,vt=At/k,Lt=At/nt;switch(this.rotation){case 90:return[-vt,Lt];case 180:return[vt,Lt];case 270:return[vt,-Lt];default:return[-vt,-Lt]}},d=new WeakSet,gn=function(k,nt,At){switch(At){case 90:return[nt,-k];case 180:return[-k,-nt];case 270:return[-nt,k];default:return[k,nt]}},a=new WeakSet,fn=function(k){switch(k){case 90:{const[nt,At]=this.pageDimensions;return[0,-nt/At,At/nt,0]}case 180:return[-1,0,0,-1];case 270:{const[nt,At]=this.pageDimensions;return[0,nt/At,-At/nt,0]}default:return[1,0,0,1]}},E=new WeakSet,mr=function(){if(t(this,Wt))return;O(this,Wt,document.createElement("div")),t(this,Wt).classList.add("resizers");const k=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const nt of k){const At=document.createElement("div");t(this,Wt).append(At),At.classList.add("resizer",nt),At.setAttribute("data-resizer-name",nt),At.addEventListener("pointerdown",M(this,u,br).bind(this,nt)),At.addEventListener("contextmenu",A.noContextMenu),At.tabIndex=-1}this.div.prepend(t(this,Wt))},u=new WeakSet,br=function(k,nt){var yt;nt.preventDefault();const{isMac:At}=st.FeatureTest.platform;if(nt.button!==0||nt.ctrlKey&&At)return;(yt=t(this,Xt))==null||yt.toggle(!1);const vt=M(this,N,bn).bind(this,k),Lt=this._isDraggable;this._isDraggable=!1;const Tt={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",vt,Tt);const p=this.x,e=this.y,r=this.width,C=this.height,F=this.parent.div.style.cursor,tt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(nt.target).cursor;const rt=()=>{var kt;this.parent.togglePointerEvents(!0),(kt=t(this,Xt))==null||kt.toggle(!0),this._isDraggable=Lt,window.removeEventListener("pointerup",rt),window.removeEventListener("blur",rt),window.removeEventListener("pointermove",vt,Tt),this.parent.div.style.cursor=F,this.div.style.cursor=tt,M(this,j,mn).call(this,p,e,r,C)};window.addEventListener("pointerup",rt),window.addEventListener("blur",rt)},j=new WeakSet,mn=function(k,nt,At,vt){const Lt=this.x,Tt=this.y,p=this.width,e=this.height;Lt===k&&Tt===nt&&p===At&&e===vt||this.addCommands({cmd:()=>{this.width=p,this.height=e,this.x=Lt,this.y=Tt;const[r,C]=this.parentDimensions;this.setDims(r*p,C*e),this.fixAndSetPosition()},undo:()=>{this.width=At,this.height=vt,this.x=k,this.y=nt;const[r,C]=this.parentDimensions;this.setDims(r*At,C*vt),this.fixAndSetPosition()},mustExec:!0})},N=new WeakSet,bn=function(k,nt){const[At,vt]=this.parentDimensions,Lt=this.x,Tt=this.y,p=this.width,e=this.height,r=Ut.MIN_SIZE/At,C=Ut.MIN_SIZE/vt,F=ue=>Math.round(ue*1e4)/1e4,tt=M(this,a,fn).call(this,this.rotation),rt=(ue,xe)=>[tt[0]*ue+tt[2]*xe,tt[1]*ue+tt[3]*xe],yt=M(this,a,fn).call(this,360-this.rotation),kt=(ue,xe)=>[yt[0]*ue+yt[2]*xe,yt[1]*ue+yt[3]*xe];let St,zt,Ft=!1,Pt=!1;switch(k){case"topLeft":Ft=!0,St=(ue,xe)=>[0,0],zt=(ue,xe)=>[ue,xe];break;case"topMiddle":St=(ue,xe)=>[ue/2,0],zt=(ue,xe)=>[ue/2,xe];break;case"topRight":Ft=!0,St=(ue,xe)=>[ue,0],zt=(ue,xe)=>[0,xe];break;case"middleRight":Pt=!0,St=(ue,xe)=>[ue,xe/2],zt=(ue,xe)=>[0,xe/2];break;case"bottomRight":Ft=!0,St=(ue,xe)=>[ue,xe],zt=(ue,xe)=>[0,0];break;case"bottomMiddle":St=(ue,xe)=>[ue/2,xe],zt=(ue,xe)=>[ue/2,0];break;case"bottomLeft":Ft=!0,St=(ue,xe)=>[0,xe],zt=(ue,xe)=>[ue,0];break;case"middleLeft":Pt=!0,St=(ue,xe)=>[0,xe/2],zt=(ue,xe)=>[ue,xe/2];break}const Qt=St(p,e),qt=zt(p,e);let ae=rt(...qt);const ce=F(Lt+ae[0]),we=F(Tt+ae[1]);let Ce=1,Be=1,[Me,Pe]=this.screenToPageTranslation(nt.movementX,nt.movementY);if([Me,Pe]=kt(Me/At,Pe/vt),Ft){const ue=Math.hypot(p,e);Ce=Be=Math.max(Math.min(Math.hypot(qt[0]-Qt[0]-Me,qt[1]-Qt[1]-Pe)/ue,1/p,1/e),r/p,C/e)}else Pt?Ce=Math.max(r,Math.min(1,Math.abs(qt[0]-Qt[0]-Me)))/p:Be=Math.max(C,Math.min(1,Math.abs(qt[1]-Qt[1]-Pe)))/e;const Fe=F(p*Ce),ls=F(e*Be);ae=rt(...zt(Fe,ls));const Oe=ce-ae[0],Ge=we-ae[1];this.width=Fe,this.height=ls,this.x=Oe,this.y=Ge,this.setDims(At*Fe,vt*ls),this.fixAndSetPosition()},J=new WeakSet,vn=function(k){const{isMac:nt}=st.FeatureTest.platform;k.ctrlKey&&!nt||k.shiftKey||k.metaKey&&nt?this.parent.toggleSelected(this):this.parent.setSelected(this)},lt=new WeakSet,vr=function(k){const nt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let At,vt;nt&&(At={passive:!0,capture:!0},vt=Tt=>{const[p,e]=this.screenToPageTranslation(Tt.movementX,Tt.movementY);this._uiManager.dragSelectedEditors(p,e)},window.addEventListener("pointermove",vt,At));const Lt=()=>{window.removeEventListener("pointerup",Lt),window.removeEventListener("blur",Lt),nt&&window.removeEventListener("pointermove",vt,At),O(this,pe,!1),this._uiManager.endDragSession()||M(this,J,vn).call(this,k)};window.addEventListener("pointerup",Lt),window.addEventListener("blur",Lt)},g=new WeakSet,Ar=function(k){Ut._resizerKeyboardManager.exec(this,k)},V=new WeakSet,yr=function(k){var nt;t(this,ye)&&((nt=k.relatedTarget)==null?void 0:nt.parentNode)!==t(this,Wt)&&M(this,Bt,$s).call(this)},ut=new WeakSet,wr=function(k){O(this,me,t(this,ye)?k:"")},_t=new WeakSet,An=function(k){if(t(this,te))for(const nt of t(this,te))nt.tabIndex=k},Bt=new WeakSet,$s=function(){if(O(this,ye,!1),M(this,_t,An).call(this,-1),t(this,le)){const{savedX:k,savedY:nt,savedWidth:At,savedHeight:vt}=t(this,le);M(this,j,mn).call(this,k,nt,At,vt),O(this,le,null)}},m(Ut,d),be(Ut,"_borderLineWidth",-1),be(Ut,"_colorManager",new h.ColorManager),be(Ut,"_zIndex",1);let it=Ut;class U extends it{constructor(k){super(k),this.annotationElementId=k.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},405:(Mt,Et,ht)=>{var st,A,H,gt,xr,U,Ei,z,_r,D,Er,T,yn;ht.d(Et,{Outliner:()=>h});class h{constructor(W,K=0,P=0,Q=!0){m(this,gt);m(this,U);m(this,z);m(this,D);m(this,T);m(this,st,void 0);m(this,A,[]);m(this,H,[]);let S=1/0,X=-1/0,ft=1/0,Ct=-1/0;const dt=10**-4;for(const{x:ve,y:Jt,width:fe,height:oe}of W){const te=Math.floor((ve-K)/dt)*dt,Xt=Math.ceil((ve+fe+K)/dt)*dt,re=Math.floor((Jt-K)/dt)*dt,Wt=Math.ceil((Jt+oe+K)/dt)*dt,le=[te,re,Wt,!0],ie=[Xt,re,Wt,!1];t(this,A).push(le,ie),S=Math.min(S,te),X=Math.max(X,Xt),ft=Math.min(ft,re),Ct=Math.max(Ct,Wt)}const xt=X-S+2*P,Dt=Ct-ft+2*P,Gt=S-P,Nt=ft-P,Kt=t(this,A).at(Q?-1:-2),$t=[Kt[0],Kt[2]];for(const ve of t(this,A)){const[Jt,fe,oe]=ve;ve[0]=(Jt-Gt)/xt,ve[1]=(fe-Nt)/Dt,ve[2]=(oe-Nt)/Dt}O(this,st,{x:Gt,y:Nt,width:xt,height:Dt,lastPoint:$t})}getOutlines(){t(this,A).sort((K,P)=>K[0]-P[0]||K[1]-P[1]||K[2]-P[2]);const W=[];for(const K of t(this,A))K[3]?(W.push(...M(this,T,yn).call(this,K)),M(this,z,_r).call(this,K)):(M(this,D,Er).call(this,K),W.push(...M(this,T,yn).call(this,K)));return M(this,gt,xr).call(this,W)}}st=new WeakMap,A=new WeakMap,H=new WeakMap,gt=new WeakSet,xr=function(W){const K=[],P=new Set;for(const X of W){const[ft,Ct,dt]=X;K.push([ft,Ct,X],[ft,dt,X])}K.sort((X,ft)=>X[1]-ft[1]||X[0]-ft[0]);for(let X=0,ft=K.length;X<ft;X+=2){const Ct=K[X][2],dt=K[X+1][2];Ct.push(dt),dt.push(Ct),P.add(Ct),P.add(dt)}const Q=[];let S;for(;P.size>0;){const X=P.values().next().value;let[ft,Ct,dt,xt,Dt]=X;P.delete(X);let Gt=ft,Nt=Ct;for(S=[ft,dt],Q.push(S);;){let Kt;if(P.has(xt))Kt=xt;else if(P.has(Dt))Kt=Dt;else break;P.delete(Kt),[ft,Ct,dt,xt,Dt]=Kt,Gt!==ft&&(S.push(Gt,Nt,ft,Nt===Ct?Ct:dt),Gt=ft),Nt=Nt===Ct?dt:Ct}S.push(Gt,Nt)}return{outlines:Q,box:t(this,st)}},U=new WeakSet,Ei=function(W){const K=t(this,H);let P=0,Q=K.length-1;for(;P<=Q;){const S=P+Q>>1,X=K[S][0];if(X===W)return S;X<W?P=S+1:Q=S-1}return Q+1},z=new WeakSet,_r=function([,W,K]){const P=M(this,U,Ei).call(this,W);t(this,H).splice(P,0,[W,K])},D=new WeakSet,Er=function([,W,K]){const P=M(this,U,Ei).call(this,W);for(let Q=P;Q<t(this,H).length;Q++){const[S,X]=t(this,H)[Q];if(S!==W)break;if(S===W&&X===K){t(this,H).splice(Q,1);return}}for(let Q=P-1;Q>=0;Q--){const[S,X]=t(this,H)[Q];if(S!==W)break;if(S===W&&X===K){t(this,H).splice(Q,1);return}}},T=new WeakSet,yn=function(W){const[K,P,Q]=W,S=[[K,P,Q]],X=M(this,U,Ei).call(this,Q);for(let ft=0;ft<X;ft++){const[Ct,dt]=t(this,H)[ft];for(let xt=0,Dt=S.length;xt<Dt;xt++){const[,Gt,Nt]=S[xt];if(!(dt<=Gt||Nt<=Ct)){if(Gt>=Ct){if(Nt>dt)S[xt][1]=dt;else{if(Dt===1)return[];S.splice(xt,1),xt--,Dt--}continue}S[xt][2]=Ct,Nt>dt&&S.push([K,dt,Nt])}}}return S}},812:(Mt,Et,ht)=>{var D,at,T,q,B,wn,P,Q,S,X,ft,Cr,xt,Dt,Gt,Nt,Kt,$t,ve,Jt,fe,oe,te,Xt,re,Wt,le,ie,he,jt,me,pe,Zt,ne,ye,$,s,i,f,R,b,v,d,c,a,o,E,l,u,_,Sr,x,xn,Z,_n,Y,Ci,I,En,L,Cn,ot,He,bt,Js,It,Tr,ee,kr,Yt,Sn,nt,Qs,vt,Tn;ht.d(Et,{AnnotationEditorUIManager:()=>G,ColorManager:()=>z,KeyboardManager:()=>w,bindEvents:()=>A,opacityToHex:()=>H});var h=ht(266),st=ht(473);function A(p,e,r){for(const C of r)e.addEventListener(C,p[C].bind(p))}function H(p){return Math.round(Math.min(255,Math.max(1,255*p))).toString(16).padStart(2,"0")}class gt{constructor(){m(this,D,0)}getId(){return`${h.AnnotationEditorPrefix}${Qe(this,D)._++}`}}D=new WeakMap;const K=class K{constructor(){m(this,B);m(this,at,(0,h.getUuid)());m(this,T,0);m(this,q,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d"),C=new Image;C.src=e;const F=C.decode().then(()=>(r.drawImage(C,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,h.shadow)(this,"_isSVGFittingCanvas",F)}async getFromFile(e){const{lastModified:r,name:C,size:F,type:tt}=e;return M(this,B,wn).call(this,`${r}_${C}_${F}_${tt}`,e)}async getFromUrl(e){return M(this,B,wn).call(this,e,e)}async getFromId(e){t(this,q)||O(this,q,new Map);const r=t(this,q).get(e);return r?r.bitmap?(r.refCounter+=1,r):r.file?this.getFromFile(r.file):this.getFromUrl(r.url):null}getSvgUrl(e){const r=t(this,q).get(e);return r!=null&&r.isSvg?r.svgUrl:null}deleteId(e){t(this,q)||O(this,q,new Map);const r=t(this,q).get(e);r&&(r.refCounter-=1,r.refCounter===0&&(r.bitmap=null))}isValidId(e){return e.startsWith(`image_${t(this,at)}_`)}};at=new WeakMap,T=new WeakMap,q=new WeakMap,B=new WeakSet,wn=async function(e,r){t(this,q)||O(this,q,new Map);let C=t(this,q).get(e);if(C===null)return null;if(C!=null&&C.bitmap)return C.refCounter+=1,C;try{C||(C={bitmap:null,id:`image_${t(this,at)}_${Qe(this,T)._++}`,refCounter:0,isSvg:!1});let F;if(typeof r=="string"?(C.url=r,F=await(0,st.fetchData)(r,"blob")):F=C.file=r,F.type==="image/svg+xml"){const tt=K._isSVGFittingCanvas,rt=new FileReader,yt=new Image,kt=new Promise((St,zt)=>{yt.onload=()=>{C.bitmap=yt,C.isSvg=!0,St()},rt.onload=async()=>{const Ft=C.svgUrl=rt.result;yt.src=await tt?`${Ft}#svgView(preserveAspectRatio(none))`:Ft},yt.onerror=rt.onerror=zt});rt.readAsDataURL(F),await kt}else C.bitmap=await createImageBitmap(F);C.refCounter=1}catch(F){console.error(F),C=null}return t(this,q).set(e,C),C&&t(this,q).set(C.id,C),C};let it=K;class U{constructor(e=128){m(this,P,[]);m(this,Q,!1);m(this,S,void 0);m(this,X,-1);O(this,S,e)}add({cmd:e,undo:r,mustExec:C,type:F=NaN,overwriteIfSameType:tt=!1,keepUndo:rt=!1}){if(C&&e(),t(this,Q))return;const yt={cmd:e,undo:r,type:F};if(t(this,X)===-1){t(this,P).length>0&&(t(this,P).length=0),O(this,X,0),t(this,P).push(yt);return}if(tt&&t(this,P)[t(this,X)].type===F){rt&&(yt.undo=t(this,P)[t(this,X)].undo),t(this,P)[t(this,X)]=yt;return}const kt=t(this,X)+1;kt===t(this,S)?t(this,P).splice(0,1):(O(this,X,kt),kt<t(this,P).length&&t(this,P).splice(kt)),t(this,P).push(yt)}undo(){t(this,X)!==-1&&(O(this,Q,!0),t(this,P)[t(this,X)].undo(),O(this,Q,!1),O(this,X,t(this,X)-1))}redo(){t(this,X)<t(this,P).length-1&&(O(this,X,t(this,X)+1),O(this,Q,!0),t(this,P)[t(this,X)].cmd(),O(this,Q,!1))}hasSomethingToUndo(){return t(this,X)!==-1}hasSomethingToRedo(){return t(this,X)<t(this,P).length-1}destroy(){O(this,P,null)}}P=new WeakMap,Q=new WeakMap,S=new WeakMap,X=new WeakMap;class w{constructor(e){m(this,ft);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:r}=h.FeatureTest.platform;for(const[C,F,tt={}]of e)for(const rt of C){const yt=rt.startsWith("mac+");r&&yt?(this.callbacks.set(rt.slice(4),{callback:F,options:tt}),this.allKeys.add(rt.split("+").at(-1))):!r&&!yt&&(this.callbacks.set(rt,{callback:F,options:tt}),this.allKeys.add(rt.split("+").at(-1)))}}exec(e,r){if(!this.allKeys.has(r.key))return;const C=this.callbacks.get(M(this,ft,Cr).call(this,r));if(!C)return;const{callback:F,options:{bubbles:tt=!1,args:rt=[],checker:yt=null}}=C;yt&&!yt(e,r)||(F.bind(e,...rt,r)(),tt||(r.stopPropagation(),r.preventDefault()))}}ft=new WeakSet,Cr=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const r=this.buffer.join("+");return this.buffer.length=0,r};const dt=class dt{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,st.getColorValues)(e),(0,h.shadow)(this,"_colors",e)}convert(e){const r=(0,st.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return r;for(const[C,F]of this._colors)if(F.every((tt,rt)=>tt===r[rt]))return dt._colorsMapping.get(C);return r}getHexCode(e){const r=this._colors.get(e);return r?h.Util.makeHexColor(...r):e}};be(dt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let z=dt;const Tt=class Tt{constructor(e,r,C,F,tt,rt,yt){m(this,_);m(this,x);m(this,Z);m(this,Y);m(this,I);m(this,L);m(this,ot);m(this,bt);m(this,It);m(this,ee);m(this,Yt);m(this,nt);m(this,vt);m(this,xt,null);m(this,Dt,new Map);m(this,Gt,new Map);m(this,Nt,null);m(this,Kt,null);m(this,$t,new U);m(this,ve,0);m(this,Jt,new Set);m(this,fe,null);m(this,oe,null);m(this,te,new Set);m(this,Xt,null);m(this,re,null);m(this,Wt,null);m(this,le,new gt);m(this,ie,!1);m(this,he,!1);m(this,jt,null);m(this,me,null);m(this,pe,h.AnnotationEditorType.NONE);m(this,Zt,new Set);m(this,ne,null);m(this,ye,this.blur.bind(this));m(this,$,this.focus.bind(this));m(this,s,this.copy.bind(this));m(this,i,this.cut.bind(this));m(this,f,this.paste.bind(this));m(this,R,this.keydown.bind(this));m(this,b,this.onEditingAction.bind(this));m(this,v,this.onPageChanging.bind(this));m(this,d,this.onScaleChanging.bind(this));m(this,c,this.onRotationChanging.bind(this));m(this,a,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});m(this,o,[0,0]);m(this,E,null);m(this,l,null);m(this,u,null);O(this,l,e),O(this,u,r),O(this,Nt,C),this._eventBus=F,this._eventBus._on("editingaction",t(this,b)),this._eventBus._on("pagechanging",t(this,v)),this._eventBus._on("scalechanging",t(this,d)),this._eventBus._on("rotationchanging",t(this,c)),O(this,Kt,tt.annotationStorage),O(this,Xt,tt.filterFactory),O(this,ne,rt),O(this,Wt,yt||null),this.viewParameters={realScale:st.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const e=Tt.prototype,r=rt=>t(rt,l).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&rt.hasSomethingToControl(),C=(rt,{target:yt})=>{if(yt instanceof HTMLInputElement){const{type:kt}=yt;return kt!=="text"&&kt!=="number"}return!0},F=this.TRANSLATE_SMALL,tt=this.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new w([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:C}],[["ctrl+z","mac+meta+z"],e.undo,{checker:C}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:C}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:C}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(rt,{target:yt})=>!(yt instanceof HTMLButtonElement)&&t(rt,l).contains(yt)&&!rt.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:rt=>t(rt,l).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-F,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-tt,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[F,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[tt,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-F],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-tt],checker:r}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,F],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,tt],checker:r}]]))}destroy(){var e;M(this,Y,Ci).call(this),M(this,x,xn).call(this),this._eventBus._off("editingaction",t(this,b)),this._eventBus._off("pagechanging",t(this,v)),this._eventBus._off("scalechanging",t(this,d)),this._eventBus._off("rotationchanging",t(this,c));for(const r of t(this,Gt).values())r.destroy();t(this,Gt).clear(),t(this,Dt).clear(),t(this,te).clear(),O(this,xt,null),t(this,Zt).clear(),t(this,$t).destroy(),(e=t(this,Nt))==null||e.destroy(),t(this,re)&&(clearTimeout(t(this,re)),O(this,re,null)),t(this,E)&&(clearTimeout(t(this,E)),O(this,E,null))}get hcmFilter(){return(0,h.shadow)(this,"hcmFilter",t(this,ne)?t(this,Xt).addHCMFilter(t(this,ne).foreground,t(this,ne).background):"none")}get direction(){return(0,h.shadow)(this,"direction",getComputedStyle(t(this,l)).direction)}get highlightColors(){return(0,h.shadow)(this,"highlightColors",t(this,Wt)?new Map(t(this,Wt).split(",").map(e=>e.split("=").map(r=>r.trim()))):null)}setMainHighlightColorPicker(e){O(this,me,e)}editAltText(e){var r;(r=t(this,Nt))==null||r.editAltText(this,e)}onPageChanging({pageNumber:e}){O(this,ve,e-1)}focusMainContainer(){t(this,l).focus()}findParent(e,r){for(const C of t(this,Gt).values()){const{x:F,y:tt,width:rt,height:yt}=C.div.getBoundingClientRect();if(e>=F&&e<=F+rt&&r>=tt&&r<=tt+yt)return C}return null}disableUserSelect(e=!1){t(this,u).classList.toggle("noUserSelect",e)}addShouldRescale(e){t(this,te).add(e)}removeShouldRescale(e){t(this,te).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*st.PixelsPerInch.PDF_TO_CSS_UNITS;for(const r of t(this,te))r.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&t(this,Kt)&&!t(this,Kt).has(e.id)&&t(this,Kt).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const r of t(this,Zt))if(r.div.contains(e)){O(this,jt,[r,e]),r._focusEventsAllowed=!1;break}}focus(){if(!t(this,jt))return;const[e,r]=t(this,jt);O(this,jt,null),r.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),r.focus()}addEditListeners(){M(this,Z,_n).call(this),M(this,I,En).call(this)}removeEditListeners(){M(this,Y,Ci).call(this),M(this,L,Cn).call(this)}copy(e){var C;if(e.preventDefault(),(C=t(this,xt))==null||C.commitOrRemove(),!this.hasSelection)return;const r=[];for(const F of t(this,Zt)){const tt=F.serialize(!0);tt&&r.push(tt)}r.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:r}=e;for(const tt of r.items)for(const rt of t(this,oe))if(rt.isHandlingMimeForPasting(tt.type)){rt.paste(tt,this.currentLayer);return}let C=r.getData("application/pdfjs");if(!C)return;try{C=JSON.parse(C)}catch(tt){(0,h.warn)(`paste: "${tt.message}".`);return}if(!Array.isArray(C))return;this.unselectAll();const F=this.currentLayer;try{const tt=[];for(const kt of C){const St=F.deserialize(kt);if(!St)return;tt.push(St)}const rt=()=>{for(const kt of tt)M(this,Yt,Sn).call(this,kt);M(this,vt,Tn).call(this,tt)},yt=()=>{for(const kt of tt)kt.remove()};this.addCommands({cmd:rt,undo:yt,mustExec:!0})}catch(tt){(0,h.warn)(`paste: "${tt.message}".`)}}keydown(e){this.isEditorHandlingKeyboard||Tt._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(M(this,_,Sr).call(this),M(this,Z,_n).call(this),M(this,I,En).call(this),M(this,ot,He).call(this,{isEditing:t(this,pe)!==h.AnnotationEditorType.NONE,isEmpty:M(this,nt,Qs).call(this),hasSomethingToUndo:t(this,$t).hasSomethingToUndo(),hasSomethingToRedo:t(this,$t).hasSomethingToRedo(),hasSelectedEditor:!1})):(M(this,x,xn).call(this),M(this,Y,Ci).call(this),M(this,L,Cn).call(this),M(this,ot,He).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!t(this,oe)){O(this,oe,e);for(const r of t(this,oe))M(this,bt,Js).call(this,r.defaultPropertiesToUpdate)}}getId(){return t(this,le).getId()}get currentLayer(){return t(this,Gt).get(t(this,ve))}getLayer(e){return t(this,Gt).get(e)}get currentPageIndex(){return t(this,ve)}addLayer(e){t(this,Gt).set(e.pageIndex,e),t(this,ie)?e.enable():e.disable()}removeLayer(e){t(this,Gt).delete(e.pageIndex)}updateMode(e,r=null,C=!1){if(t(this,pe)!==e){if(O(this,pe,e),e===h.AnnotationEditorType.NONE){this.setEditingState(!1),M(this,ee,kr).call(this);return}this.setEditingState(!0),M(this,It,Tr).call(this),this.unselectAll();for(const F of t(this,Gt).values())F.updateMode(e);if(!r&&C){this.addNewEditorFromKeyboard();return}if(r){for(const F of t(this,Dt).values())if(F.annotationElementId===r){this.setSelected(F),F.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==t(this,pe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,r){var C;if(t(this,oe)){switch(e){case h.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case h.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(C=t(this,me))==null||C.updateColor(r);break}for(const F of t(this,Zt))F.updateParams(e,r);for(const F of t(this,oe))F.updateDefaultParams(e,r)}}enableWaiting(e=!1){if(t(this,he)!==e){O(this,he,e);for(const r of t(this,Gt).values())e?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",e)}}getEditors(e){const r=[];for(const C of t(this,Dt).values())C.pageIndex===e&&r.push(C);return r}getEditor(e){return t(this,Dt).get(e)}addEditor(e){t(this,Dt).set(e.id,e)}removeEditor(e){var r;e.div.contains(document.activeElement)&&(t(this,re)&&clearTimeout(t(this,re)),O(this,re,setTimeout(()=>{this.focusMainContainer(),O(this,re,null)},0))),t(this,Dt).delete(e.id),this.unselect(e),(!e.annotationElementId||!t(this,Jt).has(e.annotationElementId))&&((r=t(this,Kt))==null||r.remove(e.id))}addDeletedAnnotationElement(e){t(this,Jt).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return t(this,Jt).has(e)}removeDeletedAnnotationElement(e){t(this,Jt).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){t(this,xt)!==e&&(O(this,xt,e),e&&M(this,bt,Js).call(this,e.propertiesToUpdate))}toggleSelected(e){if(t(this,Zt).has(e)){t(this,Zt).delete(e),e.unselect(),M(this,ot,He).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,Zt).add(e),e.select(),M(this,bt,Js).call(this,e.propertiesToUpdate),M(this,ot,He).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const r of t(this,Zt))r!==e&&r.unselect();t(this,Zt).clear(),t(this,Zt).add(e),e.select(),M(this,bt,Js).call(this,e.propertiesToUpdate),M(this,ot,He).call(this,{hasSelectedEditor:!0})}isSelected(e){return t(this,Zt).has(e)}get firstSelectedEditor(){return t(this,Zt).values().next().value}unselect(e){e.unselect(),t(this,Zt).delete(e),M(this,ot,He).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,Zt).size!==0}get isEnterHandled(){return t(this,Zt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){t(this,$t).undo(),M(this,ot,He).call(this,{hasSomethingToUndo:t(this,$t).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:M(this,nt,Qs).call(this)})}redo(){t(this,$t).redo(),M(this,ot,He).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,$t).hasSomethingToRedo(),isEmpty:M(this,nt,Qs).call(this)})}addCommands(e){t(this,$t).add(e),M(this,ot,He).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:M(this,nt,Qs).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...t(this,Zt)],r=()=>{for(const F of e)F.remove()},C=()=>{for(const F of e)M(this,Yt,Sn).call(this,F)};this.addCommands({cmd:r,undo:C,mustExec:!0})}commitOrRemove(){var e;(e=t(this,xt))==null||e.commitOrRemove()}hasSomethingToControl(){return t(this,xt)||this.hasSelection}selectAll(){for(const e of t(this,Zt))e.commit();M(this,vt,Tn).call(this,t(this,Dt).values())}unselectAll(){if(!(t(this,xt)&&(t(this,xt).commitOrRemove(),t(this,pe)!==h.AnnotationEditorType.NONE))&&this.hasSelection){for(const e of t(this,Zt))e.unselect();t(this,Zt).clear(),M(this,ot,He).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,r,C=!1){if(C||this.commitOrRemove(),!this.hasSelection)return;t(this,o)[0]+=e,t(this,o)[1]+=r;const[F,tt]=t(this,o),rt=[...t(this,Zt)];t(this,E)&&clearTimeout(t(this,E)),O(this,E,setTimeout(()=>{O(this,E,null),t(this,o)[0]=t(this,o)[1]=0,this.addCommands({cmd:()=>{for(const kt of rt)t(this,Dt).has(kt.id)&&kt.translateInPage(F,tt)},undo:()=>{for(const kt of rt)t(this,Dt).has(kt.id)&&kt.translateInPage(-F,-tt)},mustExec:!1})},1e3));for(const kt of rt)kt.translateInPage(e,r)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),O(this,fe,new Map);for(const e of t(this,Zt))t(this,fe).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,fe))return!1;this.disableUserSelect(!1);const e=t(this,fe);O(this,fe,null);let r=!1;for(const[{x:F,y:tt,pageIndex:rt},yt]of e)yt.newX=F,yt.newY=tt,yt.newPageIndex=rt,r||(r=F!==yt.savedX||tt!==yt.savedY||rt!==yt.savedPageIndex);if(!r)return!1;const C=(F,tt,rt,yt)=>{if(t(this,Dt).has(F.id)){const kt=t(this,Gt).get(yt);kt?F._setParentAndPosition(kt,tt,rt):(F.pageIndex=yt,F.x=tt,F.y=rt)}};return this.addCommands({cmd:()=>{for(const[F,{newX:tt,newY:rt,newPageIndex:yt}]of e)C(F,tt,rt,yt)},undo:()=>{for(const[F,{savedX:tt,savedY:rt,savedPageIndex:yt}]of e)C(F,tt,rt,yt)},mustExec:!0}),!0}dragSelectedEditors(e,r){if(t(this,fe))for(const C of t(this,fe).keys())C.drag(e,r)}rebuild(e){if(e.parent===null){const r=this.getLayer(e.pageIndex);r?(r.changeParent(e),r.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||t(this,Zt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return t(this,xt)===e}getActive(){return t(this,xt)}getMode(){return t(this,pe)}get imageManager(){return(0,h.shadow)(this,"imageManager",new it)}};xt=new WeakMap,Dt=new WeakMap,Gt=new WeakMap,Nt=new WeakMap,Kt=new WeakMap,$t=new WeakMap,ve=new WeakMap,Jt=new WeakMap,fe=new WeakMap,oe=new WeakMap,te=new WeakMap,Xt=new WeakMap,re=new WeakMap,Wt=new WeakMap,le=new WeakMap,ie=new WeakMap,he=new WeakMap,jt=new WeakMap,me=new WeakMap,pe=new WeakMap,Zt=new WeakMap,ne=new WeakMap,ye=new WeakMap,$=new WeakMap,s=new WeakMap,i=new WeakMap,f=new WeakMap,R=new WeakMap,b=new WeakMap,v=new WeakMap,d=new WeakMap,c=new WeakMap,a=new WeakMap,o=new WeakMap,E=new WeakMap,l=new WeakMap,u=new WeakMap,_=new WeakSet,Sr=function(){window.addEventListener("focus",t(this,$)),window.addEventListener("blur",t(this,ye))},x=new WeakSet,xn=function(){window.removeEventListener("focus",t(this,$)),window.removeEventListener("blur",t(this,ye))},Z=new WeakSet,_n=function(){window.addEventListener("keydown",t(this,R))},Y=new WeakSet,Ci=function(){window.removeEventListener("keydown",t(this,R))},I=new WeakSet,En=function(){document.addEventListener("copy",t(this,s)),document.addEventListener("cut",t(this,i)),document.addEventListener("paste",t(this,f))},L=new WeakSet,Cn=function(){document.removeEventListener("copy",t(this,s)),document.removeEventListener("cut",t(this,i)),document.removeEventListener("paste",t(this,f))},ot=new WeakSet,He=function(e){Object.entries(e).some(([r,C])=>t(this,a)[r]!==C)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,a),e)})},bt=new WeakSet,Js=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},It=new WeakSet,Tr=function(){if(!t(this,ie)){O(this,ie,!0);for(const e of t(this,Gt).values())e.enable()}},ee=new WeakSet,kr=function(){if(this.unselectAll(),t(this,ie)){O(this,ie,!1);for(const e of t(this,Gt).values())e.disable()}},Yt=new WeakSet,Sn=function(e){const r=t(this,Gt).get(e.pageIndex);r?r.addOrRebuild(e):this.addEditor(e)},nt=new WeakSet,Qs=function(){if(t(this,Dt).size===0)return!0;if(t(this,Dt).size===1)for(const e of t(this,Dt).values())return e.isEmpty();return!1},vt=new WeakSet,Tn=function(e){t(this,Zt).clear();for(const r of e)r.isEmpty()||(t(this,Zt).add(r),r.select());M(this,ot,He).call(this,{hasSelectedEditor:!0})},be(Tt,"TRANSLATE_SMALL",1),be(Tt,"TRANSLATE_BIG",10);let G=Tt},171:(Mt,Et,ht)=>{ht.d(Et,{PDFFetchStream:()=>it});var h=ht(266),st=ht(253);function A(z,G,D){return{method:"GET",headers:z,signal:D.signal,mode:"cors",credentials:G?"include":"same-origin",redirect:"follow"}}function H(z){const G=new Headers;for(const D in z){const at=z[D];at!==void 0&&G.append(D,at)}return G}function gt(z){return z instanceof Uint8Array?z.buffer:z instanceof ArrayBuffer?z:((0,h.warn)(`getArrayBuffer - unexpected data format: ${z}`),new Uint8Array(z).buffer)}class it{constructor(G){this.source=G,this.isHttp=/^https?:/i.test(G.url),this.httpHeaders=this.isHttp&&G.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var G;return((G=this._fullRequestReader)==null?void 0:G._loaded)??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new U(this),this._fullRequestReader}getRangeReader(G,D){if(D<=this._progressiveDataLength)return null;const at=new w(this,G,D);return this._rangeRequestReaders.push(at),at}cancelAllRequests(G){var D;(D=this._fullRequestReader)==null||D.cancel(G);for(const at of this._rangeRequestReaders.slice(0))at.cancel(G)}}class U{constructor(G){this._stream=G,this._reader=null,this._loaded=0,this._filename=null;const D=G.source;this._withCredentials=D.withCredentials||!1,this._contentLength=D.length,this._headersCapability=new h.PromiseCapability,this._disableRange=D.disableRange||!1,this._rangeChunkSize=D.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!D.disableStream,this._isRangeSupported=!D.disableRange,this._headers=H(this._stream.httpHeaders);const at=D.url;fetch(at,A(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,st.validateResponseStatus)(T.status))throw(0,st.createResponseStatusError)(T.status,at);this._reader=T.body.getReader(),this._headersCapability.resolve();const q=K=>T.headers.get(K),{allowRangeRequests:B,suggestedLength:W}=(0,st.validateRangeRequestCapabilities)({getResponseHeader:q,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=B,this._contentLength=W||this._contentLength,this._filename=(0,st.extractFilenameFromHeader)(q),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new h.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var at;await this._headersCapability.promise;const{value:G,done:D}=await this._reader.read();return D?{value:G,done:D}:(this._loaded+=G.byteLength,(at=this.onProgress)==null||at.call(this,{loaded:this._loaded,total:this._contentLength}),{value:gt(G),done:!1})}cancel(G){var D;(D=this._reader)==null||D.cancel(G),this._abortController.abort()}}class w{constructor(G,D,at){this._stream=G,this._reader=null,this._loaded=0;const T=G.source;this._withCredentials=T.withCredentials||!1,this._readCapability=new h.PromiseCapability,this._isStreamingSupported=!T.disableStream,this._abortController=new AbortController,this._headers=H(this._stream.httpHeaders),this._headers.append("Range",`bytes=${D}-${at-1}`);const q=T.url;fetch(q,A(this._headers,this._withCredentials,this._abortController)).then(B=>{if(!(0,st.validateResponseStatus)(B.status))throw(0,st.createResponseStatusError)(B.status,q);this._readCapability.resolve(),this._reader=B.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var at;await this._readCapability.promise;const{value:G,done:D}=await this._reader.read();return D?{value:G,done:D}:(this._loaded+=G.byteLength,(at=this.onProgress)==null||at.call(this,{loaded:this._loaded}),{value:gt(G),done:!1})}cancel(G){var D;(D=this._reader)==null||D.cancel(G),this._abortController.abort()}}},742:(Mt,Et,ht)=>{var H;ht.d(Et,{FontFaceObject:()=>A,FontLoader:()=>st});var h=ht(266);class st{constructor({ownerDocument:it=globalThis.document,styleElement:U=null}){m(this,H,new Set);this._document=it,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(it){this.nativeFontFaces.add(it),this._document.fonts.add(it)}removeNativeFontFace(it){this.nativeFontFaces.delete(it),this._document.fonts.delete(it)}insertRule(it){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const U=this.styleElement.sheet;U.insertRule(it,U.cssRules.length)}clear(){for(const it of this.nativeFontFaces)this._document.fonts.delete(it);this.nativeFontFaces.clear(),t(this,H).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:it,_inspectFont:U}){if(!(!it||t(this,H).has(it.loadedName))){if((0,h.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:w,src:z,style:G}=it,D=new FontFace(w,z,G);this.addNativeFontFace(D);try{await D.load(),t(this,H).add(w),U==null||U(it)}catch{(0,h.warn)(`Cannot load system font: ${it.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(D)}return}(0,h.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(it){if(it.attached||it.missingFile&&!it.systemFontInfo)return;if(it.attached=!0,it.systemFontInfo){await this.loadSystemFont(it);return}if(this.isFontLoadingAPISupported){const w=it.createNativeFontFace();if(w){this.addNativeFontFace(w);try{await w.loaded}catch(z){throw(0,h.warn)(`Failed to load font '${w.family}': '${z}'.`),it.disableFontFace=!0,z}}return}const U=it.createFontFaceRule();if(U){if(this.insertRule(U),this.isSyncFontLoadingSupported)return;await new Promise(w=>{const z=this._queueLoadingCallback(w);this._prepareFontLoadEvent(it,z)})}}get isFontLoadingAPISupported(){var U;const it=!!((U=this._document)!=null&&U.fonts);return(0,h.shadow)(this,"isFontLoadingAPISupported",it)}get isSyncFontLoadingSupported(){let it=!1;return(h.isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(it=!0),(0,h.shadow)(this,"isSyncFontLoadingSupported",it)}_queueLoadingCallback(it){function U(){for((0,h.assert)(!z.done,"completeRequest() cannot be called twice."),z.done=!0;w.length>0&&w[0].done;){const G=w.shift();setTimeout(G.callback,0)}}const{loadingRequests:w}=this,z={done:!1,complete:U,callback:it};return w.push(z),z}get _loadTestFont(){const it=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,h.shadow)(this,"_loadTestFont",it)}_prepareFontLoadEvent(it,U){function w(dt,xt){return dt.charCodeAt(xt)<<24|dt.charCodeAt(xt+1)<<16|dt.charCodeAt(xt+2)<<8|dt.charCodeAt(xt+3)&255}function z(dt,xt,Dt,Gt){const Nt=dt.substring(0,xt),Kt=dt.substring(xt+Dt);return Nt+Gt+Kt}let G,D;const at=this._document.createElement("canvas");at.width=1,at.height=1;const T=at.getContext("2d");let q=0;function B(dt,xt){if(++q>30){(0,h.warn)("Load test font never loaded."),xt();return}if(T.font="30px "+dt,T.fillText(".",0,20),T.getImageData(0,0,1,1).data[3]>0){xt();return}setTimeout(B.bind(null,dt,xt))}const W=`lt${Date.now()}${this.loadTestFontId++}`;let K=this._loadTestFont;K=z(K,976,W.length,W);const P=16,Q=1482184792;let S=w(K,P);for(G=0,D=W.length-3;G<D;G+=4)S=S-Q+w(W,G)|0;G<W.length&&(S=S-Q+w(W+"XXX",G)|0),K=z(K,P,4,(0,h.string32)(S));const X=`url(data:font/opentype;base64,${btoa(K)});`,ft=`@font-face {font-family:"${W}";src:${X}}`;this.insertRule(ft);const Ct=this._document.createElement("div");Ct.style.visibility="hidden",Ct.style.width=Ct.style.height="10px",Ct.style.position="absolute",Ct.style.top=Ct.style.left="0px";for(const dt of[it.loadedName,W]){const xt=this._document.createElement("span");xt.textContent="Hi",xt.style.fontFamily=dt,Ct.append(xt)}this._document.body.append(Ct),B(W,()=>{Ct.remove(),U.complete()})}}H=new WeakMap;class A{constructor(it,{isEvalSupported:U=!0,disableFontFace:w=!1,ignoreErrors:z=!1,inspectFont:G=null}){this.compiledGlyphs=Object.create(null);for(const D in it)this[D]=it[D];this.isEvalSupported=U!==!1,this.disableFontFace=w===!0,this.ignoreErrors=z===!0,this._inspectFont=G}createNativeFontFace(){var U;if(!this.data||this.disableFontFace)return null;let it;if(!this.cssFontInfo)it=new FontFace(this.loadedName,this.data,{});else{const w={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(w.style=`oblique ${this.cssFontInfo.italicAngle}deg`),it=new FontFace(this.cssFontInfo.fontFamily,this.data,w)}return(U=this._inspectFont)==null||U.call(this,this),it}createFontFaceRule(){var z;if(!this.data||this.disableFontFace)return null;const it=(0,h.bytesToString)(this.data),U=`url(data:${this.mimetype};base64,${btoa(it)});`;let w;if(!this.cssFontInfo)w=`@font-face {font-family:"${this.loadedName}";src:${U}}`;else{let G=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(G+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),w=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${G}src:${U}}`}return(z=this._inspectFont)==null||z.call(this,this,U),w}getPathGenerator(it,U){if(this.compiledGlyphs[U]!==void 0)return this.compiledGlyphs[U];let w;try{w=it.get(this.loadedName+"_path_"+U)}catch(z){if(!this.ignoreErrors)throw z;return(0,h.warn)(`getPathGenerator - ignoring character: "${z}".`),this.compiledGlyphs[U]=function(G,D){}}if(this.isEvalSupported&&h.FeatureTest.isEvalSupported){const z=[];for(const G of w){const D=G.args!==void 0?G.args.join(","):"";z.push("c.",G.cmd,"(",D,`);
`)}return this.compiledGlyphs[U]=new Function("c","size",z.join(""))}return this.compiledGlyphs[U]=function(z,G){for(const D of w)D.cmd==="scale"&&(D.args=[G,-G]),z[D.cmd].apply(z,D.args)}}}},472:(Mt,Et,ht)=>{var A,H;ht.d(Et,{Metadata:()=>st});var h=ht(266);class st{constructor({parsedData:it,rawData:U}){m(this,A,void 0);m(this,H,void 0);O(this,A,it),O(this,H,U)}getRaw(){return t(this,H)}get(it){return t(this,A).get(it)??null}getAll(){return(0,h.objectFromMap)(t(this,A))}has(it){return t(this,A).has(it)}}A=new WeakMap,H=new WeakMap},474:(Mt,Et,ht)=>{ht.d(Et,{PDFNetworkStream:()=>U});var h=ht(266),st=ht(253);const A=200,H=206;function gt(G){const D=G.response;return typeof D!="string"?D:(0,h.stringToBytes)(D).buffer}class it{constructor(D,at={}){this.url=D,this.isHttp=/^https?:/i.test(D),this.httpHeaders=this.isHttp&&at.httpHeaders||Object.create(null),this.withCredentials=at.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(D,at,T){const q={begin:D,end:at};for(const B in T)q[B]=T[B];return this.request(q)}requestFull(D){return this.request(D)}request(D){const at=new XMLHttpRequest,T=this.currXhrId++,q=this.pendingRequests[T]={xhr:at};at.open("GET",this.url),at.withCredentials=this.withCredentials;for(const B in this.httpHeaders){const W=this.httpHeaders[B];W!==void 0&&at.setRequestHeader(B,W)}return this.isHttp&&"begin"in D&&"end"in D?(at.setRequestHeader("Range",`bytes=${D.begin}-${D.end-1}`),q.expectedStatus=H):q.expectedStatus=A,at.responseType="arraybuffer",D.onError&&(at.onerror=function(B){D.onError(at.status)}),at.onreadystatechange=this.onStateChange.bind(this,T),at.onprogress=this.onProgress.bind(this,T),q.onHeadersReceived=D.onHeadersReceived,q.onDone=D.onDone,q.onError=D.onError,q.onProgress=D.onProgress,at.send(null),T}onProgress(D,at){var q;const T=this.pendingRequests[D];T&&((q=T.onProgress)==null||q.call(T,at))}onStateChange(D,at){var K,P,Q;const T=this.pendingRequests[D];if(!T)return;const q=T.xhr;if(q.readyState>=2&&T.onHeadersReceived&&(T.onHeadersReceived(),delete T.onHeadersReceived),q.readyState!==4||!(D in this.pendingRequests))return;if(delete this.pendingRequests[D],q.status===0&&this.isHttp){(K=T.onError)==null||K.call(T,q.status);return}const B=q.status||A;if(!(B===A&&T.expectedStatus===H)&&B!==T.expectedStatus){(P=T.onError)==null||P.call(T,q.status);return}const W=gt(q);if(B===H){const S=q.getResponseHeader("Content-Range"),X=/bytes (\d+)-(\d+)\/(\d+)/.exec(S);T.onDone({begin:parseInt(X[1],10),chunk:W})}else W?T.onDone({begin:0,chunk:W}):(Q=T.onError)==null||Q.call(T,q.status)}getRequestXhr(D){return this.pendingRequests[D].xhr}isPendingRequest(D){return D in this.pendingRequests}abortRequest(D){const at=this.pendingRequests[D].xhr;delete this.pendingRequests[D],at.abort()}}class U{constructor(D){this._source=D,this._manager=new it(D.url,{httpHeaders:D.httpHeaders,withCredentials:D.withCredentials}),this._rangeChunkSize=D.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(D){const at=this._rangeRequestReaders.indexOf(D);at>=0&&this._rangeRequestReaders.splice(at,1)}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new w(this._manager,this._source),this._fullRequestReader}getRangeReader(D,at){const T=new z(this._manager,D,at);return T.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(T),T}cancelAllRequests(D){var at;(at=this._fullRequestReader)==null||at.cancel(D);for(const T of this._rangeRequestReaders.slice(0))T.cancel(D)}}class w{constructor(D,at){this._manager=D;const T={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=at.url,this._fullRequestId=D.requestFull(T),this._headersReceivedCapability=new h.PromiseCapability,this._disableRange=at.disableRange||!1,this._contentLength=at.length,this._rangeChunkSize=at.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const D=this._fullRequestId,at=this._manager.getRequestXhr(D),T=W=>at.getResponseHeader(W),{allowRangeRequests:q,suggestedLength:B}=(0,st.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});q&&(this._isRangeSupported=!0),this._contentLength=B||this._contentLength,this._filename=(0,st.extractFilenameFromHeader)(T),this._isRangeSupported&&this._manager.abortRequest(D),this._headersReceivedCapability.resolve()}_onDone(D){if(D&&(this._requests.length>0?this._requests.shift().resolve({value:D.chunk,done:!1}):this._cachedChunks.push(D.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const at of this._requests)at.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(D){this._storedError=(0,st.createResponseStatusError)(D,this._url),this._headersReceivedCapability.reject(this._storedError);for(const at of this._requests)at.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(D){var at;(at=this.onProgress)==null||at.call(this,{loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const D=new h.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0,this._headersReceivedCapability.reject(D);for(const at of this._requests)at.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class z{constructor(D,at,T){this._manager=D;const q={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._requestId=D.requestRange(at,T,q),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var D;(D=this.onClosed)==null||D.call(this,this)}_onDone(D){const at=D.chunk;this._requests.length>0?this._requests.shift().resolve({value:at,done:!1}):this._queuedChunk=at,this._done=!0;for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(D){this._storedError=(0,st.createResponseStatusError)(D,this._url);for(const at of this._requests)at.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(D){var at;this.isStreamingSupported||((at=this.onProgress)==null||at.call(this,{loaded:D.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const at=this._queuedChunk;return this._queuedChunk=null,{value:at,done:!1}}if(this._done)return{value:void 0,done:!0};const D=new h.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0;for(const at of this._requests)at.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},253:(Mt,Et,ht)=>{ht.d(Et,{createResponseStatusError:()=>it,extractFilenameFromHeader:()=>gt,validateRangeRequestCapabilities:()=>H,validateResponseStatus:()=>U});var h=ht(266);function st(w){let z=!0,G=D("filename\\*","i").exec(w);if(G){G=G[1];let P=B(G);return P=unescape(P),P=W(P),P=K(P),T(P)}if(G=q(w),G){const P=K(G);return T(P)}if(G=D("filename","i").exec(w),G){G=G[1];let P=B(G);return P=K(P),T(P)}function D(P,Q){return new RegExp("(?:^|;)\\s*"+P+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Q)}function at(P,Q){if(P){if(!/^[\x00-\xFF]+$/.test(Q))return Q;try{const S=new TextDecoder(P,{fatal:!0}),X=(0,h.stringToBytes)(Q);Q=S.decode(X),z=!1}catch{}}return Q}function T(P){return z&&/[\x80-\xff]/.test(P)&&(P=at("utf-8",P),z&&(P=at("iso-8859-1",P))),P}function q(P){const Q=[];let S;const X=D("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(S=X.exec(P))!==null;){let[,Ct,dt,xt]=S;if(Ct=parseInt(Ct,10),Ct in Q){if(Ct===0)break;continue}Q[Ct]=[dt,xt]}const ft=[];for(let Ct=0;Ct<Q.length&&Ct in Q;++Ct){let[dt,xt]=Q[Ct];xt=B(xt),dt&&(xt=unescape(xt),Ct===0&&(xt=W(xt))),ft.push(xt)}return ft.join("")}function B(P){if(P.startsWith('"')){const Q=P.slice(1).split('\\"');for(let S=0;S<Q.length;++S){const X=Q[S].indexOf('"');X!==-1&&(Q[S]=Q[S].slice(0,X),Q.length=S+1),Q[S]=Q[S].replaceAll(/\\(.)/g,"$1")}P=Q.join('"')}return P}function W(P){const Q=P.indexOf("'");if(Q===-1)return P;const S=P.slice(0,Q),X=P.slice(Q+1).replace(/^[^']*'/,"");return at(S,X)}function K(P){return!P.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(P)?P:P.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Q,S,X,ft){if(X==="q"||X==="Q")return ft=ft.replaceAll("_"," "),ft=ft.replaceAll(/=([0-9a-fA-F]{2})/g,function(Ct,dt){return String.fromCharCode(parseInt(dt,16))}),at(S,ft);try{ft=atob(ft)}catch{}return at(S,ft)})}return""}var A=ht(473);function H({getResponseHeader:w,isHttp:z,rangeChunkSize:G,disableRange:D}){const at={allowRangeRequests:!1,suggestedLength:void 0},T=parseInt(w("Content-Length"),10);return!Number.isInteger(T)||(at.suggestedLength=T,T<=2*G)||D||!z||w("Accept-Ranges")!=="bytes"||(w("Content-Encoding")||"identity")!=="identity"||(at.allowRangeRequests=!0),at}function gt(w){const z=w("Content-Disposition");if(z){let G=st(z);if(G.includes("%"))try{G=decodeURIComponent(G)}catch{}if((0,A.isPdfFile)(G))return G}return null}function it(w,z){return w===404||w===0&&z.startsWith("file:")?new h.MissingPDFException('Missing PDF "'+z+'".'):new h.UnexpectedResponseException(`Unexpected server response (${w}) while retrieving PDF "${z}".`,w)}function U(w){return w===200||w===206}},498:(Mt,Et,ht)=>{ht.a(Mt,async(h,st)=>{try{let gt=function(Q){const S=G.parse(Q);return S.protocol==="file:"||S.host?S:/^[a-z]:[/\\]/i.test(Q)?G.parse(`file:///${Q}`):(S.host||(S.protocol="file:"),S)},it=function(Q,S){return{protocol:Q.protocol,auth:Q.auth,host:Q.hostname,port:Q.port,path:Q.path,method:"GET",headers:S}};ht.d(Et,{PDFNodeStream:()=>at});var A=ht(266),H=ht(253);let U,w,z,G;A.isNodeJS&&(U=await ts(()=>import("./chunk.js"),[]),w=await ts(()=>import("./chunk.js"),[]),z=await ts(()=>import("./chunk.js"),[]),G=await ts(()=>import("./chunk.js"),[]));const D=/^file:\/\/\/[a-zA-Z]:\//;class at{constructor(S){this.source=S,this.url=gt(S.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var S;return((S=this._fullRequestReader)==null?void 0:S._loaded)??0}getFullReader(){return(0,A.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new K(this):new B(this),this._fullRequestReader}getRangeReader(S,X){if(X<=this._progressiveDataLength)return null;const ft=this.isFsUrl?new P(this,S,X):new W(this,S,X);return this._rangeRequestReaders.push(ft),ft}cancelAllRequests(S){var X;(X=this._fullRequestReader)==null||X.cancel(S);for(const ft of this._rangeRequestReaders.slice(0))ft.cancel(S)}}class T{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null;const X=S.source;this._contentLength=X.length,this._loaded=0,this._filename=null,this._disableRange=X.disableRange||!1,this._rangeChunkSize=X.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!X.disableStream,this._isRangeSupported=!X.disableRange,this._readableStream=null,this._readCapability=new A.PromiseCapability,this._headersCapability=new A.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var X;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new A.PromiseCapability,this.read()):(this._loaded+=S.length,(X=this.onProgress)==null||X.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",X=>{this._error(X)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new A.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class q{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new A.PromiseCapability;const X=S.source;this._isStreamingSupported=!X.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var X;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new A.PromiseCapability,this.read()):(this._loaded+=S.length,(X=this.onProgress)==null||X.call(this,{loaded:this._loaded}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",X=>{this._error(X)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class B extends T{constructor(S){super(S);const X=ft=>{if(ft.statusCode===404){const Dt=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Dt,this._headersCapability.reject(Dt);return}this._headersCapability.resolve(),this._setReadableStream(ft);const Ct=Dt=>this._readableStream.headers[Dt.toLowerCase()],{allowRangeRequests:dt,suggestedLength:xt}=(0,H.validateRangeRequestCapabilities)({getResponseHeader:Ct,isHttp:S.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=dt,this._contentLength=xt||this._contentLength,this._filename=(0,H.extractFilenameFromHeader)(Ct)};this._request=null,this._url.protocol==="http:"?this._request=w.request(it(this._url,S.httpHeaders),X):this._request=z.request(it(this._url,S.httpHeaders),X),this._request.on("error",ft=>{this._storedError=ft,this._headersCapability.reject(ft)}),this._request.end()}}class W extends q{constructor(S,X,ft){super(S),this._httpHeaders={};for(const dt in S.httpHeaders){const xt=S.httpHeaders[dt];xt!==void 0&&(this._httpHeaders[dt]=xt)}this._httpHeaders.Range=`bytes=${X}-${ft-1}`;const Ct=dt=>{if(dt.statusCode===404){const xt=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=xt;return}this._setReadableStream(dt)};this._request=null,this._url.protocol==="http:"?this._request=w.request(it(this._url,this._httpHeaders),Ct):this._request=z.request(it(this._url,this._httpHeaders),Ct),this._request.on("error",dt=>{this._storedError=dt}),this._request.end()}}class K extends T{constructor(S){super(S);let X=decodeURIComponent(this._url.path);D.test(this._url.href)&&(X=X.replace(/^\//,"")),U.lstat(X,(ft,Ct)=>{if(ft){ft.code==="ENOENT"&&(ft=new A.MissingPDFException(`Missing PDF "${X}".`)),this._storedError=ft,this._headersCapability.reject(ft);return}this._contentLength=Ct.size,this._setReadableStream(U.createReadStream(X)),this._headersCapability.resolve()})}}class P extends q{constructor(S,X,ft){super(S);let Ct=decodeURIComponent(this._url.path);D.test(this._url.href)&&(Ct=Ct.replace(/^\//,"")),this._setReadableStream(U.createReadStream(Ct,{start:X,end:ft-1}))}}st()}catch(gt){st(gt)}},1)},738:(Mt,Et,ht)=>{ht.a(Mt,async(h,st)=>{try{ht.d(Et,{NodeCMapReaderFactory:()=>D,NodeCanvasFactory:()=>G,NodeFilterFactory:()=>z,NodeStandardFontDataFactory:()=>at});var A=ht(822),H=ht(266);let gt,it,U;if(H.isNodeJS){gt=await ts(()=>import("./chunk.js"),[]);try{it=await ts(()=>import("./chunk.js"),[])}catch{}try{U=await ts(()=>import("./chunk2.js"),[])}catch{}}const w=function(T){return new Promise((q,B)=>{gt.readFile(T,(W,K)=>{if(W||!K){B(new Error(W));return}q(new Uint8Array(K))})})};class z extends A.BaseFilterFactory{}class G extends A.BaseCanvasFactory{_createCanvas(q,B){return it.createCanvas(q,B)}}class D extends A.BaseCMapReaderFactory{_fetchData(q,B){return w(q).then(W=>({cMapData:W,compressionType:B}))}}class at extends A.BaseStandardFontDataFactory{_fetchData(q){return w(q)}}st()}catch(gt){st(gt)}},1)},890:(Mt,Et,ht)=>{var it,U,w,z,G,D,kn;ht.d(Et,{OptionalContentConfig:()=>gt});var h=ht(266),st=ht(825);const A=Symbol("INTERNAL");class H{constructor(q,B){m(this,it,!0);this.name=q,this.intent=B}get visible(){return t(this,it)}_setVisible(q,B){q!==A&&(0,h.unreachable)("Internal method `_setVisible` called."),O(this,it,B)}}it=new WeakMap;class gt{constructor(q){m(this,D);m(this,U,null);m(this,w,new Map);m(this,z,null);m(this,G,null);if(this.name=null,this.creator=null,q!==null){this.name=q.name,this.creator=q.creator,O(this,G,q.order);for(const B of q.groups)t(this,w).set(B.id,new H(B.name,B.intent));if(q.baseState==="OFF")for(const B of t(this,w).values())B._setVisible(A,!1);for(const B of q.on)t(this,w).get(B)._setVisible(A,!0);for(const B of q.off)t(this,w).get(B)._setVisible(A,!1);O(this,z,this.getHash())}}isVisible(q){if(t(this,w).size===0)return!0;if(!q)return(0,h.warn)("Optional content group not defined."),!0;if(q.type==="OCG")return t(this,w).has(q.id)?t(this,w).get(q.id).visible:((0,h.warn)(`Optional content group not found: ${q.id}`),!0);if(q.type==="OCMD"){if(q.expression)return M(this,D,kn).call(this,q.expression);if(!q.policy||q.policy==="AnyOn"){for(const B of q.ids){if(!t(this,w).has(B))return(0,h.warn)(`Optional content group not found: ${B}`),!0;if(t(this,w).get(B).visible)return!0}return!1}else if(q.policy==="AllOn"){for(const B of q.ids){if(!t(this,w).has(B))return(0,h.warn)(`Optional content group not found: ${B}`),!0;if(!t(this,w).get(B).visible)return!1}return!0}else if(q.policy==="AnyOff"){for(const B of q.ids){if(!t(this,w).has(B))return(0,h.warn)(`Optional content group not found: ${B}`),!0;if(!t(this,w).get(B).visible)return!0}return!1}else if(q.policy==="AllOff"){for(const B of q.ids){if(!t(this,w).has(B))return(0,h.warn)(`Optional content group not found: ${B}`),!0;if(t(this,w).get(B).visible)return!1}return!0}return(0,h.warn)(`Unknown optional content policy ${q.policy}.`),!0}return(0,h.warn)(`Unknown group type ${q.type}.`),!0}setVisibility(q,B=!0){if(!t(this,w).has(q)){(0,h.warn)(`Optional content group not found: ${q}`);return}t(this,w).get(q)._setVisible(A,!!B),O(this,U,null)}get hasInitialVisibility(){return t(this,z)===null||this.getHash()===t(this,z)}getOrder(){return t(this,w).size?t(this,G)?t(this,G).slice():[...t(this,w).keys()]:null}getGroups(){return t(this,w).size>0?(0,h.objectFromMap)(t(this,w)):null}getGroup(q){return t(this,w).get(q)||null}getHash(){if(t(this,U)!==null)return t(this,U);const q=new st.MurmurHash3_64;for(const[B,W]of t(this,w))q.update(`${B}:${W.visible}`);return O(this,U,q.hexdigest())}}U=new WeakMap,w=new WeakMap,z=new WeakMap,G=new WeakMap,D=new WeakSet,kn=function(q){const B=q.length;if(B<2)return!0;const W=q[0];for(let K=1;K<B;K++){const P=q[K];let Q;if(Array.isArray(P))Q=M(this,D,kn).call(this,P);else if(t(this,w).has(P))Q=t(this,w).get(P).visible;else return(0,h.warn)(`Optional content group not found: ${P}`),!0;switch(W){case"And":if(!Q)return!1;break;case"Or":if(Q)return!0;break;case"Not":return!Q;default:return!0}}return W==="And"}},739:(Mt,Et,ht)=>{ht.d(Et,{renderTextLayer:()=>T,updateTextLayer:()=>q});var h=ht(266),st=ht(473);const A=1e5,H=30,gt=.8,it=new Map;function U(B,W){let K;if(W&&h.FeatureTest.isOffscreenCanvasSupported)K=new OffscreenCanvas(B,B).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=B,K=P.getContext("2d",{alpha:!1})}return K}function w(B,W){const K=it.get(B);if(K)return K;const P=U(H,W);P.font=`${H}px ${B}`;const Q=P.measureText("");let S=Q.fontBoundingBoxAscent,X=Math.abs(Q.fontBoundingBoxDescent);if(S){const Ct=S/(S+X);return it.set(B,Ct),P.canvas.width=P.canvas.height=0,Ct}P.strokeStyle="red",P.clearRect(0,0,H,H),P.strokeText("g",0,0);let ft=P.getImageData(0,0,H,H).data;X=0;for(let Ct=ft.length-1-3;Ct>=0;Ct-=4)if(ft[Ct]>0){X=Math.ceil(Ct/4/H);break}P.clearRect(0,0,H,H),P.strokeText("A",0,H),ft=P.getImageData(0,0,H,H).data,S=0;for(let Ct=0,dt=ft.length;Ct<dt;Ct+=4)if(ft[Ct]>0){S=H-Math.floor(Ct/4/H);break}if(P.canvas.width=P.canvas.height=0,S){const Ct=S/(S+X);return it.set(B,Ct),Ct}return it.set(B,gt),gt}function z(B,W,K){const P=document.createElement("span"),Q={angle:0,canvasWidth:0,hasText:W.str!=="",hasEOL:W.hasEOL,fontSize:0};B._textDivs.push(P);const S=h.Util.transform(B._transform,W.transform);let X=Math.atan2(S[1],S[0]);const ft=K[W.fontName];ft.vertical&&(X+=Math.PI/2);const Ct=B._fontInspectorEnabled&&ft.fontSubstitution||ft.fontFamily,dt=Math.hypot(S[2],S[3]),xt=dt*w(Ct,B._isOffscreenCanvasSupported);let Dt,Gt;X===0?(Dt=S[4],Gt=S[5]-xt):(Dt=S[4]+xt*Math.sin(X),Gt=S[5]-xt*Math.cos(X));const Nt="calc(var(--scale-factor)*",Kt=P.style;B._container===B._rootContainer?(Kt.left=`${(100*Dt/B._pageWidth).toFixed(2)}%`,Kt.top=`${(100*Gt/B._pageHeight).toFixed(2)}%`):(Kt.left=`${Nt}${Dt.toFixed(2)}px)`,Kt.top=`${Nt}${Gt.toFixed(2)}px)`),Kt.fontSize=`${Nt}${dt.toFixed(2)}px)`,Kt.fontFamily=Ct,Q.fontSize=dt,P.setAttribute("role","presentation"),P.textContent=W.str,P.dir=W.dir,B._fontInspectorEnabled&&(P.dataset.fontName=ft.fontSubstitutionLoadedName||W.fontName),X!==0&&(Q.angle=X*(180/Math.PI));let $t=!1;if(W.str.length>1)$t=!0;else if(W.str!==" "&&W.transform[0]!==W.transform[3]){const ve=Math.abs(W.transform[0]),Jt=Math.abs(W.transform[3]);ve!==Jt&&Math.max(ve,Jt)/Math.min(ve,Jt)>1.5&&($t=!0)}$t&&(Q.canvasWidth=ft.vertical?W.height:W.width),B._textDivProperties.set(P,Q),B._isReadableStream&&B._layoutText(P)}function G(B){const{div:W,scale:K,properties:P,ctx:Q,prevFontSize:S,prevFontFamily:X}=B,{style:ft}=W;let Ct="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:dt}=ft,{canvasWidth:xt,fontSize:Dt}=P;(S!==Dt||X!==dt)&&(Q.font=`${Dt*K}px ${dt}`,B.prevFontSize=Dt,B.prevFontFamily=dt);const{width:Gt}=Q.measureText(W.textContent);Gt>0&&(Ct=`scaleX(${xt*K/Gt})`)}P.angle!==0&&(Ct=`rotate(${P.angle}deg) ${Ct}`),Ct.length>0&&(ft.transform=Ct)}function D(B){if(B._canceled)return;const W=B._textDivs,K=B._capability;if(W.length>A){K.resolve();return}if(!B._isReadableStream)for(const P of W)B._layoutText(P);K.resolve()}class at{constructor({textContentSource:W,container:K,viewport:P,textDivs:Q,textDivProperties:S,textContentItemsStr:X,isOffscreenCanvasSupported:ft}){var Gt;this._textContentSource=W,this._isReadableStream=W instanceof ReadableStream,this._container=this._rootContainer=K,this._textDivs=Q||[],this._textContentItemsStr=X||[],this._isOffscreenCanvasSupported=ft,this._fontInspectorEnabled=!!((Gt=globalThis.FontInspector)!=null&&Gt.enabled),this._reader=null,this._textDivProperties=S||new WeakMap,this._canceled=!1,this._capability=new h.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:U(0,ft)};const{pageWidth:Ct,pageHeight:dt,pageX:xt,pageY:Dt}=P.rawDims;this._transform=[1,0,0,-1,-xt,Dt+dt],this._pageWidth=Ct,this._pageHeight=dt,(0,st.setLayerDimensions)(K,P),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new h.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new h.AbortException("TextLayer task cancelled."))}_processItems(W,K){for(const P of W){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const Q=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),Q.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),z(this,P,K)}}_layoutText(W){const K=this._layoutTextParams.properties=this._textDivProperties.get(W);if(this._layoutTextParams.div=W,G(this._layoutTextParams),K.hasText&&this._container.append(W),K.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const W=new h.PromiseCapability;let K=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(({value:Q,done:S})=>{if(S){W.resolve();return}Object.assign(K,Q.styles),this._processItems(Q.items,K),P()},W.reject)};this._reader=this._textContentSource.getReader(),P()}else if(this._textContentSource){const{items:P,styles:Q}=this._textContentSource;this._processItems(P,Q),W.resolve()}else throw new Error('No "textContentSource" parameter specified.');W.promise.then(()=>{K=null,D(this)},this._capability.reject)}}function T(B){const W=new at(B);return W._render(),W}function q({container:B,viewport:W,textDivs:K,textDivProperties:P,isOffscreenCanvasSupported:Q,mustRotate:S=!0,mustRescale:X=!0}){if(S&&(0,st.setLayerDimensions)(B,{rotation:W.rotation}),X){const ft=U(0,Q),Ct={prevFontSize:null,prevFontFamily:null,div:null,scale:W.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ft};for(const dt of K)Ct.properties=P.get(dt),Ct.div=dt,G(Ct)}}},92:(Mt,Et,ht)=>{ht.d(Et,{PDFDataTransportStream:()=>A});var h=ht(266),st=ht(473);class A{constructor({length:U,initialData:w,progressiveDone:z=!1,contentDispositionFilename:G=null,disableRange:D=!1,disableStream:at=!1},T){if((0,h.assert)(T,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=z,this._contentDispositionFilename=G,(w==null?void 0:w.length)>0){const q=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;this._queuedChunks.push(q)}this._pdfDataRangeTransport=T,this._isStreamingSupported=!at,this._isRangeSupported=!D,this._contentLength=U,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((q,B)=>{this._onReceiveData({begin:q,chunk:B})}),this._pdfDataRangeTransport.addProgressListener((q,B)=>{this._onProgress({loaded:q,total:B})}),this._pdfDataRangeTransport.addProgressiveReadListener(q=>{this._onReceiveData({chunk:q})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:U,chunk:w}){const z=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;if(U===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(z):this._queuedChunks.push(z);else{const G=this._rangeReaders.some(function(D){return D._begin!==U?!1:(D._enqueue(z),!0)});(0,h.assert)(G,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var U;return((U=this._fullRequestReader)==null?void 0:U._loaded)??0}_onProgress(U){var w,z,G,D;U.total===void 0?(z=(w=this._rangeReaders[0])==null?void 0:w.onProgress)==null||z.call(w,{loaded:U.loaded}):(D=(G=this._fullRequestReader)==null?void 0:G.onProgress)==null||D.call(G,{loaded:U.loaded,total:U.total})}_onProgressiveDone(){var U;(U=this._fullRequestReader)==null||U.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(U){const w=this._rangeReaders.indexOf(U);w>=0&&this._rangeReaders.splice(w,1)}getFullReader(){(0,h.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const U=this._queuedChunks;return this._queuedChunks=null,new H(this,U,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(U,w){if(w<=this._progressiveDataLength)return null;const z=new gt(this,U,w);return this._pdfDataRangeTransport.requestDataRange(U,w),this._rangeReaders.push(z),z}cancelAllRequests(U){var w;(w=this._fullRequestReader)==null||w.cancel(U);for(const z of this._rangeReaders.slice(0))z.cancel(U);this._pdfDataRangeTransport.abort()}}class H{constructor(U,w,z=!1,G=null){this._stream=U,this._done=z||!1,this._filename=(0,st.isPdfFile)(G)?G:null,this._queuedChunks=w||[],this._loaded=0;for(const D of this._queuedChunks)this._loaded+=D.byteLength;this._requests=[],this._headersReady=Promise.resolve(),U._fullRequestReader=this,this.onProgress=null}_enqueue(U){this._done||(this._requests.length>0?this._requests.shift().resolve({value:U,done:!1}):this._queuedChunks.push(U),this._loaded+=U.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const U=new h.PromiseCapability;return this._requests.push(U),U.promise}cancel(U){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class gt{constructor(U,w,z){this._stream=U,this._begin=w,this._end=z,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(U){if(!this._done){if(this._requests.length===0)this._queuedChunk=U;else{this._requests.shift().resolve({value:U,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const w=this._queuedChunk;return this._queuedChunk=null,{value:w,done:!1}}if(this._done)return{value:void 0,done:!0};const U=new h.PromiseCapability;return this._requests.push(U),U.promise}cancel(U){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},368:(Mt,Et,ht)=>{ht.d(Et,{GlobalWorkerOptions:()=>h});const h=Object.create(null);h.workerPort=null,h.workerSrc=""},160:(Mt,Et,ht)=>{ht.d(Et,{XfaLayer:()=>st});var h=ht(521);class st{static setupStorage(H,gt,it,U,w){const z=U.getValue(gt,{value:null});switch(it.name){case"textarea":if(z.value!==null&&(H.textContent=z.value),w==="print")break;H.addEventListener("input",G=>{U.setValue(gt,{value:G.target.value})});break;case"input":if(it.attributes.type==="radio"||it.attributes.type==="checkbox"){if(z.value===it.attributes.xfaOn?H.setAttribute("checked",!0):z.value===it.attributes.xfaOff&&H.removeAttribute("checked"),w==="print")break;H.addEventListener("change",G=>{U.setValue(gt,{value:G.target.checked?G.target.getAttribute("xfaOn"):G.target.getAttribute("xfaOff")})})}else{if(z.value!==null&&H.setAttribute("value",z.value),w==="print")break;H.addEventListener("input",G=>{U.setValue(gt,{value:G.target.value})})}break;case"select":if(z.value!==null){H.setAttribute("value",z.value);for(const G of it.children)G.attributes.value===z.value?G.attributes.selected=!0:G.attributes.hasOwnProperty("selected")&&delete G.attributes.selected}H.addEventListener("input",G=>{const D=G.target.options,at=D.selectedIndex===-1?"":D[D.selectedIndex].value;U.setValue(gt,{value:at})});break}}static setAttributes({html:H,element:gt,storage:it=null,intent:U,linkService:w}){const{attributes:z}=gt,G=H instanceof HTMLAnchorElement;z.type==="radio"&&(z.name=`${z.name}-${U}`);for(const[D,at]of Object.entries(z))if(at!=null)switch(D){case"class":at.length&&H.setAttribute(D,at.join(" "));break;case"dataId":break;case"id":H.setAttribute("data-element-id",at);break;case"style":Object.assign(H.style,at);break;case"textContent":H.textContent=at;break;default:(!G||D!=="href"&&D!=="newWindow")&&H.setAttribute(D,at)}G&&w.addLinkAttributes(H,z.href,z.newWindow),it&&z.dataId&&this.setupStorage(H,z.dataId,gt,it)}static render(H){var q,B;const gt=H.annotationStorage,it=H.linkService,U=H.xfaHtml,w=H.intent||"display",z=document.createElement(U.name);U.attributes&&this.setAttributes({html:z,element:U,intent:w,linkService:it});const G=w!=="richText",D=H.div;if(D.append(z),H.viewport){const W=`matrix(${H.viewport.transform.join(",")})`;D.style.transform=W}G&&D.setAttribute("class","xfaLayer xfaFont");const at=[];if(U.children.length===0){if(U.value){const W=document.createTextNode(U.value);z.append(W),G&&h.XfaText.shouldBuildText(U.name)&&at.push(W)}return{textDivs:at}}const T=[[U,-1,z]];for(;T.length>0;){const[W,K,P]=T.at(-1);if(K+1===W.children.length){T.pop();continue}const Q=W.children[++T.at(-1)[1]];if(Q===null)continue;const{name:S}=Q;if(S==="#text"){const ft=document.createTextNode(Q.value);at.push(ft),P.append(ft);continue}const X=(q=Q==null?void 0:Q.attributes)!=null&&q.xmlns?document.createElementNS(Q.attributes.xmlns,S):document.createElement(S);if(P.append(X),Q.attributes&&this.setAttributes({html:X,element:Q,storage:gt,intent:w,linkService:it}),((B=Q.children)==null?void 0:B.length)>0)T.push([Q,-1,X]);else if(Q.value){const ft=document.createTextNode(Q.value);G&&h.XfaText.shouldBuildText(S)&&at.push(ft),X.append(ft)}}for(const W of D.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))W.setAttribute("readOnly",!0);return{textDivs:at}}static update(H){const gt=`matrix(${H.viewport.transform.join(",")})`;H.div.style.transform=gt,H.div.hidden=!1}}},521:(Mt,Et,ht)=>{ht.d(Et,{XfaText:()=>h});class h{static textContent(A){const H=[],gt={items:H,styles:Object.create(null)};function it(U){var G;if(!U)return;let w=null;const z=U.name;if(z==="#text")w=U.value;else if(h.shouldBuildText(z))(G=U==null?void 0:U.attributes)!=null&&G.textContent?w=U.attributes.textContent:U.value&&(w=U.value);else return;if(w!==null&&H.push({str:w}),!!U.children)for(const D of U.children)it(D)}return it(A),gt}static shouldBuildText(A){return!(A==="textarea"||A==="input"||A==="option"||A==="select")}}},907:(Mt,Et,ht)=>{ht.a(Mt,async(h,st)=>{try{ht.d(Et,{AbortException:()=>A.AbortException,AnnotationEditorLayer:()=>U.AnnotationEditorLayer,AnnotationEditorParamsType:()=>A.AnnotationEditorParamsType,AnnotationEditorType:()=>A.AnnotationEditorType,AnnotationEditorUIManager:()=>w.AnnotationEditorUIManager,AnnotationLayer:()=>z.AnnotationLayer,AnnotationMode:()=>A.AnnotationMode,CMapCompressionType:()=>A.CMapCompressionType,ColorPicker:()=>G.ColorPicker,DOMSVGFactory:()=>gt.DOMSVGFactory,DrawLayer:()=>D.DrawLayer,FeatureTest:()=>A.FeatureTest,GlobalWorkerOptions:()=>at.GlobalWorkerOptions,ImageKind:()=>A.ImageKind,InvalidPDFException:()=>A.InvalidPDFException,MissingPDFException:()=>A.MissingPDFException,OPS:()=>A.OPS,Outliner:()=>T.Outliner,PDFDataRangeTransport:()=>H.PDFDataRangeTransport,PDFDateString:()=>gt.PDFDateString,PDFWorker:()=>H.PDFWorker,PasswordResponses:()=>A.PasswordResponses,PermissionFlag:()=>A.PermissionFlag,PixelsPerInch:()=>gt.PixelsPerInch,PromiseCapability:()=>A.PromiseCapability,RenderingCancelledException:()=>gt.RenderingCancelledException,UnexpectedResponseException:()=>A.UnexpectedResponseException,Util:()=>A.Util,VerbosityLevel:()=>A.VerbosityLevel,XfaLayer:()=>q.XfaLayer,build:()=>H.build,createValidAbsoluteUrl:()=>A.createValidAbsoluteUrl,fetchData:()=>gt.fetchData,getDocument:()=>H.getDocument,getFilenameFromUrl:()=>gt.getFilenameFromUrl,getPdfFilenameFromUrl:()=>gt.getPdfFilenameFromUrl,getXfaPageViewport:()=>gt.getXfaPageViewport,isDataScheme:()=>gt.isDataScheme,isPdfFile:()=>gt.isPdfFile,noContextMenu:()=>gt.noContextMenu,normalizeUnicode:()=>A.normalizeUnicode,renderTextLayer:()=>it.renderTextLayer,setLayerDimensions:()=>gt.setLayerDimensions,shadow:()=>A.shadow,updateTextLayer:()=>it.updateTextLayer,version:()=>H.version});var A=ht(266),H=ht(406),gt=ht(473),it=ht(739),U=ht(629),w=ht(812),z=ht(640),G=ht(97),D=ht(423),at=ht(368),T=ht(405),q=ht(160),B=h([H]);H=(B.then?(await B)():B)[0];const W="4.0.379",K="9e14d04fd";st()}catch(W){st(W)}})},694:(Mt,Et,ht)=>{var it,Rr,w,Mr,G,Si;ht.d(Et,{MessageHandler:()=>gt});var h=ht(266);const st={UNKNOWN:0,DATA:1,ERROR:2},A={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function H(at){switch(at instanceof Error||typeof at=="object"&&at!==null||(0,h.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),at.name){case"AbortException":return new h.AbortException(at.message);case"MissingPDFException":return new h.MissingPDFException(at.message);case"PasswordException":return new h.PasswordException(at.message,at.code);case"UnexpectedResponseException":return new h.UnexpectedResponseException(at.message,at.status);case"UnknownErrorException":return new h.UnknownErrorException(at.message,at.details);default:return new h.UnknownErrorException(at.message,at.toString())}}class gt{constructor(T,q,B){m(this,it);m(this,w);m(this,G);this.sourceName=T,this.targetName=q,this.comObj=B,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=W=>{const K=W.data;if(K.targetName!==this.sourceName)return;if(K.stream){M(this,w,Mr).call(this,K);return}if(K.callback){const Q=K.callbackId,S=this.callbackCapabilities[Q];if(!S)throw new Error(`Cannot resolve callback ${Q}`);if(delete this.callbackCapabilities[Q],K.callback===st.DATA)S.resolve(K.data);else if(K.callback===st.ERROR)S.reject(H(K.reason));else throw new Error("Unexpected callback case");return}const P=this.actionHandler[K.action];if(!P)throw new Error(`Unknown action from worker: ${K.action}`);if(K.callbackId){const Q=this.sourceName,S=K.sourceName;new Promise(function(X){X(P(K.data))}).then(function(X){B.postMessage({sourceName:Q,targetName:S,callback:st.DATA,callbackId:K.callbackId,data:X})},function(X){B.postMessage({sourceName:Q,targetName:S,callback:st.ERROR,callbackId:K.callbackId,reason:H(X)})});return}if(K.streamId){M(this,it,Rr).call(this,K);return}P(K.data)},B.addEventListener("message",this._onComObjOnMessage)}on(T,q){const B=this.actionHandler;if(B[T])throw new Error(`There is already an actionName called "${T}"`);B[T]=q}send(T,q,B){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:q},B)}sendWithPromise(T,q,B){const W=this.callbackId++,K=new h.PromiseCapability;this.callbackCapabilities[W]=K;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:W,data:q},B)}catch(P){K.reject(P)}return K.promise}sendWithStream(T,q,B,W){const K=this.streamId++,P=this.sourceName,Q=this.targetName,S=this.comObj;return new ReadableStream({start:X=>{const ft=new h.PromiseCapability;return this.streamControllers[K]={controller:X,startCall:ft,pullCall:null,cancelCall:null,isClosed:!1},S.postMessage({sourceName:P,targetName:Q,action:T,streamId:K,data:q,desiredSize:X.desiredSize},W),ft.promise},pull:X=>{const ft=new h.PromiseCapability;return this.streamControllers[K].pullCall=ft,S.postMessage({sourceName:P,targetName:Q,stream:A.PULL,streamId:K,desiredSize:X.desiredSize}),ft.promise},cancel:X=>{(0,h.assert)(X instanceof Error,"cancel must have a valid reason");const ft=new h.PromiseCapability;return this.streamControllers[K].cancelCall=ft,this.streamControllers[K].isClosed=!0,S.postMessage({sourceName:P,targetName:Q,stream:A.CANCEL,streamId:K,reason:H(X)}),ft.promise}},B)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}it=new WeakSet,Rr=function(T){const q=T.streamId,B=this.sourceName,W=T.sourceName,K=this.comObj,P=this,Q=this.actionHandler[T.action],S={enqueue(X,ft=1,Ct){if(this.isCancelled)return;const dt=this.desiredSize;this.desiredSize-=ft,dt>0&&this.desiredSize<=0&&(this.sinkCapability=new h.PromiseCapability,this.ready=this.sinkCapability.promise),K.postMessage({sourceName:B,targetName:W,stream:A.ENQUEUE,streamId:q,chunk:X},Ct)},close(){this.isCancelled||(this.isCancelled=!0,K.postMessage({sourceName:B,targetName:W,stream:A.CLOSE,streamId:q}),delete P.streamSinks[q])},error(X){(0,h.assert)(X instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,K.postMessage({sourceName:B,targetName:W,stream:A.ERROR,streamId:q,reason:H(X)}))},sinkCapability:new h.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};S.sinkCapability.resolve(),S.ready=S.sinkCapability.promise,this.streamSinks[q]=S,new Promise(function(X){X(Q(T.data,S))}).then(function(){K.postMessage({sourceName:B,targetName:W,stream:A.START_COMPLETE,streamId:q,success:!0})},function(X){K.postMessage({sourceName:B,targetName:W,stream:A.START_COMPLETE,streamId:q,reason:H(X)})})},w=new WeakSet,Mr=function(T){const q=T.streamId,B=this.sourceName,W=T.sourceName,K=this.comObj,P=this.streamControllers[q],Q=this.streamSinks[q];switch(T.stream){case A.START_COMPLETE:T.success?P.startCall.resolve():P.startCall.reject(H(T.reason));break;case A.PULL_COMPLETE:T.success?P.pullCall.resolve():P.pullCall.reject(H(T.reason));break;case A.PULL:if(!Q){K.postMessage({sourceName:B,targetName:W,stream:A.PULL_COMPLETE,streamId:q,success:!0});break}Q.desiredSize<=0&&T.desiredSize>0&&Q.sinkCapability.resolve(),Q.desiredSize=T.desiredSize,new Promise(function(S){var X;S((X=Q.onPull)==null?void 0:X.call(Q))}).then(function(){K.postMessage({sourceName:B,targetName:W,stream:A.PULL_COMPLETE,streamId:q,success:!0})},function(S){K.postMessage({sourceName:B,targetName:W,stream:A.PULL_COMPLETE,streamId:q,reason:H(S)})});break;case A.ENQUEUE:if((0,h.assert)(P,"enqueue should have stream controller"),P.isClosed)break;P.controller.enqueue(T.chunk);break;case A.CLOSE:if((0,h.assert)(P,"close should have stream controller"),P.isClosed)break;P.isClosed=!0,P.controller.close(),M(this,G,Si).call(this,P,q);break;case A.ERROR:(0,h.assert)(P,"error should have stream controller"),P.controller.error(H(T.reason)),M(this,G,Si).call(this,P,q);break;case A.CANCEL_COMPLETE:T.success?P.cancelCall.resolve():P.cancelCall.reject(H(T.reason)),M(this,G,Si).call(this,P,q);break;case A.CANCEL:if(!Q)break;new Promise(function(S){var X;S((X=Q.onCancel)==null?void 0:X.call(Q,H(T.reason)))}).then(function(){K.postMessage({sourceName:B,targetName:W,stream:A.CANCEL_COMPLETE,streamId:q,success:!0})},function(S){K.postMessage({sourceName:B,targetName:W,stream:A.CANCEL_COMPLETE,streamId:q,reason:H(S)})}),Q.sinkCapability.reject(H(T.reason)),Q.isCancelled=!0,delete this.streamSinks[q];break;default:throw new Error("Unexpected stream case")}},G=new WeakSet,Si=async function(T,q){var B,W,K;await Promise.allSettled([(B=T.startCall)==null?void 0:B.promise,(W=T.pullCall)==null?void 0:W.promise,(K=T.cancelCall)==null?void 0:K.promise]),delete this.streamControllers[q]}},825:(Mt,Et,ht)=>{ht.d(Et,{MurmurHash3_64:()=>gt});var h=ht(266);const st=3285377520,A=4294901760,H=65535;class gt{constructor(U){this.h1=U?U&4294967295:st,this.h2=U?U&4294967295:st}update(U){let w,z;if(typeof U=="string"){w=new Uint8Array(U.length*2),z=0;for(let X=0,ft=U.length;X<ft;X++){const Ct=U.charCodeAt(X);Ct<=255?w[z++]=Ct:(w[z++]=Ct>>>8,w[z++]=Ct&255)}}else if((0,h.isArrayBuffer)(U))w=U.slice(),z=w.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const G=z>>2,D=z-G*4,at=new Uint32Array(w.buffer,0,G);let T=0,q=0,B=this.h1,W=this.h2;const K=3432918353,P=461845907,Q=K&H,S=P&H;for(let X=0;X<G;X++)X&1?(T=at[X],T=T*K&A|T*Q&H,T=T<<15|T>>>17,T=T*P&A|T*S&H,B^=T,B=B<<13|B>>>19,B=B*5+3864292196):(q=at[X],q=q*K&A|q*Q&H,q=q<<15|q>>>17,q=q*P&A|q*S&H,W^=q,W=W<<13|W>>>19,W=W*5+3864292196);switch(T=0,D){case 3:T^=w[G*4+2]<<16;case 2:T^=w[G*4+1]<<8;case 1:T^=w[G*4],T=T*K&A|T*Q&H,T=T<<15|T>>>17,T=T*P&A|T*S&H,G&1?B^=T:W^=T}this.h1=B,this.h2=W}hexdigest(){let U=this.h1,w=this.h2;return U^=w>>>1,U=U*3981806797&A|U*36045&H,w=w*4283543511&A|((w<<16|U>>>16)*2950163797&A)>>>16,U^=w>>>1,U=U*444984403&A|U*60499&H,w=w*3301882366&A|((w<<16|U>>>16)*3120437893&A)>>>16,U^=w>>>1,(U>>>0).toString(16).padStart(8,"0")+(w>>>0).toString(16).padStart(8,"0")}}},266:(Mt,Et,ht)=>{var d;ht.d(Et,{AbortException:()=>re,AnnotationBorderStyleType:()=>B,AnnotationEditorParamsType:()=>G,AnnotationEditorPrefix:()=>w,AnnotationEditorType:()=>z,AnnotationMode:()=>U,AnnotationPrefix:()=>v,AnnotationType:()=>q,BaseException:()=>$t,CMapCompressionType:()=>K,FONT_IDENTITY_MATRIX:()=>A,FeatureTest:()=>pe,FormatError:()=>Xt,IDENTITY_MATRIX:()=>st,ImageKind:()=>T,InvalidPDFException:()=>fe,LINE_FACTOR:()=>gt,MAX_IMAGE_SIZE_TO_CACHE:()=>H,MissingPDFException:()=>oe,OPS:()=>P,PasswordException:()=>ve,PasswordResponses:()=>Q,PermissionFlag:()=>D,PromiseCapability:()=>s,RenderingIntentFlag:()=>it,TextRenderingMode:()=>at,UnexpectedResponseException:()=>te,UnknownErrorException:()=>Jt,Util:()=>ne,VerbosityLevel:()=>W,assert:()=>Dt,bytesToString:()=>Wt,createValidAbsoluteUrl:()=>Nt,getUuid:()=>b,getVerbosityLevel:()=>ft,info:()=>Ct,isArrayBuffer:()=>$,isNodeJS:()=>h,normalizeUnicode:()=>R,objectFromMap:()=>he,setVerbosityLevel:()=>X,shadow:()=>Kt,string32:()=>ie,stringToBytes:()=>le,unreachable:()=>xt,warn:()=>dt});const h=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),st=[1,0,0,1,0,0],A=[.001,0,0,.001,0,0],H=1e7,gt=1.35,it={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},U={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},w="pdfjs_internal_editor_",z={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},G={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32},D={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},at={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},T={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},q={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},B={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},W={ERRORS:0,WARNINGS:1,INFOS:5},K={NONE:0,BINARY:1},P={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let S=W.WARNINGS;function X(c){Number.isInteger(c)&&(S=c)}function ft(){return S}function Ct(c){S>=W.INFOS&&console.log(`Info: ${c}`)}function dt(c){S>=W.WARNINGS&&console.log(`Warning: ${c}`)}function xt(c){throw new Error(c)}function Dt(c,a){c||xt(a)}function Gt(c){switch(c==null?void 0:c.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Nt(c,a=null,o=null){var E;if(!c)return null;try{if(o&&typeof c=="string"&&(o.addDefaultProtocol&&c.startsWith("www.")&&((E=c.match(/\./g))==null?void 0:E.length)>=2&&(c=`http://${c}`),o.tryConvertEncoding))try{c=ye(c)}catch{}const l=a?new URL(c,a):new URL(c);if(Gt(l))return l}catch{}return null}function Kt(c,a,o,E=!1){return Object.defineProperty(c,a,{value:o,enumerable:!E,configurable:!0,writable:!1}),o}const $t=function(){function c(a,o){this.constructor===c&&xt("Cannot initialize BaseException."),this.message=a,this.name=o}return c.prototype=new Error,c.constructor=c,c}();class ve extends $t{constructor(a,o){super(a,"PasswordException"),this.code=o}}class Jt extends $t{constructor(a,o){super(a,"UnknownErrorException"),this.details=o}}class fe extends $t{constructor(a){super(a,"InvalidPDFException")}}class oe extends $t{constructor(a){super(a,"MissingPDFException")}}class te extends $t{constructor(a,o){super(a,"UnexpectedResponseException"),this.status=o}}class Xt extends $t{constructor(a){super(a,"FormatError")}}class re extends $t{constructor(a){super(a,"AbortException")}}function Wt(c){(typeof c!="object"||(c==null?void 0:c.length)===void 0)&&xt("Invalid argument for bytesToString");const a=c.length,o=8192;if(a<o)return String.fromCharCode.apply(null,c);const E=[];for(let l=0;l<a;l+=o){const u=Math.min(l+o,a),_=c.subarray(l,u);E.push(String.fromCharCode.apply(null,_))}return E.join("")}function le(c){typeof c!="string"&&xt("Invalid argument for stringToBytes");const a=c.length,o=new Uint8Array(a);for(let E=0;E<a;++E)o[E]=c.charCodeAt(E)&255;return o}function ie(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function he(c){const a=Object.create(null);for(const[o,E]of c)a[o]=E;return a}function jt(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function me(){try{return new Function(""),!0}catch{return!1}}class pe{static get isLittleEndian(){return Kt(this,"isLittleEndian",jt())}static get isEvalSupported(){return Kt(this,"isEvalSupported",me())}static get isOffscreenCanvasSupported(){return Kt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Kt(this,"platform",{isMac:navigator.platform.includes("Mac")}):Kt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var a,o;return Kt(this,"isCSSRoundSupported",(o=(a=globalThis.CSS)==null?void 0:a.supports)==null?void 0:o.call(a,"width: round(1.5px, 1px)"))}}const Zt=[...Array(256).keys()].map(c=>c.toString(16).padStart(2,"0"));class ne{static makeHexColor(a,o,E){return`#${Zt[a]}${Zt[o]}${Zt[E]}`}static scaleMinMax(a,o){let E;a[0]?(a[0]<0&&(E=o[0],o[0]=o[1],o[1]=E),o[0]*=a[0],o[1]*=a[0],a[3]<0&&(E=o[2],o[2]=o[3],o[3]=E),o[2]*=a[3],o[3]*=a[3]):(E=o[0],o[0]=o[2],o[2]=E,E=o[1],o[1]=o[3],o[3]=E,a[1]<0&&(E=o[2],o[2]=o[3],o[3]=E),o[2]*=a[1],o[3]*=a[1],a[2]<0&&(E=o[0],o[0]=o[1],o[1]=E),o[0]*=a[2],o[1]*=a[2]),o[0]+=a[4],o[1]+=a[4],o[2]+=a[5],o[3]+=a[5]}static transform(a,o){return[a[0]*o[0]+a[2]*o[1],a[1]*o[0]+a[3]*o[1],a[0]*o[2]+a[2]*o[3],a[1]*o[2]+a[3]*o[3],a[0]*o[4]+a[2]*o[5]+a[4],a[1]*o[4]+a[3]*o[5]+a[5]]}static applyTransform(a,o){const E=a[0]*o[0]+a[1]*o[2]+o[4],l=a[0]*o[1]+a[1]*o[3]+o[5];return[E,l]}static applyInverseTransform(a,o){const E=o[0]*o[3]-o[1]*o[2],l=(a[0]*o[3]-a[1]*o[2]+o[2]*o[5]-o[4]*o[3])/E,u=(-a[0]*o[1]+a[1]*o[0]+o[4]*o[1]-o[5]*o[0])/E;return[l,u]}static getAxialAlignedBoundingBox(a,o){const E=this.applyTransform(a,o),l=this.applyTransform(a.slice(2,4),o),u=this.applyTransform([a[0],a[3]],o),_=this.applyTransform([a[2],a[1]],o);return[Math.min(E[0],l[0],u[0],_[0]),Math.min(E[1],l[1],u[1],_[1]),Math.max(E[0],l[0],u[0],_[0]),Math.max(E[1],l[1],u[1],_[1])]}static inverseTransform(a){const o=a[0]*a[3]-a[1]*a[2];return[a[3]/o,-a[1]/o,-a[2]/o,a[0]/o,(a[2]*a[5]-a[4]*a[3])/o,(a[4]*a[1]-a[5]*a[0])/o]}static singularValueDecompose2dScale(a){const o=[a[0],a[2],a[1],a[3]],E=a[0]*o[0]+a[1]*o[2],l=a[0]*o[1]+a[1]*o[3],u=a[2]*o[0]+a[3]*o[2],_=a[2]*o[1]+a[3]*o[3],j=(E+_)/2,x=Math.sqrt((E+_)**2-4*(E*_-u*l))/2,N=j+x||1,Z=j-x||1;return[Math.sqrt(N),Math.sqrt(Z)]}static normalizeRect(a){const o=a.slice(0);return a[0]>a[2]&&(o[0]=a[2],o[2]=a[0]),a[1]>a[3]&&(o[1]=a[3],o[3]=a[1]),o}static intersect(a,o){const E=Math.max(Math.min(a[0],a[2]),Math.min(o[0],o[2])),l=Math.min(Math.max(a[0],a[2]),Math.max(o[0],o[2]));if(E>l)return null;const u=Math.max(Math.min(a[1],a[3]),Math.min(o[1],o[3])),_=Math.min(Math.max(a[1],a[3]),Math.max(o[1],o[3]));return u>_?null:[E,u,l,_]}static bezierBoundingBox(a,o,E,l,u,_,j,x){const N=[],Z=[[],[]];let J,Y,lt,I,g,L,V,ot;for(let It=0;It<2;++It){if(It===0?(Y=6*a-12*E+6*u,J=-3*a+9*E-9*u+3*j,lt=3*E-3*a):(Y=6*o-12*l+6*_,J=-3*o+9*l-9*_+3*x,lt=3*l-3*o),Math.abs(J)<1e-12){if(Math.abs(Y)<1e-12)continue;I=-lt/Y,0<I&&I<1&&N.push(I);continue}V=Y*Y-4*lt*J,ot=Math.sqrt(V),!(V<0)&&(g=(-Y+ot)/(2*J),0<g&&g<1&&N.push(g),L=(-Y-ot)/(2*J),0<L&&L<1&&N.push(L))}let ut=N.length,bt;const _t=ut;for(;ut--;)I=N[ut],bt=1-I,Z[0][ut]=bt*bt*bt*a+3*bt*bt*I*E+3*bt*I*I*u+I*I*I*j,Z[1][ut]=bt*bt*bt*o+3*bt*bt*I*l+3*bt*I*I*_+I*I*I*x;return Z[0][_t]=a,Z[1][_t]=o,Z[0][_t+1]=j,Z[1][_t+1]=x,Z[0].length=Z[1].length=_t+2,[Math.min(...Z[0]),Math.min(...Z[1]),Math.max(...Z[0]),Math.max(...Z[1])]}}function ye(c){return decodeURIComponent(escape(c))}function $(c){return typeof c=="object"&&(c==null?void 0:c.byteLength)!==void 0}class s{constructor(){m(this,d,!1);this.promise=new Promise((a,o)=>{this.resolve=E=>{O(this,d,!0),a(E)},this.reject=E=>{O(this,d,!0),o(E)}})}get settled(){return t(this,d)}}d=new WeakMap;let i=null,f=null;function R(c){return i||(i=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,f=new Map([["\uFB05","\u017Ft"]])),c.replaceAll(i,(a,o,E)=>o?o.normalize("NFKC"):f.get(E))}function b(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const c=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(c);else for(let a=0;a<32;a++)c[a]=Math.floor(Math.random()*255);return Wt(c)}const v="pdfjs_internal_id_"}},Mn={};function hs(Mt){var Et=Mn[Mt];if(Et!==void 0)return Et.exports;var ht=Mn[Mt]={exports:{}};return Wr[Mt](ht,ht.exports,hs),ht.exports}(()=>{var Mt=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",Et=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",ht=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",h=A=>{A&&A.d<1&&(A.d=1,A.forEach(H=>H.r--),A.forEach(H=>H.r--?H.r++:H()))},st=A=>A.map(H=>{if(H!==null&&typeof H=="object"){if(H[Mt])return H;if(H.then){var gt=[];gt.d=0,H.then(w=>{it[Et]=w,h(gt)},w=>{it[ht]=w,h(gt)});var it={};return it[Mt]=w=>w(gt),it}}var U={};return U[Mt]=w=>{},U[Et]=H,U});hs.a=(A,H,gt)=>{var it;gt&&((it=[]).d=-1);var U=new Set,w=A.exports,z,G,D,at=new Promise((T,q)=>{D=q,G=T});at[Et]=w,at[Mt]=T=>(it&&T(it),U.forEach(T),at.catch(q=>{})),A.exports=at,H(T=>{z=st(T);var q,B=()=>z.map(K=>{if(K[ht])throw K[ht];return K[Et]}),W=new Promise(K=>{q=()=>K(B),q.r=0;var P=Q=>Q!==it&&!U.has(Q)&&(U.add(Q),Q&&!Q.d&&(q.r++,Q.push(q)));z.map(Q=>Q[Mt](P))});return q.r?W:B()},T=>(T?D(at[ht]=T):G(w),h(it))),it&&it.d<0&&(it.d=0)}})(),hs.d=(Mt,Et)=>{for(var ht in Et)hs.o(Et,ht)&&!hs.o(Mt,ht)&&Object.defineProperty(Mt,ht,{enumerable:!0,get:Et[ht]})},hs.o=(Mt,Et)=>Object.prototype.hasOwnProperty.call(Mt,Et);var se=hs(907);se=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=se),se.AbortException,se.AnnotationEditorLayer,se.AnnotationEditorParamsType,se.AnnotationEditorType,se.AnnotationEditorUIManager,se.AnnotationLayer,se.AnnotationMode,se.CMapCompressionType,se.ColorPicker,se.DOMSVGFactory,se.DrawLayer,se.FeatureTest;var Vr=se.GlobalWorkerOptions;se.ImageKind,se.InvalidPDFException,se.MissingPDFException,se.OPS,se.Outliner,se.PDFDataRangeTransport,se.PDFDateString,se.PDFWorker,se.PasswordResponses,se.PermissionFlag,se.PixelsPerInch,se.PromiseCapability,se.RenderingCancelledException,se.UnexpectedResponseException,se.Util,se.VerbosityLevel,se.XfaLayer,se.build,se.createValidAbsoluteUrl,se.fetchData;var Gr=se.getDocument;se.getFilenameFromUrl,se.getPdfFilenameFromUrl,se.getXfaPageViewport,se.isDataScheme,se.isPdfFile,se.noContextMenu,se.normalizeUnicode,se.renderTextLayer,se.setLayerDimensions,se.shadow,se.updateTextLayer,se.version;var Xr={exports:{}};(function(Mt,Et){(function(ht,h){Mt.exports=h()})(window,function(){return function(ht){var h={};function st(A){if(h[A])return h[A].exports;var H=h[A]={i:A,l:!1,exports:{}};return ht[A].call(H.exports,H,H.exports,st),H.l=!0,H.exports}return st.m=ht,st.c=h,st.d=function(A,H,gt){st.o(A,H)||Object.defineProperty(A,H,{enumerable:!0,get:gt})},st.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},st.t=function(A,H){if(1&H&&(A=st(A)),8&H||4&H&&typeof A=="object"&&A&&A.__esModule)return A;var gt=Object.create(null);if(st.r(gt),Object.defineProperty(gt,"default",{enumerable:!0,value:A}),2&H&&typeof A!="string")for(var it in A)st.d(gt,it,(function(U){return A[U]}).bind(null,it));return gt},st.n=function(A){var H=A&&A.__esModule?function(){return A.default}:function(){return A};return st.d(H,"a",H),H},st.o=function(A,H){return Object.prototype.hasOwnProperty.call(A,H)},st.p="",st(st.s=0)}([function(ht,h,st){st.r(h);var A,H="fslightbox-",gt="".concat(H,"styles"),it="".concat(H,"cursor-grabbing"),U="".concat(H,"full-dimension"),w="".concat(H,"flex-centered"),z="".concat(H,"open"),G="".concat(H,"transform-transition"),D="".concat(H,"absoluted"),at="".concat(H,"slide-btn"),T="".concat(at,"-container"),q="".concat(H,"fade-in"),B="".concat(H,"fade-out"),W=q+"-strong",K=B+"-strong",P="".concat(H,"opacity-"),Q="".concat(P,"1"),S="".concat(H,"source");function X(l){return(X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function ft(l){var u=l.stageIndexes,_=l.core.stageManager,j=l.props.sources.length-1;_.getPreviousSlideIndex=function(){return u.current===0?j:u.current-1},_.getNextSlideIndex=function(){return u.current===j?0:u.current+1},_.updateStageIndexes=j===0?function(){}:j===1?function(){u.current===0?(u.next=1,delete u.previous):(u.previous=0,delete u.next)}:function(){u.previous=_.getPreviousSlideIndex(),u.next=_.getNextSlideIndex()},_.i=j<=2?function(){return!0}:function(x){var N=u.current;if(N===0&&x===j||N===j&&x===0)return!0;var Z=N-x;return Z===-1||Z===0||Z===1}}(typeof document>"u"?"undefined":X(document))==="object"&&((A=document.createElement("style")).className=gt,A.appendChild(document.createTextNode(".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:pinch-zoom;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media (min-width:768px){.fslightbox-slide-btn{padding:10px}}@media (min-width:1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container-next{padding-left:30px}}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightboxl{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightboxl div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightboxl 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightboxl div:nth-child(1){animation-delay:-.45s}.fslightboxl div:nth-child(2){animation-delay:-.3s}.fslightboxl div:nth-child(3){animation-delay:-.15s}@keyframes fslightboxl{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}")),document.head.appendChild(A));function Ct(l){var u,_=l.props,j=0,x={};this.getSourceTypeFromLocalStorageByUrl=function(Z){return u[Z]?u[Z]:N(Z)},this.handleReceivedSourceTypeForUrl=function(Z,J){if(x[J]===!1&&(j--,Z!=="invalid"?x[J]=Z:delete x[J],j===0)){(function(Y,lt){for(var I in lt)Y[I]=lt[I]})(u,x);try{localStorage.setItem("fslightbox-types",JSON.stringify(u))}catch{}}};var N=function(Z){j++,x[Z]=!1};if(_.disableLocalStorage)this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){};else{try{u=JSON.parse(localStorage.getItem("fslightbox-types"))}catch{}u||(u={},this.getSourceTypeFromLocalStorageByUrl=N)}}function dt(l,u,_,j){var x=l.data,N=l.elements.sources,Z=_/j,J=0;this.adjustSize=function(){if((J=x.maxSourceWidth/Z)<x.maxSourceHeight)return _<x.maxSourceWidth&&(J=j),Y();J=j>x.maxSourceHeight?x.maxSourceHeight:j,Y()};var Y=function(){N[u].style.width=J*Z+"px",N[u].style.height=J+"px"}}function xt(l,u){var _=this,j=l.collections.sourceSizers,x=l.elements,N=x.sourceAnimationWrappers,Z=x.sources,J=l.isl,Y=l.resolve;function lt(I,g){j[u]=Y(dt,[u,I,g]),j[u].adjustSize()}this.runActions=function(I,g){J[u]=!0,Z[u].classList.add(Q),N[u].classList.add(W),N[u].removeChild(N[u].firstChild),lt(I,g),_.runActions=lt}}function Dt(l,u){var _,j=this,x=l.elements.sources,N=l.props,Z=(0,l.resolve)(xt,[u]);this.handleImageLoad=function(J){var Y=J.target,lt=Y.naturalWidth,I=Y.naturalHeight;Z.runActions(lt,I)},this.handleVideoLoad=function(J){var Y=J.target,lt=Y.videoWidth,I=Y.videoHeight;_=!0,Z.runActions(lt,I)},this.handleNotMetaDatedVideoLoad=function(){_||j.handleYoutubeLoad()},this.handleYoutubeLoad=function(){var J=1920,Y=1080;N.maxYoutubeDimensions&&(J=N.maxYoutubeDimensions.width,Y=N.maxYoutubeDimensions.height),Z.runActions(J,Y)},this.handleCustomLoad=function(){var J=x[u],Y=J.offsetWidth,lt=J.offsetHeight;Y&&lt?Z.runActions(Y,lt):setTimeout(j.handleCustomLoad)}}function Gt(l,u,_){var j=l.elements.sources,x=l.props.customClasses,N=x[u]?x[u]:"";j[u].className=_+" "+N}function Nt(l,u){var _=l.elements.sources,j=l.props.customAttributes;for(var x in j[u])_[u].setAttribute(x,j[u][x])}function Kt(l,u){var _=l.collections.sourceLoadHandlers,j=l.elements,x=j.sources,N=j.sourceAnimationWrappers,Z=l.props.sources;x[u]=document.createElement("img"),Gt(l,u,S),x[u].src=Z[u],x[u].onload=_[u].handleImageLoad,Nt(l,u),N[u].appendChild(x[u])}function $t(l,u){var _=l.collections.sourceLoadHandlers,j=l.elements,x=j.sources,N=j.sourceAnimationWrappers,Z=l.props,J=Z.sources,Y=Z.videosPosters;x[u]=document.createElement("video"),Gt(l,u,S),x[u].src=J[u],x[u].onloadedmetadata=function(I){_[u].handleVideoLoad(I)},x[u].controls=!0,Nt(l,u),Y[u]&&(x[u].poster=Y[u]);var lt=document.createElement("source");lt.src=J[u],x[u].appendChild(lt),setTimeout(_[u].handleNotMetaDatedVideoLoad,3e3),N[u].appendChild(x[u])}function ve(l,u){var _=l.collections.sourceLoadHandlers,j=l.elements,x=j.sources,N=j.sourceAnimationWrappers,Z=l.props.sources;x[u]=document.createElement("iframe"),Gt(l,u,"".concat(S," ").concat(H,"youtube-iframe"));var J=Z[u],Y=J.split("?")[1];x[u].src="https://www.youtube.com/embed/".concat(J.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],"?").concat(Y||""),x[u].allowFullscreen=!0,Nt(l,u),N[u].appendChild(x[u]),_[u].handleYoutubeLoad()}function Jt(l,u){var _=l.collections.sourceLoadHandlers,j=l.elements,x=j.sources,N=j.sourceAnimationWrappers,Z=l.props.sources;x[u]=Z[u],Gt(l,u,"".concat(x[u].className," ").concat(S)),N[u].appendChild(x[u]),_[u].handleCustomLoad()}function fe(l,u){var _=l.elements,j=_.sources,x=_.sourceAnimationWrappers;l.props.sources,j[u]=document.createElement("div"),j[u].className="".concat(H,"invalid-file-wrapper ").concat(w),j[u].innerHTML="Invalid source",x[u].classList.add(W),x[u].removeChild(x[u].firstChild),x[u].appendChild(j[u])}function oe(l){var u=l.collections,_=u.sourceLoadHandlers,j=u.sourcesRenderFunctions,x=l.core.sourceDisplayFacade,N=l.resolve;this.runActionsForSourceTypeAndIndex=function(Z,J){var Y;switch(Z!=="invalid"&&(_[J]=N(Dt,[J])),Z){case"image":Y=Kt;break;case"video":Y=$t;break;case"youtube":Y=ve;break;case"custom":Y=Jt;break;default:Y=fe}j[J]=function(){return Y(l,J)},x.displaySourcesWhichShouldBeDisplayed()}}function te(){var l,u,_,j={isUrlYoutubeOne:function(N){var Z=document.createElement("a");return Z.href=N,Z.hostname==="www.youtube.com"||Z.hostname==="youtu.be"},getTypeFromResponseContentType:function(N){return N.slice(0,N.indexOf("/"))}};function x(){if(_.readyState!==4){if(_.readyState===2){var N;switch(j.getTypeFromResponseContentType(_.getResponseHeader("content-type"))){case"image":N="image";break;case"video":N="video";break;default:N="invalid"}_.onreadystatechange=null,_.abort(),u(N)}}else u("invalid")}this.setUrlToCheck=function(N){l=N},this.getSourceType=function(N){if(j.isUrlYoutubeOne(l))return N("youtube");u=N,(_=new XMLHttpRequest).onreadystatechange=x,_.open("GET",l,!0),_.send()}}function Xt(l,u,_){var j=l.props,x=j.types,N=j.type,Z=j.sources,J=l.resolve;this.getTypeSetByClientForIndex=function(Y){var lt;return x&&x[Y]?lt=x[Y]:N&&(lt=N),lt},this.retrieveTypeWithXhrForIndex=function(Y){var lt=J(te);lt.setUrlToCheck(Z[Y]),lt.getSourceType(function(I){u.handleReceivedSourceTypeForUrl(I,Z[Y]),_.runActionsForSourceTypeAndIndex(I,Y)})}}function re(l,u){var _=l.core.stageManager,j=l.elements,x=j.smw,N=j.sourceWrappersContainer,Z=l.props,J=0,Y=document.createElement("div");function lt(g){Y.style.transform="translateX(".concat(g+J,"px)"),J=0}function I(){return(1+Z.slideDistance)*innerWidth}Y.className="".concat(D," ").concat(U," ").concat(w),Y.s=function(){Y.style.display="flex"},Y.h=function(){Y.style.display="none"},Y.a=function(){Y.classList.add(G)},Y.d=function(){Y.classList.remove(G)},Y.n=function(){Y.style.removeProperty("transform")},Y.v=function(g){return J=g,Y},Y.ne=function(){lt(-I())},Y.z=function(){lt(0)},Y.p=function(){lt(I())},_.i(u)||Y.h(),x[u]=Y,N.appendChild(Y),function(g,L){var V=g.elements,ot=V.smw,ut=V.sourceAnimationWrappers,bt=document.createElement("div"),_t=document.createElement("div");_t.className="fslightboxl";for(var It=0;It<3;It++){var Bt=document.createElement("div");_t.appendChild(Bt)}bt.appendChild(_t),ot[L].appendChild(bt),ut[L]=bt}(l,u)}function Wt(l,u,_,j){var x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.setAttributeNS(null,"width",u),x.setAttributeNS(null,"height",u),x.setAttributeNS(null,"viewBox",_);var N=document.createElementNS("http://www.w3.org/2000/svg","path");return N.setAttributeNS(null,"class","".concat(H,"svg-path")),N.setAttributeNS(null,"d",j),x.appendChild(N),l.appendChild(x),x}function le(l,u){var _=document.createElement("div");return _.className="".concat(H,"toolbar-button ").concat(w),_.title=u,l.appendChild(_),_}function ie(l,u){var _=document.createElement("div");_.className="".concat(H,"toolbar"),u.appendChild(_),function(j,x){var N=j.componentsServices,Z=j.data,J=j.fs,Y="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",lt=le(x);lt.title="Enter fullscreen";var I=Wt(lt,"20px","0 0 18 18",Y);N.ofs=function(){Z.ifs=!0,lt.title="Exit fullscreen",I.setAttributeNS(null,"width","24px"),I.setAttributeNS(null,"height","24px"),I.setAttributeNS(null,"viewBox","0 0 950 1024"),I.firstChild.setAttributeNS(null,"d","M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z")},N.xfs=function(){Z.ifs=!1,lt.title="Enter fullscreen",I.setAttributeNS(null,"width","20px"),I.setAttributeNS(null,"height","20px"),I.setAttributeNS(null,"viewBox","0 0 18 18"),I.firstChild.setAttributeNS(null,"d",Y)},lt.onclick=J.t}(l,_),function(j,x){var N=le(x,"Close");N.onclick=j.core.lightboxCloser.closeLightbox,Wt(N,"20px","0 0 24 24","M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z")}(l,_)}function he(l){var u=l.props.sources,_=l.elements.container,j=document.createElement("div");j.className="".concat(H,"nav"),_.appendChild(j),ie(l,j),u.length>1&&function(x,N){var Z=x.componentsServices,J=x.props.sources,Y=(x.stageIndexes,document.createElement("div"));Y.className="".concat(H,"slide-number-container");var lt=document.createElement("div");lt.className=w;var I=document.createElement("span");Z.setSlideNumber=function(V){return I.innerHTML=V};var g=document.createElement("span");g.className="".concat(H,"slash");var L=document.createElement("div");L.innerHTML=J.length,Y.appendChild(lt),lt.appendChild(I),lt.appendChild(g),lt.appendChild(L),N.appendChild(Y),setTimeout(function(){lt.offsetWidth>55&&(Y.style.justifyContent="flex-start")})}(l,j)}function jt(l,u,_,j){var x=l.elements.container,N=_.charAt(0).toUpperCase()+_.slice(1),Z=document.createElement("div");Z.className="".concat(T," ").concat(T,"-").concat(_),Z.title="".concat(N," slide"),Z.onclick=u,function(J,Y){var lt=document.createElement("div");lt.className="".concat(at," ").concat(w),Wt(lt,"20px","0 0 20 20",Y),J.appendChild(lt)}(Z,j),x.appendChild(Z)}function me(l){var u=l.core,_=u.lightboxCloser,j=u.slideChangeFacade,x=l.fs;this.listener=function(N){switch(N.key){case"Escape":_.closeLightbox();break;case"ArrowLeft":j.changeToPrevious();break;case"ArrowRight":j.changeToNext();break;case"F11":N.preventDefault(),x.t()}}}function pe(l){var u=l.elements,_=l.sourcePointerProps,j=l.stageIndexes;function x(N,Z){u.smw[N].v(_.swipedX)[Z]()}this.runActionsForEvent=function(N){var Z,J,Y;u.container.contains(u.slideSwipingHoverer)||u.container.appendChild(u.slideSwipingHoverer),Z=u.container,J=it,(Y=Z.classList).contains(J)||Y.add(J),_.swipedX=N.screenX-_.downScreenX;var lt=j.previous,I=j.next;x(j.current,"z"),lt!==void 0&&_.swipedX>0?x(lt,"ne"):I!==void 0&&_.swipedX<0&&x(I,"p")}}function Zt(l){var u=l.props.sources,_=l.resolve,j=l.sourcePointerProps,x=_(pe);u.length===1?this.listener=function(){j.swipedX=1}:this.listener=function(N){j.isPointering&&x.runActionsForEvent(N)}}function ne(l){var u=l.core.slideIndexChanger,_=l.elements.smw,j=l.stageIndexes,x=l.sws;function N(J){var Y=_[j.current];Y.a(),Y[J]()}function Z(J,Y){J!==void 0&&(_[J].s(),_[J][Y]())}this.runPositiveSwipedXActions=function(){var J=j.previous;if(J===void 0)N("z");else{N("p");var Y=j.next;u.changeTo(J);var lt=j.previous;x.d(lt),x.b(Y),N("z"),Z(lt,"ne")}},this.runNegativeSwipedXActions=function(){var J=j.next;if(J===void 0)N("z");else{N("ne");var Y=j.previous;u.changeTo(J);var lt=j.next;x.d(lt),x.b(Y),N("z"),Z(lt,"p")}}}function ye(l,u){l.contains(u)&&l.removeChild(u)}function $(l){var u=l.core.lightboxCloser,_=l.elements,j=l.resolve,x=l.sourcePointerProps,N=j(ne);this.runNoSwipeActions=function(){ye(_.container,_.slideSwipingHoverer),x.isSourceDownEventTarget||u.closeLightbox(),x.isPointering=!1},this.runActions=function(){x.swipedX>0?N.runPositiveSwipedXActions():N.runNegativeSwipedXActions(),ye(_.container,_.slideSwipingHoverer),_.container.classList.remove(it),x.isPointering=!1}}function s(l){var u=l.resolve,_=l.sourcePointerProps,j=u($);this.listener=function(){_.isPointering&&(_.swipedX?j.runActions():j.runNoSwipeActions())}}function i(l){var u=this,_=l.core,j=_.eventsDispatcher,x=_.globalEventsController,N=_.scrollbarRecompensor,Z=l.data,J=l.elements,Y=l.fs,lt=l.props,I=l.sourcePointerProps;this.isLightboxFadingOut=!1,this.runActions=function(){u.isLightboxFadingOut=!0,J.container.classList.add(K),x.removeListeners(),lt.exitFullscreenOnClose&&Z.ifs&&Y.x(),setTimeout(function(){u.isLightboxFadingOut=!1,I.isPointering=!1,J.container.classList.remove(K),document.documentElement.classList.remove(z),N.removeRecompense(),document.body.removeChild(J.container),j.dispatch("onClose")},270)}}function f(l,u){var _=l.classList;_.contains(u)&&_.remove(u)}function R(l){var u,_,j;_=(u=l).core.eventsDispatcher,j=u.props,_.dispatch=function(x){j[x]&&j[x]()},function(x){var N=x.componentsServices,Z=x.data,J=x.fs,Y=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];function lt(g){for(var L=0;L<Y.length;L++)document[g](Y[L],I)}function I(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?N.ofs():N.xfs()}J.o=function(){N.ofs();var g=document.documentElement;g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()},J.x=function(){N.xfs(),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},J.t=function(){Z.ifs?J.x():J.o()},J.l=function(){lt("addEventListener")},J.q=function(){lt("removeEventListener")}}(l),function(x){var N=x.core,Z=N.globalEventsController,J=N.windowResizeActioner,Y=x.fs,lt=x.resolve,I=lt(me),g=lt(Zt),L=lt(s);Z.attachListeners=function(){document.addEventListener("pointermove",g.listener),document.addEventListener("pointerup",L.listener),addEventListener("resize",J.runActions),document.addEventListener("keydown",I.listener),Y.l()},Z.removeListeners=function(){document.removeEventListener("pointermove",g.listener),document.removeEventListener("pointerup",L.listener),removeEventListener("resize",J.runActions),document.removeEventListener("keydown",I.listener),Y.q()}}(l),function(x){var N=x.core.lightboxCloser,Z=(0,x.resolve)(i);N.closeLightbox=function(){Z.isLightboxFadingOut||Z.runActions()}}(l),function(x){var N=x.data,Z=x.core.scrollbarRecompensor;function J(){document.body.offsetHeight>innerHeight&&(document.body.style.marginRight=N.scrollbarWidth+"px")}Z.addRecompense=function(){document.readyState==="complete"?J():addEventListener("load",function(){J(),Z.addRecompense=J})},Z.removeRecompense=function(){document.body.style.removeProperty("margin-right")}}(l),function(x){var N=x.core,Z=N.slideChangeFacade,J=N.slideIndexChanger,Y=N.stageManager;x.props.sources.length>1?(Z.changeToPrevious=function(){J.jumpTo(Y.getPreviousSlideIndex())},Z.changeToNext=function(){J.jumpTo(Y.getNextSlideIndex())}):(Z.changeToPrevious=function(){},Z.changeToNext=function(){})}(l),function(x){var N=x.componentsServices,Z=x.core,J=Z.slideIndexChanger,Y=Z.sourceDisplayFacade,lt=Z.stageManager,I=x.elements,g=I.smw,L=I.sourceAnimationWrappers,V=x.isl,ot=x.stageIndexes,ut=x.sws;J.changeTo=function(bt){ot.current=bt,lt.updateStageIndexes(),N.setSlideNumber(bt+1),Y.displaySourcesWhichShouldBeDisplayed()},J.jumpTo=function(bt){var _t=ot.previous,It=ot.current,Bt=ot.next,ee=V[It],Ut=V[bt];J.changeTo(bt);for(var Yt=0;Yt<g.length;Yt++)g[Yt].d();ut.d(It),ut.c(),requestAnimationFrame(function(){requestAnimationFrame(function(){var k=ot.previous,nt=ot.next;function At(){lt.i(It)?It===ot.previous?g[It].ne():It===ot.next&&g[It].p():(g[It].h(),g[It].n())}ee&&L[It].classList.add(B),Ut&&L[ot.current].classList.add(q),ut.a(),k!==void 0&&k!==It&&g[k].ne(),g[ot.current].n(),nt!==void 0&&nt!==It&&g[nt].p(),ut.b(_t),ut.b(Bt),V[It]?setTimeout(At,260):At()})})}}(l),function(x){var N=x.core.sourcesPointerDown,Z=x.elements,J=Z.smw,Y=Z.sources,lt=x.sourcePointerProps,I=x.stageIndexes;N.listener=function(g){g.target.tagName!=="VIDEO"&&g.preventDefault(),lt.isPointering=!0,lt.downScreenX=g.screenX,lt.swipedX=0;var L=Y[I.current];L&&L.contains(g.target)?lt.isSourceDownEventTarget=!0:lt.isSourceDownEventTarget=!1;for(var V=0;V<J.length;V++)J[V].d()}}(l),function(x){var N=x.collections.sourcesRenderFunctions,Z=x.core.sourceDisplayFacade,J=x.props,Y=x.stageIndexes;function lt(I){N[I]&&(N[I](),delete N[I])}Z.displaySourcesWhichShouldBeDisplayed=function(){if(J.loadOnlyCurrentSource)lt(Y.current);else for(var I in Y)lt(Y[I])}}(l),function(x){var N=x.core.stageManager,Z=x.elements,J=Z.smw,Y=Z.sourceAnimationWrappers,lt=x.isl,I=x.stageIndexes,g=x.sws;g.a=function(){for(var L in I)J[I[L]].s()},g.b=function(L){L===void 0||N.i(L)||(J[L].h(),J[L].n())},g.c=function(){for(var L in I)g.d(I[L])},g.d=function(L){if(lt[L]){var V=Y[L];f(V,W),f(V,q),f(V,B)}}}(l),function(x){var N=x.collections.sourceSizers,Z=x.core.windowResizeActioner,J=x.data,Y=x.elements.smw,lt=x.stageIndexes;Z.runActions=function(){innerWidth<992?J.maxSourceWidth=innerWidth:J.maxSourceWidth=.9*innerWidth,J.maxSourceHeight=.9*innerHeight;for(var I=0;I<Y.length;I++)Y[I].d(),N[I]&&N[I].adjustSize();var g=lt.previous,L=lt.next;g!==void 0&&Y[g].ne(),L!==void 0&&Y[L].p()}}(l)}function b(l){var u=l.componentsServices,_=l.core,j=_.eventsDispatcher,x=_.globalEventsController,N=_.scrollbarRecompensor,Z=_.sourceDisplayFacade,J=_.stageManager,Y=_.windowResizeActioner,lt=l.data,I=l.elements,g=(l.props,l.stageIndexes),L=l.sws;function V(){var ot,ut;lt.i=!0,lt.scrollbarWidth=function(){var bt=document.createElement("div"),_t=bt.style,It=document.createElement("div");_t.visibility="hidden",_t.width="100px",_t.msOverflowStyle="scrollbar",_t.overflow="scroll",It.style.width="100%",document.body.appendChild(bt);var Bt=bt.offsetWidth;bt.appendChild(It);var ee=It.offsetWidth;return document.body.removeChild(bt),Bt-ee}(),R(l),I.container=document.createElement("div"),I.container.className="".concat(H,"container ").concat(U," ").concat(W),function(bt){var _t=bt.elements;_t.slideSwipingHoverer=document.createElement("div"),_t.slideSwipingHoverer.className="".concat(H,"slide-swiping-hoverer ").concat(U," ").concat(D)}(l),he(l),function(bt){var _t=bt.core.sourcesPointerDown,It=bt.elements,Bt=bt.props.sources,ee=document.createElement("div");ee.className="".concat(D," ").concat(U),It.container.appendChild(ee),ee.addEventListener("pointerdown",_t.listener),It.sourceWrappersContainer=ee;for(var Ut=0;Ut<Bt.length;Ut++)re(bt,Ut)}(l),l.props.sources.length>1&&(ut=(ot=l).core.slideChangeFacade,jt(ot,ut.changeToPrevious,"previous","M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"),jt(ot,ut.changeToNext,"next","M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z")),function(bt){for(var _t=bt.props.sources,It=bt.resolve,Bt=It(Ct),ee=It(oe),Ut=It(Xt,[Bt,ee]),Yt=0;Yt<_t.length;Yt++)if(typeof _t[Yt]=="string"){var k=Ut.getTypeSetByClientForIndex(Yt);if(k)ee.runActionsForSourceTypeAndIndex(k,Yt);else{var nt=Bt.getSourceTypeFromLocalStorageByUrl(_t[Yt]);nt?ee.runActionsForSourceTypeAndIndex(nt,Yt):Ut.retrieveTypeWithXhrForIndex(Yt)}}else ee.runActionsForSourceTypeAndIndex("custom",Yt)}(l),j.dispatch("onInit")}l.open=function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ut=g.previous,bt=g.current,_t=g.next;g.current=ot,lt.i||ft(l),J.updateStageIndexes(),lt.i?(L.c(),L.a(),L.b(ut),L.b(bt),L.b(_t),j.dispatch("onShow")):V(),Z.displaySourcesWhichShouldBeDisplayed(),u.setSlideNumber(ot+1),document.body.appendChild(I.container),document.documentElement.classList.add(z),N.addRecompense(),x.attachListeners(),Y.runActions(),I.smw[g.current].n(),j.dispatch("onOpen")}}function v(l,u,_){return(v=d()?Reflect.construct.bind():function(j,x,N){var Z=[null];Z.push.apply(Z,x);var J=new(Function.bind.apply(j,Z));return N&&c(J,N.prototype),J}).apply(null,arguments)}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c(l,u){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,j){return _.__proto__=j,_})(l,u)}function a(l){return function(u){if(Array.isArray(u))return o(u)}(l)||function(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}(l)||function(u,_){if(u){if(typeof u=="string")return o(u,_);var j=Object.prototype.toString.call(u).slice(8,-1);if(j==="Object"&&u.constructor&&(j=u.constructor.name),j==="Map"||j==="Set")return Array.from(u);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return o(u,_)}}(l)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(l,u){(u==null||u>l.length)&&(u=l.length);for(var _=0,j=new Array(u);_<u;_++)j[_]=l[_];return j}function E(){for(var l=document.getElementsByTagName("a"),u=function(x){if(!l[x].hasAttribute("data-fslightbox"))return"continue";var N=l[x].hasAttribute("data-href")?l[x].getAttribute("data-href"):l[x].getAttribute("href");if(!N)return console.warn('The "data-fslightbox" attribute was set without the "href" attribute.'),"continue";var Z=l[x].getAttribute("data-fslightbox");fsLightboxInstances[Z]||(fsLightboxInstances[Z]=new FsLightbox);var J=null;N.charAt(0)==="#"?(J=document.getElementById(N.substring(1)).cloneNode(!0)).removeAttribute("id"):J=N,fsLightboxInstances[Z].props.sources.push(J),fsLightboxInstances[Z].elements.a.push(l[x]);var Y=fsLightboxInstances[Z].props.sources.length-1;l[x].onclick=function(ut){ut.preventDefault(),fsLightboxInstances[Z].open(Y)},ot("types","data-type"),ot("videosPosters","data-video-poster"),ot("customClasses","data-class"),ot("customClasses","data-custom-class");for(var lt=["href","data-fslightbox","data-href","data-type","data-video-poster","data-class","data-custom-class"],I=l[x].attributes,g=fsLightboxInstances[Z].props.customAttributes,L=0;L<I.length;L++)if(lt.indexOf(I[L].name)===-1&&I[L].name.substr(0,5)==="data-"){g[Y]||(g[Y]={});var V=I[L].name.substr(5);g[Y][V]=I[L].value}function ot(ut,bt){l[x].hasAttribute(bt)&&(fsLightboxInstances[Z].props[ut][Y]=l[x].getAttribute(bt))}},_=0;_<l.length;_++)u(_);var j=Object.keys(fsLightboxInstances);window.fsLightbox=fsLightboxInstances[j[j.length-1]]}window.FsLightbox=function(){var l=this;this.props={sources:[],customAttributes:[],customClasses:[],types:[],videosPosters:[],slideDistance:.3},this.data={isFullscreenOpen:!1,maxSourceWidth:0,maxSourceHeight:0,scrollbarWidth:0},this.isl=[],this.sourcePointerProps={downScreenX:null,isPointering:!1,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={},this.elements={a:[],container:null,slideSwipingHoverer:null,smw:[],sourceWrappersContainer:null,sources:[],sourceAnimationWrappers:[]},this.componentsServices={setSlideNumber:function(){}},this.resolve=function(u){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _.unshift(l),v(u,a(_))},this.collections={sourceLoadHandlers:[],sourcesRenderFunctions:[],sourceSizers:[]},this.core={eventsDispatcher:{},globalEventsController:{},lightboxCloser:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},stageManager:{},windowResizeActioner:{}},this.fs={},this.sws={},b(this),this.close=function(){return l.core.lightboxCloser.closeLightbox()}},window.fsLightboxInstances={},E(),window.refreshFsLightbox=function(){for(var l in fsLightboxInstances){var u=fsLightboxInstances[l].props;fsLightboxInstances[l]=new FsLightbox,fsLightboxInstances[l].props=u,fsLightboxInstances[l].props.sources=[],fsLightboxInstances[l].elements.a=[]}E()}}])})})(Xr);const Yr="https://cdn.jsdelivr.net/gh/daimular-ito11/jsDelivr-test/dist/cmaps/",Kr="https://cdn.jsdelivr.net/gh/daimular-ito11/jsDelivr-test/dist/pdf-worker.js";class $r{constructor(Et,ht=1){if(!Et||!Et.dataset.url)throw new Error("invalid element!");this.element=Et,this.url=Et.dataset.url,this.scale=ht,this.data=[]}loading(Et){Et?this.element.classList.add("pdf-preview__loading"):this.element.classList.remove("pdf-preview__loading")}async fetchFile(){return this.loading(!0),fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(Et=>Et.blob()).then(Et=>this.blobtoDataUrl(Et)).then(Et=>this.draw(Et))}blobtoDataUrl(Et){return new Promise(ht=>{const h=new FileReader;h.readAsDataURL(Et),h.onload=()=>{ht(h.result.replace("data:application/pdf;base64,",""))}})}draw(Et){Vr.workerSrc=Kr,Gr({data:atob(Et),cMapUrl:Yr,cMapPacked:!0}).promise.then(async ht=>{for(let h=1;h<=ht.numPages;h++)await this.getPage(h,ht)},ht=>{console.error(ht)}).then(()=>{const ht=document.createElement("img");ht.setAttribute("class","pdf-preview__image"),ht.onload=()=>{this.element.addEventListener("click",this.display(this.data)),this.element.appendChild(ht),this.loading(!1)},ht.src=this.data[0]})}display(Et){var ht=new FsLightbox;return ht.props.sources=Et,refreshFsLightbox(),()=>{ht.open()}}async getPage(Et,ht){const h=this.scale,st=this.data;return new Promise(A=>{ht.getPage(Et).then(function(H){var gt=H.getViewport({scale:h}),it=document.createElement("canvas"),U=it.getContext("2d");it.height=gt.height,it.width=gt.width;var w={canvasContext:U,viewport:gt},z=H.render(w);z.promise.then(async()=>{st.push(it.toDataURL("image/png")),A()})})})}}document.querySelectorAll('[data-role="pdf-preview"]').forEach(Mt=>{new $r(Mt).fetchFile()});const Pn=document.querySelector('[data-role="zip-search_input"]'),ti=document.querySelector('[data-role="zip-search_btn"'),Jr=document.querySelector("#prefecture"),Qr=document.querySelector("#city"),Zr=document.querySelector("#street"),Ln=document.querySelector("#js-zip_error"),ta="https://api.zipaddress.net/";var Ti="",ki="";Pn&&ti&&(Pn.addEventListener("input",sa),ti.addEventListener("click",ia));async function ea(){const Mt=`${ta}?zipcode=${Ti}`;return fetch(Mt).then(Et=>Et.json()).then(Et=>Et.code!==200?{data:Et.message,error:!0}:{data:Et.data,error:!1})}function sa(Mt){const Et=Mt.target.value;ti.disabled=!0,ki="",Et.length===7?(Ti=Et,ti.disabled=!1):Et.length!=0&&(ki="invalid post code length"),Dn()}async function ia(){var Mt;if(Ti.length===7){const Et=await ea();if(Et.error){Ln=Et.data,Dn();return}Jr.value=Ri[Mt=Et.data.pref]??(Ri[Mt]=""),Qr.value=Et.data.city,Zr.value=Et.data.town}}function Dn(){Ln.textContent=ki}const Ri={\u5317\u6D77\u9053:1,\u9752\u68EE\u770C:2,\u5CA9\u624B\u770C:3,\u5BAE\u57CE\u770C:4,\u79CB\u7530\u770C:5,\u5C71\u5F62\u770C:6,\u798F\u5CF6\u770C:7,\u8328\u57CE\u770C:8,\u6803\u6728\u770C:9,\u7FA4\u99AC\u770C:10,\u57FC\u7389\u770C:11,\u5343\u8449\u770C:12,\u6771\u4EAC\u90FD:13,\u795E\u5948\u5DDD\u770C:14,\u65B0\u6F5F\u770C:15,\u5BCC\u5C71\u770C:16,\u77F3\u5DDD\u770C:17,\u798F\u4E95\u770C:18,\u5C71\u68A8\u770C:19,\u9577\u91CE\u770C:20,\u5C90\u961C\u770C:21,\u9759\u5CA1\u770C:22,\u611B\u77E5\u770C:23,\u4E09\u91CD\u770C:24,\u6ECB\u8CC0\u770C:25,\u4EAC\u90FD\u5E9C:26,\u5927\u962A\u5E9C:27,\u5175\u5EAB\u770C:28,\u5948\u826F\u770C:29,\u548C\u6B4C\u5C71\u770C:30,\u9CE5\u53D6\u770C:31,\u5CF6\u6839\u770C:32,\u5CA1\u5C71\u770C:33,\u5E83\u5CF6\u770C:34,\u5C71\u53E3\u770C:35,\u5FB3\u5CF6\u770C:36,\u9999\u5DDD\u770C:37,\u611B\u5A9B\u770C:38,\u9AD8\u77E5\u770C:39,\u798F\u5CA1\u770C:40,\u4F50\u8CC0\u770C:41,\u9577\u5D0E\u770C:42,\u718A\u672C\u770C:43,\u5927\u5206\u770C:44,\u5BAE\u5D0E\u770C:45,\u9E7F\u5150\u5CF6\u770C:46,\u6C96\u7E04\u770C:47}})();
